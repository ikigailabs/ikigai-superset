(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[3017],{70114:(e,t,a)=>{"use strict";var n=a(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var r=n(a(140)),l=0,o={};function s(e){var t=l++,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return o[t]=(0,r.default)((function n(){(a-=1)<=0?(e(),delete o[t]):o[t]=(0,r.default)(n)})),t}s.cancel=function(e){void 0!==e&&(r.default.cancel(o[e]),delete o[e])},s.ids=o},4823:(e,t,a)=>{"use strict";var n=a(6305),r=a(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,o=r(a(17383)),s=r(a(34579)),i=r(a(12475)),d=r(a(29511)),c=r(a(81660)),u=n(a(96540)),p=a(57320),m=r(a(70114)),h=a(76421),f=a(70787);function g(e){return!e||null===e.offsetParent||e.hidden}var v=function(e){(0,d.default)(a,e);var t=(0,c.default)(a);function a(){var e;return(0,o.default)(this,a),(e=t.apply(this,arguments)).containerRef=u.createRef(),e.animationStart=!1,e.destroyed=!1,e.onClick=function(t,a){if(!(!t||g(t)||t.className.indexOf("-leave")>=0)){var n=e.props.insertExtraNode;e.extraNode=document.createElement("div");var r=(0,i.default)(e).extraNode,o=e.context.getPrefixCls;r.className="".concat(o(""),"-click-animating-node");var s,d=e.getAttributeName();t.setAttribute(d,"true"),l=l||document.createElement("style"),!a||"#ffffff"===a||"rgb(255, 255, 255)"===a||(s=(a||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/))&&s[1]&&s[2]&&s[3]&&s[1]===s[2]&&s[2]===s[3]||/rgba\((?:\d*, ){3}0\)/.test(a)||"transparent"===a||(e.csp&&e.csp.nonce&&(l.nonce=e.csp.nonce),r.style.borderColor=a,l.innerHTML="\n      [".concat(o(""),"-click-animating-without-extra-node='true']::after, .").concat(o(""),"-click-animating-node {\n        --antd-wave-shadow-color: ").concat(a,";\n      }"),document.body.contains(l)||document.body.appendChild(l)),n&&t.appendChild(r),["transition","animation"].forEach((function(a){t.addEventListener("".concat(a,"start"),e.onTransitionStart),t.addEventListener("".concat(a,"end"),e.onTransitionEnd)}))}},e.onTransitionStart=function(t){if(!e.destroyed){var a=e.containerRef.current;t&&t.target===a&&!e.animationStart&&e.resetEffect(a)}},e.onTransitionEnd=function(t){t&&"fadeEffect"===t.animationName&&e.resetEffect(t.target)},e.bindAnimationEvent=function(t){if(t&&t.getAttribute&&!t.getAttribute("disabled")&&!(t.className.indexOf("disabled")>=0)){var a=function(a){if("INPUT"!==a.target.tagName&&!g(a.target)){e.resetEffect(t);var n=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");e.clickWaveTimeoutId=window.setTimeout((function(){return e.onClick(t,n)}),0),m.default.cancel(e.animationStartId),e.animationStart=!0,e.animationStartId=(0,m.default)((function(){e.animationStart=!1}),10)}};return t.addEventListener("click",a,!0),{cancel:function(){t.removeEventListener("click",a,!0)}}}},e.renderWave=function(t){var a=t.csp,n=e.props.children;if(e.csp=a,!u.isValidElement(n))return n;var r=e.containerRef;return(0,p.supportRef)(n)&&(r=(0,p.composeRef)(n.ref,e.containerRef)),(0,f.cloneElement)(n,{ref:r})},e}return(0,s.default)(a,[{key:"componentDidMount",value:function(){var e=this.containerRef.current;e&&1===e.nodeType&&(this.instance=this.bindAnimationEvent(e))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var e=this.context.getPrefixCls,t=this.props.insertExtraNode;return"".concat(e(""),t?"-click-animating":"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(e){var t=this;if(e&&e!==this.extraNode&&e instanceof Element){var a=this.props.insertExtraNode,n=this.getAttributeName();e.setAttribute(n,"false"),l&&(l.innerHTML=""),a&&this.extraNode&&e.contains(this.extraNode)&&e.removeChild(this.extraNode),["transition","animation"].forEach((function(a){e.removeEventListener("".concat(a,"start"),t.onTransitionStart),e.removeEventListener("".concat(a,"end"),t.onTransitionEnd)}))}}},{key:"render",value:function(){return u.createElement(h.ConfigConsumer,null,this.renderWave)}}]),a}(u.Component);t.default=v,v.contextType=h.ConfigContext},26613:(e,t,a)=>{"use strict";var n=a(6305),r=a(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(94634)),o=r(a(43693)),s=n(a(96540)),i=r(a(46942)),d=a(76421);t.default=function(e){var t,a=e.prefixCls,n=e.className,r=e.checked,c=e.onChange,u=e.onClick,p=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["prefixCls","className","checked","onChange","onClick"]),m=(0,s.useContext(d.ConfigContext).getPrefixCls)("tag",a),h=(0,i.default)(m,(t={},(0,o.default)(t,"".concat(m,"-checkable"),!0),(0,o.default)(t,"".concat(m,"-checkable-checked"),r),t),n);return s.createElement("span",(0,l.default)({},p,{className:h,onClick:function(e){c&&c(!r),u&&u(e)}}))}},48149:(e,t,a)=>{"use strict";var n=a(6305),r=a(24994);t.A=void 0;var l=r(a(43693)),o=r(a(94634)),s=r(a(85715)),i=n(a(96540)),d=r(a(46942)),c=r(a(42288)),u=r(a(74415)),p=r(a(26613)),m=a(76421),h=a(31334),f=r(a(4823)),g=new RegExp("^(".concat(h.PresetColorTypes.join("|"),")(-inverse)?$")),v=new RegExp("^(".concat(h.PresetStatusColorTypes.join("|"),")$")),y=function(e,t){var a,n=e.prefixCls,r=e.className,p=e.style,h=e.children,y=e.icon,b=e.color,w=e.onClose,_=e.closeIcon,x=e.closable,k=void 0!==x&&x,S=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),C=i.useContext(m.ConfigContext),Y=C.getPrefixCls,T=C.direction,A=i.useState(!0),E=(0,s.default)(A,2),N=E[0],P=E[1];i.useEffect((function(){"visible"in S&&P(S.visible)}),[S.visible]);var $=function(){return!!b&&(g.test(b)||v.test(b))},O=(0,o.default)({backgroundColor:b&&!$()?b:void 0},p),F=$(),I=Y("tag",n),M=(0,d.default)(I,(a={},(0,l.default)(a,"".concat(I,"-").concat(b),F),(0,l.default)(a,"".concat(I,"-has-color"),b&&!F),(0,l.default)(a,"".concat(I,"-hidden"),!N),(0,l.default)(a,"".concat(I,"-rtl"),"rtl"===T),a),r),R=function(e){e.stopPropagation(),w&&w(e),e.defaultPrevented||"visible"in S||P(!1)},H="onClick"in S||h&&"a"===h.type,L=(0,c.default)(S,["visible"]),D=y||null,z=D?i.createElement(i.Fragment,null,D,i.createElement("span",null,h)):h,U=i.createElement("span",(0,o.default)({},L,{ref:t,className:M,style:O}),z,k?_?i.createElement("span",{className:"".concat(I,"-close-icon"),onClick:R},_):i.createElement(u.default,{className:"".concat(I,"-close-icon"),onClick:R}):null);return H?i.createElement(f.default,null,U):U},b=i.forwardRef(y);b.displayName="Tag",b.CheckableTag=p.default;var w=b;t.A=w},50014:(e,t,a)=>{var n=a(15389),r=a(55765);e.exports=function(e,t){return e&&e.length?r(e,n(t,2)):[]}},47163:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(96540);const r=()=>{const[e,t]=(0,n.useState)(0),[a,r]=(0,n.useState)(!1),l=(0,n.useRef)(null),o=(0,n.useRef)(null);return(0,n.useLayoutEffect)((()=>{var e;const a=()=>{const e=l.current;if(!e)return;const a=o.current,{scrollWidth:n,clientWidth:s,childNodes:i}=e;if(n>s){const e=6,n=(null==a?void 0:a.offsetWidth)||0,l=s-e,o=i.length;let d=0,c=0;for(let e=0;e<o;e+=1)l-d-n<=0&&(c+=1),d+=i[e].offsetWidth;o>1&&c?(r(!0),t(c)):(r(!1),t(1))}else r(!1),t(0)},n=new ResizeObserver(a),s=null==(e=l.current)?void 0:e.parentElement;return s&&n.observe(s),a(),()=>{n.disconnect()}}),[o.current]),[l,o,e,a]}},12397:(e,t,a)=>{"use strict";a.d(t,{U:()=>s}),a(96540);var n=a(19129),r=a(25106),l=a(95579),o=a(17437);const s=({user:e,date:t})=>{const a=(0,o.Y)("span",{className:"no-wrap","data-test":"audit-info-date"},t);if(e){const t=(0,r.A)(e),s=(0,l.t)("Modified by: %s",t);return(0,o.Y)(n.m,{title:s,placement:"bottom"},a)}return a}},78532:(e,t,a)=>{"use strict";a.d(t,{K:()=>s});var n=a(97032),r=(a(96540),a(54625)),l=a(32132),o=a(17437);const s=({to:e,component:t,replace:a,innerRef:s,children:i,...d})=>"string"==typeof e&&(0,l.JE)(e)?(0,o.Y)("a",(0,n.A)({"data-test":"external-link",href:(0,l.Dl)(e)},d),i):(0,o.Y)(r.N_,(0,n.A)({"data-test":"internal-link",to:e,component:t,replace:a,innerRef:s},d),i)},31383:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var n=a(96540),r=a(95579),l=a(50500),o=a(25946),s=a(17437);const i=(0,l.xK)(),d=i?i.support:"https://superset.apache.org/docs/databases/installing-database-drivers",c=({errorMessage:e,showDbInstallInstructions:t})=>(0,s.Y)(o.A,{closable:!1,css:e=>(e=>s.AH`
  border: 1px solid ${e.colors.warning.light1};
  padding: ${4*e.gridUnit}px;
  margin: ${4*e.gridUnit}px 0;
  color: ${e.colors.warning.dark2};

  .ant-alert-message {
    margin: 0;
  }

  .ant-alert-description {
    font-size: ${e.typography.sizes.s+1}px;
    line-height: ${4*e.gridUnit}px;

    .ant-alert-icon {
      margin-right: ${2.5*e.gridUnit}px;
      font-size: ${e.typography.sizes.l+1}px;
      position: relative;
      top: ${e.gridUnit/4}px;
    }
  }
`)(e),type:"error",showIcon:!0,message:e,description:t?(0,s.Y)(n.Fragment,null,(0,s.Y)("br",null),(0,r.t)("Database driver for importing maybe not installed. Visit the Superset documentation page for installation instructions: "),(0,s.Y)("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"additional-fields-alert-description"},(0,r.t)("here")),"."):""})},74354:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var n=a(96540),r=a(90017),l=a(95579),o=a(46920),s=a(85861),i=a(15595),d=a(50500),c=a(31383),u=a(17437);const p=r.A.div`
  display: block;
  color: ${({theme:e})=>e.colors.grayscale.base};
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
`,m=r.A.div`
  padding-bottom: ${({theme:e})=>2*e.gridUnit}px;
  padding-top: ${({theme:e})=>2*e.gridUnit}px;

  & > div {
    margin: ${({theme:e})=>e.gridUnit}px 0;
  }

  &.extra-container {
    padding-top: 8px;
  }

  .confirm-overwrite {
    margin-bottom: ${({theme:e})=>2*e.gridUnit}px;
  }

  .input-container {
    display: flex;
    align-items: center;

    label {
      display: flex;
      margin-right: ${({theme:e})=>2*e.gridUnit}px;
    }

    i {
      margin: 0 ${({theme:e})=>e.gridUnit}px;
    }
  }

  input,
  textarea {
    flex: 1 1 auto;
  }

  textarea {
    height: 160px;
    resize: none;
  }

  input::placeholder,
  textarea::placeholder {
    color: ${({theme:e})=>e.colors.grayscale.light1};
  }

  textarea,
  input[type='text'],
  input[type='number'] {
    padding: ${({theme:e})=>1.5*e.gridUnit}px
      ${({theme:e})=>2*e.gridUnit}px;
    border-style: none;
    border: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    border-radius: ${({theme:e})=>e.gridUnit}px;

    &[name='name'] {
      flex: 0 1 auto;
      width: 40%;
    }

    &[name='sqlalchemy_uri'] {
      margin-right: ${({theme:e})=>3*e.gridUnit}px;
    }
  }
`,h=({resourceName:e,resourceLabel:t,passwordsNeededMessage:a,confirmOverwriteMessage:r,onModelImport:h,show:f,onHide:g,passwordFields:v=[],setPasswordFields:y=(()=>{}),sshTunnelPasswordFields:b=[],setSSHTunnelPasswordFields:w=(()=>{}),sshTunnelPrivateKeyFields:_=[],setSSHTunnelPrivateKeyFields:x=(()=>{}),sshTunnelPrivateKeyPasswordFields:k=[],setSSHTunnelPrivateKeyPasswordFields:S=(()=>{})})=>{const[C,Y]=(0,n.useState)(!0),[T,A]=(0,n.useState)({}),[E,N]=(0,n.useState)(!1),[P,$]=(0,n.useState)(!1),[O,F]=(0,n.useState)([]),[I,M]=(0,n.useState)(!1),[R,H]=(0,n.useState)(),[L,D]=(0,n.useState)({}),[z,U]=(0,n.useState)({}),[j,B]=(0,n.useState)({}),W=()=>{F([]),y([]),A({}),N(!1),$(!1),M(!1),H(""),w([]),x([]),S([]),D({}),U({}),B({})},{state:{alreadyExists:K,passwordsNeeded:V,sshPasswordNeeded:q,sshPrivateKeyNeeded:G,sshPrivateKeyPasswordNeeded:J},importResource:X}=(0,d.bN)(e,t,(e=>{H(e)}));(0,n.useEffect)((()=>{y(V),V.length>0&&M(!1)}),[V,y]),(0,n.useEffect)((()=>{N(K.length>0),K.length>0&&M(!1)}),[K,N]),(0,n.useEffect)((()=>{w(q),q.length>0&&M(!1)}),[q,w]),(0,n.useEffect)((()=>{x(G),G.length>0&&M(!1)}),[G,x]),(0,n.useEffect)((()=>{S(J),J.length>0&&M(!1)}),[J,S]);return C&&f&&Y(!1),(0,u.Y)(s.A,{name:"model",className:"import-model-modal",disablePrimaryButton:0===O.length||E&&!P||I,onHandledPrimaryAction:()=>{var e;(null==(e=O[0])?void 0:e.originFileObj)instanceof File&&(M(!0),X(O[0].originFileObj,T,L,z,j,P).then((e=>{e&&(W(),h())})))},onHide:()=>{Y(!0),g(),W()},primaryButtonName:E?(0,l.t)("Overwrite"):(0,l.t)("Import"),primaryButtonType:E?"danger":"primary",width:"750px",show:f,title:(0,u.Y)("h4",null,(0,l.t)("Import %s",t))},(0,u.Y)(m,null,(0,u.Y)(i._O,{name:"modelFile",id:"modelFile","data-test":"model-file-input",accept:".yaml,.json,.yml,.zip",fileList:O,onChange:e=>{F([{...e.file,status:"done"}])},onRemove:e=>(F(O.filter((t=>t.uid!==e.uid))),!1),customRequest:()=>{},disabled:I},(0,u.Y)(o.A,{loading:I},(0,l.t)("Select file")))),R&&(0,u.Y)(c.A,{errorMessage:R,showDbInstallInstructions:v.length>0||b.length>0||_.length>0||k.length>0}),(()=>{if(0===v.length&&0===b.length&&0===_.length&&0===k.length)return null;const e=[...new Set([...v,...b,..._,...k])];return(0,u.Y)(n.Fragment,null,(0,u.Y)("h5",null,(0,l.t)("Database passwords")),(0,u.Y)(p,null,a),e.map((e=>(0,u.Y)(n.Fragment,null,(null==v?void 0:v.indexOf(e))>=0&&(0,u.Y)(m,{key:`password-for-${e}`},(0,u.Y)("div",{className:"control-label"},(0,l.t)("%s PASSWORD",e.slice(10)),(0,u.Y)("span",{className:"required"},"*")),(0,u.Y)("input",{name:`password-${e}`,autoComplete:`password-${e}`,type:"password",value:T[e],onChange:t=>A({...T,[e]:t.target.value})})),(null==b?void 0:b.indexOf(e))>=0&&(0,u.Y)(m,{key:`ssh_tunnel_password-for-${e}`},(0,u.Y)("div",{className:"control-label"},(0,l.t)("%s SSH TUNNEL PASSWORD",e.slice(10)),(0,u.Y)("span",{className:"required"},"*")),(0,u.Y)("input",{name:`ssh_tunnel_password-${e}`,autoComplete:`ssh_tunnel_password-${e}`,type:"password",value:L[e],onChange:t=>D({...L,[e]:t.target.value}),"data-test":"ssh_tunnel_password"})),(null==_?void 0:_.indexOf(e))>=0&&(0,u.Y)(m,{key:`ssh_tunnel_private_key-for-${e}`},(0,u.Y)("div",{className:"control-label"},(0,l.t)("%s SSH TUNNEL PRIVATE KEY",e.slice(10)),(0,u.Y)("span",{className:"required"},"*")),(0,u.Y)("textarea",{name:`ssh_tunnel_private_key-${e}`,autoComplete:`ssh_tunnel_private_key-${e}`,value:z[e],onChange:t=>U({...z,[e]:t.target.value}),"data-test":"ssh_tunnel_private_key"})),(null==k?void 0:k.indexOf(e))>=0&&(0,u.Y)(m,{key:`ssh_tunnel_private_key_password-for-${e}`},(0,u.Y)("div",{className:"control-label"},(0,l.t)("%s SSH TUNNEL PRIVATE KEY PASSWORD",e.slice(10)),(0,u.Y)("span",{className:"required"},"*")),(0,u.Y)("input",{name:`ssh_tunnel_private_key_password-${e}`,autoComplete:`ssh_tunnel_private_key_password-${e}`,type:"password",value:j[e],onChange:t=>B({...j,[e]:t.target.value}),"data-test":"ssh_tunnel_private_key_password"}))))))})(),E?(0,u.Y)(n.Fragment,null,(0,u.Y)(m,null,(0,u.Y)("div",{className:"confirm-overwrite"},r),(0,u.Y)("div",{className:"control-label"},(0,l.t)('Type "%s" to confirm',(0,l.t)("OVERWRITE"))),(0,u.Y)("input",{"data-test":"overwrite-modal-input",id:"overwrite",type:"text",onChange:e=>{var t,a;const n=null!=(t=null==(a=e.currentTarget)?void 0:a.value)?t:"";$(n.toUpperCase()===(0,l.t)("OVERWRITE"))}}))):null)}},22470:(e,t,a)=>{"use strict";a.d(t,{S:()=>u});var n=a(96540),r=a(90017),l=a(48149),o=a(19129),s=a(17437);const i=(0,r.A)(l.A)`
  ${({theme:e})=>`\n  margin-top: ${e.gridUnit}px;\n  margin-bottom: ${e.gridUnit}px;\n  font-size: ${e.typography.sizes.s}px;\n  `};
`,d=({name:e,id:t,index:a,onDelete:r,editable:l=!1,onClick:d,toolTipTitle:c=e})=>{const u=(0,n.useMemo)((()=>e.length>20),[e])?`${e.slice(0,20)}...`:e;return(0,s.Y)(n.Fragment,null,l?(0,s.Y)(o.m,{title:c,key:c},(0,s.Y)(i,{key:t,closable:l,onClose:()=>a?null==r?void 0:r(a):null,color:"blue"},u)):(0,s.Y)(o.m,{title:c,key:c},(0,s.Y)(i,{"data-test":"tag",role:"link",key:t,onClick:d},t?(0,s.Y)("a",{href:`/superset/all_entities/?id=${t}`,target:"_blank",rel:"noreferrer"},u):u)))},c=r.A.div`
  max-width: 100%;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
`,u=({tags:e,editable:t=!1,onDelete:a,maxTags:r})=>{const[l,o]=(0,n.useState)(r),i=e=>{null==a||a(e)},u=(0,n.useMemo)((()=>l?e.length>l:null),[e.length,l]),p=(0,n.useMemo)((()=>"number"==typeof l?e.length-l+1:null),[u,e.length,l]);return(0,s.Y)(c,{className:"tag-list"},u&&"number"==typeof l?(0,s.Y)(n.Fragment,null,e.slice(0,l-1).map(((e,a)=>(0,s.Y)(d,{id:e.id,key:e.id,name:e.name,index:a,onDelete:i,editable:t}))),e.length>l?(0,s.Y)(d,{name:`+${p}...`,onClick:()=>o(void 0),toolTipTitle:e.map((e=>e.name)).join(", ")}):null):(0,s.Y)(n.Fragment,null,e.map(((e,a)=>(0,s.Y)(d,{id:e.id,key:e.id,name:e.name,index:a,onDelete:i,editable:t}))),r&&e.length>r?(0,s.Y)(d,{name:"...",onClick:()=>o(r)}):null))}},25062:(e,t,a)=>{"use strict";a.d(t,{J8:()=>h,Kg:()=>y,Pz:()=>b,pY:()=>m,px:()=>f,tg:()=>p});var n=a(96627),r=a(58863),l=a(27366),o=a(95579),s=a(88488),i=a(49588),d=a(81151),c=a(38708);const u=()=>{var e,t;const a=(0,c.A)();return(null==a||null==(e=a.common)||null==(t=e.conf)?void 0:t.NATIVE_FILTER_DEFAULT_ROW_LIMIT)||1e3},p=({datasetId:e,dependencies:t={},groupby:a,defaultDataMask:n,controlValues:r,filterType:l,sortMetric:o,adhoc_filters:i,time_range:d,granularity_sqla:c,type:p,dashboardId:m,id:h})=>{var f;const g={};return e&&(g.datasource=`${e}__table`),a&&(g.groupby=[a]),o&&(g.sortMetric=o),{...r,...g,adhoc_filters:null!=i?i:[],extra_filters:[],extra_form_data:t,granularity_sqla:c,metrics:["count"],row_limit:u(),showSearch:!0,defaultValue:null==n||null==(f=n.filterState)?void 0:f.value,time_range:d,url_params:(0,s.A)("regular"),inView:!0,viz_type:l,type:p,dashboardId:m,native_filter_id:h}};function m(e={},t={}){const a={};return n.t1.forEach((n=>{const r=[...e[n]||[],...t[n]||[]];r.length&&(a[n]=r)})),n.zk.forEach((n=>{const r=e[n];void 0!==r&&(a[n]=r);const l=t[n];void 0!==l&&(a[n]=l)})),a}function h(e,t){let a={};return t.forEach((t=>{var n,r;a=m(a,null!=(n=null==(r=e[t])?void 0:r.extraFormData)?n:{})})),a}function f(e){return!e.includes(r.nS.NativeFilter)||(0,l.G7)(l.TO.DashboardCrossFilters)&&e.includes(r.nS.InteractiveChart)}const g=(e,t)=>{var a;return(null==e||null==(a=e[t])?void 0:a.type)===i.B8},v=(e,t,a,n,r,l)=>{var o,s,d,c,u,p;l.has(a)||(l.add(a),(null==e||null==(o=e[a])?void 0:o.type)===i.oT&&t.includes(null==(s=e[a])||null==(d=s.meta)?void 0:d.chartId)&&n.forEach(r.add,r),0===(null==e||null==(c=e[a])||null==(u=c.children)?void 0:u.length)||g(e,a)&&r.has(a)||null==(p=e[a])||p.children.forEach((a=>v(e,t,a,g(e,a)?[...n,a]:n,r,l))))},y=(e,t)=>{const a=e[d.wv].children[0],n=a!==d.mK,r=new Set,l=new Set;var o,s;return n?null==(o=e[a])||null==(s=o.children)||s.forEach((a=>v(e,t,a,[a],r,l))):Object.values(e).filter((e=>(null==e?void 0:e.type)===i.B8)).forEach((a=>v(e,t,a.id,[a.id],r,l))),r},b=e=>null==e?"":"string"==typeof e||"number"==typeof e?`${e}`:Array.isArray(e)?e.join(", "):"object"==typeof e?JSON.stringify(e):(0,o.t)("Unknown value")},29646:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ae});var n=a(50014),r=a.n(n),l=a(90017),o=a(95579),s=a(80145),i=a(35742),d=a(27366),c=a(96540),u=a(58561),p=a.n(u),m=a(61225),h=a(30703),f=a(50500),g=a(4780),v=a(63358),y=a(22470),b=a(51713),w=a(94704),_=a(56347),x=a(54625),k=a(39854),S=a(17444),C=a(62221),Y=a(5261),T=a(36446),A=a(74354),E=a(19129),N=a(12249),P=a(25062),$=a(31641),O=a(58132),F=a(78532),I=a(3932),M=a(99748),R=a(46662),H=a(84666),L=a(62952),D=a(47163),z=a(17437);const U=l.A.div`
  .link {
    color: ${({theme:e})=>e.colors.grayscale.light5};
    display: block;
    text-decoration: underline;
  }
`;function j({children:e,crossLinks:t=[],moreItems:a,show:n=!1}){return(0,z.Y)(E.m,{placement:"top","data-test":"crosslinks-tooltip",title:n&&(0,z.Y)(U,null,t.map((e=>(0,z.Y)(x.N_,{className:"link",key:e.to,to:e.to,target:"_blank",rel:"noreferer noopener"},e.title))),a&&(0,z.Y)("span",{"data-test":"plus-more"},(0,o.t)("+ %s more",a)))},e)}const B=l.A.div`
  ${({theme:e})=>`\n    & > span {\n      width: 100%;\n      display: flex;\n\n      .ant-tooltip-open {\n        display: inline;\n      }\n\n      .truncated {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        display: inline-block;\n        width: 100%;\n        vertical-align: bottom;\n      }\n\n      .count {\n        cursor: pointer;\n        color: ${e.colors.grayscale.base};\n        font-weight: ${e.typography.weights.bold};\n      }\n    }\n  `}
`;function W({crossLinks:e,maxLinks:t=20,linkPrefix:a="/superset/dashboard/"}){const[n,r,l,o]=(0,D.A)(),s=(0,c.useMemo)((()=>e.length>t?e.length-t:void 0),[e,t]),i=(0,c.useMemo)((()=>(0,z.Y)("span",{className:"truncated",ref:n,"data-test":"crosslinks"},e.map(((e,t)=>(0,z.Y)(x.N_,{key:e.id,to:a+e.id},0===t?e.title:`, ${e.title}`))))),[e,n,a]),d=(0,c.useMemo)((()=>e.slice(0,t).map((e=>({title:e.title,to:a+e.id})))),[e,a,t]);return(0,z.Y)(B,null,(0,z.Y)(j,{moreItems:s,crossLinks:d,show:!!l},i,o&&(0,z.Y)("span",{ref:r,className:"count","data-test":"count-crosslinks"},"+",l)))}const K=c.memo(W),V=c.memo((({dashboards:e})=>{const t=(0,c.useMemo)((()=>(0,L.A)(e).map((e=>({title:e.dashboard_title,id:e.id})))),[e]);return(0,z.Y)(K,{crossLinks:t})}));var q=a(12397),G=a(23193);const J=l.A.div`
  align-items: center;
  display: flex;

  a {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    line-height: 1.2;
  }

  svg {
    margin-right: ${({theme:e})=>e.gridUnit}px;
  }
`,X=(0,o.t)('The passwords for the databases below are needed in order to import them together with the charts. Please note that the "Secure Extra" and "Certificate" sections of the database configuration are not present in export files, and should be added manually after the import if they are needed.'),Q=(0,o.t)("You are importing one or more charts that already exist. Overwriting might cause you to lose some of your work. Are you sure you want to overwrite?"),Z=(0,s.A)(),ee=async(e="",t,a)=>{var n;const l=e?{filters:[{col:"table_name",opr:"sw",value:e}]}:{},o=p().encode({columns:["datasource_name","datasource_id"],keys:["none"],order_column:"table_name",order_direction:"asc",page:t,page_size:a,...l}),{json:s={}}=await i.A.get({endpoint:`/api/v1/dataset/?q=${o}`}),d=null==s||null==(n=s.result)?void 0:n.map((({table_name:e,id:t})=>({label:e,value:t})));return{data:r()(d,"value"),totalCount:null==s?void 0:s.count}},te=l.A.div`
  color: ${({theme:e})=>e.colors.grayscale.base};
`,ae=(0,Y.Ay)((function(e){const{addDangerToast:t,addSuccessToast:a,user:{userId:n}}=e,l=(0,_.W6)(),{state:{loading:s,resourceCount:u,resourceCollection:Y,bulkSelectEnabled:L},setResourceCollection:D,hasPerm:U,fetchData:j,toggleBulkSelect:B,refreshData:W}=(0,f.RU)("chart",(0,o.t)("chart"),t),K=(0,c.useMemo)((()=>Y.map((e=>e.id))),[Y]),{roles:ae}=(0,m.d4)((e=>e.user)),ne=(0,H.L)("can_read","Tag",ae),[re,le]=(0,f.oG)("chart",K,t),{sliceCurrentlyEditing:oe,handleChartUpdated:se,openChartEditModal:ie,closeChartEditModal:de}=(0,f.bR)(D,Y),[ce,ue]=(0,c.useState)(!1),[pe,me]=(0,c.useState)([]),[he,fe]=(0,c.useState)(!1),[ge,ve]=(0,c.useState)([]),[ye,be]=(0,c.useState)([]),[we,_e]=(0,c.useState)([]),xe=(0,C.SX)(null==n?void 0:n.toString(),null),ke=U("can_write"),Se=U("can_write"),Ce=U("can_write"),Ye=U("can_export"),Te=[{id:"changed_on_delta_humanized",desc:!0}],Ae=e=>{const t=e.map((({id:e})=>e));(0,g.A)("chart",t,(()=>{fe(!1)})),fe(!0)},Ee=async(e="",a,n)=>{var l,s,d;const c=e?{filters:[{col:"dashboard_title",opr:k.t.StartsWith,value:e}]}:{},u=p().encode({columns:["dashboard_title","id"],keys:["none"],order_column:"dashboard_title",order_direction:"asc",page:a,page_size:n,...c}),m=await i.A.get({endpoint:`/api/v1/dashboard/?q=${u}`}).catch((()=>t((0,o.t)("An error occurred while fetching dashboards")))),h=null==m||null==(l=m.json)||null==(s=l.result)?void 0:s.map((({dashboard_title:e,id:t})=>({label:e,value:t})));return{data:r()(h,"value"),totalCount:null==m||null==(d=m.json)?void 0:d.count}},Ne=(0,c.useMemo)((()=>[{Cell:({row:{original:{id:e}}})=>n&&(0,z.Y)(w.A,{itemId:e,saveFaveStar:re,isStarred:le[e]}),Header:"",id:"id",disableSortBy:!0,size:"xs",hidden:!n},{Cell:({row:{original:{url:e,slice_name:t,certified_by:a,certification_details:n,description:r}}})=>(0,z.Y)(J,null,(0,z.Y)(x.N_,{to:e,"data-test":`${t}-list-chart-title`},a&&(0,z.Y)(c.Fragment,null,(0,z.Y)(O.A,{certifiedBy:a,details:n})," "),t),r&&(0,z.Y)($.A,{tooltip:r})),Header:(0,o.t)("Name"),accessor:"slice_name"},{Cell:({row:{original:{viz_type:e}}})=>{var t;return(null==(t=Z.get(e))?void 0:t.name)||e},Header:(0,o.t)("Type"),accessor:"viz_type",size:"xxl"},{Cell:({row:{original:{datasource_name_text:e,datasource_url:t}}})=>(0,z.Y)(F.K,{to:t},e),Header:(0,o.t)("Dataset"),accessor:"datasource_id",disableSortBy:!0,size:"xl"},{Cell:({row:{original:{dashboards:e}}})=>(0,z.Y)(V,{dashboards:e}),Header:(0,o.t)("On dashboards"),accessor:"dashboards",disableSortBy:!0,size:"xxl"},{Cell:({row:{original:{tags:e=[]}}})=>(0,z.Y)(y.S,{tags:e.filter((e=>!e.type||1===e.type||"TagTypes.custom"===e.type)),maxTags:3}),Header:(0,o.t)("Tags"),accessor:"tags",disableSortBy:!0,hidden:!(0,d.G7)(d.TO.TaggingSystem)},{Cell:({row:{original:{owners:e=[]}}})=>(0,z.Y)(M.A,{users:e}),Header:(0,o.t)("Owners"),accessor:"owners",disableSortBy:!0,size:"xl"},{Cell:({row:{original:{changed_on_delta_humanized:e,changed_by:t}}})=>(0,z.Y)(q.U,{date:e,user:t}),Header:(0,o.t)("Last modified"),accessor:"last_saved_at",size:"xl"},{Cell:({row:{original:e}})=>Se||Ce||Ye?(0,z.Y)(te,{className:"actions"},Ce&&(0,z.Y)(v.A,{title:(0,o.t)("Please confirm"),description:(0,z.Y)(c.Fragment,null,(0,o.t)("Are you sure you want to delete")," ",(0,z.Y)("b",null,e.slice_name),"?"),onConfirm:()=>(0,h.GP)(e,a,t,W)},(e=>(0,z.Y)(E.m,{id:"delete-action-tooltip",title:(0,o.t)("Delete"),placement:"bottom"},(0,z.Y)("span",{"data-test":"trash",role:"button",tabIndex:0,className:"action-button",onClick:e},(0,z.Y)(N.A.Trash,null))))),Ye&&(0,z.Y)(E.m,{id:"export-action-tooltip",title:(0,o.t)("Export"),placement:"bottom"},(0,z.Y)("span",{role:"button",tabIndex:0,className:"action-button",onClick:()=>Ae([e])},(0,z.Y)(N.A.Share,null))),Se&&(0,z.Y)(E.m,{id:"edit-action-tooltip",title:(0,o.t)("Edit"),placement:"bottom"},(0,z.Y)("span",{role:"button",tabIndex:0,className:"action-button",onClick:()=>ie(e)},(0,z.Y)(N.A.EditAlt,{"data-test":"edit-alt"})))):null,Header:(0,o.t)("Actions"),id:"actions",disableSortBy:!0,hidden:!Se&&!Ce},{accessor:G.H.ChangedBy,hidden:!0}]),[n,Se,Ce,Ye,re,le,W,a,t]),Pe=(0,c.useMemo)((()=>({Header:(0,o.t)("Favorite"),key:"favorite",id:"id",urlDisplay:"favorite",input:"select",operator:k.t.ChartIsFav,unfilteredLabel:(0,o.t)("Any"),selects:[{label:(0,o.t)("Yes"),value:!0},{label:(0,o.t)("No"),value:!1}]})),[]),$e=(0,c.useMemo)((()=>[{Header:(0,o.t)("Name"),key:"search",id:"slice_name",input:"search",operator:k.t.ChartAllText},{Header:(0,o.t)("Type"),key:"viz_type",id:"viz_type",input:"select",operator:k.t.Equals,unfilteredLabel:(0,o.t)("All"),selects:Z.keys().filter((e=>{var t;return(0,P.px)((null==(t=Z.get(e))?void 0:t.behaviors)||[])})).map((e=>{var t;return{label:(null==(t=Z.get(e))?void 0:t.name)||e,value:e}})).sort(((e,t)=>e.label&&t.label?e.label>t.label?1:e.label<t.label?-1:0:0))},{Header:(0,o.t)("Dataset"),key:"dataset",id:"datasource_id",input:"select",operator:k.t.Equals,unfilteredLabel:(0,o.t)("All"),fetchSelects:ee,paginate:!0},...(0,d.G7)(d.TO.TaggingSystem)&&ne?[{Header:(0,o.t)("Tag"),key:"tags",id:"tags",input:"select",operator:k.t.ChartTags,unfilteredLabel:(0,o.t)("All"),fetchSelects:I.m}]:[],{Header:(0,o.t)("Owner"),key:"owner",id:"owners",input:"select",operator:k.t.RelationManyMany,unfilteredLabel:(0,o.t)("All"),fetchSelects:(0,h.u1)("chart","owners",(0,h.JF)((e=>t((0,o.t)("An error occurred while fetching chart owners values: %s",e)))),e.user),paginate:!0},{Header:(0,o.t)("Dashboard"),key:"dashboards",id:"dashboards",input:"select",operator:k.t.RelationManyMany,unfilteredLabel:(0,o.t)("All"),fetchSelects:Ee,paginate:!0},...n?[Pe]:[],{Header:(0,o.t)("Certified"),key:"certified",id:"id",urlDisplay:"certified",input:"select",operator:k.t.ChartIsCertified,unfilteredLabel:(0,o.t)("Any"),selects:[{label:(0,o.t)("Yes"),value:!0},{label:(0,o.t)("No"),value:!1}]},{Header:(0,o.t)("Modified by"),key:"changed_by",id:"changed_by",input:"select",operator:k.t.RelationOneMany,unfilteredLabel:(0,o.t)("All"),fetchSelects:(0,h.u1)("chart","changed_by",(0,h.JF)((e=>(0,o.t)("An error occurred while fetching dataset datasource values: %s",e))),e.user),paginate:!0}]),[t,Pe,e.user]),Oe=[{desc:!1,id:"slice_name",label:(0,o.t)("Alphabetical"),value:"alphabetical"},{desc:!0,id:"changed_on_delta_humanized",label:(0,o.t)("Recently modified"),value:"recently_modified"},{desc:!1,id:"changed_on_delta_humanized",label:(0,o.t)("Least recently modified"),value:"least_recently_modified"}],Fe=(0,c.useCallback)((e=>(0,z.Y)(R.A,{chart:e,showThumbnails:xe?xe.thumbnails:(0,d.G7)(d.TO.Thumbnails),hasPerm:U,openChartEditModal:ie,bulkSelectEnabled:L,addDangerToast:t,addSuccessToast:a,refreshData:W,userId:n,loading:s,favoriteStatus:le[e.id],saveFavoriteStatus:re,handleBulkChartExport:Ae})),[t,a,L,le,U,s]),Ie=[];return(Ce||Ye)&&Ie.push({name:(0,o.t)("Bulk select"),buttonStyle:"secondary","data-test":"bulk-select",onClick:B}),ke&&(Ie.push({name:(0,z.Y)(c.Fragment,null,(0,z.Y)("i",{className:"fa fa-plus"})," ",(0,o.t)("Chart")),buttonStyle:"primary",onClick:()=>{l.push("/chart/add")}}),Ie.push({name:(0,z.Y)(E.m,{id:"import-tooltip",title:(0,o.t)("Import charts"),placement:"bottomRight"},(0,z.Y)(N.A.Import,{"data-test":"import-button"})),buttonStyle:"link",onClick:()=>{ue(!0)}})),(0,z.Y)(c.Fragment,null,(0,z.Y)(b.A,{name:(0,o.t)("Charts"),buttons:Ie}),oe&&(0,z.Y)(T.A,{onHide:de,onSave:se,show:!0,slice:oe}),(0,z.Y)(v.A,{title:(0,o.t)("Please confirm"),description:(0,o.t)("Are you sure you want to delete the selected charts?"),onConfirm:function(e){i.A.delete({endpoint:`/api/v1/chart/?q=${p().encode(e.map((({id:e})=>e)))}`}).then((({json:e={}})=>{W(),a(e.message)}),(0,h.JF)((e=>t((0,o.t)("There was an issue deleting the selected charts: %s",e)))))}},(e=>{const n=[];return Ce&&n.push({key:"delete",name:(0,o.t)("Delete"),type:"danger",onSelect:e}),Ye&&n.push({key:"export",name:(0,o.t)("Export"),type:"primary",onSelect:Ae}),(0,z.Y)(k.A,{bulkActions:n,bulkSelectEnabled:L,cardSortSelectOptions:Oe,className:"chart-list-view",columns:Ne,count:u,data:Y,disableBulkSelect:B,refreshData:W,fetchData:j,filters:$e,initialSort:Te,loading:s,pageSize:25,renderCard:Fe,enableBulkTag:!0,bulkTagResourceName:"chart",addSuccessToast:a,addDangerToast:t,showThumbnails:xe?xe.thumbnails:(0,d.G7)(d.TO.Thumbnails),defaultViewMode:(0,d.G7)(d.TO.ListviewsDefaultCardView)?"card":"table"})})),(0,z.Y)(A.A,{resourceName:"chart",resourceLabel:(0,o.t)("chart"),passwordsNeededMessage:X,confirmOverwriteMessage:Q,addDangerToast:t,addSuccessToast:a,onModelImport:()=>{ue(!1),W(),a((0,o.t)("Chart imported"))},show:ce,onHide:()=>{ue(!1)},passwordFields:pe,setPasswordFields:me,sshTunnelPasswordFields:ge,setSSHTunnelPasswordFields:ve,sshTunnelPrivateKeyFields:ye,setSSHTunnelPrivateKeyFields:be,sshTunnelPrivateKeyPasswordFields:we,setSSHTunnelPrivateKeyPasswordFields:_e}),he&&(0,z.Y)(S.A,null))}))},25106:(e,t,a)=>{"use strict";function n(e){return e?`${e.first_name} ${e.last_name}`:""}a.d(t,{A:()=>n})}}]);
//# sourceMappingURL=841d6069858b98e90243.chunk.js.map