(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[665],{59632:(e,t,a)=>{"use strict";var n=a(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(a(64543)),l=0,o={};function i(e){var t=l++,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return o[t]=(0,r.default)((function n(){(a-=1)<=0?(e(),delete o[t]):o[t]=(0,r.default)(n)})),t}i.cancel=function(e){void 0!==e&&(r.default.cancel(o[e]),delete o[e])},i.ids=o},61539:(e,t,a)=>{"use strict";var n=a(16338),r=a(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,o=r(a(56690)),i=r(a(89728)),s=r(a(66115)),d=r(a(61655)),c=r(a(26389)),u=n(a(67294)),p=a(75531),m=r(a(59632)),h=a(31929),f=a(47419);function g(e){return!e||null===e.offsetParent||e.hidden}var v=function(e){(0,d.default)(a,e);var t=(0,c.default)(a);function a(){var e;return(0,o.default)(this,a),(e=t.apply(this,arguments)).containerRef=u.createRef(),e.animationStart=!1,e.destroyed=!1,e.onClick=function(t,a){if(!(!t||g(t)||t.className.indexOf("-leave")>=0)){var n=e.props.insertExtraNode;e.extraNode=document.createElement("div");var r=(0,s.default)(e).extraNode,o=e.context.getPrefixCls;r.className="".concat(o(""),"-click-animating-node");var i,d=e.getAttributeName();t.setAttribute(d,"true"),l=l||document.createElement("style"),!a||"#ffffff"===a||"rgb(255, 255, 255)"===a||(i=(a||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/))&&i[1]&&i[2]&&i[3]&&i[1]===i[2]&&i[2]===i[3]||/rgba\((?:\d*, ){3}0\)/.test(a)||"transparent"===a||(e.csp&&e.csp.nonce&&(l.nonce=e.csp.nonce),r.style.borderColor=a,l.innerHTML="\n      [".concat(o(""),"-click-animating-without-extra-node='true']::after, .").concat(o(""),"-click-animating-node {\n        --antd-wave-shadow-color: ").concat(a,";\n      }"),document.body.contains(l)||document.body.appendChild(l)),n&&t.appendChild(r),["transition","animation"].forEach((function(a){t.addEventListener("".concat(a,"start"),e.onTransitionStart),t.addEventListener("".concat(a,"end"),e.onTransitionEnd)}))}},e.onTransitionStart=function(t){if(!e.destroyed){var a=e.containerRef.current;t&&t.target===a&&!e.animationStart&&e.resetEffect(a)}},e.onTransitionEnd=function(t){t&&"fadeEffect"===t.animationName&&e.resetEffect(t.target)},e.bindAnimationEvent=function(t){if(t&&t.getAttribute&&!t.getAttribute("disabled")&&!(t.className.indexOf("disabled")>=0)){var a=function(a){if("INPUT"!==a.target.tagName&&!g(a.target)){e.resetEffect(t);var n=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");e.clickWaveTimeoutId=window.setTimeout((function(){return e.onClick(t,n)}),0),m.default.cancel(e.animationStartId),e.animationStart=!0,e.animationStartId=(0,m.default)((function(){e.animationStart=!1}),10)}};return t.addEventListener("click",a,!0),{cancel:function(){t.removeEventListener("click",a,!0)}}}},e.renderWave=function(t){var a=t.csp,n=e.props.children;if(e.csp=a,!u.isValidElement(n))return n;var r=e.containerRef;return(0,p.supportRef)(n)&&(r=(0,p.composeRef)(n.ref,e.containerRef)),(0,f.cloneElement)(n,{ref:r})},e}return(0,i.default)(a,[{key:"componentDidMount",value:function(){var e=this.containerRef.current;e&&1===e.nodeType&&(this.instance=this.bindAnimationEvent(e))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var e=this.context.getPrefixCls,t=this.props.insertExtraNode;return"".concat(e(""),t?"-click-animating":"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(e){var t=this;if(e&&e!==this.extraNode&&e instanceof Element){var a=this.props.insertExtraNode,n=this.getAttributeName();e.setAttribute(n,"false"),l&&(l.innerHTML=""),a&&this.extraNode&&e.contains(this.extraNode)&&e.removeChild(this.extraNode),["transition","animation"].forEach((function(a){e.removeEventListener("".concat(a,"start"),t.onTransitionStart),e.removeEventListener("".concat(a,"end"),t.onTransitionEnd)}))}}},{key:"render",value:function(){return u.createElement(h.ConfigConsumer,null,this.renderWave)}}]),a}(u.Component);t.default=v,v.contextType=h.ConfigContext},83514:(e,t,a)=>{"use strict";var n=a(16338),r=a(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(a(10434)),o=r(a(38416)),i=n(a(67294)),s=r(a(94184)),d=a(31929);t.default=function(e){var t,a=e.prefixCls,n=e.className,r=e.checked,c=e.onChange,u=e.onClick,p=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["prefixCls","className","checked","onChange","onClick"]),m=(0,i.useContext(d.ConfigContext).getPrefixCls)("tag",a),h=(0,s.default)(m,(t={},(0,o.default)(t,"".concat(m,"-checkable"),!0),(0,o.default)(t,"".concat(m,"-checkable-checked"),r),t),n);return i.createElement("span",(0,l.default)({},p,{className:h,onClick:function(e){c&&c(!r),u&&u(e)}}))}},59361:(e,t,a)=>{"use strict";var n=a(16338),r=a(64836);t.Z=void 0;var l=r(a(38416)),o=r(a(10434)),i=r(a(27424)),s=n(a(67294)),d=r(a(94184)),c=r(a(18475)),u=r(a(16330)),p=r(a(83514)),m=a(31929),h=a(45471),f=r(a(61539)),g=new RegExp("^(".concat(h.PresetColorTypes.join("|"),")(-inverse)?$")),v=new RegExp("^(".concat(h.PresetStatusColorTypes.join("|"),")$")),y=function(e,t){var a,n=e.prefixCls,r=e.className,p=e.style,h=e.children,y=e.icon,b=e.color,Z=e.onClose,w=e.closeIcon,_=e.closable,x=void 0!==_&&_,k=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),S=s.useContext(m.ConfigContext),C=S.getPrefixCls,T=S.direction,E=s.useState(!0),N=(0,i.default)(E,2),P=N[0],$=N[1];s.useEffect((function(){"visible"in k&&$(k.visible)}),[k.visible]);var O=function(){return!!b&&(g.test(b)||v.test(b))},I=(0,o.default)({backgroundColor:b&&!O()?b:void 0},p),F=O(),M=C("tag",n),A=(0,d.default)(M,(a={},(0,l.default)(a,"".concat(M,"-").concat(b),F),(0,l.default)(a,"".concat(M,"-has-color"),b&&!F),(0,l.default)(a,"".concat(M,"-hidden"),!P),(0,l.default)(a,"".concat(M,"-rtl"),"rtl"===T),a),r),R=function(e){e.stopPropagation(),Z&&Z(e),e.defaultPrevented||"visible"in k||$(!1)},H="onClick"in k||h&&"a"===h.type,L=(0,c.default)(k,["visible"]),D=y||null,z=D?s.createElement(s.Fragment,null,D,s.createElement("span",null,h)):h,U=s.createElement("span",(0,o.default)({},L,{ref:t,className:A,style:I}),z,x?w?s.createElement("span",{className:"".concat(M,"-close-icon"),onClick:R},w):s.createElement(u.default,{className:"".concat(M,"-close-icon"),onClick:R}):null);return H?s.createElement(f.default,null,U):U},b=s.forwardRef(y);b.displayName="Tag",b.CheckableTag=p.default;var Z=b;t.Z=Z},45578:(e,t,a)=>{var n=a(67206),r=a(45652);e.exports=function(e,t){return e&&e.length?r(e,n(t,2)):[]}},51794:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(67294);const r=()=>{const[e,t]=(0,n.useState)(0),[a,r]=(0,n.useState)(!1),l=(0,n.useRef)(null),o=(0,n.useRef)(null);return(0,n.useLayoutEffect)((()=>{var e;const a=()=>{const e=l.current;if(!e)return;const a=o.current,{scrollWidth:n,clientWidth:i,childNodes:s}=e;if(n>i){const e=6,n=(null==a?void 0:a.offsetWidth)||0,l=i-e,o=s.length;let d=0,c=0;for(let e=0;e<o;e+=1)l-d-n<=0&&(c+=1),d+=s[e].offsetWidth;o>1&&c?(r(!0),t(c)):(r(!1),t(1))}else r(!1),t(0)},n=new ResizeObserver(a),i=null==(e=l.current)?void 0:e.parentElement;return i&&n.observe(i),a(),()=>{n.disconnect()}}),[o.current]),[l,o,e,a]}},54070:(e,t,a)=>{"use strict";a.d(t,{w:()=>i}),a(67294);var n=a(58593),r=a(83379),l=a(61988),o=a(11965);const i=({user:e,date:t})=>{const a=(0,o.tZ)("span",{className:"no-wrap","data-test":"audit-info-date"},t);if(e){const t=(0,r.Z)(e),i=(0,l.t)("Modified by: %s",t);return(0,o.tZ)(n.u,{title:i,placement:"bottom"},a)}return a}},85931:(e,t,a)=>{"use strict";a.d(t,{m:()=>i});var n=a(73126),r=(a(67294),a(73727)),l=a(23525),o=a(11965);const i=({to:e,component:t,replace:a,innerRef:i,children:s,...d})=>"string"==typeof e&&(0,l.TO)(e)?(0,o.tZ)("a",(0,n.Z)({"data-test":"external-link",href:(0,l.en)(e)},d),s):(0,o.tZ)(r.rU,(0,n.Z)({"data-test":"internal-link",to:e,component:t,replace:a,innerRef:i},d),s)},60972:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var n=a(67294),r=a(61988),l=a(34858),o=a(29487),i=a(11965);const s=(0,l.z)(),d=s?s.support:"https://superset.apache.org/docs/databases/installing-database-drivers",c=({errorMessage:e,showDbInstallInstructions:t})=>(0,i.tZ)(o.Z,{closable:!1,css:e=>(e=>i.iv`
  border: 1px solid ${e.colors.warning.light1};
  padding: ${4*e.gridUnit}px;
  margin: ${4*e.gridUnit}px 0;
  color: ${e.colors.warning.dark2};

  .ant-alert-message {
    margin: 0;
  }

  .ant-alert-description {
    font-size: ${e.typography.sizes.s+1}px;
    line-height: ${4*e.gridUnit}px;

    .ant-alert-icon {
      margin-right: ${2.5*e.gridUnit}px;
      font-size: ${e.typography.sizes.l+1}px;
      position: relative;
      top: ${e.gridUnit/4}px;
    }
  }
`)(e),type:"error",showIcon:!0,message:e,description:t?(0,i.tZ)(n.Fragment,null,(0,i.tZ)("br",null),(0,r.t)("Database driver for importing maybe not installed. Visit the Superset documentation page for installation instructions: "),(0,i.tZ)("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"additional-fields-alert-description"},(0,r.t)("here")),"."):""})},27989:(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var n=a(67294),r=a(42968),l=a(61988),o=a(35932),i=a(74069),s=a(4715),d=a(34858),c=a(60972),u=a(11965);const p=r.Z.div`
  display: block;
  color: ${({theme:e})=>e.colors.grayscale.base};
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
`,m=r.Z.div`
  padding-bottom: ${({theme:e})=>2*e.gridUnit}px;
  padding-top: ${({theme:e})=>2*e.gridUnit}px;

  & > div {
    margin: ${({theme:e})=>e.gridUnit}px 0;
  }

  &.extra-container {
    padding-top: 8px;
  }

  .confirm-overwrite {
    margin-bottom: ${({theme:e})=>2*e.gridUnit}px;
  }

  .input-container {
    display: flex;
    align-items: center;

    label {
      display: flex;
      margin-right: ${({theme:e})=>2*e.gridUnit}px;
    }

    i {
      margin: 0 ${({theme:e})=>e.gridUnit}px;
    }
  }

  input,
  textarea {
    flex: 1 1 auto;
  }

  textarea {
    height: 160px;
    resize: none;
  }

  input::placeholder,
  textarea::placeholder {
    color: ${({theme:e})=>e.colors.grayscale.light1};
  }

  textarea,
  input[type='text'],
  input[type='number'] {
    padding: ${({theme:e})=>1.5*e.gridUnit}px
      ${({theme:e})=>2*e.gridUnit}px;
    border-style: none;
    border: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    border-radius: ${({theme:e})=>e.gridUnit}px;

    &[name='name'] {
      flex: 0 1 auto;
      width: 40%;
    }

    &[name='sqlalchemy_uri'] {
      margin-right: ${({theme:e})=>3*e.gridUnit}px;
    }
  }
`,h=({resourceName:e,resourceLabel:t,passwordsNeededMessage:a,confirmOverwriteMessage:r,onModelImport:h,show:f,onHide:g,passwordFields:v=[],setPasswordFields:y=(()=>{}),sshTunnelPasswordFields:b=[],setSSHTunnelPasswordFields:Z=(()=>{}),sshTunnelPrivateKeyFields:w=[],setSSHTunnelPrivateKeyFields:_=(()=>{}),sshTunnelPrivateKeyPasswordFields:x=[],setSSHTunnelPrivateKeyPasswordFields:k=(()=>{})})=>{const[S,C]=(0,n.useState)(!0),[T,E]=(0,n.useState)({}),[N,P]=(0,n.useState)(!1),[$,O]=(0,n.useState)(!1),[I,F]=(0,n.useState)([]),[M,A]=(0,n.useState)(!1),[R,H]=(0,n.useState)(),[L,D]=(0,n.useState)({}),[z,U]=(0,n.useState)({}),[j,W]=(0,n.useState)({}),B=()=>{F([]),y([]),E({}),P(!1),O(!1),A(!1),H(""),Z([]),_([]),k([]),D({}),U({}),W({})},{state:{alreadyExists:V,passwordsNeeded:q,sshPasswordNeeded:K,sshPrivateKeyNeeded:Y,sshPrivateKeyPasswordNeeded:G},importResource:J}=(0,d.PW)(e,t,(e=>{H(e)}));(0,n.useEffect)((()=>{y(q),q.length>0&&A(!1)}),[q,y]),(0,n.useEffect)((()=>{P(V.length>0),V.length>0&&A(!1)}),[V,P]),(0,n.useEffect)((()=>{Z(K),K.length>0&&A(!1)}),[K,Z]),(0,n.useEffect)((()=>{_(Y),Y.length>0&&A(!1)}),[Y,_]),(0,n.useEffect)((()=>{k(G),G.length>0&&A(!1)}),[G,k]);return S&&f&&C(!1),(0,u.tZ)(i.default,{name:"model",className:"import-model-modal",disablePrimaryButton:0===I.length||N&&!$||M,onHandledPrimaryAction:()=>{var e;(null==(e=I[0])?void 0:e.originFileObj)instanceof File&&(A(!0),J(I[0].originFileObj,T,L,z,j,$).then((e=>{e&&(B(),h())})))},onHide:()=>{C(!0),g(),B()},primaryButtonName:N?(0,l.t)("Overwrite"):(0,l.t)("Import"),primaryButtonType:N?"danger":"primary",width:"750px",show:f,title:(0,u.tZ)("h4",null,(0,l.t)("Import %s",t))},(0,u.tZ)(m,null,(0,u.tZ)(s.gq,{name:"modelFile",id:"modelFile","data-test":"model-file-input",accept:".yaml,.json,.yml,.zip",fileList:I,onChange:e=>{F([{...e.file,status:"done"}])},onRemove:e=>(F(I.filter((t=>t.uid!==e.uid))),!1),customRequest:()=>{},disabled:M},(0,u.tZ)(o.Z,{loading:M},(0,l.t)("Select file")))),R&&(0,u.tZ)(c.Z,{errorMessage:R,showDbInstallInstructions:v.length>0||b.length>0||w.length>0||x.length>0}),(()=>{if(0===v.length&&0===b.length&&0===w.length&&0===x.length)return null;const e=[...new Set([...v,...b,...w,...x])];return(0,u.tZ)(n.Fragment,null,(0,u.tZ)("h5",null,(0,l.t)("Database passwords")),(0,u.tZ)(p,null,a),e.map((e=>(0,u.tZ)(n.Fragment,null,(null==v?void 0:v.indexOf(e))>=0&&(0,u.tZ)(m,{key:`password-for-${e}`},(0,u.tZ)("div",{className:"control-label"},(0,l.t)("%s PASSWORD",e.slice(10)),(0,u.tZ)("span",{className:"required"},"*")),(0,u.tZ)("input",{name:`password-${e}`,autoComplete:`password-${e}`,type:"password",value:T[e],onChange:t=>E({...T,[e]:t.target.value})})),(null==b?void 0:b.indexOf(e))>=0&&(0,u.tZ)(m,{key:`ssh_tunnel_password-for-${e}`},(0,u.tZ)("div",{className:"control-label"},(0,l.t)("%s SSH TUNNEL PASSWORD",e.slice(10)),(0,u.tZ)("span",{className:"required"},"*")),(0,u.tZ)("input",{name:`ssh_tunnel_password-${e}`,autoComplete:`ssh_tunnel_password-${e}`,type:"password",value:L[e],onChange:t=>D({...L,[e]:t.target.value}),"data-test":"ssh_tunnel_password"})),(null==w?void 0:w.indexOf(e))>=0&&(0,u.tZ)(m,{key:`ssh_tunnel_private_key-for-${e}`},(0,u.tZ)("div",{className:"control-label"},(0,l.t)("%s SSH TUNNEL PRIVATE KEY",e.slice(10)),(0,u.tZ)("span",{className:"required"},"*")),(0,u.tZ)("textarea",{name:`ssh_tunnel_private_key-${e}`,autoComplete:`ssh_tunnel_private_key-${e}`,value:z[e],onChange:t=>U({...z,[e]:t.target.value}),"data-test":"ssh_tunnel_private_key"})),(null==x?void 0:x.indexOf(e))>=0&&(0,u.tZ)(m,{key:`ssh_tunnel_private_key_password-for-${e}`},(0,u.tZ)("div",{className:"control-label"},(0,l.t)("%s SSH TUNNEL PRIVATE KEY PASSWORD",e.slice(10)),(0,u.tZ)("span",{className:"required"},"*")),(0,u.tZ)("input",{name:`ssh_tunnel_private_key_password-${e}`,autoComplete:`ssh_tunnel_private_key_password-${e}`,type:"password",value:j[e],onChange:t=>W({...j,[e]:t.target.value}),"data-test":"ssh_tunnel_private_key_password"}))))))})(),N?(0,u.tZ)(n.Fragment,null,(0,u.tZ)(m,null,(0,u.tZ)("div",{className:"confirm-overwrite"},r),(0,u.tZ)("div",{className:"control-label"},(0,l.t)('Type "%s" to confirm',(0,l.t)("OVERWRITE"))),(0,u.tZ)("input",{"data-test":"overwrite-modal-input",id:"overwrite",type:"text",onChange:e=>{var t,a;const n=null!=(t=null==(a=e.currentTarget)?void 0:a.value)?t:"";O(n.toUpperCase()===(0,l.t)("OVERWRITE"))}}))):null)}},83556:(e,t,a)=>{"use strict";a.d(t,{P:()=>u});var n=a(67294),r=a(42968),l=a(59361),o=a(58593),i=a(11965);const s=(0,r.Z)(l.Z)`
  ${({theme:e})=>`\n  margin-top: ${e.gridUnit}px;\n  margin-bottom: ${e.gridUnit}px;\n  font-size: ${e.typography.sizes.s}px;\n  `};
`,d=({name:e,id:t,index:a,onDelete:r,editable:l=!1,onClick:d,toolTipTitle:c=e})=>{const u=(0,n.useMemo)((()=>e.length>20),[e])?`${e.slice(0,20)}...`:e;return(0,i.tZ)(n.Fragment,null,l?(0,i.tZ)(o.u,{title:c,key:c},(0,i.tZ)(s,{key:t,closable:l,onClose:()=>a?null==r?void 0:r(a):null,color:"blue"},u)):(0,i.tZ)(o.u,{title:c,key:c},(0,i.tZ)(s,{"data-test":"tag",role:"link",key:t,onClick:d},t?(0,i.tZ)("a",{href:`/superset/all_entities/?id=${t}`,target:"_blank",rel:"noreferrer"},u):u)))},c=r.Z.div`
  max-width: 100%;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
`,u=({tags:e,editable:t=!1,onDelete:a,maxTags:r})=>{const[l,o]=(0,n.useState)(r),s=e=>{null==a||a(e)},u=(0,n.useMemo)((()=>l?e.length>l:null),[e.length,l]),p=(0,n.useMemo)((()=>"number"==typeof l?e.length-l+1:null),[u,e.length,l]);return(0,i.tZ)(c,{className:"tag-list"},u&&"number"==typeof l?(0,i.tZ)(n.Fragment,null,e.slice(0,l-1).map(((e,a)=>(0,i.tZ)(d,{id:e.id,key:e.id,name:e.name,index:a,onDelete:s,editable:t}))),e.length>l?(0,i.tZ)(d,{name:`+${p}...`,onClick:()=>o(void 0),toolTipTitle:e.map((e=>e.name)).join(", ")}):null):(0,i.tZ)(n.Fragment,null,e.map(((e,a)=>(0,i.tZ)(d,{id:e.id,key:e.id,name:e.name,index:a,onDelete:s,editable:t}))),r&&e.length>r?(0,i.tZ)(d,{name:"...",onClick:()=>o(r)}):null))}},1510:(e,t,a)=>{"use strict";a.d(t,{GW:()=>b,Rz:()=>y,X3:()=>f,on:()=>m,vk:()=>h,zi:()=>p});var n=a(5364),r=a(16355),l=a(93185),o=a(61988),i=a(70400),s=a(81255),d=a(80621),c=a(20292);const u=()=>{var e,t;const a=(0,c.Z)();return(null==a||null==(e=a.common)||null==(t=e.conf)?void 0:t.NATIVE_FILTER_DEFAULT_ROW_LIMIT)||1e3},p=({datasetId:e,dependencies:t={},groupby:a,defaultDataMask:n,controlValues:r,filterType:l,sortMetric:o,adhoc_filters:s,time_range:d,granularity_sqla:c,type:p,dashboardId:m,id:h})=>{var f;const g={};return e&&(g.datasource=`${e}__table`),a&&(g.groupby=[a]),o&&(g.sortMetric=o),{...r,...g,adhoc_filters:null!=s?s:[],extra_filters:[],extra_form_data:t,granularity_sqla:c,metrics:["count"],row_limit:u(),showSearch:!0,defaultValue:null==n||null==(f=n.filterState)?void 0:f.value,time_range:d,url_params:(0,i.Z)("regular"),inView:!0,viz_type:l,type:p,dashboardId:m,native_filter_id:h}};function m(e={},t={}){const a={};return n.Ci.forEach((n=>{const r=[...e[n]||[],...t[n]||[]];r.length&&(a[n]=r)})),n.Ay.forEach((n=>{const r=e[n];void 0!==r&&(a[n]=r);const l=t[n];void 0!==l&&(a[n]=l)})),a}function h(e,t){let a={};return t.forEach((t=>{var n,r;a=m(a,null!=(n=null==(r=e[t])?void 0:r.extraFormData)?n:{})})),a}function f(e){return!e.includes(r.cg.NativeFilter)||(0,l.cr)(l.TT.DashboardCrossFilters)&&e.includes(r.cg.InteractiveChart)}const g=(e,t)=>{var a;return(null==e||null==(a=e[t])?void 0:a.type)===s.gn},v=(e,t,a,n,r,l)=>{var o,i,d,c,u,p;l.has(a)||(l.add(a),(null==e||null==(o=e[a])?void 0:o.type)===s.dW&&t.includes(null==(i=e[a])||null==(d=i.meta)?void 0:d.chartId)&&n.forEach(r.add,r),0===(null==e||null==(c=e[a])||null==(u=c.children)?void 0:u.length)||g(e,a)&&r.has(a)||null==(p=e[a])||p.children.forEach((a=>v(e,t,a,g(e,a)?[...n,a]:n,r,l))))},y=(e,t)=>{const a=e[d._4].children[0],n=a!==d.PV,r=new Set,l=new Set;var o,i;return n?null==(o=e[a])||null==(i=o.children)||i.forEach((a=>v(e,t,a,[a],r,l))):Object.values(e).filter((e=>(null==e?void 0:e.type)===s.gn)).forEach((a=>v(e,t,a.id,[a.id],r,l))),r},b=e=>null==e?"":"string"==typeof e||"number"==typeof e?`${e}`:Array.isArray(e)?e.join(", "):"object"==typeof e?JSON.stringify(e):(0,o.t)("Unknown value")},56911:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ae});var n=a(45578),r=a.n(n),l=a(42968),o=a(61988),i=a(11064),s=a(31069),d=a(93185),c=a(67294),u=a(15926),p=a.n(u),m=a(28216),h=a(40768),f=a(34858),g=a(32228),v=a(19259),y=a(83556),b=a(86074),Z=a(36674),w=a(16550),_=a(73727),x=a(93139),k=a(38703),S=a(61337),C=a(14114),T=a(83673),E=a(27989),N=a(58593),P=a(13322),$=a(1510),O=a(8272),I=a(79789),F=a(85931),M=a(60718),A=a(34581),R=a(8494),H=a(12617),L=a(55786),D=a(51794),z=a(11965);const U=l.Z.div`
  .link {
    color: ${({theme:e})=>e.colors.grayscale.light5};
    display: block;
    text-decoration: underline;
  }
`;function j({children:e,crossLinks:t=[],moreItems:a,show:n=!1}){return(0,z.tZ)(N.u,{placement:"top","data-test":"crosslinks-tooltip",title:n&&(0,z.tZ)(U,null,t.map((e=>(0,z.tZ)(_.rU,{className:"link",key:e.to,to:e.to,target:"_blank",rel:"noreferer noopener"},e.title))),a&&(0,z.tZ)("span",{"data-test":"plus-more"},(0,o.t)("+ %s more",a)))},e)}const W=l.Z.div`
  ${({theme:e})=>`\n    & > span {\n      width: 100%;\n      display: flex;\n\n      .ant-tooltip-open {\n        display: inline;\n      }\n\n      .truncated {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        display: inline-block;\n        width: 100%;\n        vertical-align: bottom;\n      }\n\n      .count {\n        cursor: pointer;\n        color: ${e.colors.grayscale.base};\n        font-weight: ${e.typography.weights.bold};\n      }\n    }\n  `}
`;function B({crossLinks:e,maxLinks:t=20,linkPrefix:a="/superset/dashboard/"}){const[n,r,l,o]=(0,D.Z)(),i=(0,c.useMemo)((()=>e.length>t?e.length-t:void 0),[e,t]),s=(0,c.useMemo)((()=>(0,z.tZ)("span",{className:"truncated",ref:n,"data-test":"crosslinks"},e.map(((e,t)=>(0,z.tZ)(_.rU,{key:e.id,to:a+e.id},0===t?e.title:`, ${e.title}`))))),[e,n,a]),d=(0,c.useMemo)((()=>e.slice(0,t).map((e=>({title:e.title,to:a+e.id})))),[e,a,t]);return(0,z.tZ)(W,null,(0,z.tZ)(j,{moreItems:i,crossLinks:d,show:!!l},s,o&&(0,z.tZ)("span",{ref:r,className:"count","data-test":"count-crosslinks"},"+",l)))}const V=c.memo(B),q=c.memo((({dashboards:e})=>{const t=(0,c.useMemo)((()=>(0,L.Z)(e).map((e=>({title:e.dashboard_title,id:e.id})))),[e]);return(0,z.tZ)(V,{crossLinks:t})}));var K=a(54070),Y=a(12);const G=l.Z.div`
  align-items: center;
  display: flex;

  a {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    line-height: 1.2;
  }

  svg {
    margin-right: ${({theme:e})=>e.gridUnit}px;
  }
`,J=(0,o.t)('The passwords for the databases below are needed in order to import them together with the charts. Please note that the "Secure Extra" and "Certificate" sections of the database configuration are not present in export files, and should be added manually after the import if they are needed.'),X=(0,o.t)("You are importing one or more charts that already exist. Overwriting might cause you to lose some of your work. Are you sure you want to overwrite?"),Q=(0,i.Z)(),ee=async(e="",t,a)=>{var n;const l=e?{filters:[{col:"table_name",opr:"sw",value:e}]}:{},o=p().encode({columns:["datasource_name","datasource_id"],keys:["none"],order_column:"table_name",order_direction:"asc",page:t,page_size:a,...l}),{json:i={}}=await s.Z.get({endpoint:`/api/v1/dataset/?q=${o}`}),d=null==i||null==(n=i.result)?void 0:n.map((({table_name:e,id:t})=>({label:e,value:t})));return{data:r()(d,"value"),totalCount:null==i?void 0:i.count}},te=l.Z.div`
  color: ${({theme:e})=>e.colors.grayscale.base};
`,ae=(0,C.ZP)((function(e){const{addDangerToast:t,addSuccessToast:a,user:{userId:n}}=e,l=(0,w.k6)(),{state:{loading:i,resourceCount:u,resourceCollection:C,bulkSelectEnabled:L},setResourceCollection:D,hasPerm:U,fetchData:j,toggleBulkSelect:W,refreshData:B}=(0,f.Yi)("chart",(0,o.t)("chart"),t),V=(0,c.useMemo)((()=>C.map((e=>e.id))),[C]),{roles:ae}=(0,m.v9)((e=>e.user)),ne=(0,H.R)("can_read","Tag",ae),[re,le]=(0,f.NE)("chart",V,t),{sliceCurrentlyEditing:oe,handleChartUpdated:ie,openChartEditModal:se,closeChartEditModal:de}=(0,f.fF)(D,C),[ce,ue]=(0,c.useState)(!1),[pe,me]=(0,c.useState)([]),[he,fe]=(0,c.useState)(!1),[ge,ve]=(0,c.useState)([]),[ye,be]=(0,c.useState)([]),[Ze,we]=(0,c.useState)([]),_e=(0,S.OH)(null==n?void 0:n.toString(),null),xe=U("can_write"),ke=U("can_write"),Se=U("can_write"),Ce=U("can_export"),Te=[{id:"changed_on_delta_humanized",desc:!0}],Ee=e=>{const t=e.map((({id:e})=>e));(0,g.Z)("chart",t,(()=>{fe(!1)})),fe(!0)},Ne=async(e="",a,n)=>{var l,i,d;const c=e?{filters:[{col:"dashboard_title",opr:x.p.StartsWith,value:e}]}:{},u=p().encode({columns:["dashboard_title","id"],keys:["none"],order_column:"dashboard_title",order_direction:"asc",page:a,page_size:n,...c}),m=await s.Z.get({endpoint:`/api/v1/dashboard/?q=${u}`}).catch((()=>t((0,o.t)("An error occurred while fetching dashboards")))),h=null==m||null==(l=m.json)||null==(i=l.result)?void 0:i.map((({dashboard_title:e,id:t})=>({label:e,value:t})));return{data:r()(h,"value"),totalCount:null==m||null==(d=m.json)?void 0:d.count}},Pe=(0,c.useMemo)((()=>[{Cell:({row:{original:{id:e}}})=>n&&(0,z.tZ)(Z.Z,{itemId:e,saveFaveStar:re,isStarred:le[e]}),Header:"",id:"id",disableSortBy:!0,size:"xs",hidden:!n},{Cell:({row:{original:{url:e,slice_name:t,certified_by:a,certification_details:n,description:r}}})=>(0,z.tZ)(G,null,(0,z.tZ)(_.rU,{to:e,"data-test":`${t}-list-chart-title`},a&&(0,z.tZ)(c.Fragment,null,(0,z.tZ)(I.Z,{certifiedBy:a,details:n})," "),t),r&&(0,z.tZ)(O.Z,{tooltip:r})),Header:(0,o.t)("Name"),accessor:"slice_name"},{Cell:({row:{original:{viz_type:e}}})=>{var t;return(null==(t=Q.get(e))?void 0:t.name)||e},Header:(0,o.t)("Type"),accessor:"viz_type",size:"xxl"},{Cell:({row:{original:{datasource_name_text:e,datasource_url:t}}})=>(0,z.tZ)(F.m,{to:t},e),Header:(0,o.t)("Dataset"),accessor:"datasource_id",disableSortBy:!0,size:"xl"},{Cell:({row:{original:{dashboards:e}}})=>(0,z.tZ)(q,{dashboards:e}),Header:(0,o.t)("On dashboards"),accessor:"dashboards",disableSortBy:!0,size:"xxl"},{Cell:({row:{original:{tags:e=[]}}})=>(0,z.tZ)(y.P,{tags:e.filter((e=>!e.type||1===e.type||"TagTypes.custom"===e.type)),maxTags:3}),Header:(0,o.t)("Tags"),accessor:"tags",disableSortBy:!0,hidden:!(0,d.cr)(d.TT.TaggingSystem)},{Cell:({row:{original:{owners:e=[]}}})=>(0,z.tZ)(A.Z,{users:e}),Header:(0,o.t)("Owners"),accessor:"owners",disableSortBy:!0,size:"xl"},{Cell:({row:{original:{changed_on_delta_humanized:e,changed_by:t}}})=>(0,z.tZ)(K.w,{date:e,user:t}),Header:(0,o.t)("Last modified"),accessor:"last_saved_at",size:"xl"},{Cell:({row:{original:e}})=>ke||Se||Ce?(0,z.tZ)(te,{className:"actions"},Se&&(0,z.tZ)(v.Z,{title:(0,o.t)("Please confirm"),description:(0,z.tZ)(c.Fragment,null,(0,o.t)("Are you sure you want to delete")," ",(0,z.tZ)("b",null,e.slice_name),"?"),onConfirm:()=>(0,h.Gm)(e,a,t,B)},(e=>(0,z.tZ)(N.u,{id:"delete-action-tooltip",title:(0,o.t)("Delete"),placement:"bottom"},(0,z.tZ)("span",{"data-test":"trash",role:"button",tabIndex:0,className:"action-button",onClick:e},(0,z.tZ)(P.Z.Trash,null))))),Ce&&(0,z.tZ)(N.u,{id:"export-action-tooltip",title:(0,o.t)("Export"),placement:"bottom"},(0,z.tZ)("span",{role:"button",tabIndex:0,className:"action-button",onClick:()=>Ee([e])},(0,z.tZ)(P.Z.Share,null))),ke&&(0,z.tZ)(N.u,{id:"edit-action-tooltip",title:(0,o.t)("Edit"),placement:"bottom"},(0,z.tZ)("span",{role:"button",tabIndex:0,className:"action-button",onClick:()=>se(e)},(0,z.tZ)(P.Z.EditAlt,{"data-test":"edit-alt"})))):null,Header:(0,o.t)("Actions"),id:"actions",disableSortBy:!0,hidden:!ke&&!Se},{accessor:Y.J.ChangedBy,hidden:!0}]),[n,ke,Se,Ce,re,le,B,a,t]),$e=(0,c.useMemo)((()=>({Header:(0,o.t)("Favorite"),key:"favorite",id:"id",urlDisplay:"favorite",input:"select",operator:x.p.ChartIsFav,unfilteredLabel:(0,o.t)("Any"),selects:[{label:(0,o.t)("Yes"),value:!0},{label:(0,o.t)("No"),value:!1}]})),[]),Oe=(0,c.useMemo)((()=>[{Header:(0,o.t)("Name"),key:"search",id:"slice_name",input:"search",operator:x.p.ChartAllText},{Header:(0,o.t)("Type"),key:"viz_type",id:"viz_type",input:"select",operator:x.p.Equals,unfilteredLabel:(0,o.t)("All"),selects:Q.keys().filter((e=>{var t;return(0,$.X3)((null==(t=Q.get(e))?void 0:t.behaviors)||[])})).map((e=>{var t;return{label:(null==(t=Q.get(e))?void 0:t.name)||e,value:e}})).sort(((e,t)=>e.label&&t.label?e.label>t.label?1:e.label<t.label?-1:0:0))},{Header:(0,o.t)("Dataset"),key:"dataset",id:"datasource_id",input:"select",operator:x.p.Equals,unfilteredLabel:(0,o.t)("All"),fetchSelects:ee,paginate:!0},...(0,d.cr)(d.TT.TaggingSystem)&&ne?[{Header:(0,o.t)("Tag"),key:"tags",id:"tags",input:"select",operator:x.p.ChartTags,unfilteredLabel:(0,o.t)("All"),fetchSelects:M.m}]:[],{Header:(0,o.t)("Owner"),key:"owner",id:"owners",input:"select",operator:x.p.RelationManyMany,unfilteredLabel:(0,o.t)("All"),fetchSelects:(0,h.tm)("chart","owners",(0,h.v$)((e=>t((0,o.t)("An error occurred while fetching chart owners values: %s",e)))),e.user),paginate:!0},{Header:(0,o.t)("Dashboard"),key:"dashboards",id:"dashboards",input:"select",operator:x.p.RelationManyMany,unfilteredLabel:(0,o.t)("All"),fetchSelects:Ne,paginate:!0},...n?[$e]:[],{Header:(0,o.t)("Certified"),key:"certified",id:"id",urlDisplay:"certified",input:"select",operator:x.p.ChartIsCertified,unfilteredLabel:(0,o.t)("Any"),selects:[{label:(0,o.t)("Yes"),value:!0},{label:(0,o.t)("No"),value:!1}]},{Header:(0,o.t)("Modified by"),key:"changed_by",id:"changed_by",input:"select",operator:x.p.RelationOneMany,unfilteredLabel:(0,o.t)("All"),fetchSelects:(0,h.tm)("chart","changed_by",(0,h.v$)((e=>(0,o.t)("An error occurred while fetching dataset datasource values: %s",e))),e.user),paginate:!0}]),[t,$e,e.user]),Ie=[{desc:!1,id:"slice_name",label:(0,o.t)("Alphabetical"),value:"alphabetical"},{desc:!0,id:"changed_on_delta_humanized",label:(0,o.t)("Recently modified"),value:"recently_modified"},{desc:!1,id:"changed_on_delta_humanized",label:(0,o.t)("Least recently modified"),value:"least_recently_modified"}],Fe=(0,c.useCallback)((e=>(0,z.tZ)(R.Z,{chart:e,showThumbnails:_e?_e.thumbnails:(0,d.cr)(d.TT.Thumbnails),hasPerm:U,openChartEditModal:se,bulkSelectEnabled:L,addDangerToast:t,addSuccessToast:a,refreshData:B,userId:n,loading:i,favoriteStatus:le[e.id],saveFavoriteStatus:re,handleBulkChartExport:Ee})),[t,a,L,le,U,i]),Me=[];return(Se||Ce)&&Me.push({name:(0,o.t)("Bulk select"),buttonStyle:"secondary","data-test":"bulk-select",onClick:W}),xe&&(Me.push({name:(0,z.tZ)(c.Fragment,null,(0,z.tZ)("i",{className:"fa fa-plus"})," ",(0,o.t)("Chart")),buttonStyle:"primary",onClick:()=>{l.push("/chart/add")}}),Me.push({name:(0,z.tZ)(N.u,{id:"import-tooltip",title:(0,o.t)("Import charts"),placement:"bottomRight"},(0,z.tZ)(P.Z.Import,{"data-test":"import-button"})),buttonStyle:"link",onClick:()=>{ue(!0)}})),(0,z.tZ)(c.Fragment,null,(0,z.tZ)(b.Z,{name:(0,o.t)("Charts"),buttons:Me}),oe&&(0,z.tZ)(T.Z,{onHide:de,onSave:ie,show:!0,slice:oe}),(0,z.tZ)(v.Z,{title:(0,o.t)("Please confirm"),description:(0,o.t)("Are you sure you want to delete the selected charts?"),onConfirm:function(e){s.Z.delete({endpoint:`/api/v1/chart/?q=${p().encode(e.map((({id:e})=>e)))}`}).then((({json:e={}})=>{B(),a(e.message)}),(0,h.v$)((e=>t((0,o.t)("There was an issue deleting the selected charts: %s",e)))))}},(e=>{const n=[];return Se&&n.push({key:"delete",name:(0,o.t)("Delete"),type:"danger",onSelect:e}),Ce&&n.push({key:"export",name:(0,o.t)("Export"),type:"primary",onSelect:Ee}),(0,z.tZ)(x.Z,{bulkActions:n,bulkSelectEnabled:L,cardSortSelectOptions:Ie,className:"chart-list-view",columns:Pe,count:u,data:C,disableBulkSelect:W,refreshData:B,fetchData:j,filters:Oe,initialSort:Te,loading:i,pageSize:25,renderCard:Fe,enableBulkTag:!0,bulkTagResourceName:"chart",addSuccessToast:a,addDangerToast:t,showThumbnails:_e?_e.thumbnails:(0,d.cr)(d.TT.Thumbnails),defaultViewMode:(0,d.cr)(d.TT.ListviewsDefaultCardView)?"card":"table"})})),(0,z.tZ)(E.Z,{resourceName:"chart",resourceLabel:(0,o.t)("chart"),passwordsNeededMessage:J,confirmOverwriteMessage:X,addDangerToast:t,addSuccessToast:a,onModelImport:()=>{ue(!1),B(),a((0,o.t)("Chart imported"))},show:ce,onHide:()=>{ue(!1)},passwordFields:pe,setPasswordFields:me,sshTunnelPasswordFields:ge,setSSHTunnelPasswordFields:ve,sshTunnelPrivateKeyFields:ye,setSSHTunnelPrivateKeyFields:be,sshTunnelPrivateKeyPasswordFields:Ze,setSSHTunnelPrivateKeyPasswordFields:we}),he&&(0,z.tZ)(k.Z,null))}))},83379:(e,t,a)=>{"use strict";function n(e){return e?`${e.first_name} ${e.last_name}`:""}a.d(t,{Z:()=>n})}}]);
//# sourceMappingURL=c7e909bc1b806d8faacc.chunk.js.map