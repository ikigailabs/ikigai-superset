"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[8372],{28372:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a}),r(96540);var n=r(85867),l=r(28166),s=r(17437);function a(e){const{height:t,width:r,echartOptions:a,selectedValues:c,refs:u}=e,i=(0,l.j7)(e);return(0,s.Y)(n.A,{refs:u,height:t,width:r,echartOptions:a,eventHandlers:i,selectedValues:c})}},85867:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(96540),l=r(90017),s=r(49805),a=r(17437);const c=l.A.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function u({width:e,height:t,echartOptions:r,eventHandlers:l,zrEventHandlers:u,selectedValues:i={},refs:o},h){const d=(0,n.useRef)(null);o&&(o.divRef=d);const f=(0,n.useRef)(),p=(0,n.useMemo)((()=>Object.keys(i)||[]),[i]),g=(0,n.useRef)([]);(0,n.useImperativeHandle)(h,(()=>({getEchartInstance:()=>f.current}))),(0,n.useEffect)((()=>{d.current&&(f.current||(f.current=(0,s.Ts)(d.current)),Object.entries(l||{}).forEach((([e,t])=>{var r,n;null==(r=f.current)||r.off(e),null==(n=f.current)||n.on(e,t)})),Object.entries(u||{}).forEach((([e,t])=>{var r,n;null==(r=f.current)||r.getZr().off(e),null==(n=f.current)||n.getZr().on(e,t)})),f.current.setOption(r,!0))}),[r,l,u]),(0,n.useEffect)((()=>{f.current&&(f.current.dispatchAction({type:"downplay",dataIndex:g.current.filter((e=>!p.includes(e)))}),p.length&&f.current.dispatchAction({type:"highlight",dataIndex:p}),g.current=p)}),[p]);const v=(0,n.useCallback)((({width:e,height:t})=>{f.current&&f.current.resize({width:e,height:t})}),[]);return(0,n.useEffect)((()=>(v({width:e,height:t}),()=>{var e;return null==(e=f.current)?void 0:e.dispose()})),[]),(0,n.useLayoutEffect)((()=>{v({width:e,height:t})}),[e,t,v]),(0,a.Y)(c,{ref:d,height:t,width:e})}const i=(0,n.forwardRef)(u)},28166:(e,t,r)=>{r.d(t,{j7:()=>o});var n=r(7349),l=r(32142),s=r(86444),a=r(71194);const c=(e,t,r)=>n=>{const l=Object.values(e);let s;s=l.includes(n)?l.filter((e=>e!==n)):[n];const a=s.map((e=>r[e]));return{dataMask:{extraFormData:{filters:0===s.length?[]:t.map(((e,t)=>{const r=a.map((e=>e[t]));return null==r?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:r}}))},filterState:{value:a.length?a:null,selectedValues:s.length?s:null}},isCurrentValueSelected:l.includes(n)}},u=(e,t,r)=>({name:n})=>{var l;if(!r)return;const s=null==(l=e(n))?void 0:l.dataMask;s&&t(s)},i=(e,t,r,c,u,i)=>o=>{if(t){o.event.stop();const h=o.event.event,d=[];if(e.length>0){const t=r[o.name];e.forEach(((e,r)=>{d.push({col:e,op:"==",val:t[r],formattedVal:(0,a.Wy)(t[r],{timeFormatter:(0,n.mo)(u.dateFormat),numberFormatter:(0,l.gV)(u.numberFormat),coltype:null==i?void 0:i[(0,s.A)(e)]})})}))}t(h.clientX,h.clientY,{drillToDetail:d,crossFilter:c(o.name),drillBy:{filters:d,groupbyFieldName:"groupby"}})}},o=e=>{const{groupby:t,onContextMenu:r,setDataMask:n,labelMap:l,emitCrossFilters:s,selectedValues:a,coltypeMapping:o,formData:h}=e;return{click:u(c(a,t,l),n,s),contextmenu:i(t,r,l,c(a,t,l),h,o)}}}}]);
//# sourceMappingURL=6c31db319c5f0d8c8585.chunk.js.map