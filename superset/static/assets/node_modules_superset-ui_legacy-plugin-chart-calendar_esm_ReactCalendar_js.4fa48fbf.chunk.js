"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(globalThis["webpackChunksuperset"] = globalThis["webpackChunksuperset"] || []).push([["node_modules_superset-ui_legacy-plugin-chart-calendar_esm_ReactCalendar_js"],{

/***/ "./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/Calendar.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/Calendar.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! d3-array */ \"./node_modules/@superset-ui/legacy-plugin-chart-calendar/node_modules/d3-array/src/extent.js\");\n/* harmony import */ var d3_array__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! d3-array */ \"./node_modules/@superset-ui/legacy-plugin-chart-calendar/node_modules/d3-array/src/range.js\");\n/* harmony import */ var d3_selection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! d3-selection */ \"./node_modules/d3-selection/src/select.js\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @superset-ui/core */ \"./node_modules/@superset-ui/core/esm/number-format/NumberFormatterRegistrySingleton.js\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @superset-ui/core */ \"./node_modules/@superset-ui/core/esm/time-format/TimeFormatterRegistrySingleton.js\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @superset-ui/core */ \"./node_modules/@superset-ui/core/esm/color/SequentialSchemeRegistrySingleton.js\");\n/* harmony import */ var _vendor_cal_heatmap__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./vendor/cal-heatmap */ \"./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/cal-heatmap.js\");\n/* harmony import */ var _vendor_cal_heatmap_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./vendor/cal-heatmap.css */ \"./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/cal-heatmap.css\");\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\n\n\n\n\n\nfunction convertUTC(dttm) {\n  return new Date(dttm.getUTCFullYear(), dttm.getUTCMonth(), dttm.getUTCDate(), dttm.getUTCHours(), dttm.getUTCMinutes(), dttm.getUTCSeconds());\n}\n\nconst convertUTCTS = uts => convertUTC(new Date(uts)).getTime();\n\nconst propTypes = {\n  data: prop_types__WEBPACK_IMPORTED_MODULE_0___default().shape({\n    // Object hashed by metric name,\n    // then hashed by timestamp (in seconds, not milliseconds) as float\n    // the innermost value is count\n    // e.g. { count_distinct_something: { 1535034236.0: 3 } }\n    data: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().object),\n    domain: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().string),\n    range: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().number),\n    // timestamp in milliseconds\n    start: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().number),\n    subdomain: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().string)\n  }),\n  height: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().number),\n  // eslint-disable-next-line react/sort-prop-types\n  cellPadding: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().number),\n  // eslint-disable-next-line react/sort-prop-types\n  cellRadius: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().number),\n  // eslint-disable-next-line react/sort-prop-types\n  cellSize: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().number),\n  linearColorScheme: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().string),\n  showLegend: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().bool),\n  showMetricName: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().bool),\n  showValues: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().bool),\n  steps: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().number),\n  timeFormat: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().string),\n  valueFormat: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().string),\n  verboseMap: (prop_types__WEBPACK_IMPORTED_MODULE_0___default().object)\n};\n\nfunction Calendar(element, props) {\n  const {\n    data,\n    height,\n    cellPadding = 3,\n    cellRadius = 0,\n    cellSize = 10,\n    domainGranularity,\n    linearColorScheme,\n    showLegend,\n    showMetricName,\n    showValues,\n    steps,\n    subdomainGranularity,\n    timeFormat,\n    valueFormat,\n    verboseMap\n  } = props;\n  const valueFormatter = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_2__.getNumberFormatter)(valueFormat);\n  const timeFormatter = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_3__.getTimeFormatter)(timeFormat);\n  const container = (0,d3_selection__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(element).classed('superset-legacy-chart-calendar', true).style('height', height);\n  container.selectAll('*').remove();\n  const div = container.append('div');\n  const subDomainTextFormat = showValues ? (date, value) => valueFormatter(value) : null; // Trick to convert all timestamps to UTC\n  // TODO: Verify if this conversion is really necessary\n  // since all timestamps should always be in UTC.\n\n  const metricsData = {};\n  Object.keys(data.data).forEach(metric => {\n    metricsData[metric] = {};\n    Object.keys(data.data[metric]).forEach(ts => {\n      metricsData[metric][convertUTCTS(ts * 1000) / 1000] = data.data[metric][ts];\n    });\n  });\n  Object.keys(metricsData).forEach(metric => {\n    const calContainer = div.append('div');\n\n    if (showMetricName) {\n      calContainer.text(`Metric: ${verboseMap[metric] || metric}`);\n    }\n\n    const timestamps = metricsData[metric];\n    const extents = (0,d3_array__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(Object.keys(timestamps), key => timestamps[key]);\n    const step = (extents[1] - extents[0]) / (steps - 1);\n    const colorScale = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_6__[\"default\"])().get(linearColorScheme).createLinearScale(extents);\n    const legend = (0,d3_array__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(steps).map(i => extents[0] + step * i);\n    const legendColors = legend.map(x => colorScale(x));\n    const cal = new _vendor_cal_heatmap__WEBPACK_IMPORTED_MODULE_8__[\"default\"]();\n    cal.init({\n      start: convertUTCTS(data.start),\n      data: timestamps,\n      itemSelector: calContainer.node(),\n      legendVerticalPosition: 'top',\n      cellSize,\n      cellPadding,\n      cellRadius,\n      legendCellSize: cellSize,\n      legendCellPadding: 2,\n      legendCellRadius: cellRadius,\n      tooltip: true,\n      domain: domainGranularity,\n      subDomain: subdomainGranularity,\n      range: data.range,\n      browsing: true,\n      legend,\n      legendColors: {\n        colorScale,\n        min: legendColors[0],\n        max: legendColors[legendColors.length - 1],\n        empty: 'white'\n      },\n      displayLegend: showLegend,\n      itemName: '',\n      valueFormatter,\n      timeFormatter,\n      subDomainTextFormat\n    });\n  });\n}\n\nCalendar.displayName = 'Calendar';\nCalendar.propTypes = propTypes;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Calendar);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHN1cGVyc2V0LXVpL2xlZ2FjeS1wbHVnaW4tY2hhcnQtY2FsZW5kYXIvZXNtL0NhbGVuZGFyLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL25vZGVfbW9kdWxlcy9Ac3VwZXJzZXQtdWkvbGVnYWN5LXBsdWdpbi1jaGFydC1jYWxlbmRhci9lc20vQ2FsZW5kYXIuanM/ZDU1NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcbiAqIG9yIG1vcmUgY29udHJpYnV0b3IgbGljZW5zZSBhZ3JlZW1lbnRzLiAgU2VlIHRoZSBOT1RJQ0UgZmlsZVxuICogZGlzdHJpYnV0ZWQgd2l0aCB0aGlzIHdvcmsgZm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcbiAqIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGVcbiAqIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxuICogd2l0aCB0aGUgTGljZW5zZS4gIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cbiAqIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcbiAqIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnNcbiAqIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHsgZXh0ZW50IGFzIGQzRXh0ZW50LCByYW5nZSBhcyBkM1JhbmdlIH0gZnJvbSAnZDMtYXJyYXknO1xuaW1wb3J0IHsgc2VsZWN0IGFzIGQzU2VsZWN0IH0gZnJvbSAnZDMtc2VsZWN0aW9uJztcbmltcG9ydCB7IGdldE51bWJlckZvcm1hdHRlciwgZ2V0VGltZUZvcm1hdHRlciwgZ2V0U2VxdWVudGlhbFNjaGVtZVJlZ2lzdHJ5IH0gZnJvbSAnQHN1cGVyc2V0LXVpL2NvcmUnO1xuaW1wb3J0IENhbEhlYXRNYXAgZnJvbSAnLi92ZW5kb3IvY2FsLWhlYXRtYXAnO1xuaW1wb3J0ICcuL3ZlbmRvci9jYWwtaGVhdG1hcC5jc3MnO1xuXG5mdW5jdGlvbiBjb252ZXJ0VVRDKGR0dG0pIHtcbiAgcmV0dXJuIG5ldyBEYXRlKGR0dG0uZ2V0VVRDRnVsbFllYXIoKSwgZHR0bS5nZXRVVENNb250aCgpLCBkdHRtLmdldFVUQ0RhdGUoKSwgZHR0bS5nZXRVVENIb3VycygpLCBkdHRtLmdldFVUQ01pbnV0ZXMoKSwgZHR0bS5nZXRVVENTZWNvbmRzKCkpO1xufVxuXG5jb25zdCBjb252ZXJ0VVRDVFMgPSB1dHMgPT4gY29udmVydFVUQyhuZXcgRGF0ZSh1dHMpKS5nZXRUaW1lKCk7XG5cbmNvbnN0IHByb3BUeXBlcyA9IHtcbiAgZGF0YTogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAvLyBPYmplY3QgaGFzaGVkIGJ5IG1ldHJpYyBuYW1lLFxuICAgIC8vIHRoZW4gaGFzaGVkIGJ5IHRpbWVzdGFtcCAoaW4gc2Vjb25kcywgbm90IG1pbGxpc2Vjb25kcykgYXMgZmxvYXRcbiAgICAvLyB0aGUgaW5uZXJtb3N0IHZhbHVlIGlzIGNvdW50XG4gICAgLy8gZS5nLiB7IGNvdW50X2Rpc3RpbmN0X3NvbWV0aGluZzogeyAxNTM1MDM0MjM2LjA6IDMgfSB9XG4gICAgZGF0YTogUHJvcFR5cGVzLm9iamVjdCxcbiAgICBkb21haW46IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgcmFuZ2U6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgLy8gdGltZXN0YW1wIGluIG1pbGxpc2Vjb25kc1xuICAgIHN0YXJ0OiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIHN1YmRvbWFpbjogUHJvcFR5cGVzLnN0cmluZ1xuICB9KSxcbiAgaGVpZ2h0OiBQcm9wVHlwZXMubnVtYmVyLFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3Qvc29ydC1wcm9wLXR5cGVzXG4gIGNlbGxQYWRkaW5nOiBQcm9wVHlwZXMubnVtYmVyLFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3Qvc29ydC1wcm9wLXR5cGVzXG4gIGNlbGxSYWRpdXM6IFByb3BUeXBlcy5udW1iZXIsXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC9zb3J0LXByb3AtdHlwZXNcbiAgY2VsbFNpemU6IFByb3BUeXBlcy5udW1iZXIsXG4gIGxpbmVhckNvbG9yU2NoZW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBzaG93TGVnZW5kOiBQcm9wVHlwZXMuYm9vbCxcbiAgc2hvd01ldHJpY05hbWU6IFByb3BUeXBlcy5ib29sLFxuICBzaG93VmFsdWVzOiBQcm9wVHlwZXMuYm9vbCxcbiAgc3RlcHM6IFByb3BUeXBlcy5udW1iZXIsXG4gIHRpbWVGb3JtYXQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHZhbHVlRm9ybWF0OiBQcm9wVHlwZXMuc3RyaW5nLFxuICB2ZXJib3NlTWFwOiBQcm9wVHlwZXMub2JqZWN0XG59O1xuXG5mdW5jdGlvbiBDYWxlbmRhcihlbGVtZW50LCBwcm9wcykge1xuICBjb25zdCB7XG4gICAgZGF0YSxcbiAgICBoZWlnaHQsXG4gICAgY2VsbFBhZGRpbmcgPSAzLFxuICAgIGNlbGxSYWRpdXMgPSAwLFxuICAgIGNlbGxTaXplID0gMTAsXG4gICAgZG9tYWluR3JhbnVsYXJpdHksXG4gICAgbGluZWFyQ29sb3JTY2hlbWUsXG4gICAgc2hvd0xlZ2VuZCxcbiAgICBzaG93TWV0cmljTmFtZSxcbiAgICBzaG93VmFsdWVzLFxuICAgIHN0ZXBzLFxuICAgIHN1YmRvbWFpbkdyYW51bGFyaXR5LFxuICAgIHRpbWVGb3JtYXQsXG4gICAgdmFsdWVGb3JtYXQsXG4gICAgdmVyYm9zZU1hcFxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IHZhbHVlRm9ybWF0dGVyID0gZ2V0TnVtYmVyRm9ybWF0dGVyKHZhbHVlRm9ybWF0KTtcbiAgY29uc3QgdGltZUZvcm1hdHRlciA9IGdldFRpbWVGb3JtYXR0ZXIodGltZUZvcm1hdCk7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGQzU2VsZWN0KGVsZW1lbnQpLmNsYXNzZWQoJ3N1cGVyc2V0LWxlZ2FjeS1jaGFydC1jYWxlbmRhcicsIHRydWUpLnN0eWxlKCdoZWlnaHQnLCBoZWlnaHQpO1xuICBjb250YWluZXIuc2VsZWN0QWxsKCcqJykucmVtb3ZlKCk7XG4gIGNvbnN0IGRpdiA9IGNvbnRhaW5lci5hcHBlbmQoJ2RpdicpO1xuICBjb25zdCBzdWJEb21haW5UZXh0Rm9ybWF0ID0gc2hvd1ZhbHVlcyA/IChkYXRlLCB2YWx1ZSkgPT4gdmFsdWVGb3JtYXR0ZXIodmFsdWUpIDogbnVsbDsgLy8gVHJpY2sgdG8gY29udmVydCBhbGwgdGltZXN0YW1wcyB0byBVVENcbiAgLy8gVE9ETzogVmVyaWZ5IGlmIHRoaXMgY29udmVyc2lvbiBpcyByZWFsbHkgbmVjZXNzYXJ5XG4gIC8vIHNpbmNlIGFsbCB0aW1lc3RhbXBzIHNob3VsZCBhbHdheXMgYmUgaW4gVVRDLlxuXG4gIGNvbnN0IG1ldHJpY3NEYXRhID0ge307XG4gIE9iamVjdC5rZXlzKGRhdGEuZGF0YSkuZm9yRWFjaChtZXRyaWMgPT4ge1xuICAgIG1ldHJpY3NEYXRhW21ldHJpY10gPSB7fTtcbiAgICBPYmplY3Qua2V5cyhkYXRhLmRhdGFbbWV0cmljXSkuZm9yRWFjaCh0cyA9PiB7XG4gICAgICBtZXRyaWNzRGF0YVttZXRyaWNdW2NvbnZlcnRVVENUUyh0cyAqIDEwMDApIC8gMTAwMF0gPSBkYXRhLmRhdGFbbWV0cmljXVt0c107XG4gICAgfSk7XG4gIH0pO1xuICBPYmplY3Qua2V5cyhtZXRyaWNzRGF0YSkuZm9yRWFjaChtZXRyaWMgPT4ge1xuICAgIGNvbnN0IGNhbENvbnRhaW5lciA9IGRpdi5hcHBlbmQoJ2RpdicpO1xuXG4gICAgaWYgKHNob3dNZXRyaWNOYW1lKSB7XG4gICAgICBjYWxDb250YWluZXIudGV4dChgTWV0cmljOiAke3ZlcmJvc2VNYXBbbWV0cmljXSB8fCBtZXRyaWN9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgdGltZXN0YW1wcyA9IG1ldHJpY3NEYXRhW21ldHJpY107XG4gICAgY29uc3QgZXh0ZW50cyA9IGQzRXh0ZW50KE9iamVjdC5rZXlzKHRpbWVzdGFtcHMpLCBrZXkgPT4gdGltZXN0YW1wc1trZXldKTtcbiAgICBjb25zdCBzdGVwID0gKGV4dGVudHNbMV0gLSBleHRlbnRzWzBdKSAvIChzdGVwcyAtIDEpO1xuICAgIGNvbnN0IGNvbG9yU2NhbGUgPSBnZXRTZXF1ZW50aWFsU2NoZW1lUmVnaXN0cnkoKS5nZXQobGluZWFyQ29sb3JTY2hlbWUpLmNyZWF0ZUxpbmVhclNjYWxlKGV4dGVudHMpO1xuICAgIGNvbnN0IGxlZ2VuZCA9IGQzUmFuZ2Uoc3RlcHMpLm1hcChpID0+IGV4dGVudHNbMF0gKyBzdGVwICogaSk7XG4gICAgY29uc3QgbGVnZW5kQ29sb3JzID0gbGVnZW5kLm1hcCh4ID0+IGNvbG9yU2NhbGUoeCkpO1xuICAgIGNvbnN0IGNhbCA9IG5ldyBDYWxIZWF0TWFwKCk7XG4gICAgY2FsLmluaXQoe1xuICAgICAgc3RhcnQ6IGNvbnZlcnRVVENUUyhkYXRhLnN0YXJ0KSxcbiAgICAgIGRhdGE6IHRpbWVzdGFtcHMsXG4gICAgICBpdGVtU2VsZWN0b3I6IGNhbENvbnRhaW5lci5ub2RlKCksXG4gICAgICBsZWdlbmRWZXJ0aWNhbFBvc2l0aW9uOiAndG9wJyxcbiAgICAgIGNlbGxTaXplLFxuICAgICAgY2VsbFBhZGRpbmcsXG4gICAgICBjZWxsUmFkaXVzLFxuICAgICAgbGVnZW5kQ2VsbFNpemU6IGNlbGxTaXplLFxuICAgICAgbGVnZW5kQ2VsbFBhZGRpbmc6IDIsXG4gICAgICBsZWdlbmRDZWxsUmFkaXVzOiBjZWxsUmFkaXVzLFxuICAgICAgdG9vbHRpcDogdHJ1ZSxcbiAgICAgIGRvbWFpbjogZG9tYWluR3JhbnVsYXJpdHksXG4gICAgICBzdWJEb21haW46IHN1YmRvbWFpbkdyYW51bGFyaXR5LFxuICAgICAgcmFuZ2U6IGRhdGEucmFuZ2UsXG4gICAgICBicm93c2luZzogdHJ1ZSxcbiAgICAgIGxlZ2VuZCxcbiAgICAgIGxlZ2VuZENvbG9yczoge1xuICAgICAgICBjb2xvclNjYWxlLFxuICAgICAgICBtaW46IGxlZ2VuZENvbG9yc1swXSxcbiAgICAgICAgbWF4OiBsZWdlbmRDb2xvcnNbbGVnZW5kQ29sb3JzLmxlbmd0aCAtIDFdLFxuICAgICAgICBlbXB0eTogJ3doaXRlJ1xuICAgICAgfSxcbiAgICAgIGRpc3BsYXlMZWdlbmQ6IHNob3dMZWdlbmQsXG4gICAgICBpdGVtTmFtZTogJycsXG4gICAgICB2YWx1ZUZvcm1hdHRlcixcbiAgICAgIHRpbWVGb3JtYXR0ZXIsXG4gICAgICBzdWJEb21haW5UZXh0Rm9ybWF0XG4gICAgfSk7XG4gIH0pO1xufVxuXG5DYWxlbmRhci5kaXNwbGF5TmFtZSA9ICdDYWxlbmRhcic7XG5DYWxlbmRhci5wcm9wVHlwZXMgPSBwcm9wVHlwZXM7XG5leHBvcnQgZGVmYXVsdCBDYWxlbmRhcjsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/Calendar.js\n");

/***/ }),

/***/ "./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/ReactCalendar.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/ReactCalendar.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ \"./node_modules/prop-types/index.js\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @superset-ui/core */ \"./node_modules/@superset-ui/core/esm/chart/components/reactify.js\");\n/* harmony import */ var _superset_ui_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @superset-ui/core */ \"./node_modules/@superset-ui/core/esm/style/index.js\");\n/* harmony import */ var _Calendar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Calendar */ \"./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/Calendar.js\");\n/* harmony import */ var _emotion_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @emotion/react */ \"./node_modules/@emotion/react/dist/emotion-react.browser.esm.js\");\n/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\n\n\n\n\nconst ReactComponent = (0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_Calendar__WEBPACK_IMPORTED_MODULE_3__[\"default\"]);\n\nconst Calender = ({\n  className,\n  ...otherProps\n}) => (0,_emotion_react__WEBPACK_IMPORTED_MODULE_4__.jsx)(\"div\", {\n  className: className\n}, (0,_emotion_react__WEBPACK_IMPORTED_MODULE_4__.jsx)(ReactComponent, otherProps));\n\nCalender.defaultProps = {\n  otherProps: {}\n};\nCalender.propTypes = {\n  className: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().string.isRequired),\n  otherProps: prop_types__WEBPACK_IMPORTED_MODULE_1___default().objectOf((prop_types__WEBPACK_IMPORTED_MODULE_1___default().any))\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_superset_ui_core__WEBPACK_IMPORTED_MODULE_5__.styled)(Calender)`\n  .superset-legacy-chart-calendar {\n    padding: 10px;\n    position: static !important;\n    overflow: auto !important;\n  }\n\n  .superset-legacy-chart-calendar .ch-tooltip {\n    margin-left: 20px;\n    margin-top: 5px;\n  }\n`);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHN1cGVyc2V0LXVpL2xlZ2FjeS1wbHVnaW4tY2hhcnQtY2FsZW5kYXIvZXNtL1JlYWN0Q2FsZW5kYXIuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL25vZGVfbW9kdWxlcy9Ac3VwZXJzZXQtdWkvbGVnYWN5LXBsdWdpbi1jaGFydC1jYWxlbmRhci9lc20vUmVhY3RDYWxlbmRhci5qcz9iNjBmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHsgcmVhY3RpZnksIHN0eWxlZCB9IGZyb20gJ0BzdXBlcnNldC11aS9jb3JlJztcbmltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9DYWxlbmRhcic7XG5pbXBvcnQgeyBqc3ggYXMgX19fRW1vdGlvbkpTWCB9IGZyb20gXCJAZW1vdGlvbi9yZWFjdFwiO1xuY29uc3QgUmVhY3RDb21wb25lbnQgPSByZWFjdGlmeShDb21wb25lbnQpO1xuXG5jb25zdCBDYWxlbmRlciA9ICh7XG4gIGNsYXNzTmFtZSxcbiAgLi4ub3RoZXJQcm9wc1xufSkgPT4gX19fRW1vdGlvbkpTWChcImRpdlwiLCB7XG4gIGNsYXNzTmFtZTogY2xhc3NOYW1lXG59LCBfX19FbW90aW9uSlNYKFJlYWN0Q29tcG9uZW50LCBvdGhlclByb3BzKSk7XG5cbkNhbGVuZGVyLmRlZmF1bHRQcm9wcyA9IHtcbiAgb3RoZXJQcm9wczoge31cbn07XG5DYWxlbmRlci5wcm9wVHlwZXMgPSB7XG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxuICBvdGhlclByb3BzOiBQcm9wVHlwZXMub2JqZWN0T2YoUHJvcFR5cGVzLmFueSlcbn07XG5leHBvcnQgZGVmYXVsdCBzdHlsZWQoQ2FsZW5kZXIpYFxuICAuc3VwZXJzZXQtbGVnYWN5LWNoYXJ0LWNhbGVuZGFyIHtcbiAgICBwYWRkaW5nOiAxMHB4O1xuICAgIHBvc2l0aW9uOiBzdGF0aWMgIWltcG9ydGFudDtcbiAgICBvdmVyZmxvdzogYXV0byAhaW1wb3J0YW50O1xuICB9XG5cbiAgLnN1cGVyc2V0LWxlZ2FjeS1jaGFydC1jYWxlbmRhciAuY2gtdG9vbHRpcCB7XG4gICAgbWFyZ2luLWxlZnQ6IDIwcHg7XG4gICAgbWFyZ2luLXRvcDogNXB4O1xuICB9XG5gOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/ReactCalendar.js\n");

/***/ }),

/***/ "./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/cal-heatmap.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/cal-heatmap.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var d3_tip__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! d3-tip */ \"./node_modules/d3-tip/index.js\");\n/* harmony import */ var _d3tip_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./d3tip.css */ \"./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/d3tip.css\");\n// [LICENSE TBD]\n\n/* Copied and altered from http://cal-heatmap.com/ , alterations around:\n * - tuning tooltips\n * - supporting multi-colors scales\n * - legend format\n * - UTC handling\n */\n\n/* eslint-disable */\n\n\nvar d3 =  true ? __webpack_require__(/*! d3 */ \"./node_modules/d3/d3.js\") : 0;\nvar d3 =  true ? __webpack_require__(/*! d3 */ \"./node_modules/d3/d3.js\") : 0;\n\nvar CalHeatMap = function () {\n  'use strict';\n\n  var self = this;\n  self.tip = (0,d3_tip__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().attr('class', 'd3-tip').direction('n').offset([-5, 0]).html(d => `\n      ${self.options.timeFormatter(d.t)}: <strong>${self.options.valueFormatter(d.v)}</strong>\n    `);\n  self.legendTip = (0,d3_tip__WEBPACK_IMPORTED_MODULE_0__[\"default\"])().attr('class', 'd3-tip').direction('n').offset([-5, 0]).html(d => self.options.valueFormatter(d));\n  this.allowedDataType = ['json', 'csv', 'tsv', 'txt']; // Default settings\n\n  this.options = {\n    // selector string of the container to append the graph to\n    // Accept any string value accepted by document.querySelector or CSS3\n    // or an Element object\n    itemSelector: '#cal-heatmap',\n    // Whether to paint the calendar on init()\n    // Used by testsuite to reduce testing time\n    paintOnLoad: true,\n    // ================================================\n    // DOMAIN\n    // ================================================\n    // Number of domain to display on the graph\n    range: 12,\n    // Size of each cell, in pixel\n    cellSize: 10,\n    // Padding between each cell, in pixel\n    cellPadding: 2,\n    // For rounded subdomain rectangles, in pixels\n    cellRadius: 0,\n    domainGutter: 2,\n    domainMargin: [0, 0, 0, 0],\n    valueFormatter: d => d,\n    timeFormatter: d => d,\n    domain: 'hour',\n    subDomain: 'min',\n    // Number of columns to split the subDomains to\n    // If not null, will takes precedence over rowLimit\n    colLimit: null,\n    // Number of rows to split the subDomains to\n    // Will be ignored if colLimit is not null\n    rowLimit: null,\n    // First day of the week is Monday\n    // 0 to start the week on Sunday\n    weekStartOnMonday: true,\n    // Start date of the graph\n    // @default now\n    start: new Date(),\n    minDate: null,\n    maxDate: null,\n    // ================================================\n    // DATA\n    // ================================================\n    // Data source\n    // URL, where to fetch the original datas\n    data: '',\n    // Data type\n    // Default: json\n    dataType: this.allowedDataType[0],\n    // Payload sent when using POST http method\n    // Leave to null (default) for GET request\n    // Expect a string, formatted like \"a=b;c=d\"\n    dataPostPayload: null,\n    // Additional headers sent when requesting data\n    // Expect an object formatted like:\n    // { 'X-CSRF-TOKEN': 'token' }\n    dataRequestHeaders: null,\n    // Whether to consider missing date:value from the datasource\n    // as equal to 0, or just leave them as missing\n    considerMissingDataAsZero: false,\n    // Load remote data on calendar creation\n    // When false, the calendar will be left empty\n    loadOnInit: true,\n    // Calendar orientation\n    // false: display domains side by side\n    // true : display domains one under the other\n    verticalOrientation: false,\n    // Domain dynamic width/height\n    // The width on a domain depends on the number of\n    domainDynamicDimension: true,\n    // Domain Label properties\n    label: {\n      // valid: top, right, bottom, left\n      position: 'bottom',\n      // Valid: left, center, right\n      // Also valid are the direct svg values: start, middle, end\n      align: 'center',\n      // By default, there is no margin/padding around the label\n      offset: {\n        x: 0,\n        y: 0\n      },\n      rotate: null,\n      // Used only on vertical orientation\n      width: 100,\n      // Used only on horizontal orientation\n      height: null\n    },\n    // ================================================\n    // LEGEND\n    // ================================================\n    // Threshold for the legend\n    legend: [10, 20, 30, 40],\n    // Whether to display the legend\n    displayLegend: true,\n    legendCellSize: 10,\n    legendCellPadding: 2,\n    legendMargin: [0, 0, 0, 0],\n    // Legend vertical position\n    // top: place legend above calendar\n    // bottom: place legend below the calendar\n    legendVerticalPosition: 'bottom',\n    // Legend horizontal position\n    // accepted values: left, center, right\n    legendHorizontalPosition: 'left',\n    // Legend rotation\n    // accepted values: horizontal, vertical\n    legendOrientation: 'horizontal',\n    // Objects holding all the heatmap different colors\n    // null to disable, and use the default css styles\n    //\n    // Examples:\n    // legendColors: {\n    //    min: \"green\",\n    //    max: \"red\",\n    //    empty: \"#ffffff\",\n    //    base: \"grey\",\n    //    overflow: \"red\",\n    //    colorScaler: null,\n    // }\n    legendColors: null,\n    // ================================================\n    // HIGHLIGHT\n    // ================================================\n    // List of dates to highlight\n    // Valid values:\n    // - []: don't highlight anything\n    // - \"now\": highlight the current date\n    // - an array of Date objects: highlight the specified dates\n    highlight: [],\n    // ================================================\n    // TEXT FORMATTING / i18n\n    // ================================================\n    // Name of the items to represent in the calendar\n    itemName: ['item', 'items'],\n    // Formatting of the domain label\n    // @default: null, will use the formatting according to domain type\n    // Accept a string used as specifier by d3.time.format()\n    // or a function\n    //\n    // Refer to https://github.com/mbostock/d3/wiki/Time-Formatting\n    // for accepted date formatting used by d3.time.format()\n    domainLabelFormat: null,\n    // Formatting of the title displayed when hovering a subDomain cell\n    subDomainTitleFormat: {\n      empty: '{date}',\n      filled: '{count} {name} {connector} {date}'\n    },\n    // Formatting of the {date} used in subDomainTitleFormat\n    // @default: null, will use the formatting according to subDomain type\n    // Accept a string used as specifier by d3.time.format()\n    // or a function\n    //\n    // Refer to https://github.com/mbostock/d3/wiki/Time-Formatting\n    // for accepted date formatting used by d3.time.format()\n    subDomainDateFormat: null,\n    // Formatting of the text inside each subDomain cell\n    // @default: null, no text\n    // Accept a string used as specifier by d3.time.format()\n    // or a function\n    //\n    // Refer to https://github.com/mbostock/d3/wiki/Time-Formatting\n    // for accepted date formatting used by d3.time.format()\n    subDomainTextFormat: null,\n    // Formatting of the title displayed when hovering a legend cell\n    legendTitleFormat: {\n      lower: 'less than {min} {name}',\n      inner: 'between {down} and {up} {name}',\n      upper: 'more than {max} {name}'\n    },\n    // Animation duration, in ms\n    animationDuration: 500,\n    nextSelector: false,\n    previousSelector: false,\n    itemNamespace: 'cal-heatmap',\n    tooltip: false,\n    // ================================================\n    // EVENTS CALLBACK\n    // ================================================\n    // Callback when clicking on a time block\n    onClick: null,\n    // Callback after painting the empty calendar\n    // Can be used to trigger an API call, once the calendar is ready to be filled\n    afterLoad: null,\n    // Callback after loading the next domain in the calendar\n    afterLoadNextDomain: null,\n    // Callback after loading the previous domain in the calendar\n    afterLoadPreviousDomain: null,\n    // Callback after finishing all actions on the calendar\n    onComplete: null,\n    // Callback after fetching the datas, but before applying them to the calendar\n    // Used mainly to convert the datas if they're not formatted like expected\n    // Takes the fetched \"data\" object as argument, must return a json object\n    // formatted like {timestamp:count, timestamp2:count2},\n    afterLoadData: function (data) {\n      return data;\n    },\n    // Callback triggered after calling and completing update().\n    afterUpdate: null,\n    // Callback triggered after calling next().\n    // The `status` argument is equal to true if there is no\n    // more next domain to load\n    //\n    // This callback is also executed once, after calling previous(),\n    // only when the max domain is reached\n    onMaxDomainReached: null,\n    // Callback triggered after calling previous().\n    // The `status` argument is equal to true if there is no\n    // more previous domain to load\n    //\n    // This callback is also executed once, after calling next(),\n    // only when the min domain is reached\n    onMinDomainReached: null\n  };\n  this._domainType = {\n    min: {\n      name: 'minute',\n      level: 10,\n      maxItemNumber: 60,\n      defaultRowNumber: 10,\n      defaultColumnNumber: 6,\n      row: function (d) {\n        return self.getSubDomainRowNumber(d);\n      },\n      column: function (d) {\n        return self.getSubDomainColumnNumber(d);\n      },\n      position: {\n        x: function (d) {\n          return Math.floor(d.getMinutes() / self._domainType.min.row(d));\n        },\n        y: function (d) {\n          return d.getMinutes() % self._domainType.min.row(d);\n        }\n      },\n      format: {\n        date: '%H:%M, %A %B %-e, %Y',\n        legend: '',\n        connector: 'at'\n      },\n      extractUnit: function (d) {\n        return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes()).getTime();\n      }\n    },\n    hour: {\n      name: 'hour',\n      level: 20,\n      maxItemNumber: function (d) {\n        switch (self.options.domain) {\n          case 'day':\n            return 24;\n\n          case 'week':\n            return 24 * 7;\n\n          case 'month':\n            return 24 * (self.options.domainDynamicDimension ? self.getDayCountInMonth(d) : 31);\n        }\n      },\n      defaultRowNumber: 6,\n      defaultColumnNumber: function (d) {\n        switch (self.options.domain) {\n          case 'day':\n            return 4;\n\n          case 'week':\n            return 28;\n\n          case 'month':\n            return self.options.domainDynamicDimension ? self.getDayCountInMonth(d) : 31;\n        }\n      },\n      row: function (d) {\n        return self.getSubDomainRowNumber(d);\n      },\n      column: function (d) {\n        return self.getSubDomainColumnNumber(d);\n      },\n      position: {\n        x: function (d) {\n          if (self.options.domain === 'month') {\n            if (self.options.colLimit > 0 || self.options.rowLimit > 0) {\n              return Math.floor((d.getHours() + (d.getDate() - 1) * 24) / self._domainType.hour.row(d));\n            }\n\n            return Math.floor(d.getHours() / self._domainType.hour.row(d)) + (d.getDate() - 1) * 4;\n          } else if (self.options.domain === 'week') {\n            if (self.options.colLimit > 0 || self.options.rowLimit > 0) {\n              return Math.floor((d.getHours() + self.getWeekDay(d) * 24) / self._domainType.hour.row(d));\n            }\n\n            return Math.floor(d.getHours() / self._domainType.hour.row(d)) + self.getWeekDay(d) * 4;\n          }\n\n          return Math.floor(d.getHours() / self._domainType.hour.row(d));\n        },\n        y: function (d) {\n          var p = d.getHours();\n\n          if (self.options.colLimit > 0 || self.options.rowLimit > 0) {\n            switch (self.options.domain) {\n              case 'month':\n                p += (d.getDate() - 1) * 24;\n                break;\n\n              case 'week':\n                p += self.getWeekDay(d) * 24;\n                break;\n            }\n          }\n\n          return Math.floor(p % self._domainType.hour.row(d));\n        }\n      },\n      format: {\n        date: '%Hh, %A %B %-e, %Y',\n        legend: '%H:00',\n        connector: 'at'\n      },\n      extractUnit: function (d) {\n        return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours()).getTime();\n      }\n    },\n    day: {\n      name: 'day',\n      level: 30,\n      maxItemNumber: function (d) {\n        switch (self.options.domain) {\n          case 'week':\n            return 7;\n\n          case 'month':\n            return self.options.domainDynamicDimension ? self.getDayCountInMonth(d) : 31;\n\n          case 'year':\n            return self.options.domainDynamicDimension ? self.getDayCountInYear(d) : 366;\n        }\n      },\n      defaultColumnNumber: function (d) {\n        d = new Date(d);\n\n        switch (self.options.domain) {\n          case 'week':\n            return 1;\n\n          case 'month':\n            return self.options.domainDynamicDimension && !self.options.verticalOrientation ? self.getWeekNumber(new Date(d.getFullYear(), d.getMonth() + 1, 0)) - self.getWeekNumber(d) + 1 : 6;\n\n          case 'year':\n            return self.options.domainDynamicDimension ? self.getWeekNumber(new Date(d.getFullYear(), 11, 31)) - self.getWeekNumber(new Date(d.getFullYear(), 0)) + 1 : 54;\n        }\n      },\n      defaultRowNumber: 7,\n      row: function (d) {\n        return self.getSubDomainRowNumber(d);\n      },\n      column: function (d) {\n        return self.getSubDomainColumnNumber(d);\n      },\n      position: {\n        x: function (d) {\n          switch (self.options.domain) {\n            case 'week':\n              return Math.floor(self.getWeekDay(d) / self._domainType.day.row(d));\n\n            case 'month':\n              if (self.options.colLimit > 0 || self.options.rowLimit > 0) {\n                return Math.floor((d.getDate() - 1) / self._domainType.day.row(d));\n              }\n\n              return self.getWeekNumber(d) - self.getWeekNumber(new Date(d.getFullYear(), d.getMonth()));\n\n            case 'year':\n              if (self.options.colLimit > 0 || self.options.rowLimit > 0) {\n                return Math.floor((self.getDayOfYear(d) - 1) / self._domainType.day.row(d));\n              }\n\n              return self.getWeekNumber(d);\n          }\n        },\n        y: function (d) {\n          var p = self.getWeekDay(d);\n\n          if (self.options.colLimit > 0 || self.options.rowLimit > 0) {\n            switch (self.options.domain) {\n              case 'year':\n                p = self.getDayOfYear(d) - 1;\n                break;\n\n              case 'week':\n                p = self.getWeekDay(d);\n                break;\n\n              case 'month':\n                p = d.getDate() - 1;\n                break;\n            }\n          }\n\n          return Math.floor(p % self._domainType.day.row(d));\n        }\n      },\n      format: {\n        date: '%A %B %-e, %Y',\n        legend: '%e %b',\n        connector: 'on'\n      },\n      extractUnit: function (d) {\n        return new Date(d.getFullYear(), d.getMonth(), d.getDate()).getTime();\n      }\n    },\n    week: {\n      name: 'week',\n      level: 40,\n      maxItemNumber: 54,\n      defaultColumnNumber: function (d) {\n        d = new Date(d);\n\n        switch (self.options.domain) {\n          case 'year':\n            return self._domainType.week.maxItemNumber;\n\n          case 'month':\n            return self.options.domainDynamicDimension ? self.getWeekNumber(new Date(d.getFullYear(), d.getMonth() + 1, 0)) - self.getWeekNumber(d) : 5;\n        }\n      },\n      defaultRowNumber: 1,\n      row: function (d) {\n        return self.getSubDomainRowNumber(d);\n      },\n      column: function (d) {\n        return self.getSubDomainColumnNumber(d);\n      },\n      position: {\n        x: function (d) {\n          switch (self.options.domain) {\n            case 'year':\n              return Math.floor(self.getWeekNumber(d) / self._domainType.week.row(d));\n\n            case 'month':\n              return Math.floor(self.getMonthWeekNumber(d) / self._domainType.week.row(d));\n          }\n        },\n        y: function (d) {\n          return self.getWeekNumber(d) % self._domainType.week.row(d);\n        }\n      },\n      format: {\n        date: '%B Week #%W',\n        legend: '%B Week #%W',\n        connector: 'in'\n      },\n      extractUnit: function (d) {\n        var dt = new Date(d.getFullYear(), d.getMonth(), d.getDate()); // According to ISO-8601, week number computation are based on week starting on Monday\n\n        var weekDay = dt.getDay() - (self.options.weekStartOnMonday ? 1 : 0);\n\n        if (weekDay < 0) {\n          weekDay = 6;\n        }\n\n        dt.setDate(dt.getDate() - weekDay);\n        return dt.getTime();\n      }\n    },\n    month: {\n      name: 'month',\n      level: 50,\n      maxItemNumber: 12,\n      defaultColumnNumber: 12,\n      defaultRowNumber: 1,\n      row: function () {\n        return self.getSubDomainRowNumber();\n      },\n      column: function () {\n        return self.getSubDomainColumnNumber();\n      },\n      position: {\n        x: function (d) {\n          return Math.floor(d.getMonth() / self._domainType.month.row(d));\n        },\n        y: function (d) {\n          return d.getMonth() % self._domainType.month.row(d);\n        }\n      },\n      format: {\n        date: '%B %Y',\n        legend: '%B',\n        connector: 'in'\n      },\n      extractUnit: function (d) {\n        return new Date(d.getFullYear(), d.getMonth()).getTime();\n      }\n    },\n    year: {\n      name: 'year',\n      level: 60,\n      row: function () {\n        return self.options.rowLimit || 1;\n      },\n      column: function () {\n        return self.options.colLimit || 1;\n      },\n      position: {\n        x: function () {\n          return 1;\n        },\n        y: function () {\n          return 1;\n        }\n      },\n      format: {\n        date: '%Y',\n        legend: '%Y',\n        connector: 'in'\n      },\n      extractUnit: function (d) {\n        return new Date(d.getFullYear()).getTime();\n      }\n    }\n  };\n\n  for (var type in this._domainType) {\n    if (this._domainType.hasOwnProperty(type)) {\n      var d = this._domainType[type];\n      this._domainType['x_' + type] = {\n        name: 'x_' + type,\n        level: d.type,\n        maxItemNumber: d.maxItemNumber,\n        defaultRowNumber: d.defaultRowNumber,\n        defaultColumnNumber: d.defaultColumnNumber,\n        row: d.column,\n        column: d.row,\n        position: {\n          x: d.position.y,\n          y: d.position.x\n        },\n        format: d.format,\n        extractUnit: d.extractUnit\n      };\n    }\n  } // Record the address of the last inserted domain when browsing\n\n\n  this.lastInsertedSvg = null;\n  this._completed = false; // Record all the valid domains\n  // Each domain value is a timestamp in milliseconds\n\n  this._domains = d3.map();\n  this.graphDim = {\n    width: 0,\n    height: 0\n  };\n  this.legendDim = {\n    width: 0,\n    height: 0\n  };\n  this.NAVIGATE_LEFT = 1;\n  this.NAVIGATE_RIGHT = 2; // Various update mode when using the update() API\n\n  this.RESET_ALL_ON_UPDATE = 0;\n  this.RESET_SINGLE_ON_UPDATE = 1;\n  this.APPEND_ON_UPDATE = 2;\n  this.DEFAULT_LEGEND_MARGIN = 10;\n  this.root = null;\n  this.tooltip = null;\n  this._maxDomainReached = false;\n  this._minDomainReached = false;\n  this.domainPosition = new DomainPosition();\n  this.Legend = null;\n  this.legendScale = null; // List of domains that are skipped because of DST\n  // All times belonging to these domains should be re-assigned to the previous domain\n\n  this.DSTDomain = [];\n  /**\n   * Display the graph for the first time\n   * @return bool True if the calendar is created\n   */\n\n  this._init = function () {\n    self.getDomain(self.options.start).map(function (d) {\n      return d.getTime();\n    }).map(function (d) {\n      self._domains.set(d, self.getSubDomain(d).map(function (d) {\n        return {\n          t: self._domainType[self.options.subDomain].extractUnit(d),\n          v: null\n        };\n      }));\n    });\n    self.root = d3.select(self.options.itemSelector).append('svg').attr('class', 'cal-heatmap-container');\n    self.root.attr('x', 0).attr('y', 0).append('svg').attr('class', 'graph');\n    self.Legend = new Legend(self);\n\n    if (self.options.paintOnLoad) {\n      _initCalendar();\n    }\n\n    self.root.call(self.tip);\n    self.root.call(self.legendTip);\n    return true;\n  };\n\n  function _initCalendar() {\n    self.verticalDomainLabel = self.options.label.position === 'top' || self.options.label.position === 'bottom';\n    self.domainVerticalLabelHeight = self.options.label.height === null ? Math.max(25, self.options.cellSize * 2) : self.options.label.height;\n    self.domainHorizontalLabelWidth = 0;\n\n    if (self.options.domainLabelFormat === '' && self.options.label.height === null) {\n      self.domainVerticalLabelHeight = 0;\n    }\n\n    if (!self.verticalDomainLabel) {\n      self.domainVerticalLabelHeight = 0;\n      self.domainHorizontalLabelWidth = self.options.label.width;\n    }\n\n    self.paint(); // =========================================================================//\n    // ATTACHING DOMAIN NAVIGATION EVENT                    //\n    // =========================================================================//\n\n    if (self.options.nextSelector !== false) {\n      d3.select(self.options.nextSelector).on('click.' + self.options.itemNamespace, function () {\n        d3.event.preventDefault();\n        return self.loadNextDomain(1);\n      });\n    }\n\n    if (self.options.previousSelector !== false) {\n      d3.select(self.options.previousSelector).on('click.' + self.options.itemNamespace, function () {\n        d3.event.preventDefault();\n        return self.loadPreviousDomain(1);\n      });\n    }\n\n    self.Legend.redraw(self.graphDim.width - self.options.domainGutter - self.options.cellPadding);\n    self.afterLoad();\n    var domains = self.getDomainKeys(); // Fill the graph with some datas\n\n    if (self.options.loadOnInit) {\n      self.getDatas(self.options.data, new Date(domains[0]), self.getSubDomain(domains[domains.length - 1]).pop(), function () {\n        self.fill();\n        self.onComplete();\n      });\n    } else {\n      self.onComplete();\n    }\n\n    self.checkIfMinDomainIsReached(domains[0]);\n    self.checkIfMaxDomainIsReached(self.getNextDomain().getTime());\n  } // Return the width of the domain block, without the domain gutter\n  // @param int d Domain start timestamp\n\n\n  function w(d, outer) {\n    var width = self.options.cellSize * self._domainType[self.options.subDomain].column(d) + self.options.cellPadding * self._domainType[self.options.subDomain].column(d);\n\n    if (arguments.length === 2 && outer === true) {\n      return width += self.domainHorizontalLabelWidth + self.options.domainGutter + self.options.domainMargin[1] + self.options.domainMargin[3];\n    }\n\n    return width;\n  } // Return the height of the domain block, without the domain gutter\n\n\n  function h(d, outer) {\n    var height = self.options.cellSize * self._domainType[self.options.subDomain].row(d) + self.options.cellPadding * self._domainType[self.options.subDomain].row(d);\n\n    if (arguments.length === 2 && outer === true) {\n      height += self.options.domainGutter + self.domainVerticalLabelHeight + self.options.domainMargin[0] + self.options.domainMargin[2];\n    }\n\n    return height;\n  }\n  /**\n   *\n   *\n   * @param int navigationDir\n   */\n\n\n  this.paint = function (navigationDir) {\n    var options = self.options;\n\n    if (arguments.length === 0) {\n      navigationDir = false;\n    } // Painting all the domains\n\n\n    var domainSvg = self.root.select('.graph').selectAll('.graph-domain').data(function () {\n      var data = self.getDomainKeys();\n      return navigationDir === self.NAVIGATE_LEFT ? data.reverse() : data;\n    }, function (d) {\n      return d;\n    });\n    var enteringDomainDim = 0;\n    var exitingDomainDim = 0; // =========================================================================//\n    // PAINTING DOMAIN                              //\n    // =========================================================================//\n\n    var svg = domainSvg.enter().append('svg').attr('width', function (d) {\n      return w(d, true);\n    }).attr('height', function (d) {\n      return h(d, true);\n    }).attr('x', function (d) {\n      if (options.verticalOrientation) {\n        self.graphDim.width = Math.max(self.graphDim.width, w(d, true));\n        return 0;\n      } else {\n        return getDomainPosition(d, self.graphDim, 'width', w(d, true));\n      }\n    }).attr('y', function (d) {\n      if (options.verticalOrientation) {\n        return getDomainPosition(d, self.graphDim, 'height', h(d, true));\n      } else {\n        self.graphDim.height = Math.max(self.graphDim.height, h(d, true));\n        return 0;\n      }\n    }).attr('class', function (d) {\n      var classname = 'graph-domain';\n      var date = new Date(d);\n\n      switch (options.domain) {\n        case 'hour':\n          classname += ' h_' + date.getHours();\n\n        /* falls through */\n\n        case 'day':\n          classname += ' d_' + date.getDate() + ' dy_' + date.getDay();\n\n        /* falls through */\n\n        case 'week':\n          classname += ' w_' + self.getWeekNumber(date);\n\n        /* falls through */\n\n        case 'month':\n          classname += ' m_' + (date.getMonth() + 1);\n\n        /* falls through */\n\n        case 'year':\n          classname += ' y_' + date.getFullYear();\n      }\n\n      return classname;\n    });\n    self.lastInsertedSvg = svg;\n\n    function getDomainPosition(domainIndex, graphDim, axis, domainDim) {\n      var tmp = 0;\n\n      switch (navigationDir) {\n        case false:\n          tmp = graphDim[axis];\n          graphDim[axis] += domainDim;\n          self.domainPosition.setPosition(domainIndex, tmp);\n          return tmp;\n\n        case self.NAVIGATE_RIGHT:\n          self.domainPosition.setPosition(domainIndex, graphDim[axis]);\n          enteringDomainDim = domainDim;\n          exitingDomainDim = self.domainPosition.getPositionFromIndex(1);\n          self.domainPosition.shiftRightBy(exitingDomainDim);\n          return graphDim[axis];\n\n        case self.NAVIGATE_LEFT:\n          tmp = -domainDim;\n          enteringDomainDim = -tmp;\n          exitingDomainDim = graphDim[axis] - self.domainPosition.getLast();\n          self.domainPosition.setPosition(domainIndex, tmp);\n          self.domainPosition.shiftLeftBy(enteringDomainDim);\n          return tmp;\n      }\n    }\n\n    svg.append('rect').attr('width', function (d) {\n      return w(d, true) - options.domainGutter - options.cellPadding;\n    }).attr('height', function (d) {\n      return h(d, true) - options.domainGutter - options.cellPadding;\n    }).attr('class', 'domain-background'); // =========================================================================//\n    // PAINTING SUBDOMAINS                            //\n    // =========================================================================//\n\n    var subDomainSvgGroup = svg.append('svg').attr('x', function () {\n      if (options.label.position === 'left') {\n        return self.domainHorizontalLabelWidth + options.domainMargin[3];\n      } else {\n        return options.domainMargin[3];\n      }\n    }).attr('y', function () {\n      if (options.label.position === 'top') {\n        return self.domainVerticalLabelHeight + options.domainMargin[0];\n      } else {\n        return options.domainMargin[0];\n      }\n    }).attr('class', 'graph-subdomain-group');\n    var rect = subDomainSvgGroup.selectAll('g').data(function (d) {\n      return self._domains.get(d);\n    }).enter().append('g');\n    rect.append('rect').attr('class', function (d) {\n      return 'graph-rect' + self.getHighlightClassName(d.t) + (options.onClick !== null ? ' hover_cursor' : '');\n    }).attr('width', options.cellSize).attr('height', options.cellSize).attr('x', function (d) {\n      return self.positionSubDomainX(d.t);\n    }).attr('y', function (d) {\n      return self.positionSubDomainY(d.t);\n    }).on('click', function (d) {\n      if (options.onClick !== null) {\n        return self.onClick(new Date(d.t), d.v);\n      }\n    }).call(function (selection) {\n      if (options.cellRadius > 0) {\n        selection.attr('rx', options.cellRadius).attr('ry', options.cellRadius);\n      }\n\n      if (self.legendScale !== null && options.legendColors !== null && options.legendColors.hasOwnProperty('base')) {\n        selection.attr('fill', options.legendColors.base);\n      }\n\n      if (options.tooltip) {\n        selection.on('mouseover', function (d) {\n          self.tip.show(d, this);\n        }).on('mouseout', function () {\n          self.tip.hide(d);\n        });\n      }\n    }); // Appending a title to each subdomain\n\n    if (!options.tooltip) {\n      rect.append('title').text(function (d) {\n        return self.formatDate(new Date(d.t), options.subDomainDateFormat);\n      });\n    } // =========================================================================//\n    // PAINTING LABEL                              //\n    // =========================================================================//\n\n\n    if (options.domainLabelFormat !== '') {\n      svg.append('text').attr('class', 'graph-label').attr('y', function (d) {\n        var y = options.domainMargin[0];\n\n        switch (options.label.position) {\n          case 'top':\n            y += self.domainVerticalLabelHeight / 2;\n            break;\n\n          case 'bottom':\n            y += h(d) + self.domainVerticalLabelHeight / 2;\n        }\n\n        return y + options.label.offset.y * (options.label.rotate === 'right' && options.label.position === 'right' || options.label.rotate === 'left' && options.label.position === 'left' ? -1 : 1);\n      }).attr('x', function (d) {\n        var x = options.domainMargin[3];\n\n        switch (options.label.position) {\n          case 'right':\n            x += w(d);\n            break;\n\n          case 'bottom':\n          case 'top':\n            x += w(d) / 2;\n        }\n\n        if (options.label.align === 'right') {\n          return x + self.domainHorizontalLabelWidth - options.label.offset.x * (options.label.rotate === 'right' ? -1 : 1);\n        }\n\n        return x + options.label.offset.x;\n      }).attr('text-anchor', function () {\n        switch (options.label.align) {\n          case 'start':\n          case 'left':\n            return 'start';\n\n          case 'end':\n          case 'right':\n            return 'end';\n\n          default:\n            return 'middle';\n        }\n      }).attr('dominant-baseline', function () {\n        return self.verticalDomainLabel ? 'middle' : 'top';\n      }).text(function (d) {\n        return self.formatDate(new Date(d), options.domainLabelFormat);\n      }).call(domainRotate);\n    }\n\n    function domainRotate(selection) {\n      switch (options.label.rotate) {\n        case 'right':\n          selection.attr('transform', function (d) {\n            var s = 'rotate(90), ';\n\n            switch (options.label.position) {\n              case 'right':\n                s += 'translate(-' + w(d) + ' , -' + w(d) + ')';\n                break;\n\n              case 'left':\n                s += 'translate(0, -' + self.domainHorizontalLabelWidth + ')';\n                break;\n            }\n\n            return s;\n          });\n          break;\n\n        case 'left':\n          selection.attr('transform', function (d) {\n            var s = 'rotate(270), ';\n\n            switch (options.label.position) {\n              case 'right':\n                s += 'translate(-' + (w(d) + self.domainHorizontalLabelWidth) + ' , ' + w(d) + ')';\n                break;\n\n              case 'left':\n                s += 'translate(-' + self.domainHorizontalLabelWidth + ' , ' + self.domainHorizontalLabelWidth + ')';\n                break;\n            }\n\n            return s;\n          });\n          break;\n      }\n    } // =========================================================================//\n    // PAINTING DOMAIN SUBDOMAIN CONTENT                    //\n    // =========================================================================//\n\n\n    if (options.subDomainTextFormat !== null) {\n      rect.append('text').attr('class', function (d) {\n        return 'subdomain-text' + self.getHighlightClassName(d.t);\n      }).attr('x', function (d) {\n        return self.positionSubDomainX(d.t) + options.cellSize / 2;\n      }).attr('y', function (d) {\n        return self.positionSubDomainY(d.t) + options.cellSize / 2;\n      }).attr('text-anchor', 'middle').attr('dominant-baseline', 'central').text(function (d) {\n        return self.formatDate(new Date(d.t), options.subDomainTextFormat);\n      });\n    } // =========================================================================//\n    // ANIMATION                                //\n    // =========================================================================//\n\n\n    if (navigationDir !== false) {\n      domainSvg.transition().duration(options.animationDuration).attr('x', function (d) {\n        return options.verticalOrientation ? 0 : self.domainPosition.getPosition(d);\n      }).attr('y', function (d) {\n        return options.verticalOrientation ? self.domainPosition.getPosition(d) : 0;\n      });\n    }\n\n    var tempWidth = self.graphDim.width;\n    var tempHeight = self.graphDim.height;\n\n    if (options.verticalOrientation) {\n      self.graphDim.height += enteringDomainDim - exitingDomainDim;\n    } else {\n      self.graphDim.width += enteringDomainDim - exitingDomainDim;\n    } // At the time of exit, domainsWidth and domainsHeight already automatically shifted\n\n\n    domainSvg.exit().transition().duration(options.animationDuration).attr('x', function (d) {\n      if (options.verticalOrientation) {\n        return 0;\n      } else {\n        switch (navigationDir) {\n          case self.NAVIGATE_LEFT:\n            return Math.min(self.graphDim.width, tempWidth);\n\n          case self.NAVIGATE_RIGHT:\n            return -w(d, true);\n        }\n      }\n    }).attr('y', function (d) {\n      if (options.verticalOrientation) {\n        switch (navigationDir) {\n          case self.NAVIGATE_LEFT:\n            return Math.min(self.graphDim.height, tempHeight);\n\n          case self.NAVIGATE_RIGHT:\n            return -h(d, true);\n        }\n      } else {\n        return 0;\n      }\n    }).remove(); // Resize the root container\n\n    self.resize();\n  };\n};\n\nCalHeatMap.prototype = {\n  /**\n   * Validate and merge user settings with default settings\n   *\n   * @param  {object} settings User settings\n   * @return {bool} False if settings contains error\n   */\n\n  /* jshint maxstatements:false */\n  init: function (settings) {\n    'use strict';\n\n    var parent = this;\n    var options = parent.options = mergeRecursive(parent.options, settings); // Fatal errors\n    // Stop script execution on error\n\n    validateDomainType();\n    validateSelector(options.itemSelector, false, 'itemSelector');\n\n    if (parent.allowedDataType.indexOf(options.dataType) === -1) {\n      throw new Error(\"The data type '\" + options.dataType + \"' is not valid data type\");\n    }\n\n    if (d3.select(options.itemSelector)[0][0] === null) {\n      throw new Error(\"The node '\" + options.itemSelector + \"' specified in itemSelector does not exists\");\n    }\n\n    try {\n      validateSelector(options.nextSelector, true, 'nextSelector');\n      validateSelector(options.previousSelector, true, 'previousSelector');\n    } catch (error) {\n      console.log(error.message);\n      return false;\n    } // If other settings contains error, will fallback to default\n\n\n    if (!settings.hasOwnProperty('subDomain')) {\n      this.options.subDomain = getOptimalSubDomain(settings.domain);\n    }\n\n    if (typeof options.itemNamespace !== 'string' || options.itemNamespace === '') {\n      console.log('itemNamespace can not be empty, falling back to cal-heatmap');\n      options.itemNamespace = 'cal-heatmap';\n    } // Don't touch these settings\n\n\n    var s = ['data', 'onComplete', 'onClick', 'afterLoad', 'afterLoadData', 'afterLoadPreviousDomain', 'afterLoadNextDomain', 'afterUpdate'];\n\n    for (var k in s) {\n      if (settings.hasOwnProperty(s[k])) {\n        options[s[k]] = settings[s[k]];\n      }\n    }\n\n    options.subDomainDateFormat = typeof options.subDomainDateFormat === 'string' || typeof options.subDomainDateFormat === 'function' ? options.subDomainDateFormat : this._domainType[options.subDomain].format.date;\n    options.domainLabelFormat = typeof options.domainLabelFormat === 'string' || typeof options.domainLabelFormat === 'function' ? options.domainLabelFormat : this._domainType[options.domain].format.legend;\n    options.subDomainTextFormat = typeof options.subDomainTextFormat === 'string' && options.subDomainTextFormat !== '' || typeof options.subDomainTextFormat === 'function' ? options.subDomainTextFormat : null;\n    options.domainMargin = expandMarginSetting(options.domainMargin);\n    options.legendMargin = expandMarginSetting(options.legendMargin);\n    options.highlight = parent.expandDateSetting(options.highlight);\n    options.itemName = expandItemName(options.itemName);\n    options.colLimit = parseColLimit(options.colLimit);\n    options.rowLimit = parseRowLimit(options.rowLimit);\n\n    if (!settings.hasOwnProperty('legendMargin')) {\n      autoAddLegendMargin();\n    }\n\n    autoAlignLabel();\n    /**\n     * Validate that a queryString is valid\n     *\n     * @param  {Element|string|bool} selector   The queryString to test\n     * @param  {bool}  canBeFalse  Whether false is an accepted and valid value\n     * @param  {string} name    Name of the tested selector\n     * @throws {Error}        If the selector is not valid\n     * @return {bool}        True if the selector is a valid queryString\n     */\n\n    function validateSelector(selector, canBeFalse, name) {\n      if ((canBeFalse && selector === false || selector instanceof Element || typeof selector === 'string') && selector !== '') {\n        return true;\n      }\n\n      throw new Error('The ' + name + ' is not valid');\n    }\n    /**\n     * Return the optimal subDomain for the specified domain\n     *\n     * @param  {string} domain a domain name\n     * @return {string}        the subDomain name\n     */\n\n\n    function getOptimalSubDomain(domain) {\n      switch (domain) {\n        case 'year':\n          return 'month';\n\n        case 'month':\n          return 'day';\n\n        case 'week':\n          return 'day';\n\n        case 'day':\n          return 'hour';\n\n        default:\n          return 'min';\n      }\n    }\n    /**\n     * Ensure that the domain and subdomain are valid\n     *\n     * @throw {Error} when domain or subdomain are not valid\n     * @return {bool} True if domain and subdomain are valid and compatible\n     */\n\n\n    function validateDomainType() {\n      if (!parent._domainType.hasOwnProperty(options.domain) || options.domain === 'min' || options.domain.substring(0, 2) === 'x_') {\n        throw new Error(\"The domain '\" + options.domain + \"' is not valid\");\n      }\n\n      if (!parent._domainType.hasOwnProperty(options.subDomain) || options.subDomain === 'year') {\n        throw new Error(\"The subDomain '\" + options.subDomain + \"' is not valid\");\n      }\n\n      if (parent._domainType[options.domain].level <= parent._domainType[options.subDomain].level) {\n        throw new Error(\"'\" + options.subDomain + \"' is not a valid subDomain to '\" + options.domain + \"'\");\n      }\n\n      return true;\n    }\n    /**\n     * Fine-tune the label alignement depending on its position\n     *\n     * @return void\n     */\n\n\n    function autoAlignLabel() {\n      // Auto-align label, depending on it's position\n      if (!settings.hasOwnProperty('label') || settings.hasOwnProperty('label') && !settings.label.hasOwnProperty('align')) {\n        switch (options.label.position) {\n          case 'left':\n            options.label.align = 'right';\n            break;\n\n          case 'right':\n            options.label.align = 'left';\n            break;\n\n          default:\n            options.label.align = 'center';\n        }\n\n        if (options.label.rotate === 'left') {\n          options.label.align = 'right';\n        } else if (options.label.rotate === 'right') {\n          options.label.align = 'left';\n        }\n      }\n\n      if (!settings.hasOwnProperty('label') || settings.hasOwnProperty('label') && !settings.label.hasOwnProperty('offset')) {\n        if (options.label.position === 'left' || options.label.position === 'right') {\n          options.label.offset = {\n            x: 10,\n            y: 15\n          };\n        }\n      }\n    }\n    /**\n     * If not specified, add some margin around the legend depending on its position\n     *\n     * @return void\n     */\n\n\n    function autoAddLegendMargin() {\n      switch (options.legendVerticalPosition) {\n        case 'top':\n          options.legendMargin[2] = parent.DEFAULT_LEGEND_MARGIN;\n          break;\n\n        case 'bottom':\n          options.legendMargin[0] = parent.DEFAULT_LEGEND_MARGIN;\n          break;\n\n        case 'middle':\n        case 'center':\n          options.legendMargin[options.legendHorizontalPosition === 'right' ? 3 : 1] = parent.DEFAULT_LEGEND_MARGIN;\n      }\n    }\n    /**\n     * Expand a number of an array of numbers to an usable 4 values array\n     *\n     * @param  {integer|array} value\n     * @return {array}        array\n     */\n\n\n    function expandMarginSetting(value) {\n      if (typeof value === 'number') {\n        value = [value];\n      }\n\n      if (!Array.isArray(value)) {\n        console.log('Margin only takes an integer or an array of integers');\n        value = [0];\n      }\n\n      switch (value.length) {\n        case 1:\n          return [value[0], value[0], value[0], value[0]];\n\n        case 2:\n          return [value[0], value[1], value[0], value[1]];\n\n        case 3:\n          return [value[0], value[1], value[2], value[1]];\n\n        case 4:\n          return value;\n\n        default:\n          return value.slice(0, 4);\n      }\n    }\n    /**\n     * Convert a string to an array like [singular-form, plural-form]\n     *\n     * @param  {string|array} value Date to convert\n     * @return {array}       An array like [singular-form, plural-form]\n     */\n\n\n    function expandItemName(value) {\n      if (typeof value === 'string') {\n        return [value, value + (value !== '' ? 's' : '')];\n      }\n\n      if (Array.isArray(value)) {\n        if (value.length === 1) {\n          return [value[0], value[0] + 's'];\n        } else if (value.length > 2) {\n          return value.slice(0, 2);\n        }\n\n        return value;\n      }\n\n      return ['item', 'items'];\n    }\n\n    function parseColLimit(value) {\n      return value > 0 ? value : null;\n    }\n\n    function parseRowLimit(value) {\n      if (value > 0 && options.colLimit > 0) {\n        console.log('colLimit and rowLimit are mutually exclusive, rowLimit will be ignored');\n        return null;\n      }\n\n      return value > 0 ? value : null;\n    }\n\n    return this._init();\n  },\n\n  /**\n   * Convert a keyword or an array of keyword/date to an array of date objects\n   *\n   * @param  {string|array|Date} value Data to convert\n   * @return {array}       An array of Dates\n   */\n  expandDateSetting: function (value) {\n    'use strict';\n\n    if (!Array.isArray(value)) {\n      value = [value];\n    }\n\n    return value.map(function (data) {\n      if (data === 'now') {\n        return new Date();\n      }\n\n      if (data instanceof Date) {\n        return data;\n      }\n\n      return false;\n    }).filter(function (d) {\n      return d !== false;\n    });\n  },\n\n  /**\n   * Fill the calendar by coloring the cells\n   *\n   * @param array svg An array of html node to apply the transformation to (optional)\n   *                  It's used to limit the painting to only a subset of the calendar\n   * @return void\n   */\n  fill: function (svg) {\n    'use strict';\n\n    var parent = this;\n    var options = parent.options;\n\n    if (arguments.length === 0) {\n      svg = parent.root.selectAll('.graph-domain');\n    }\n\n    var rect = svg.selectAll('svg').selectAll('g').data(function (d) {\n      return parent._domains.get(d);\n    });\n    /**\n     * Colorize the cell via a style attribute if enabled\n     */\n\n    function addStyle(element) {\n      if (parent.legendScale === null) {\n        return false;\n      }\n\n      element.attr('fill', function (d) {\n        if (d.v === null && options.hasOwnProperty('considerMissingDataAsZero') && !options.considerMissingDataAsZero) {\n          if (options.legendColors.hasOwnProperty('base')) {\n            return options.legendColors.base;\n          }\n        }\n\n        if (options.legendColors !== null && options.legendColors.hasOwnProperty('empty') && (d.v === 0 || d.v === null && options.hasOwnProperty('considerMissingDataAsZero') && options.considerMissingDataAsZero)) {\n          return options.legendColors.empty;\n        }\n\n        if (d.v < 0 && options.legend[0] > 0 && options.legendColors !== null && options.legendColors.hasOwnProperty('overflow')) {\n          return options.legendColors.overflow;\n        }\n\n        return parent.legendScale(Math.min(d.v, options.legend[options.legend.length - 1]));\n      });\n    }\n\n    rect.transition().duration(options.animationDuration).select('rect').attr('class', function (d) {\n      var htmlClass = parent.getHighlightClassName(d.t).trim().split(' ');\n      var pastDate = parent.dateIsLessThan(d.t, new Date());\n      var sameDate = parent.dateIsEqual(d.t, new Date());\n\n      if (parent.legendScale === null || d.v === null && options.hasOwnProperty('considerMissingDataAsZero') && !options.considerMissingDataAsZero && !options.legendColors.hasOwnProperty('base')) {\n        htmlClass.push('graph-rect');\n      }\n\n      if (sameDate) {\n        htmlClass.push('now');\n      } else if (!pastDate) {\n        htmlClass.push('future');\n      }\n\n      if (d.v !== null) {\n        htmlClass.push(parent.Legend.getClass(d.v, parent.legendScale === null));\n      } else if (options.considerMissingDataAsZero && pastDate) {\n        htmlClass.push(parent.Legend.getClass(0, parent.legendScale === null));\n      }\n\n      if (options.onClick !== null) {\n        htmlClass.push('hover_cursor');\n      }\n\n      return htmlClass.join(' ');\n    }).call(addStyle);\n    rect.transition().duration(options.animationDuration).select('title').text(function (d) {\n      return parent.getSubDomainTitle(d);\n    });\n\n    function formatSubDomainText(element) {\n      if (typeof options.subDomainTextFormat === 'function') {\n        element.text(function (d) {\n          return options.subDomainTextFormat(d.t, d.v);\n        });\n      }\n    }\n    /**\n     * Change the subDomainText class if necessary\n     * Also change the text, e.g when text is representing the value\n     * instead of the date\n     */\n\n\n    rect.transition().duration(options.animationDuration).select('text').attr('class', function (d) {\n      return 'subdomain-text' + parent.getHighlightClassName(d.t);\n    }).call(formatSubDomainText);\n  },\n\n  /**\n   * Sprintf like function.\n   * Replaces placeholders {0} in string with values from provided object.\n   *\n   * @param string formatted String containing placeholders.\n   * @param object args Object with properties to replace placeholders in string.\n   *\n   * @return String\n   */\n  formatStringWithObject: function (formatted, args) {\n    'use strict';\n\n    for (var prop in args) {\n      if (args.hasOwnProperty(prop)) {\n        var regexp = new RegExp('\\\\{' + prop + '\\\\}', 'gi');\n        formatted = formatted.replace(regexp, args[prop]);\n      }\n    }\n\n    return formatted;\n  },\n  // =========================================================================//\n  // EVENTS CALLBACK                              //\n  // =========================================================================//\n\n  /**\n   * Helper method for triggering event callback\n   *\n   * @param  string  eventName       Name of the event to trigger\n   * @param  array  successArgs     List of argument to pass to the callback\n   * @param  boolean  skip      Whether to skip the event triggering\n   * @return mixed  True when the triggering was skipped, false on error, else the callback function\n   */\n  triggerEvent: function (eventName, successArgs, skip) {\n    'use strict';\n\n    if (arguments.length === 3 && skip || this.options[eventName] === null) {\n      return true;\n    }\n\n    if (typeof this.options[eventName] === 'function') {\n      if (typeof successArgs === 'function') {\n        successArgs = successArgs();\n      }\n\n      return this.options[eventName].apply(this, successArgs);\n    } else {\n      console.log('Provided callback for ' + eventName + ' is not a function.');\n      return false;\n    }\n  },\n\n  /**\n   * Event triggered on a mouse click on a subDomain cell\n   *\n   * @param  Date    d    Date of the subdomain block\n   * @param  int    itemNb  Number of items in that date\n   */\n  onClick: function (d, itemNb) {\n    'use strict';\n\n    return this.triggerEvent('onClick', [d, itemNb]);\n  },\n\n  /**\n   * Event triggered after drawing the calendar, byt before filling it with data\n   */\n  afterLoad: function () {\n    'use strict';\n\n    return this.triggerEvent('afterLoad');\n  },\n\n  /**\n   * Event triggered after completing drawing and filling the calendar\n   */\n  onComplete: function () {\n    'use strict';\n\n    var response = this.triggerEvent('onComplete', [], this._completed);\n    this._completed = true;\n    return response;\n  },\n\n  /**\n   * Event triggered after shifting the calendar one domain back\n   *\n   * @param  Date    start  Domain start date\n   * @param  Date    end    Domain end date\n   */\n  afterLoadPreviousDomain: function (start) {\n    'use strict';\n\n    var parent = this;\n    return this.triggerEvent('afterLoadPreviousDomain', function () {\n      var subDomain = parent.getSubDomain(start);\n      return [subDomain.shift(), subDomain.pop()];\n    });\n  },\n\n  /**\n   * Event triggered after shifting the calendar one domain above\n   *\n   * @param  Date    start  Domain start date\n   * @param  Date    end    Domain end date\n   */\n  afterLoadNextDomain: function (start) {\n    'use strict';\n\n    var parent = this;\n    return this.triggerEvent('afterLoadNextDomain', function () {\n      var subDomain = parent.getSubDomain(start);\n      return [subDomain.shift(), subDomain.pop()];\n    });\n  },\n\n  /**\n   * Event triggered after loading the leftmost domain allowed by minDate\n   *\n   * @param  boolean  reached True if the leftmost domain was reached\n   */\n  onMinDomainReached: function (reached) {\n    'use strict';\n\n    this._minDomainReached = reached;\n    return this.triggerEvent('onMinDomainReached', [reached]);\n  },\n\n  /**\n   * Event triggered after loading the rightmost domain allowed by maxDate\n   *\n   * @param  boolean  reached True if the rightmost domain was reached\n   */\n  onMaxDomainReached: function (reached) {\n    'use strict';\n\n    this._maxDomainReached = reached;\n    return this.triggerEvent('onMaxDomainReached', [reached]);\n  },\n  checkIfMinDomainIsReached: function (date, upperBound) {\n    'use strict';\n\n    if (this.minDomainIsReached(date)) {\n      this.onMinDomainReached(true);\n    }\n\n    if (arguments.length === 2) {\n      if (this._maxDomainReached && !this.maxDomainIsReached(upperBound)) {\n        this.onMaxDomainReached(false);\n      }\n    }\n  },\n  checkIfMaxDomainIsReached: function (date, lowerBound) {\n    'use strict';\n\n    if (this.maxDomainIsReached(date)) {\n      this.onMaxDomainReached(true);\n    }\n\n    if (arguments.length === 2) {\n      if (this._minDomainReached && !this.minDomainIsReached(lowerBound)) {\n        this.onMinDomainReached(false);\n      }\n    }\n  },\n  afterUpdate: function () {\n    'use strict';\n\n    return this.triggerEvent('afterUpdate');\n  },\n  // =========================================================================//\n  // FORMATTER                                //\n  // =========================================================================//\n  formatNumber: d3.format(',g'),\n  formatDate: function (d, format) {\n    'use strict';\n\n    if (arguments.length < 2) {\n      format = 'title';\n    }\n\n    if (typeof format === 'function') {\n      return format(d);\n    } else {\n      var f = d3.time.format(format);\n      return f(d);\n    }\n  },\n  getSubDomainTitle: function (d) {\n    'use strict';\n\n    if (d.v === null && !this.options.considerMissingDataAsZero) {\n      return this.formatStringWithObject(this.options.subDomainTitleFormat.empty, {\n        date: this.formatDate(new Date(d.t), this.options.subDomainDateFormat)\n      });\n    } else {\n      var value = d.v; // Consider null as 0\n\n      if (value === null && this.options.considerMissingDataAsZero) {\n        value = 0;\n      }\n\n      return this.formatStringWithObject(this.options.subDomainTitleFormat.filled, {\n        count: this.formatNumber(value),\n        name: this.options.itemName[value !== 1 ? 1 : 0],\n        connector: this._domainType[this.options.subDomain].format.connector,\n        date: this.formatDate(new Date(d.t), this.options.subDomainDateFormat)\n      });\n    }\n  },\n  // =========================================================================//\n  // DOMAIN NAVIGATION                            //\n  // =========================================================================//\n\n  /**\n   * Shift the calendar one domain forward\n   *\n   * The new domain is loaded only if it's not beyond maxDate\n   *\n   * @param int n Number of domains to load\n   * @return bool True if the next domain was loaded, else false\n   */\n  loadNextDomain: function (n) {\n    'use strict';\n\n    if (this._maxDomainReached || n === 0) {\n      return false;\n    }\n\n    var bound = this.loadNewDomains(this.NAVIGATE_RIGHT, this.getDomain(this.getNextDomain(), n));\n    this.afterLoadNextDomain(bound.end);\n    this.checkIfMaxDomainIsReached(this.getNextDomain().getTime(), bound.start);\n    return true;\n  },\n\n  /**\n   * Shift the calendar one domain backward\n   *\n   * The previous domain is loaded only if it's not beyond the minDate\n   *\n   * @param int n Number of domains to load\n   * @return bool True if the previous domain was loaded, else false\n   */\n  loadPreviousDomain: function (n) {\n    'use strict';\n\n    if (this._minDomainReached || n === 0) {\n      return false;\n    }\n\n    var bound = this.loadNewDomains(this.NAVIGATE_LEFT, this.getDomain(this.getDomainKeys()[0], -n).reverse());\n    this.afterLoadPreviousDomain(bound.start);\n    this.checkIfMinDomainIsReached(bound.start, bound.end);\n    return true;\n  },\n  loadNewDomains: function (direction, newDomains) {\n    'use strict';\n\n    var parent = this;\n    var backward = direction === this.NAVIGATE_LEFT;\n    var i = -1;\n    var total = newDomains.length;\n    var domains = this.getDomainKeys();\n\n    function buildSubDomain(d) {\n      return {\n        t: parent._domainType[parent.options.subDomain].extractUnit(d),\n        v: null\n      };\n    } // Remove out of bound domains from list of new domains to prepend\n\n\n    while (++i < total) {\n      if (backward && this.minDomainIsReached(newDomains[i])) {\n        newDomains = newDomains.slice(0, i + 1);\n        break;\n      }\n\n      if (!backward && this.maxDomainIsReached(newDomains[i])) {\n        newDomains = newDomains.slice(0, i);\n        break;\n      }\n    }\n\n    newDomains = newDomains.slice(-this.options.range);\n\n    for (i = 0, total = newDomains.length; i < total; i += 1) {\n      this._domains.set(newDomains[i].getTime(), this.getSubDomain(newDomains[i]).map(buildSubDomain));\n\n      this._domains.remove(backward ? domains.pop() : domains.shift());\n    }\n\n    domains = this.getDomainKeys();\n\n    if (backward) {\n      newDomains = newDomains.reverse();\n    }\n\n    this.paint(direction);\n    this.getDatas(this.options.data, newDomains[0], this.getSubDomain(newDomains[newDomains.length - 1]).pop(), function () {\n      parent.fill(parent.lastInsertedSvg);\n    });\n    return {\n      start: newDomains[backward ? 0 : 1],\n      end: domains[domains.length - 1]\n    };\n  },\n\n  /**\n   * Return whether a date is inside the scope determined by maxDate\n   *\n   * @param int datetimestamp The timestamp in ms to test\n   * @return bool True if the specified date correspond to the calendar upper bound\n   */\n  maxDomainIsReached: function (datetimestamp) {\n    'use strict';\n\n    return this.options.maxDate !== null && this.options.maxDate.getTime() < datetimestamp;\n  },\n\n  /**\n   * Return whether a date is inside the scope determined by minDate\n   *\n   * @param int datetimestamp The timestamp in ms to test\n   * @return bool True if the specified date correspond to the calendar lower bound\n   */\n  minDomainIsReached: function (datetimestamp) {\n    'use strict';\n\n    return this.options.minDate !== null && this.options.minDate.getTime() >= datetimestamp;\n  },\n\n  /**\n   * Return the list of the calendar's domain timestamp\n   *\n   * @return Array a sorted array of timestamp\n   */\n  getDomainKeys: function () {\n    'use strict';\n\n    return this._domains.keys().map(function (d) {\n      return parseInt(d, 10);\n    }).sort(function (a, b) {\n      return a - b;\n    });\n  },\n  // =========================================================================//\n  // POSITIONNING                                //\n  // =========================================================================//\n  positionSubDomainX: function (d) {\n    'use strict';\n\n    var index = this._domainType[this.options.subDomain].position.x(new Date(d));\n\n    return index * this.options.cellSize + index * this.options.cellPadding;\n  },\n  positionSubDomainY: function (d) {\n    'use strict';\n\n    var index = this._domainType[this.options.subDomain].position.y(new Date(d));\n\n    return index * this.options.cellSize + index * this.options.cellPadding;\n  },\n  getSubDomainColumnNumber: function (d) {\n    'use strict';\n\n    if (this.options.rowLimit > 0) {\n      var i = this._domainType[this.options.subDomain].maxItemNumber;\n\n      if (typeof i === 'function') {\n        i = i(d);\n      }\n\n      return Math.ceil(i / this.options.rowLimit);\n    }\n\n    var j = this._domainType[this.options.subDomain].defaultColumnNumber;\n\n    if (typeof j === 'function') {\n      j = j(d);\n    }\n\n    return this.options.colLimit || j;\n  },\n  getSubDomainRowNumber: function (d) {\n    'use strict';\n\n    if (this.options.colLimit > 0) {\n      var i = this._domainType[this.options.subDomain].maxItemNumber;\n\n      if (typeof i === 'function') {\n        i = i(d);\n      }\n\n      return Math.ceil(i / this.options.colLimit);\n    }\n\n    var j = this._domainType[this.options.subDomain].defaultRowNumber;\n\n    if (typeof j === 'function') {\n      j = j(d);\n    }\n\n    return this.options.rowLimit || j;\n  },\n\n  /**\n   * Return a classname if the specified date should be highlighted\n   *\n   * @param  timestamp date Date of the current subDomain\n   * @return String the highlight class\n   */\n  getHighlightClassName: function (d) {\n    'use strict';\n\n    d = new Date(d);\n\n    if (this.options.highlight.length > 0) {\n      for (var i in this.options.highlight) {\n        if (this.dateIsEqual(this.options.highlight[i], d)) {\n          return this.isNow(this.options.highlight[i]) ? ' highlight-now' : ' highlight';\n        }\n      }\n    }\n\n    return '';\n  },\n\n  /**\n   * Return whether the specified date is now,\n   * according to the type of subdomain\n   *\n   * @param  Date d The date to compare\n   * @return bool True if the date correspond to a subdomain cell\n   */\n  isNow: function (d) {\n    'use strict';\n\n    return this.dateIsEqual(d, new Date());\n  },\n\n  /**\n   * Return whether 2 dates are equals\n   * This function is subdomain-aware,\n   * and dates comparison are dependent of the subdomain\n   *\n   * @param  Date dateA First date to compare\n   * @param  Date dateB Secon date to compare\n   * @return bool true if the 2 dates are equals\n   */\n\n  /* jshint maxcomplexity: false */\n  dateIsEqual: function (dateA, dateB) {\n    'use strict';\n\n    if (!(dateA instanceof Date)) {\n      dateA = new Date(dateA);\n    }\n\n    if (!(dateB instanceof Date)) {\n      dateB = new Date(dateB);\n    }\n\n    switch (this.options.subDomain) {\n      case 'x_min':\n      case 'min':\n        return dateA.getFullYear() === dateB.getFullYear() && dateA.getMonth() === dateB.getMonth() && dateA.getDate() === dateB.getDate() && dateA.getHours() === dateB.getHours() && dateA.getMinutes() === dateB.getMinutes();\n\n      case 'x_hour':\n      case 'hour':\n        return dateA.getFullYear() === dateB.getFullYear() && dateA.getMonth() === dateB.getMonth() && dateA.getDate() === dateB.getDate() && dateA.getHours() === dateB.getHours();\n\n      case 'x_day':\n      case 'day':\n        return dateA.getFullYear() === dateB.getFullYear() && dateA.getMonth() === dateB.getMonth() && dateA.getDate() === dateB.getDate();\n\n      case 'x_week':\n      case 'week':\n        return dateA.getFullYear() === dateB.getFullYear() && this.getWeekNumber(dateA) === this.getWeekNumber(dateB);\n\n      case 'x_month':\n      case 'month':\n        return dateA.getFullYear() === dateB.getFullYear() && dateA.getMonth() === dateB.getMonth();\n\n      default:\n        return false;\n    }\n  },\n\n  /**\n   * Returns wether or not dateA is less than or equal to dateB. This function is subdomain aware.\n   * Performs automatic conversion of values.\n   * @param dateA may be a number or a Date\n   * @param dateB may be a number or a Date\n   * @returns {boolean}\n   */\n  dateIsLessThan: function (dateA, dateB) {\n    'use strict';\n\n    if (!(dateA instanceof Date)) {\n      dateA = new Date(dateA);\n    }\n\n    if (!(dateB instanceof Date)) {\n      dateB = new Date(dateB);\n    }\n\n    function normalizedMillis(date, subdomain) {\n      switch (subdomain) {\n        case 'x_min':\n        case 'min':\n          return new Date(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes()).getTime();\n\n        case 'x_hour':\n        case 'hour':\n          return new Date(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours()).getTime();\n\n        case 'x_day':\n        case 'day':\n          return new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime();\n\n        case 'x_week':\n        case 'week':\n        case 'x_month':\n        case 'month':\n          return new Date(date.getFullYear(), date.getMonth()).getTime();\n\n        default:\n          return date.getTime();\n      }\n    }\n\n    return normalizedMillis(dateA, this.options.subDomain) < normalizedMillis(dateB, this.options.subDomain);\n  },\n  // =========================================================================//\n  // DATE COMPUTATION                              //\n  // =========================================================================//\n\n  /**\n   * Return the day of the year for the date\n   * @param  Date\n   * @return  int Day of the year [1,366]\n   */\n  getDayOfYear: d3.time.format('%j'),\n\n  /**\n   * Return the week number of the year\n   * Monday as the first day of the week\n   * @return int  Week number [0-53]\n   */\n  getWeekNumber: function (d) {\n    'use strict';\n\n    var f = this.options.weekStartOnMonday === true ? d3.time.format('%W') : d3.time.format('%U');\n    return f(d);\n  },\n\n  /**\n   * Return the week number, relative to its month\n   *\n   * @param  int|Date d Date or timestamp in milliseconds\n   * @return int Week number, relative to the month [0-5]\n   */\n  getMonthWeekNumber: function (d) {\n    'use strict';\n\n    if (typeof d === 'number') {\n      d = new Date(d);\n    }\n\n    var monthFirstWeekNumber = this.getWeekNumber(new Date(d.getFullYear(), d.getMonth()));\n    return this.getWeekNumber(d) - monthFirstWeekNumber - 1;\n  },\n\n  /**\n   * Return the number of weeks in the dates' year\n   *\n   * @param  int|Date d Date or timestamp in milliseconds\n   * @return int Number of weeks in the date's year\n   */\n  getWeekNumberInYear: function (d) {\n    'use strict';\n\n    if (typeof d === 'number') {\n      d = new Date(d);\n    }\n  },\n\n  /**\n   * Return the number of days in the date's month\n   *\n   * @param  int|Date d Date or timestamp in milliseconds\n   * @return int Number of days in the date's month\n   */\n  getDayCountInMonth: function (d) {\n    'use strict';\n\n    return this.getEndOfMonth(d).getDate();\n  },\n\n  /**\n   * Return the number of days in the date's year\n   *\n   * @param  int|Date d Date or timestamp in milliseconds\n   * @return int Number of days in the date's year\n   */\n  getDayCountInYear: function (d) {\n    'use strict';\n\n    if (typeof d === 'number') {\n      d = new Date(d);\n    }\n\n    return new Date(d.getFullYear(), 1, 29).getMonth() === 1 ? 366 : 365;\n  },\n\n  /**\n   * Get the weekday from a date\n   *\n   * Return the week day number (0-6) of a date,\n   * depending on whether the week start on monday or sunday\n   *\n   * @param  Date d\n   * @return int The week day number (0-6)\n   */\n  getWeekDay: function (d) {\n    'use strict';\n\n    if (this.options.weekStartOnMonday === false) {\n      return d.getDay();\n    }\n\n    return d.getDay() === 0 ? 6 : d.getDay() - 1;\n  },\n\n  /**\n   * Get the last day of the month\n   * @param  Date|int  d  Date or timestamp in milliseconds\n   * @return Date      Last day of the month\n   */\n  getEndOfMonth: function (d) {\n    'use strict';\n\n    if (typeof d === 'number') {\n      d = new Date(d);\n    }\n\n    return new Date(d.getFullYear(), d.getMonth() + 1, 0);\n  },\n\n  /**\n   *\n   * @param  Date date\n   * @param  int count\n   * @param  string step\n   * @return Date\n   */\n  jumpDate: function (date, count, step) {\n    'use strict';\n\n    var d = new Date(date);\n\n    switch (step) {\n      case 'hour':\n        d.setHours(d.getHours() + count);\n        break;\n\n      case 'day':\n        d.setHours(d.getHours() + count * 24);\n        break;\n\n      case 'week':\n        d.setHours(d.getHours() + count * 24 * 7);\n        break;\n\n      case 'month':\n        d.setMonth(d.getMonth() + count);\n        break;\n\n      case 'year':\n        d.setFullYear(d.getFullYear() + count);\n    }\n\n    return new Date(d);\n  },\n  // =========================================================================//\n  // DOMAIN COMPUTATION                            //\n  // =========================================================================//\n\n  /**\n   * Return all the minutes between 2 dates\n   *\n   * @param  Date  d  date  A date\n   * @param  int|date  range  Number of minutes in the range, or a stop date\n   * @return array  An array of minutes\n   */\n  getMinuteDomain: function (d, range) {\n    'use strict';\n\n    var start = new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours());\n    var stop = null;\n\n    if (range instanceof Date) {\n      stop = new Date(range.getFullYear(), range.getMonth(), range.getDate(), range.getHours());\n    } else {\n      stop = new Date(+start + range * 1000 * 60);\n    }\n\n    return d3.time.minutes(Math.min(start, stop), Math.max(start, stop));\n  },\n\n  /**\n   * Return all the hours between 2 dates\n   *\n   * @param  Date  d  A date\n   * @param  int|date  range  Number of hours in the range, or a stop date\n   * @return array  An array of hours\n   */\n  getHourDomain: function (d, range) {\n    'use strict';\n\n    var start = new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours());\n    var stop = null;\n\n    if (range instanceof Date) {\n      stop = new Date(range.getFullYear(), range.getMonth(), range.getDate(), range.getHours());\n    } else {\n      stop = new Date(start);\n      stop.setHours(stop.getHours() + range);\n    }\n\n    var domains = d3.time.hours(Math.min(start, stop), Math.max(start, stop)); // Passing from DST to standard time\n    // If there are 25 hours, let's compress the duplicate hours\n\n    var i = 0;\n    var total = domains.length;\n\n    for (i = 0; i < total; i += 1) {\n      if (i > 0 && domains[i].getHours() === domains[i - 1].getHours()) {\n        this.DSTDomain.push(domains[i].getTime());\n        domains.splice(i, 1);\n        break;\n      }\n    } // d3.time.hours is returning more hours than needed when changing\n    // from DST to standard time, because there is really 2 hours between\n    // 1am and 2am!\n\n\n    if (typeof range === 'number' && domains.length > Math.abs(range)) {\n      domains.splice(domains.length - 1, 1);\n    }\n\n    return domains;\n  },\n\n  /**\n   * Return all the days between 2 dates\n   *\n   * @param  Date    d    A date\n   * @param  int|date  range  Number of days in the range, or a stop date\n   * @return array  An array of weeks\n   */\n  getDayDomain: function (d, range) {\n    'use strict';\n\n    var start = new Date(d.getFullYear(), d.getMonth(), d.getDate());\n    var stop = null;\n\n    if (range instanceof Date) {\n      stop = new Date(range.getFullYear(), range.getMonth(), range.getDate());\n    } else {\n      stop = new Date(start);\n      stop = new Date(stop.setDate(stop.getDate() + parseInt(range, 10)));\n    }\n\n    return d3.time.days(Math.min(start, stop), Math.max(start, stop));\n  },\n\n  /**\n   * Return all the weeks between 2 dates\n   *\n   * @param  Date  d  A date\n   * @param  int|date  range  Number of minutes in the range, or a stop date\n   * @return array  An array of weeks\n   */\n  getWeekDomain: function (d, range) {\n    'use strict';\n\n    var weekStart;\n\n    if (this.options.weekStartOnMonday === false) {\n      weekStart = new Date(d.getFullYear(), d.getMonth(), d.getDate() - d.getDay());\n    } else {\n      if (d.getDay() === 1) {\n        weekStart = new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      } else if (d.getDay() === 0) {\n        weekStart = new Date(d.getFullYear(), d.getMonth(), d.getDate());\n        weekStart.setDate(weekStart.getDate() - 6);\n      } else {\n        weekStart = new Date(d.getFullYear(), d.getMonth(), d.getDate() - d.getDay() + 1);\n      }\n    }\n\n    var endDate = new Date(weekStart);\n    var stop = range;\n\n    if (typeof range !== 'object') {\n      stop = new Date(endDate.setDate(endDate.getDate() + range * 7));\n    }\n\n    return this.options.weekStartOnMonday === true ? d3.time.mondays(Math.min(weekStart, stop), Math.max(weekStart, stop)) : d3.time.sundays(Math.min(weekStart, stop), Math.max(weekStart, stop));\n  },\n\n  /**\n   * Return all the months between 2 dates\n   *\n   * @param  Date    d    A date\n   * @param  int|date  range  Number of months in the range, or a stop date\n   * @return array  An array of months\n   */\n  getMonthDomain: function (d, range) {\n    'use strict';\n\n    var start = new Date(d.getFullYear(), d.getMonth());\n    var stop = null;\n\n    if (range instanceof Date) {\n      stop = new Date(range.getFullYear(), range.getMonth());\n    } else {\n      stop = new Date(start);\n      stop = stop.setMonth(stop.getMonth() + range);\n    }\n\n    return d3.time.months(Math.min(start, stop), Math.max(start, stop));\n  },\n\n  /**\n   * Return all the years between 2 dates\n   *\n   * @param  Date  d  date  A date\n   * @param  int|date  range  Number of minutes in the range, or a stop date\n   * @return array  An array of hours\n   */\n  getYearDomain: function (d, range) {\n    'use strict';\n\n    var start = new Date(d.getFullYear(), 0);\n    var stop = null;\n\n    if (range instanceof Date) {\n      stop = new Date(range.getFullYear(), 0);\n    } else {\n      stop = new Date(d.getFullYear() + range, 0);\n    }\n\n    return d3.time.years(Math.min(start, stop), Math.max(start, stop));\n  },\n\n  /**\n   * Get an array of domain start dates\n   *\n   * @param  int|Date date A random date included in the wanted domain\n   * @param  int|Date range Number of dates to get, or a stop date\n   * @return Array of dates\n   */\n  getDomain: function (date, range) {\n    'use strict';\n\n    if (typeof date === 'number') {\n      date = new Date(date);\n    }\n\n    if (arguments.length < 2) {\n      range = this.options.range;\n    }\n\n    switch (this.options.domain) {\n      case 'hour':\n        var domains = this.getHourDomain(date, range); // Case where an hour is missing, when passing from standard time to DST\n        // Missing hour is perfectly acceptabl in subDomain, but not in domains\n\n        if (typeof range === 'number' && domains.length < range) {\n          if (range > 0) {\n            domains.push(this.getHourDomain(domains[domains.length - 1], 2)[1]);\n          } else {\n            domains.shift(this.getHourDomain(domains[0], -2)[0]);\n          }\n        }\n\n        return domains;\n\n      case 'day':\n        return this.getDayDomain(date, range);\n\n      case 'week':\n        return this.getWeekDomain(date, range);\n\n      case 'month':\n        return this.getMonthDomain(date, range);\n\n      case 'year':\n        return this.getYearDomain(date, range);\n    }\n  },\n\n  /* jshint maxcomplexity: false */\n  getSubDomain: function (date) {\n    'use strict';\n\n    if (typeof date === 'number') {\n      date = new Date(date);\n    }\n\n    var parent = this;\n    /**\n     * @return int\n     */\n\n    var computeDaySubDomainSize = function (date, domain) {\n      switch (domain) {\n        case 'year':\n          return parent.getDayCountInYear(date);\n\n        case 'month':\n          return parent.getDayCountInMonth(date);\n\n        case 'week':\n          return 7;\n      }\n    };\n    /**\n     * @return int\n     */\n\n\n    var computeMinSubDomainSize = function (date, domain) {\n      switch (domain) {\n        case 'hour':\n          return 60;\n\n        case 'day':\n          return 60 * 24;\n\n        case 'week':\n          return 60 * 24 * 7;\n      }\n    };\n    /**\n     * @return int\n     */\n\n\n    var computeHourSubDomainSize = function (date, domain) {\n      switch (domain) {\n        case 'day':\n          return 24;\n\n        case 'week':\n          return 168;\n\n        case 'month':\n          return parent.getDayCountInMonth(date) * 24;\n      }\n    };\n    /**\n     * @return int\n     */\n\n\n    var computeWeekSubDomainSize = function (date, domain) {\n      if (domain === 'month') {\n        var endOfMonth = new Date(date.getFullYear(), date.getMonth() + 1, 0);\n        var endWeekNb = parent.getWeekNumber(endOfMonth);\n        var startWeekNb = parent.getWeekNumber(new Date(date.getFullYear(), date.getMonth()));\n\n        if (startWeekNb > endWeekNb) {\n          startWeekNb = 0;\n          endWeekNb += 1;\n        }\n\n        return endWeekNb - startWeekNb + 1;\n      } else if (domain === 'year') {\n        return parent.getWeekNumber(new Date(date.getFullYear(), 11, 31));\n      }\n    };\n\n    switch (this.options.subDomain) {\n      case 'x_min':\n      case 'min':\n        return this.getMinuteDomain(date, computeMinSubDomainSize(date, this.options.domain));\n\n      case 'x_hour':\n      case 'hour':\n        return this.getHourDomain(date, computeHourSubDomainSize(date, this.options.domain));\n\n      case 'x_day':\n      case 'day':\n        return this.getDayDomain(date, computeDaySubDomainSize(date, this.options.domain));\n\n      case 'x_week':\n      case 'week':\n        return this.getWeekDomain(date, computeWeekSubDomainSize(date, this.options.domain));\n\n      case 'x_month':\n      case 'month':\n        return this.getMonthDomain(date, 12);\n    }\n  },\n\n  /**\n   * Get the n-th next domain after the calendar newest (rightmost) domain\n   * @param  int n\n   * @return Date The start date of the wanted domain\n   */\n  getNextDomain: function (n) {\n    'use strict';\n\n    if (arguments.length === 0) {\n      n = 1;\n    }\n\n    return this.getDomain(this.jumpDate(this.getDomainKeys().pop(), n, this.options.domain), 1)[0];\n  },\n\n  /**\n   * Get the n-th domain before the calendar oldest (leftmost) domain\n   * @param  int n\n   * @return Date The start date of the wanted domain\n   */\n  getPreviousDomain: function (n) {\n    'use strict';\n\n    if (arguments.length === 0) {\n      n = 1;\n    }\n\n    return this.getDomain(this.jumpDate(this.getDomainKeys().shift(), -n, this.options.domain), 1)[0];\n  },\n  // =========================================================================//\n  // DATAS                                  //\n  // =========================================================================//\n\n  /**\n   * Fetch and interpret data from the datasource\n   *\n   * @param string|object source\n   * @param Date startDate\n   * @param Date endDate\n   * @param function callback\n   * @param function|boolean afterLoad function used to convert the data into a json object. Use true to use the afterLoad callback\n   * @param updateMode\n   *\n   * @return mixed\n   * - True if there are no data to load\n   * - False if data are loaded asynchronously\n   */\n  getDatas: function (source, startDate, endDate, callback, afterLoad, updateMode) {\n    'use strict';\n\n    var self = this;\n\n    if (arguments.length < 5) {\n      afterLoad = true;\n    }\n\n    if (arguments.length < 6) {\n      updateMode = this.APPEND_ON_UPDATE;\n    }\n\n    var _callback = function (error, data) {\n      if (afterLoad !== false) {\n        if (typeof afterLoad === 'function') {\n          data = afterLoad(data);\n        } else if (typeof self.options.afterLoadData === 'function') {\n          data = self.options.afterLoadData(data);\n        } else {\n          console.log('Provided callback for afterLoadData is not a function.');\n        }\n      } else if (self.options.dataType === 'csv' || self.options.dataType === 'tsv') {\n        data = this.interpretCSV(data);\n      }\n\n      self.parseDatas(data, updateMode, startDate, endDate);\n\n      if (typeof callback === 'function') {\n        callback();\n      }\n    };\n\n    switch (typeof source) {\n      case 'string':\n        if (source === '') {\n          _callback(null, {});\n\n          return true;\n        } else {\n          var url = this.parseURI(source, startDate, endDate);\n          var requestType = 'GET';\n\n          if (self.options.dataPostPayload !== null) {\n            requestType = 'POST';\n          }\n\n          var payload = null;\n\n          if (self.options.dataPostPayload !== null) {\n            payload = this.parseURI(self.options.dataPostPayload, startDate, endDate);\n          }\n\n          var xhr = null;\n\n          switch (this.options.dataType) {\n            case 'json':\n              xhr = d3.json(url);\n              break;\n\n            case 'csv':\n              xhr = d3.csv(url);\n              break;\n\n            case 'tsv':\n              xhr = d3.tsv(url);\n              break;\n\n            case 'txt':\n              xhr = d3.text(url, 'text/plain');\n              break;\n          } // jshint maxdepth:5\n\n\n          if (self.options.dataRequestHeaders !== null) {\n            for (var header in self.options.dataRequestHeaders) {\n              if (self.options.dataRequestHeaders.hasOwnProperty(header)) {\n                xhr.header(header, self.options.dataRequestHeaders[header]);\n              }\n            }\n          }\n\n          xhr.send(requestType, payload, _callback);\n        }\n\n        return false;\n\n      case 'object':\n        if (source === Object(source)) {\n          _callback(null, source);\n\n          return false;\n        }\n\n      /* falls through */\n\n      default:\n        _callback(null, {});\n\n        return true;\n    }\n  },\n\n  /**\n   * Populate the calendar internal data\n   *\n   * @param object data\n   * @param constant updateMode\n   * @param Date startDate\n   * @param Date endDate\n   *\n   * @return void\n   */\n  parseDatas: function (data, updateMode, startDate, endDate) {\n    'use strict';\n\n    if (updateMode === this.RESET_ALL_ON_UPDATE) {\n      this._domains.forEach(function (key, value) {\n        value.forEach(function (element, index, array) {\n          array[index].v = null;\n        });\n      });\n    }\n\n    var temp = {};\n\n    var extractTime = function (d) {\n      return d.t;\n    };\n    /*jshint forin:false */\n\n\n    for (var d in data) {\n      var date = new Date(d * 1000);\n      var domainUnit = this.getDomain(date)[0].getTime(); // The current data belongs to a domain that was compressed\n      // Compress the data for the two duplicate hours into the same hour\n\n      if (this.DSTDomain.indexOf(domainUnit) >= 0) {\n        // Re-assign all data to the first or the second duplicate hours\n        // depending on which is visible\n        if (this._domains.has(domainUnit - 3600 * 1000)) {\n          domainUnit -= 3600 * 1000;\n        }\n      } // Skip if data is not relevant to current domain\n\n\n      if (isNaN(d) || !data.hasOwnProperty(d) || !this._domains.has(domainUnit) || !(domainUnit >= +startDate && domainUnit < +endDate)) {\n        continue;\n      }\n\n      var subDomainsData = this._domains.get(domainUnit);\n\n      if (!temp.hasOwnProperty(domainUnit)) {\n        temp[domainUnit] = subDomainsData.map(extractTime);\n      }\n\n      var index = temp[domainUnit].indexOf(this._domainType[this.options.subDomain].extractUnit(date));\n\n      if (updateMode === this.RESET_SINGLE_ON_UPDATE) {\n        subDomainsData[index].v = data[d];\n      } else {\n        if (!isNaN(subDomainsData[index].v)) {\n          subDomainsData[index].v += data[d];\n        } else {\n          subDomainsData[index].v = data[d];\n        }\n      }\n    }\n  },\n  parseURI: function (str, startDate, endDate) {\n    'use strict'; // Use a timestamp in seconds\n\n    str = str.replace(/\\{\\{t:start\\}\\}/g, startDate.getTime() / 1000);\n    str = str.replace(/\\{\\{t:end\\}\\}/g, endDate.getTime() / 1000); // Use a string date, following the ISO-8601\n\n    str = str.replace(/\\{\\{d:start\\}\\}/g, startDate.toISOString());\n    str = str.replace(/\\{\\{d:end\\}\\}/g, endDate.toISOString());\n    return str;\n  },\n  interpretCSV: function (data) {\n    'use strict';\n\n    var d = {};\n    var keys = Object.keys(data[0]);\n    var i, total;\n\n    for (i = 0, total = data.length; i < total; i += 1) {\n      d[data[i][keys[0]]] = +data[i][keys[1]];\n    }\n\n    return d;\n  },\n\n  /**\n   * Handle the calendar layout and dimension\n   *\n   * Expand and shrink the container depending on its children dimension\n   * Also rearrange the children position depending on their dimension,\n   * and the legend position\n   *\n   * @return void\n   */\n  resize: function () {\n    'use strict';\n\n    var parent = this;\n    var options = parent.options;\n    var legendWidth = options.displayLegend ? parent.Legend.getDim('width') + options.legendMargin[1] + options.legendMargin[3] : 0;\n    var legendHeight = options.displayLegend ? parent.Legend.getDim('height') + options.legendMargin[0] + options.legendMargin[2] : 0;\n    var graphWidth = parent.graphDim.width - options.domainGutter - options.cellPadding;\n    var graphHeight = parent.graphDim.height - options.domainGutter - options.cellPadding;\n    this.root.transition().duration(options.animationDuration).attr('width', function () {\n      if (options.legendVerticalPosition === 'middle' || options.legendVerticalPosition === 'center') {\n        return graphWidth + legendWidth;\n      }\n\n      return Math.max(graphWidth, legendWidth);\n    }).attr('height', function () {\n      if (options.legendVerticalPosition === 'middle' || options.legendVerticalPosition === 'center') {\n        return Math.max(graphHeight, legendHeight);\n      }\n\n      return graphHeight + legendHeight;\n    });\n    this.root.select('.graph').transition().duration(options.animationDuration).attr('y', function () {\n      if (options.legendVerticalPosition === 'top') {\n        return legendHeight;\n      }\n\n      return 0;\n    }).attr('x', function () {\n      if ((options.legendVerticalPosition === 'middle' || options.legendVerticalPosition === 'center') && options.legendHorizontalPosition === 'left') {\n        return legendWidth;\n      }\n\n      return 0;\n    });\n  },\n  // =========================================================================//\n  // PUBLIC API                                //\n  // =========================================================================//\n\n  /**\n   * Shift the calendar forward\n   */\n  next: function (n) {\n    'use strict';\n\n    if (arguments.length === 0) {\n      n = 1;\n    }\n\n    return this.loadNextDomain(n);\n  },\n\n  /**\n   * Shift the calendar backward\n   */\n  previous: function (n) {\n    'use strict';\n\n    if (arguments.length === 0) {\n      n = 1;\n    }\n\n    return this.loadPreviousDomain(n);\n  },\n\n  /**\n   * Jump directly to a specific date\n   *\n   * JumpTo will scroll the calendar until the wanted domain with the specified\n   * date is visible. Unless you set reset to true, the wanted domain\n   * will not necessarily be the first (leftmost) domain of the calendar.\n   *\n   * @param Date date Jump to the domain containing that date\n   * @param bool reset Whether the wanted domain should be the first domain of the calendar\n   * @param bool True of the calendar was scrolled\n   */\n  jumpTo: function (date, reset) {\n    'use strict';\n\n    if (arguments.length < 2) {\n      reset = false;\n    }\n\n    var domains = this.getDomainKeys();\n    var firstDomain = domains[0];\n    var lastDomain = domains[domains.length - 1];\n\n    if (date < firstDomain) {\n      return this.loadPreviousDomain(this.getDomain(firstDomain, date).length);\n    } else {\n      if (reset) {\n        return this.loadNextDomain(this.getDomain(firstDomain, date).length);\n      }\n\n      if (date > lastDomain) {\n        return this.loadNextDomain(this.getDomain(lastDomain, date).length);\n      }\n    }\n\n    return false;\n  },\n\n  /**\n   * Navigate back to the start date\n   *\n   * @since  3.3.8\n   * @return void\n   */\n  rewind: function () {\n    'use strict';\n\n    this.jumpTo(this.options.start, true);\n  },\n\n  /**\n   * Update the calendar with new data\n   *\n   * @param  object|string    dataSource    The calendar's datasource, same type as this.options.data\n   * @param  boolean|function    afterLoad    Whether to execute afterLoad() on the data. Pass directly a function\n   * if you don't want to use the afterLoad() callback\n   */\n  update: function (dataSource, afterLoad, updateMode) {\n    'use strict';\n\n    if (arguments.length === 0) {\n      dataSource = this.options.data;\n    }\n\n    if (arguments.length < 2) {\n      afterLoad = true;\n    }\n\n    if (arguments.length < 3) {\n      updateMode = this.RESET_ALL_ON_UPDATE;\n    }\n\n    var domains = this.getDomainKeys();\n    var self = this;\n    this.getDatas(dataSource, new Date(domains[0]), this.getSubDomain(domains[domains.length - 1]).pop(), function () {\n      self.fill();\n      self.afterUpdate();\n    }, afterLoad, updateMode);\n  },\n\n  /**\n   * Set the legend\n   *\n   * @param array legend an array of integer, representing the different threshold value\n   * @param array colorRange an array of 2 hex colors, for the minimum and maximum colors\n   */\n  setLegend: function () {\n    'use strict';\n\n    var oldLegend = this.options.legend.slice(0);\n\n    if (arguments.length >= 1 && Array.isArray(arguments[0])) {\n      this.options.legend = arguments[0];\n    }\n\n    if (arguments.length >= 2) {\n      if (Array.isArray(arguments[1]) && arguments[1].length >= 2) {\n        this.options.legendColors = [arguments[1][0], arguments[1][1]];\n      } else {\n        this.options.legendColors = arguments[1];\n      }\n    }\n\n    if (arguments.length > 0 && !arrayEquals(oldLegend, this.options.legend) || arguments.length >= 2) {\n      this.Legend.buildColors();\n      this.fill();\n    }\n\n    this.Legend.redraw(this.graphDim.width - this.options.domainGutter - this.options.cellPadding);\n  },\n\n  /**\n   * Remove the legend\n   *\n   * @return bool False if there is no legend to remove\n   */\n  removeLegend: function () {\n    'use strict';\n\n    if (!this.options.displayLegend) {\n      return false;\n    }\n\n    this.options.displayLegend = false;\n    this.Legend.remove();\n    return true;\n  },\n\n  /**\n   * Display the legend\n   *\n   * @return bool False if the legend was already displayed\n   */\n  showLegend: function () {\n    'use strict';\n\n    if (this.options.displayLegend) {\n      return false;\n    }\n\n    this.options.displayLegend = true;\n    this.Legend.redraw(this.graphDim.width - this.options.domainGutter - this.options.cellPadding);\n    return true;\n  },\n\n  /**\n   * Highlight dates\n   *\n   * Add a highlight class to a set of dates\n   *\n   * @since  3.3.5\n   * @param  array Array of dates to highlight\n   * @return bool True if dates were highlighted\n   */\n  highlight: function (args) {\n    'use strict';\n\n    if ((this.options.highlight = this.expandDateSetting(args)).length > 0) {\n      this.fill();\n      return true;\n    }\n\n    return false;\n  },\n\n  /**\n   * Destroy the calendar\n   *\n   * Usage: cal = cal.destroy();\n   *\n   * @since  3.3.6\n   * @param function A callback function to trigger after destroying the calendar\n   * @return null\n   */\n  destroy: function (callback) {\n    'use strict';\n\n    this.root.transition().duration(this.options.animationDuration).attr('width', 0).attr('height', 0).remove().each('end', function () {\n      if (typeof callback === 'function') {\n        callback();\n      } else if (typeof callback !== 'undefined') {\n        console.log('Provided callback for destroy() is not a function.');\n      }\n    });\n    return null;\n  },\n  getSVG: function () {\n    'use strict';\n\n    var styles = {\n      '.cal-heatmap-container': {},\n      '.graph': {},\n      '.graph-rect': {},\n      'rect.highlight': {},\n      'rect.now': {},\n      'rect.highlight-now': {},\n      'text.highlight': {},\n      'text.now': {},\n      'text.highlight-now': {},\n      '.domain-background': {},\n      '.graph-label': {},\n      '.subdomain-text': {},\n      '.q0': {},\n      '.qi': {}\n    };\n\n    for (var j = 1, total = this.options.legend.length + 1; j <= total; j += 1) {\n      styles['.q' + j] = {};\n    }\n\n    var root = this.root;\n    var whitelistStyles = [// SVG specific properties\n    'stroke', 'stroke-width', 'stroke-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-miterlimit', 'fill', 'fill-opacity', 'fill-rule', 'marker', 'marker-start', 'marker-mid', 'marker-end', 'alignement-baseline', 'baseline-shift', 'dominant-baseline', 'glyph-orientation-horizontal', 'glyph-orientation-vertical', 'kerning', 'text-anchor', 'shape-rendering', // Text Specific properties\n    'text-transform', 'font-family', 'font', 'font-size', 'font-weight'];\n\n    var filterStyles = function (attribute, property, value) {\n      if (whitelistStyles.indexOf(property) !== -1) {\n        styles[attribute][property] = value;\n      }\n    };\n\n    var getElement = function (e) {\n      return root.select(e)[0][0];\n    };\n    /* jshint forin:false */\n\n\n    for (var element in styles) {\n      if (!styles.hasOwnProperty(element)) {\n        continue;\n      }\n\n      var dom = getElement(element);\n\n      if (dom === null) {\n        continue;\n      } // The DOM Level 2 CSS way\n\n      /* jshint maxdepth: false */\n\n\n      if ('getComputedStyle' in window) {\n        var cs = getComputedStyle(dom, null);\n\n        if (cs.length !== 0) {\n          for (var i = 0; i < cs.length; i += 1) {\n            filterStyles(element, cs.item(i), cs.getPropertyValue(cs.item(i)));\n          } // Opera workaround. Opera doesn\"t support `item`/`length`\n          // on CSSStyleDeclaration.\n\n        } else {\n          for (var k in cs) {\n            if (cs.hasOwnProperty(k)) {\n              filterStyles(element, k, cs[k]);\n            }\n          }\n        } // The IE way\n\n      } else if ('currentStyle' in dom) {\n        var css = dom.currentStyle;\n\n        for (var p in css) {\n          filterStyles(element, p, css[p]);\n        }\n      }\n    }\n\n    var string = '<svg xmlns=\"http://www.w3.org/2000/svg\" ' + 'xmlns:xlink=\"http://www.w3.org/1999/xlink\"><style type=\"text/css\"><![CDATA[ ';\n\n    for (var style in styles) {\n      string += style + ' {\\n';\n\n      for (var l in styles[style]) {\n        string += '\\t' + l + ':' + styles[style][l] + ';\\n';\n      }\n\n      string += '}\\n';\n    }\n\n    string += ']]></style>';\n    string += new XMLSerializer().serializeToString(this.root[0][0]);\n    string += '</svg>';\n    return string;\n  }\n}; // =========================================================================//\n// DOMAIN POSITION COMPUTATION                        //\n// =========================================================================//\n\n/**\n * Compute the position of a domain, relative to the calendar\n */\n\nvar DomainPosition = function () {\n  'use strict';\n\n  this.positions = d3.map();\n};\n\nDomainPosition.prototype.getPosition = function (d) {\n  'use strict';\n\n  return this.positions.get(d);\n};\n\nDomainPosition.prototype.getPositionFromIndex = function (i) {\n  'use strict';\n\n  var domains = this.getKeys();\n  return this.positions.get(domains[i]);\n};\n\nDomainPosition.prototype.getLast = function () {\n  'use strict';\n\n  var domains = this.getKeys();\n  return this.positions.get(domains[domains.length - 1]);\n};\n\nDomainPosition.prototype.setPosition = function (d, dim) {\n  'use strict';\n\n  this.positions.set(d, dim);\n};\n\nDomainPosition.prototype.shiftRightBy = function (exitingDomainDim) {\n  'use strict';\n\n  this.positions.forEach(function (key, value) {\n    this.set(key, value - exitingDomainDim);\n  });\n  var domains = this.getKeys();\n  this.positions.remove(domains[0]);\n};\n\nDomainPosition.prototype.shiftLeftBy = function (enteringDomainDim) {\n  'use strict';\n\n  this.positions.forEach(function (key, value) {\n    this.set(key, value + enteringDomainDim);\n  });\n  var domains = this.getKeys();\n  this.positions.remove(domains[domains.length - 1]);\n};\n\nDomainPosition.prototype.getKeys = function () {\n  'use strict';\n\n  return this.positions.keys().sort(function (a, b) {\n    return parseInt(a, 10) - parseInt(b, 10);\n  });\n}; // =========================================================================//\n// LEGEND                                  //\n// =========================================================================//\n\n\nvar Legend = function (calendar) {\n  'use strict';\n\n  this.calendar = calendar;\n  this.computeDim();\n\n  if (calendar.options.legendColors !== null) {\n    this.buildColors();\n  }\n};\n\nLegend.prototype.computeDim = function () {\n  'use strict';\n\n  var options = this.calendar.options; // Shorter accessor for variable name mangling when minifying\n\n  this.dim = {\n    width: options.legendCellSize * (options.legend.length + 1) + options.legendCellPadding * options.legend.length,\n    height: options.legendCellSize\n  };\n};\n\nLegend.prototype.remove = function () {\n  'use strict';\n\n  this.calendar.root.select('.graph-legend').remove();\n  this.calendar.resize();\n};\n\nLegend.prototype.redraw = function (width) {\n  'use strict';\n\n  if (!this.calendar.options.displayLegend) {\n    return false;\n  }\n\n  var parent = this;\n  var calendar = this.calendar;\n  var legend = calendar.root;\n  var legendItem;\n  var options = calendar.options; // Shorter accessor for variable name mangling when minifying\n\n  this.computeDim();\n\n  var _legend = options.legend.slice(0);\n\n  _legend.push(_legend[_legend.length - 1] + 1);\n\n  var legendElement = calendar.root.select('.graph-legend');\n\n  if (legendElement[0][0] !== null) {\n    legend = legendElement;\n    legendItem = legend.select('g').selectAll('rect').data(_legend);\n  } else {\n    // Creating the new legend DOM if it doesn't already exist\n    legend = options.legendVerticalPosition === 'top' ? legend.insert('svg', '.graph') : legend.append('svg');\n    legend.attr('x', getLegendXPosition()).attr('y', getLegendYPosition());\n    legendItem = legend.attr('class', 'graph-legend').attr('height', parent.getDim('height')).attr('width', parent.getDim('width')).append('g').selectAll().data(_legend);\n  }\n\n  legendItem.enter().append('rect').call(legendCellLayout).attr('class', function (d) {\n    return calendar.Legend.getClass(d, calendar.legendScale === null);\n  }).attr('fill-opacity', 0).call(function (selection) {\n    if (calendar.legendScale !== null && options.legendColors !== null && options.legendColors.hasOwnProperty('base')) {\n      selection.attr('fill', options.legendColors.base);\n    }\n  }).append('title');\n  legendItem.exit().transition().duration(options.animationDuration).attr('fill-opacity', 0).remove();\n  legendItem.transition().delay(function (d, i) {\n    return options.animationDuration * i / 10;\n  }).call(legendCellLayout).attr('fill-opacity', 1).call(function (element) {\n    element.attr('fill', function (d, i) {\n      if (calendar.legendScale === null) {\n        return '';\n      }\n\n      if (i === 0) {\n        return calendar.legendScale(d - 1);\n      }\n\n      return calendar.legendScale(options.legend[i - 1]);\n    });\n    element.attr('class', function (d) {\n      return calendar.Legend.getClass(d, calendar.legendScale === null);\n    });\n  });\n\n  function legendCellLayout(selection) {\n    selection.attr('width', options.legendCellSize).attr('height', options.legendCellSize).attr('rx', options.legendCellRadius).attr('ry', options.legendCellRadius).attr('x', function (d, i) {\n      return i * (options.legendCellSize + options.legendCellPadding);\n    });\n  }\n\n  legendItem.select('title').text(function (d, i) {\n    if (i === 0) {\n      return calendar.formatStringWithObject(options.legendTitleFormat.lower, {\n        min: options.legend[i],\n        name: options.itemName[1]\n      });\n    } else if (i === _legend.length - 1) {\n      return calendar.formatStringWithObject(options.legendTitleFormat.upper, {\n        max: options.legend[i - 1],\n        name: options.itemName[1]\n      });\n    } else {\n      return calendar.formatStringWithObject(options.legendTitleFormat.inner, {\n        down: options.legend[i - 1],\n        up: options.legend[i],\n        name: options.itemName[1]\n      });\n    }\n  });\n  legendItem.on('mouseover', function (d) {\n    calendar.legendTip.show(d, this);\n  }).on('mouseout', function () {\n    calendar.legendTip.hide();\n  });\n  legend.transition().duration(options.animationDuration).attr('x', getLegendXPosition()).attr('y', getLegendYPosition()).attr('width', parent.getDim('width')).attr('height', parent.getDim('height'));\n  legend.select('g').transition().duration(options.animationDuration).attr('transform', function () {\n    if (options.legendOrientation === 'vertical') {\n      return 'rotate(90 ' + options.legendCellSize / 2 + ' ' + options.legendCellSize / 2 + ')';\n    }\n\n    return '';\n  });\n\n  function getLegendXPosition() {\n    switch (options.legendHorizontalPosition) {\n      case 'right':\n        if (options.legendVerticalPosition === 'center' || options.legendVerticalPosition === 'middle') {\n          return width + options.legendMargin[3];\n        }\n\n        return width - parent.getDim('width') - options.legendMargin[1];\n\n      case 'middle':\n      case 'center':\n        return Math.round(width / 2 - parent.getDim('width') / 2);\n\n      default:\n        return options.legendMargin[3];\n    }\n  }\n\n  function getLegendYPosition() {\n    if (options.legendVerticalPosition === 'bottom') {\n      return calendar.graphDim.height + options.legendMargin[0] - options.domainGutter - options.cellPadding;\n    }\n\n    return options.legendMargin[0];\n  }\n\n  calendar.resize();\n};\n/**\n * Return the dimension of the legend\n *\n * Takes into account rotation\n *\n * @param  string axis Width or height\n * @return int height or width in pixels\n */\n\n\nLegend.prototype.getDim = function (axis) {\n  'use strict';\n\n  var isHorizontal = this.calendar.options.legendOrientation === 'horizontal';\n\n  switch (axis) {\n    case 'width':\n      return this.dim[isHorizontal ? 'width' : 'height'];\n\n    case 'height':\n      return this.dim[isHorizontal ? 'height' : 'width'];\n  }\n};\n\nLegend.prototype.buildColors = function () {\n  'use strict';\n\n  var options = this.calendar.options; // Shorter accessor for variable name mangling when minifying\n\n  if (options.legendColors === null) {\n    this.calendar.legendScale = null;\n    return false;\n  }\n\n  var _colorRange = [];\n\n  if (Array.isArray(options.legendColors)) {\n    _colorRange = options.legendColors;\n  } else if (options.legendColors.hasOwnProperty('min') && options.legendColors.hasOwnProperty('max')) {\n    _colorRange = [options.legendColors.min, options.legendColors.max];\n  } else {\n    options.legendColors = null;\n    return false;\n  }\n\n  var _legend = options.legend.slice(0);\n\n  if (_legend[0] > 0) {\n    _legend.unshift(0);\n  } else if (_legend[0] <= 0) {\n    // Let's guess the leftmost value, it we have to add one\n    _legend.unshift(_legend[0] - (_legend[_legend.length - 1] - _legend[0]) / _legend.length);\n  }\n\n  var colorScale;\n\n  if (options.legendColors.hasOwnProperty('colorScale')) {\n    colorScale = options.legendColors.colorScale;\n  } else {\n    colorScale = d3.scale.linear().range(_colorRange).interpolate(d3.interpolateHcl).domain([d3.min(_legend), d3.max(_legend)]);\n  }\n\n  var legendColors = _legend.map(function (element) {\n    return colorScale(element);\n  });\n\n  this.calendar.legendScale = d3.scale.threshold().domain(options.legend).range(legendColors);\n  return true;\n};\n/**\n * Return the classname on the legend for the specified value\n *\n * @param integer n Value associated to a date\n * @param bool withCssClass Whether to display the css class used to style the cell.\n *                          Disabling will allow styling directly via html fill attribute\n *\n * @return string Classname according to the legend\n */\n\n\nLegend.prototype.getClass = function (n, withCssClass) {\n  'use strict';\n\n  if (n === null || isNaN(n)) {\n    return '';\n  }\n\n  var index = [this.calendar.options.legend.length + 1];\n\n  for (var i = 0, total = this.calendar.options.legend.length - 1; i <= total; i += 1) {\n    if (this.calendar.options.legend[0] > 0 && n < 0) {\n      index = ['1', 'i'];\n      break;\n    }\n\n    if (n <= this.calendar.options.legend[i]) {\n      index = [i + 1];\n      break;\n    }\n  }\n\n  if (n === 0) {\n    index.push(0);\n  }\n\n  index.unshift('');\n  return (index.join(' r') + (withCssClass ? index.join(' q') : '')).trim();\n};\n/**\n * #source http://stackoverflow.com/a/383245/805649\n */\n\n\nfunction mergeRecursive(obj1, obj2) {\n  'use strict';\n  /*jshint forin:false */\n\n  for (var p in obj2) {\n    try {\n      // Property in destination object set; update its value.\n      if (obj2[p].constructor === Object) {\n        obj1[p] = mergeRecursive(obj1[p], obj2[p]);\n      } else {\n        obj1[p] = obj2[p];\n      }\n    } catch (e) {\n      // Property in destination object not set; create it and set its value.\n      obj1[p] = obj2[p];\n    }\n  }\n\n  return obj1;\n}\n/**\n * Check if 2 arrays are equals\n *\n * @link http://stackoverflow.com/a/14853974/805649\n * @param  array array the array to compare to\n * @return bool true of the 2 arrays are equals\n */\n\n\nfunction arrayEquals(arrayA, arrayB) {\n  'use strict'; // if the other array is a falsy value, return\n\n  if (!arrayB || !arrayA) {\n    return false;\n  } // compare lengths - can save a lot of time\n\n\n  if (arrayA.length !== arrayB.length) {\n    return false;\n  }\n\n  for (var i = 0; i < arrayA.length; i += 1) {\n    // Check if we have nested arrays\n    if (arrayA[i] instanceof Array && arrayB[i] instanceof Array) {\n      // recurse into the nested arrays\n      if (!arrayEquals(arrayA[i], arrayB[i])) {\n        return false;\n      }\n    } else if (arrayA[i] !== arrayB[i]) {\n      // Warning - two different object instances will never be equal: {x:20} != {x:20}\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CalHeatMap);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHN1cGVyc2V0LXVpL2xlZ2FjeS1wbHVnaW4tY2hhcnQtY2FsZW5kYXIvZXNtL3ZlbmRvci9jYWwtaGVhdG1hcC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vbm9kZV9tb2R1bGVzL0BzdXBlcnNldC11aS9sZWdhY3ktcGx1Z2luLWNoYXJ0LWNhbGVuZGFyL2VzbS92ZW5kb3IvY2FsLWhlYXRtYXAuanM/NGU3MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBbTElDRU5TRSBUQkRdXG5cbi8qIENvcGllZCBhbmQgYWx0ZXJlZCBmcm9tIGh0dHA6Ly9jYWwtaGVhdG1hcC5jb20vICwgYWx0ZXJhdGlvbnMgYXJvdW5kOlxuICogLSB0dW5pbmcgdG9vbHRpcHNcbiAqIC0gc3VwcG9ydGluZyBtdWx0aS1jb2xvcnMgc2NhbGVzXG4gKiAtIGxlZ2VuZCBmb3JtYXRcbiAqIC0gVVRDIGhhbmRsaW5nXG4gKi9cblxuLyogZXNsaW50LWRpc2FibGUgKi9cbmltcG9ydCBkM3RpcCBmcm9tICdkMy10aXAnO1xuaW1wb3J0ICcuL2QzdGlwLmNzcyc7XG52YXIgZDMgPSB0eXBlb2YgcmVxdWlyZSA9PT0gJ2Z1bmN0aW9uJyA/IHJlcXVpcmUoJ2QzJykgOiB3aW5kb3cuZDM7XG52YXIgZDMgPSB0eXBlb2YgcmVxdWlyZSA9PT0gJ2Z1bmN0aW9uJyA/IHJlcXVpcmUoJ2QzJykgOiB3aW5kb3cuZDM7XG5cbnZhciBDYWxIZWF0TWFwID0gZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBzZWxmLnRpcCA9IGQzdGlwKCkuYXR0cignY2xhc3MnLCAnZDMtdGlwJykuZGlyZWN0aW9uKCduJykub2Zmc2V0KFstNSwgMF0pLmh0bWwoZCA9PiBgXG4gICAgICAke3NlbGYub3B0aW9ucy50aW1lRm9ybWF0dGVyKGQudCl9OiA8c3Ryb25nPiR7c2VsZi5vcHRpb25zLnZhbHVlRm9ybWF0dGVyKGQudil9PC9zdHJvbmc+XG4gICAgYCk7XG4gIHNlbGYubGVnZW5kVGlwID0gZDN0aXAoKS5hdHRyKCdjbGFzcycsICdkMy10aXAnKS5kaXJlY3Rpb24oJ24nKS5vZmZzZXQoWy01LCAwXSkuaHRtbChkID0+IHNlbGYub3B0aW9ucy52YWx1ZUZvcm1hdHRlcihkKSk7XG4gIHRoaXMuYWxsb3dlZERhdGFUeXBlID0gWydqc29uJywgJ2NzdicsICd0c3YnLCAndHh0J107IC8vIERlZmF1bHQgc2V0dGluZ3NcblxuICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgLy8gc2VsZWN0b3Igc3RyaW5nIG9mIHRoZSBjb250YWluZXIgdG8gYXBwZW5kIHRoZSBncmFwaCB0b1xuICAgIC8vIEFjY2VwdCBhbnkgc3RyaW5nIHZhbHVlIGFjY2VwdGVkIGJ5IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Igb3IgQ1NTM1xuICAgIC8vIG9yIGFuIEVsZW1lbnQgb2JqZWN0XG4gICAgaXRlbVNlbGVjdG9yOiAnI2NhbC1oZWF0bWFwJyxcbiAgICAvLyBXaGV0aGVyIHRvIHBhaW50IHRoZSBjYWxlbmRhciBvbiBpbml0KClcbiAgICAvLyBVc2VkIGJ5IHRlc3RzdWl0ZSB0byByZWR1Y2UgdGVzdGluZyB0aW1lXG4gICAgcGFpbnRPbkxvYWQ6IHRydWUsXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gRE9NQUlOXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gTnVtYmVyIG9mIGRvbWFpbiB0byBkaXNwbGF5IG9uIHRoZSBncmFwaFxuICAgIHJhbmdlOiAxMixcbiAgICAvLyBTaXplIG9mIGVhY2ggY2VsbCwgaW4gcGl4ZWxcbiAgICBjZWxsU2l6ZTogMTAsXG4gICAgLy8gUGFkZGluZyBiZXR3ZWVuIGVhY2ggY2VsbCwgaW4gcGl4ZWxcbiAgICBjZWxsUGFkZGluZzogMixcbiAgICAvLyBGb3Igcm91bmRlZCBzdWJkb21haW4gcmVjdGFuZ2xlcywgaW4gcGl4ZWxzXG4gICAgY2VsbFJhZGl1czogMCxcbiAgICBkb21haW5HdXR0ZXI6IDIsXG4gICAgZG9tYWluTWFyZ2luOiBbMCwgMCwgMCwgMF0sXG4gICAgdmFsdWVGb3JtYXR0ZXI6IGQgPT4gZCxcbiAgICB0aW1lRm9ybWF0dGVyOiBkID0+IGQsXG4gICAgZG9tYWluOiAnaG91cicsXG4gICAgc3ViRG9tYWluOiAnbWluJyxcbiAgICAvLyBOdW1iZXIgb2YgY29sdW1ucyB0byBzcGxpdCB0aGUgc3ViRG9tYWlucyB0b1xuICAgIC8vIElmIG5vdCBudWxsLCB3aWxsIHRha2VzIHByZWNlZGVuY2Ugb3ZlciByb3dMaW1pdFxuICAgIGNvbExpbWl0OiBudWxsLFxuICAgIC8vIE51bWJlciBvZiByb3dzIHRvIHNwbGl0IHRoZSBzdWJEb21haW5zIHRvXG4gICAgLy8gV2lsbCBiZSBpZ25vcmVkIGlmIGNvbExpbWl0IGlzIG5vdCBudWxsXG4gICAgcm93TGltaXQ6IG51bGwsXG4gICAgLy8gRmlyc3QgZGF5IG9mIHRoZSB3ZWVrIGlzIE1vbmRheVxuICAgIC8vIDAgdG8gc3RhcnQgdGhlIHdlZWsgb24gU3VuZGF5XG4gICAgd2Vla1N0YXJ0T25Nb25kYXk6IHRydWUsXG4gICAgLy8gU3RhcnQgZGF0ZSBvZiB0aGUgZ3JhcGhcbiAgICAvLyBAZGVmYXVsdCBub3dcbiAgICBzdGFydDogbmV3IERhdGUoKSxcbiAgICBtaW5EYXRlOiBudWxsLFxuICAgIG1heERhdGU6IG51bGwsXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gREFUQVxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIERhdGEgc291cmNlXG4gICAgLy8gVVJMLCB3aGVyZSB0byBmZXRjaCB0aGUgb3JpZ2luYWwgZGF0YXNcbiAgICBkYXRhOiAnJyxcbiAgICAvLyBEYXRhIHR5cGVcbiAgICAvLyBEZWZhdWx0OiBqc29uXG4gICAgZGF0YVR5cGU6IHRoaXMuYWxsb3dlZERhdGFUeXBlWzBdLFxuICAgIC8vIFBheWxvYWQgc2VudCB3aGVuIHVzaW5nIFBPU1QgaHR0cCBtZXRob2RcbiAgICAvLyBMZWF2ZSB0byBudWxsIChkZWZhdWx0KSBmb3IgR0VUIHJlcXVlc3RcbiAgICAvLyBFeHBlY3QgYSBzdHJpbmcsIGZvcm1hdHRlZCBsaWtlIFwiYT1iO2M9ZFwiXG4gICAgZGF0YVBvc3RQYXlsb2FkOiBudWxsLFxuICAgIC8vIEFkZGl0aW9uYWwgaGVhZGVycyBzZW50IHdoZW4gcmVxdWVzdGluZyBkYXRhXG4gICAgLy8gRXhwZWN0IGFuIG9iamVjdCBmb3JtYXR0ZWQgbGlrZTpcbiAgICAvLyB7ICdYLUNTUkYtVE9LRU4nOiAndG9rZW4nIH1cbiAgICBkYXRhUmVxdWVzdEhlYWRlcnM6IG51bGwsXG4gICAgLy8gV2hldGhlciB0byBjb25zaWRlciBtaXNzaW5nIGRhdGU6dmFsdWUgZnJvbSB0aGUgZGF0YXNvdXJjZVxuICAgIC8vIGFzIGVxdWFsIHRvIDAsIG9yIGp1c3QgbGVhdmUgdGhlbSBhcyBtaXNzaW5nXG4gICAgY29uc2lkZXJNaXNzaW5nRGF0YUFzWmVybzogZmFsc2UsXG4gICAgLy8gTG9hZCByZW1vdGUgZGF0YSBvbiBjYWxlbmRhciBjcmVhdGlvblxuICAgIC8vIFdoZW4gZmFsc2UsIHRoZSBjYWxlbmRhciB3aWxsIGJlIGxlZnQgZW1wdHlcbiAgICBsb2FkT25Jbml0OiB0cnVlLFxuICAgIC8vIENhbGVuZGFyIG9yaWVudGF0aW9uXG4gICAgLy8gZmFsc2U6IGRpc3BsYXkgZG9tYWlucyBzaWRlIGJ5IHNpZGVcbiAgICAvLyB0cnVlIDogZGlzcGxheSBkb21haW5zIG9uZSB1bmRlciB0aGUgb3RoZXJcbiAgICB2ZXJ0aWNhbE9yaWVudGF0aW9uOiBmYWxzZSxcbiAgICAvLyBEb21haW4gZHluYW1pYyB3aWR0aC9oZWlnaHRcbiAgICAvLyBUaGUgd2lkdGggb24gYSBkb21haW4gZGVwZW5kcyBvbiB0aGUgbnVtYmVyIG9mXG4gICAgZG9tYWluRHluYW1pY0RpbWVuc2lvbjogdHJ1ZSxcbiAgICAvLyBEb21haW4gTGFiZWwgcHJvcGVydGllc1xuICAgIGxhYmVsOiB7XG4gICAgICAvLyB2YWxpZDogdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0XG4gICAgICBwb3NpdGlvbjogJ2JvdHRvbScsXG4gICAgICAvLyBWYWxpZDogbGVmdCwgY2VudGVyLCByaWdodFxuICAgICAgLy8gQWxzbyB2YWxpZCBhcmUgdGhlIGRpcmVjdCBzdmcgdmFsdWVzOiBzdGFydCwgbWlkZGxlLCBlbmRcbiAgICAgIGFsaWduOiAnY2VudGVyJyxcbiAgICAgIC8vIEJ5IGRlZmF1bHQsIHRoZXJlIGlzIG5vIG1hcmdpbi9wYWRkaW5nIGFyb3VuZCB0aGUgbGFiZWxcbiAgICAgIG9mZnNldDoge1xuICAgICAgICB4OiAwLFxuICAgICAgICB5OiAwXG4gICAgICB9LFxuICAgICAgcm90YXRlOiBudWxsLFxuICAgICAgLy8gVXNlZCBvbmx5IG9uIHZlcnRpY2FsIG9yaWVudGF0aW9uXG4gICAgICB3aWR0aDogMTAwLFxuICAgICAgLy8gVXNlZCBvbmx5IG9uIGhvcml6b250YWwgb3JpZW50YXRpb25cbiAgICAgIGhlaWdodDogbnVsbFxuICAgIH0sXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gTEVHRU5EXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gVGhyZXNob2xkIGZvciB0aGUgbGVnZW5kXG4gICAgbGVnZW5kOiBbMTAsIDIwLCAzMCwgNDBdLFxuICAgIC8vIFdoZXRoZXIgdG8gZGlzcGxheSB0aGUgbGVnZW5kXG4gICAgZGlzcGxheUxlZ2VuZDogdHJ1ZSxcbiAgICBsZWdlbmRDZWxsU2l6ZTogMTAsXG4gICAgbGVnZW5kQ2VsbFBhZGRpbmc6IDIsXG4gICAgbGVnZW5kTWFyZ2luOiBbMCwgMCwgMCwgMF0sXG4gICAgLy8gTGVnZW5kIHZlcnRpY2FsIHBvc2l0aW9uXG4gICAgLy8gdG9wOiBwbGFjZSBsZWdlbmQgYWJvdmUgY2FsZW5kYXJcbiAgICAvLyBib3R0b206IHBsYWNlIGxlZ2VuZCBiZWxvdyB0aGUgY2FsZW5kYXJcbiAgICBsZWdlbmRWZXJ0aWNhbFBvc2l0aW9uOiAnYm90dG9tJyxcbiAgICAvLyBMZWdlbmQgaG9yaXpvbnRhbCBwb3NpdGlvblxuICAgIC8vIGFjY2VwdGVkIHZhbHVlczogbGVmdCwgY2VudGVyLCByaWdodFxuICAgIGxlZ2VuZEhvcml6b250YWxQb3NpdGlvbjogJ2xlZnQnLFxuICAgIC8vIExlZ2VuZCByb3RhdGlvblxuICAgIC8vIGFjY2VwdGVkIHZhbHVlczogaG9yaXpvbnRhbCwgdmVydGljYWxcbiAgICBsZWdlbmRPcmllbnRhdGlvbjogJ2hvcml6b250YWwnLFxuICAgIC8vIE9iamVjdHMgaG9sZGluZyBhbGwgdGhlIGhlYXRtYXAgZGlmZmVyZW50IGNvbG9yc1xuICAgIC8vIG51bGwgdG8gZGlzYWJsZSwgYW5kIHVzZSB0aGUgZGVmYXVsdCBjc3Mgc3R5bGVzXG4gICAgLy9cbiAgICAvLyBFeGFtcGxlczpcbiAgICAvLyBsZWdlbmRDb2xvcnM6IHtcbiAgICAvLyAgICBtaW46IFwiZ3JlZW5cIixcbiAgICAvLyAgICBtYXg6IFwicmVkXCIsXG4gICAgLy8gICAgZW1wdHk6IFwiI2ZmZmZmZlwiLFxuICAgIC8vICAgIGJhc2U6IFwiZ3JleVwiLFxuICAgIC8vICAgIG92ZXJmbG93OiBcInJlZFwiLFxuICAgIC8vICAgIGNvbG9yU2NhbGVyOiBudWxsLFxuICAgIC8vIH1cbiAgICBsZWdlbmRDb2xvcnM6IG51bGwsXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gSElHSExJR0hUXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gTGlzdCBvZiBkYXRlcyB0byBoaWdobGlnaHRcbiAgICAvLyBWYWxpZCB2YWx1ZXM6XG4gICAgLy8gLSBbXTogZG9uJ3QgaGlnaGxpZ2h0IGFueXRoaW5nXG4gICAgLy8gLSBcIm5vd1wiOiBoaWdobGlnaHQgdGhlIGN1cnJlbnQgZGF0ZVxuICAgIC8vIC0gYW4gYXJyYXkgb2YgRGF0ZSBvYmplY3RzOiBoaWdobGlnaHQgdGhlIHNwZWNpZmllZCBkYXRlc1xuICAgIGhpZ2hsaWdodDogW10sXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy8gVEVYVCBGT1JNQVRUSU5HIC8gaTE4blxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vIE5hbWUgb2YgdGhlIGl0ZW1zIHRvIHJlcHJlc2VudCBpbiB0aGUgY2FsZW5kYXJcbiAgICBpdGVtTmFtZTogWydpdGVtJywgJ2l0ZW1zJ10sXG4gICAgLy8gRm9ybWF0dGluZyBvZiB0aGUgZG9tYWluIGxhYmVsXG4gICAgLy8gQGRlZmF1bHQ6IG51bGwsIHdpbGwgdXNlIHRoZSBmb3JtYXR0aW5nIGFjY29yZGluZyB0byBkb21haW4gdHlwZVxuICAgIC8vIEFjY2VwdCBhIHN0cmluZyB1c2VkIGFzIHNwZWNpZmllciBieSBkMy50aW1lLmZvcm1hdCgpXG4gICAgLy8gb3IgYSBmdW5jdGlvblxuICAgIC8vXG4gICAgLy8gUmVmZXIgdG8gaHR0cHM6Ly9naXRodWIuY29tL21ib3N0b2NrL2QzL3dpa2kvVGltZS1Gb3JtYXR0aW5nXG4gICAgLy8gZm9yIGFjY2VwdGVkIGRhdGUgZm9ybWF0dGluZyB1c2VkIGJ5IGQzLnRpbWUuZm9ybWF0KClcbiAgICBkb21haW5MYWJlbEZvcm1hdDogbnVsbCxcbiAgICAvLyBGb3JtYXR0aW5nIG9mIHRoZSB0aXRsZSBkaXNwbGF5ZWQgd2hlbiBob3ZlcmluZyBhIHN1YkRvbWFpbiBjZWxsXG4gICAgc3ViRG9tYWluVGl0bGVGb3JtYXQ6IHtcbiAgICAgIGVtcHR5OiAne2RhdGV9JyxcbiAgICAgIGZpbGxlZDogJ3tjb3VudH0ge25hbWV9IHtjb25uZWN0b3J9IHtkYXRlfSdcbiAgICB9LFxuICAgIC8vIEZvcm1hdHRpbmcgb2YgdGhlIHtkYXRlfSB1c2VkIGluIHN1YkRvbWFpblRpdGxlRm9ybWF0XG4gICAgLy8gQGRlZmF1bHQ6IG51bGwsIHdpbGwgdXNlIHRoZSBmb3JtYXR0aW5nIGFjY29yZGluZyB0byBzdWJEb21haW4gdHlwZVxuICAgIC8vIEFjY2VwdCBhIHN0cmluZyB1c2VkIGFzIHNwZWNpZmllciBieSBkMy50aW1lLmZvcm1hdCgpXG4gICAgLy8gb3IgYSBmdW5jdGlvblxuICAgIC8vXG4gICAgLy8gUmVmZXIgdG8gaHR0cHM6Ly9naXRodWIuY29tL21ib3N0b2NrL2QzL3dpa2kvVGltZS1Gb3JtYXR0aW5nXG4gICAgLy8gZm9yIGFjY2VwdGVkIGRhdGUgZm9ybWF0dGluZyB1c2VkIGJ5IGQzLnRpbWUuZm9ybWF0KClcbiAgICBzdWJEb21haW5EYXRlRm9ybWF0OiBudWxsLFxuICAgIC8vIEZvcm1hdHRpbmcgb2YgdGhlIHRleHQgaW5zaWRlIGVhY2ggc3ViRG9tYWluIGNlbGxcbiAgICAvLyBAZGVmYXVsdDogbnVsbCwgbm8gdGV4dFxuICAgIC8vIEFjY2VwdCBhIHN0cmluZyB1c2VkIGFzIHNwZWNpZmllciBieSBkMy50aW1lLmZvcm1hdCgpXG4gICAgLy8gb3IgYSBmdW5jdGlvblxuICAgIC8vXG4gICAgLy8gUmVmZXIgdG8gaHR0cHM6Ly9naXRodWIuY29tL21ib3N0b2NrL2QzL3dpa2kvVGltZS1Gb3JtYXR0aW5nXG4gICAgLy8gZm9yIGFjY2VwdGVkIGRhdGUgZm9ybWF0dGluZyB1c2VkIGJ5IGQzLnRpbWUuZm9ybWF0KClcbiAgICBzdWJEb21haW5UZXh0Rm9ybWF0OiBudWxsLFxuICAgIC8vIEZvcm1hdHRpbmcgb2YgdGhlIHRpdGxlIGRpc3BsYXllZCB3aGVuIGhvdmVyaW5nIGEgbGVnZW5kIGNlbGxcbiAgICBsZWdlbmRUaXRsZUZvcm1hdDoge1xuICAgICAgbG93ZXI6ICdsZXNzIHRoYW4ge21pbn0ge25hbWV9JyxcbiAgICAgIGlubmVyOiAnYmV0d2VlbiB7ZG93bn0gYW5kIHt1cH0ge25hbWV9JyxcbiAgICAgIHVwcGVyOiAnbW9yZSB0aGFuIHttYXh9IHtuYW1lfSdcbiAgICB9LFxuICAgIC8vIEFuaW1hdGlvbiBkdXJhdGlvbiwgaW4gbXNcbiAgICBhbmltYXRpb25EdXJhdGlvbjogNTAwLFxuICAgIG5leHRTZWxlY3RvcjogZmFsc2UsXG4gICAgcHJldmlvdXNTZWxlY3RvcjogZmFsc2UsXG4gICAgaXRlbU5hbWVzcGFjZTogJ2NhbC1oZWF0bWFwJyxcbiAgICB0b29sdGlwOiBmYWxzZSxcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBFVkVOVFMgQ0FMTEJBQ0tcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBDYWxsYmFjayB3aGVuIGNsaWNraW5nIG9uIGEgdGltZSBibG9ja1xuICAgIG9uQ2xpY2s6IG51bGwsXG4gICAgLy8gQ2FsbGJhY2sgYWZ0ZXIgcGFpbnRpbmcgdGhlIGVtcHR5IGNhbGVuZGFyXG4gICAgLy8gQ2FuIGJlIHVzZWQgdG8gdHJpZ2dlciBhbiBBUEkgY2FsbCwgb25jZSB0aGUgY2FsZW5kYXIgaXMgcmVhZHkgdG8gYmUgZmlsbGVkXG4gICAgYWZ0ZXJMb2FkOiBudWxsLFxuICAgIC8vIENhbGxiYWNrIGFmdGVyIGxvYWRpbmcgdGhlIG5leHQgZG9tYWluIGluIHRoZSBjYWxlbmRhclxuICAgIGFmdGVyTG9hZE5leHREb21haW46IG51bGwsXG4gICAgLy8gQ2FsbGJhY2sgYWZ0ZXIgbG9hZGluZyB0aGUgcHJldmlvdXMgZG9tYWluIGluIHRoZSBjYWxlbmRhclxuICAgIGFmdGVyTG9hZFByZXZpb3VzRG9tYWluOiBudWxsLFxuICAgIC8vIENhbGxiYWNrIGFmdGVyIGZpbmlzaGluZyBhbGwgYWN0aW9ucyBvbiB0aGUgY2FsZW5kYXJcbiAgICBvbkNvbXBsZXRlOiBudWxsLFxuICAgIC8vIENhbGxiYWNrIGFmdGVyIGZldGNoaW5nIHRoZSBkYXRhcywgYnV0IGJlZm9yZSBhcHBseWluZyB0aGVtIHRvIHRoZSBjYWxlbmRhclxuICAgIC8vIFVzZWQgbWFpbmx5IHRvIGNvbnZlcnQgdGhlIGRhdGFzIGlmIHRoZXkncmUgbm90IGZvcm1hdHRlZCBsaWtlIGV4cGVjdGVkXG4gICAgLy8gVGFrZXMgdGhlIGZldGNoZWQgXCJkYXRhXCIgb2JqZWN0IGFzIGFyZ3VtZW50LCBtdXN0IHJldHVybiBhIGpzb24gb2JqZWN0XG4gICAgLy8gZm9ybWF0dGVkIGxpa2Uge3RpbWVzdGFtcDpjb3VudCwgdGltZXN0YW1wMjpjb3VudDJ9LFxuICAgIGFmdGVyTG9hZERhdGE6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LFxuICAgIC8vIENhbGxiYWNrIHRyaWdnZXJlZCBhZnRlciBjYWxsaW5nIGFuZCBjb21wbGV0aW5nIHVwZGF0ZSgpLlxuICAgIGFmdGVyVXBkYXRlOiBudWxsLFxuICAgIC8vIENhbGxiYWNrIHRyaWdnZXJlZCBhZnRlciBjYWxsaW5nIG5leHQoKS5cbiAgICAvLyBUaGUgYHN0YXR1c2AgYXJndW1lbnQgaXMgZXF1YWwgdG8gdHJ1ZSBpZiB0aGVyZSBpcyBub1xuICAgIC8vIG1vcmUgbmV4dCBkb21haW4gdG8gbG9hZFxuICAgIC8vXG4gICAgLy8gVGhpcyBjYWxsYmFjayBpcyBhbHNvIGV4ZWN1dGVkIG9uY2UsIGFmdGVyIGNhbGxpbmcgcHJldmlvdXMoKSxcbiAgICAvLyBvbmx5IHdoZW4gdGhlIG1heCBkb21haW4gaXMgcmVhY2hlZFxuICAgIG9uTWF4RG9tYWluUmVhY2hlZDogbnVsbCxcbiAgICAvLyBDYWxsYmFjayB0cmlnZ2VyZWQgYWZ0ZXIgY2FsbGluZyBwcmV2aW91cygpLlxuICAgIC8vIFRoZSBgc3RhdHVzYCBhcmd1bWVudCBpcyBlcXVhbCB0byB0cnVlIGlmIHRoZXJlIGlzIG5vXG4gICAgLy8gbW9yZSBwcmV2aW91cyBkb21haW4gdG8gbG9hZFxuICAgIC8vXG4gICAgLy8gVGhpcyBjYWxsYmFjayBpcyBhbHNvIGV4ZWN1dGVkIG9uY2UsIGFmdGVyIGNhbGxpbmcgbmV4dCgpLFxuICAgIC8vIG9ubHkgd2hlbiB0aGUgbWluIGRvbWFpbiBpcyByZWFjaGVkXG4gICAgb25NaW5Eb21haW5SZWFjaGVkOiBudWxsXG4gIH07XG4gIHRoaXMuX2RvbWFpblR5cGUgPSB7XG4gICAgbWluOiB7XG4gICAgICBuYW1lOiAnbWludXRlJyxcbiAgICAgIGxldmVsOiAxMCxcbiAgICAgIG1heEl0ZW1OdW1iZXI6IDYwLFxuICAgICAgZGVmYXVsdFJvd051bWJlcjogMTAsXG4gICAgICBkZWZhdWx0Q29sdW1uTnVtYmVyOiA2LFxuICAgICAgcm93OiBmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4gc2VsZi5nZXRTdWJEb21haW5Sb3dOdW1iZXIoZCk7XG4gICAgICB9LFxuICAgICAgY29sdW1uOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4gc2VsZi5nZXRTdWJEb21haW5Db2x1bW5OdW1iZXIoZCk7XG4gICAgICB9LFxuICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgeDogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihkLmdldE1pbnV0ZXMoKSAvIHNlbGYuX2RvbWFpblR5cGUubWluLnJvdyhkKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHk6IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgcmV0dXJuIGQuZ2V0TWludXRlcygpICUgc2VsZi5fZG9tYWluVHlwZS5taW4ucm93KGQpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZm9ybWF0OiB7XG4gICAgICAgIGRhdGU6ICclSDolTSwgJUEgJUIgJS1lLCAlWScsXG4gICAgICAgIGxlZ2VuZDogJycsXG4gICAgICAgIGNvbm5lY3RvcjogJ2F0J1xuICAgICAgfSxcbiAgICAgIGV4dHJhY3RVbml0OiBmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoZC5nZXRGdWxsWWVhcigpLCBkLmdldE1vbnRoKCksIGQuZ2V0RGF0ZSgpLCBkLmdldEhvdXJzKCksIGQuZ2V0TWludXRlcygpKS5nZXRUaW1lKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBob3VyOiB7XG4gICAgICBuYW1lOiAnaG91cicsXG4gICAgICBsZXZlbDogMjAsXG4gICAgICBtYXhJdGVtTnVtYmVyOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICBzd2l0Y2ggKHNlbGYub3B0aW9ucy5kb21haW4pIHtcbiAgICAgICAgICBjYXNlICdkYXknOlxuICAgICAgICAgICAgcmV0dXJuIDI0O1xuXG4gICAgICAgICAgY2FzZSAnd2Vlayc6XG4gICAgICAgICAgICByZXR1cm4gMjQgKiA3O1xuXG4gICAgICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICAgICAgcmV0dXJuIDI0ICogKHNlbGYub3B0aW9ucy5kb21haW5EeW5hbWljRGltZW5zaW9uID8gc2VsZi5nZXREYXlDb3VudEluTW9udGgoZCkgOiAzMSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkZWZhdWx0Um93TnVtYmVyOiA2LFxuICAgICAgZGVmYXVsdENvbHVtbk51bWJlcjogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgc3dpdGNoIChzZWxmLm9wdGlvbnMuZG9tYWluKSB7XG4gICAgICAgICAgY2FzZSAnZGF5JzpcbiAgICAgICAgICAgIHJldHVybiA0O1xuXG4gICAgICAgICAgY2FzZSAnd2Vlayc6XG4gICAgICAgICAgICByZXR1cm4gMjg7XG5cbiAgICAgICAgICBjYXNlICdtb250aCc6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5vcHRpb25zLmRvbWFpbkR5bmFtaWNEaW1lbnNpb24gPyBzZWxmLmdldERheUNvdW50SW5Nb250aChkKSA6IDMxO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcm93OiBmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4gc2VsZi5nZXRTdWJEb21haW5Sb3dOdW1iZXIoZCk7XG4gICAgICB9LFxuICAgICAgY29sdW1uOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4gc2VsZi5nZXRTdWJEb21haW5Db2x1bW5OdW1iZXIoZCk7XG4gICAgICB9LFxuICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgeDogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICBpZiAoc2VsZi5vcHRpb25zLmRvbWFpbiA9PT0gJ21vbnRoJykge1xuICAgICAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5jb2xMaW1pdCA+IDAgfHwgc2VsZi5vcHRpb25zLnJvd0xpbWl0ID4gMCkge1xuICAgICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoZC5nZXRIb3VycygpICsgKGQuZ2V0RGF0ZSgpIC0gMSkgKiAyNCkgLyBzZWxmLl9kb21haW5UeXBlLmhvdXIucm93KGQpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoZC5nZXRIb3VycygpIC8gc2VsZi5fZG9tYWluVHlwZS5ob3VyLnJvdyhkKSkgKyAoZC5nZXREYXRlKCkgLSAxKSAqIDQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChzZWxmLm9wdGlvbnMuZG9tYWluID09PSAnd2VlaycpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLm9wdGlvbnMuY29sTGltaXQgPiAwIHx8IHNlbGYub3B0aW9ucy5yb3dMaW1pdCA+IDApIHtcbiAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKGQuZ2V0SG91cnMoKSArIHNlbGYuZ2V0V2Vla0RheShkKSAqIDI0KSAvIHNlbGYuX2RvbWFpblR5cGUuaG91ci5yb3coZCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihkLmdldEhvdXJzKCkgLyBzZWxmLl9kb21haW5UeXBlLmhvdXIucm93KGQpKSArIHNlbGYuZ2V0V2Vla0RheShkKSAqIDQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoZC5nZXRIb3VycygpIC8gc2VsZi5fZG9tYWluVHlwZS5ob3VyLnJvdyhkKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHk6IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgdmFyIHAgPSBkLmdldEhvdXJzKCk7XG5cbiAgICAgICAgICBpZiAoc2VsZi5vcHRpb25zLmNvbExpbWl0ID4gMCB8fCBzZWxmLm9wdGlvbnMucm93TGltaXQgPiAwKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHNlbGYub3B0aW9ucy5kb21haW4pIHtcbiAgICAgICAgICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICAgICAgICAgIHAgKz0gKGQuZ2V0RGF0ZSgpIC0gMSkgKiAyNDtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlICd3ZWVrJzpcbiAgICAgICAgICAgICAgICBwICs9IHNlbGYuZ2V0V2Vla0RheShkKSAqIDI0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKHAgJSBzZWxmLl9kb21haW5UeXBlLmhvdXIucm93KGQpKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGZvcm1hdDoge1xuICAgICAgICBkYXRlOiAnJUhoLCAlQSAlQiAlLWUsICVZJyxcbiAgICAgICAgbGVnZW5kOiAnJUg6MDAnLFxuICAgICAgICBjb25uZWN0b3I6ICdhdCdcbiAgICAgIH0sXG4gICAgICBleHRyYWN0VW5pdDogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpLCBkLmdldERhdGUoKSwgZC5nZXRIb3VycygpKS5nZXRUaW1lKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBkYXk6IHtcbiAgICAgIG5hbWU6ICdkYXknLFxuICAgICAgbGV2ZWw6IDMwLFxuICAgICAgbWF4SXRlbU51bWJlcjogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgc3dpdGNoIChzZWxmLm9wdGlvbnMuZG9tYWluKSB7XG4gICAgICAgICAgY2FzZSAnd2Vlayc6XG4gICAgICAgICAgICByZXR1cm4gNztcblxuICAgICAgICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLm9wdGlvbnMuZG9tYWluRHluYW1pY0RpbWVuc2lvbiA/IHNlbGYuZ2V0RGF5Q291bnRJbk1vbnRoKGQpIDogMzE7XG5cbiAgICAgICAgICBjYXNlICd5ZWFyJzpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLm9wdGlvbnMuZG9tYWluRHluYW1pY0RpbWVuc2lvbiA/IHNlbGYuZ2V0RGF5Q291bnRJblllYXIoZCkgOiAzNjY7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkZWZhdWx0Q29sdW1uTnVtYmVyOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICBkID0gbmV3IERhdGUoZCk7XG5cbiAgICAgICAgc3dpdGNoIChzZWxmLm9wdGlvbnMuZG9tYWluKSB7XG4gICAgICAgICAgY2FzZSAnd2Vlayc6XG4gICAgICAgICAgICByZXR1cm4gMTtcblxuICAgICAgICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgICAgICAgIHJldHVybiBzZWxmLm9wdGlvbnMuZG9tYWluRHluYW1pY0RpbWVuc2lvbiAmJiAhc2VsZi5vcHRpb25zLnZlcnRpY2FsT3JpZW50YXRpb24gPyBzZWxmLmdldFdlZWtOdW1iZXIobmV3IERhdGUoZC5nZXRGdWxsWWVhcigpLCBkLmdldE1vbnRoKCkgKyAxLCAwKSkgLSBzZWxmLmdldFdlZWtOdW1iZXIoZCkgKyAxIDogNjtcblxuICAgICAgICAgIGNhc2UgJ3llYXInOlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYub3B0aW9ucy5kb21haW5EeW5hbWljRGltZW5zaW9uID8gc2VsZi5nZXRXZWVrTnVtYmVyKG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSwgMTEsIDMxKSkgLSBzZWxmLmdldFdlZWtOdW1iZXIobmV3IERhdGUoZC5nZXRGdWxsWWVhcigpLCAwKSkgKyAxIDogNTQ7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkZWZhdWx0Um93TnVtYmVyOiA3LFxuICAgICAgcm93OiBmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4gc2VsZi5nZXRTdWJEb21haW5Sb3dOdW1iZXIoZCk7XG4gICAgICB9LFxuICAgICAgY29sdW1uOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4gc2VsZi5nZXRTdWJEb21haW5Db2x1bW5OdW1iZXIoZCk7XG4gICAgICB9LFxuICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgeDogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICBzd2l0Y2ggKHNlbGYub3B0aW9ucy5kb21haW4pIHtcbiAgICAgICAgICAgIGNhc2UgJ3dlZWsnOlxuICAgICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihzZWxmLmdldFdlZWtEYXkoZCkgLyBzZWxmLl9kb21haW5UeXBlLmRheS5yb3coZCkpO1xuXG4gICAgICAgICAgICBjYXNlICdtb250aCc6XG4gICAgICAgICAgICAgIGlmIChzZWxmLm9wdGlvbnMuY29sTGltaXQgPiAwIHx8IHNlbGYub3B0aW9ucy5yb3dMaW1pdCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoZC5nZXREYXRlKCkgLSAxKSAvIHNlbGYuX2RvbWFpblR5cGUuZGF5LnJvdyhkKSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gc2VsZi5nZXRXZWVrTnVtYmVyKGQpIC0gc2VsZi5nZXRXZWVrTnVtYmVyKG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpKSk7XG5cbiAgICAgICAgICAgIGNhc2UgJ3llYXInOlxuICAgICAgICAgICAgICBpZiAoc2VsZi5vcHRpb25zLmNvbExpbWl0ID4gMCB8fCBzZWxmLm9wdGlvbnMucm93TGltaXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHNlbGYuZ2V0RGF5T2ZZZWFyKGQpIC0gMSkgLyBzZWxmLl9kb21haW5UeXBlLmRheS5yb3coZCkpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0V2Vla051bWJlcihkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHk6IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgdmFyIHAgPSBzZWxmLmdldFdlZWtEYXkoZCk7XG5cbiAgICAgICAgICBpZiAoc2VsZi5vcHRpb25zLmNvbExpbWl0ID4gMCB8fCBzZWxmLm9wdGlvbnMucm93TGltaXQgPiAwKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHNlbGYub3B0aW9ucy5kb21haW4pIHtcbiAgICAgICAgICAgICAgY2FzZSAneWVhcic6XG4gICAgICAgICAgICAgICAgcCA9IHNlbGYuZ2V0RGF5T2ZZZWFyKGQpIC0gMTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlICd3ZWVrJzpcbiAgICAgICAgICAgICAgICBwID0gc2VsZi5nZXRXZWVrRGF5KGQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgICAgICAgICAgICBwID0gZC5nZXREYXRlKCkgLSAxO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKHAgJSBzZWxmLl9kb21haW5UeXBlLmRheS5yb3coZCkpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZm9ybWF0OiB7XG4gICAgICAgIGRhdGU6ICclQSAlQiAlLWUsICVZJyxcbiAgICAgICAgbGVnZW5kOiAnJWUgJWInLFxuICAgICAgICBjb25uZWN0b3I6ICdvbidcbiAgICAgIH0sXG4gICAgICBleHRyYWN0VW5pdDogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpLCBkLmdldERhdGUoKSkuZ2V0VGltZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgd2Vlazoge1xuICAgICAgbmFtZTogJ3dlZWsnLFxuICAgICAgbGV2ZWw6IDQwLFxuICAgICAgbWF4SXRlbU51bWJlcjogNTQsXG4gICAgICBkZWZhdWx0Q29sdW1uTnVtYmVyOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICBkID0gbmV3IERhdGUoZCk7XG5cbiAgICAgICAgc3dpdGNoIChzZWxmLm9wdGlvbnMuZG9tYWluKSB7XG4gICAgICAgICAgY2FzZSAneWVhcic6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fZG9tYWluVHlwZS53ZWVrLm1heEl0ZW1OdW1iZXI7XG5cbiAgICAgICAgICBjYXNlICdtb250aCc6XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5vcHRpb25zLmRvbWFpbkR5bmFtaWNEaW1lbnNpb24gPyBzZWxmLmdldFdlZWtOdW1iZXIobmV3IERhdGUoZC5nZXRGdWxsWWVhcigpLCBkLmdldE1vbnRoKCkgKyAxLCAwKSkgLSBzZWxmLmdldFdlZWtOdW1iZXIoZCkgOiA1O1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZGVmYXVsdFJvd051bWJlcjogMSxcbiAgICAgIHJvdzogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuZ2V0U3ViRG9tYWluUm93TnVtYmVyKGQpO1xuICAgICAgfSxcbiAgICAgIGNvbHVtbjogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuZ2V0U3ViRG9tYWluQ29sdW1uTnVtYmVyKGQpO1xuICAgICAgfSxcbiAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgIHg6IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgc3dpdGNoIChzZWxmLm9wdGlvbnMuZG9tYWluKSB7XG4gICAgICAgICAgICBjYXNlICd5ZWFyJzpcbiAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3Ioc2VsZi5nZXRXZWVrTnVtYmVyKGQpIC8gc2VsZi5fZG9tYWluVHlwZS53ZWVrLnJvdyhkKSk7XG5cbiAgICAgICAgICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3Ioc2VsZi5nZXRNb250aFdlZWtOdW1iZXIoZCkgLyBzZWxmLl9kb21haW5UeXBlLndlZWsucm93KGQpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHk6IGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0V2Vla051bWJlcihkKSAlIHNlbGYuX2RvbWFpblR5cGUud2Vlay5yb3coZCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBmb3JtYXQ6IHtcbiAgICAgICAgZGF0ZTogJyVCIFdlZWsgIyVXJyxcbiAgICAgICAgbGVnZW5kOiAnJUIgV2VlayAjJVcnLFxuICAgICAgICBjb25uZWN0b3I6ICdpbidcbiAgICAgIH0sXG4gICAgICBleHRyYWN0VW5pdDogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgdmFyIGR0ID0gbmV3IERhdGUoZC5nZXRGdWxsWWVhcigpLCBkLmdldE1vbnRoKCksIGQuZ2V0RGF0ZSgpKTsgLy8gQWNjb3JkaW5nIHRvIElTTy04NjAxLCB3ZWVrIG51bWJlciBjb21wdXRhdGlvbiBhcmUgYmFzZWQgb24gd2VlayBzdGFydGluZyBvbiBNb25kYXlcblxuICAgICAgICB2YXIgd2Vla0RheSA9IGR0LmdldERheSgpIC0gKHNlbGYub3B0aW9ucy53ZWVrU3RhcnRPbk1vbmRheSA/IDEgOiAwKTtcblxuICAgICAgICBpZiAod2Vla0RheSA8IDApIHtcbiAgICAgICAgICB3ZWVrRGF5ID0gNjtcbiAgICAgICAgfVxuXG4gICAgICAgIGR0LnNldERhdGUoZHQuZ2V0RGF0ZSgpIC0gd2Vla0RheSk7XG4gICAgICAgIHJldHVybiBkdC5nZXRUaW1lKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICBtb250aDoge1xuICAgICAgbmFtZTogJ21vbnRoJyxcbiAgICAgIGxldmVsOiA1MCxcbiAgICAgIG1heEl0ZW1OdW1iZXI6IDEyLFxuICAgICAgZGVmYXVsdENvbHVtbk51bWJlcjogMTIsXG4gICAgICBkZWZhdWx0Um93TnVtYmVyOiAxLFxuICAgICAgcm93OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzZWxmLmdldFN1YkRvbWFpblJvd051bWJlcigpO1xuICAgICAgfSxcbiAgICAgIGNvbHVtbjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc2VsZi5nZXRTdWJEb21haW5Db2x1bW5OdW1iZXIoKTtcbiAgICAgIH0sXG4gICAgICBwb3NpdGlvbjoge1xuICAgICAgICB4OiBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKGQuZ2V0TW9udGgoKSAvIHNlbGYuX2RvbWFpblR5cGUubW9udGgucm93KGQpKTtcbiAgICAgICAgfSxcbiAgICAgICAgeTogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICByZXR1cm4gZC5nZXRNb250aCgpICUgc2VsZi5fZG9tYWluVHlwZS5tb250aC5yb3coZCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBmb3JtYXQ6IHtcbiAgICAgICAgZGF0ZTogJyVCICVZJyxcbiAgICAgICAgbGVnZW5kOiAnJUInLFxuICAgICAgICBjb25uZWN0b3I6ICdpbidcbiAgICAgIH0sXG4gICAgICBleHRyYWN0VW5pdDogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpKS5nZXRUaW1lKCk7XG4gICAgICB9XG4gICAgfSxcbiAgICB5ZWFyOiB7XG4gICAgICBuYW1lOiAneWVhcicsXG4gICAgICBsZXZlbDogNjAsXG4gICAgICByb3c6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHNlbGYub3B0aW9ucy5yb3dMaW1pdCB8fCAxO1xuICAgICAgfSxcbiAgICAgIGNvbHVtbjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc2VsZi5vcHRpb25zLmNvbExpbWl0IHx8IDE7XG4gICAgICB9LFxuICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgeDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9LFxuICAgICAgICB5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBmb3JtYXQ6IHtcbiAgICAgICAgZGF0ZTogJyVZJyxcbiAgICAgICAgbGVnZW5kOiAnJVknLFxuICAgICAgICBjb25uZWN0b3I6ICdpbidcbiAgICAgIH0sXG4gICAgICBleHRyYWN0VW5pdDogZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSkuZ2V0VGltZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBmb3IgKHZhciB0eXBlIGluIHRoaXMuX2RvbWFpblR5cGUpIHtcbiAgICBpZiAodGhpcy5fZG9tYWluVHlwZS5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkge1xuICAgICAgdmFyIGQgPSB0aGlzLl9kb21haW5UeXBlW3R5cGVdO1xuICAgICAgdGhpcy5fZG9tYWluVHlwZVsneF8nICsgdHlwZV0gPSB7XG4gICAgICAgIG5hbWU6ICd4XycgKyB0eXBlLFxuICAgICAgICBsZXZlbDogZC50eXBlLFxuICAgICAgICBtYXhJdGVtTnVtYmVyOiBkLm1heEl0ZW1OdW1iZXIsXG4gICAgICAgIGRlZmF1bHRSb3dOdW1iZXI6IGQuZGVmYXVsdFJvd051bWJlcixcbiAgICAgICAgZGVmYXVsdENvbHVtbk51bWJlcjogZC5kZWZhdWx0Q29sdW1uTnVtYmVyLFxuICAgICAgICByb3c6IGQuY29sdW1uLFxuICAgICAgICBjb2x1bW46IGQucm93LFxuICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgIHg6IGQucG9zaXRpb24ueSxcbiAgICAgICAgICB5OiBkLnBvc2l0aW9uLnhcbiAgICAgICAgfSxcbiAgICAgICAgZm9ybWF0OiBkLmZvcm1hdCxcbiAgICAgICAgZXh0cmFjdFVuaXQ6IGQuZXh0cmFjdFVuaXRcbiAgICAgIH07XG4gICAgfVxuICB9IC8vIFJlY29yZCB0aGUgYWRkcmVzcyBvZiB0aGUgbGFzdCBpbnNlcnRlZCBkb21haW4gd2hlbiBicm93c2luZ1xuXG5cbiAgdGhpcy5sYXN0SW5zZXJ0ZWRTdmcgPSBudWxsO1xuICB0aGlzLl9jb21wbGV0ZWQgPSBmYWxzZTsgLy8gUmVjb3JkIGFsbCB0aGUgdmFsaWQgZG9tYWluc1xuICAvLyBFYWNoIGRvbWFpbiB2YWx1ZSBpcyBhIHRpbWVzdGFtcCBpbiBtaWxsaXNlY29uZHNcblxuICB0aGlzLl9kb21haW5zID0gZDMubWFwKCk7XG4gIHRoaXMuZ3JhcGhEaW0gPSB7XG4gICAgd2lkdGg6IDAsXG4gICAgaGVpZ2h0OiAwXG4gIH07XG4gIHRoaXMubGVnZW5kRGltID0ge1xuICAgIHdpZHRoOiAwLFxuICAgIGhlaWdodDogMFxuICB9O1xuICB0aGlzLk5BVklHQVRFX0xFRlQgPSAxO1xuICB0aGlzLk5BVklHQVRFX1JJR0hUID0gMjsgLy8gVmFyaW91cyB1cGRhdGUgbW9kZSB3aGVuIHVzaW5nIHRoZSB1cGRhdGUoKSBBUElcblxuICB0aGlzLlJFU0VUX0FMTF9PTl9VUERBVEUgPSAwO1xuICB0aGlzLlJFU0VUX1NJTkdMRV9PTl9VUERBVEUgPSAxO1xuICB0aGlzLkFQUEVORF9PTl9VUERBVEUgPSAyO1xuICB0aGlzLkRFRkFVTFRfTEVHRU5EX01BUkdJTiA9IDEwO1xuICB0aGlzLnJvb3QgPSBudWxsO1xuICB0aGlzLnRvb2x0aXAgPSBudWxsO1xuICB0aGlzLl9tYXhEb21haW5SZWFjaGVkID0gZmFsc2U7XG4gIHRoaXMuX21pbkRvbWFpblJlYWNoZWQgPSBmYWxzZTtcbiAgdGhpcy5kb21haW5Qb3NpdGlvbiA9IG5ldyBEb21haW5Qb3NpdGlvbigpO1xuICB0aGlzLkxlZ2VuZCA9IG51bGw7XG4gIHRoaXMubGVnZW5kU2NhbGUgPSBudWxsOyAvLyBMaXN0IG9mIGRvbWFpbnMgdGhhdCBhcmUgc2tpcHBlZCBiZWNhdXNlIG9mIERTVFxuICAvLyBBbGwgdGltZXMgYmVsb25naW5nIHRvIHRoZXNlIGRvbWFpbnMgc2hvdWxkIGJlIHJlLWFzc2lnbmVkIHRvIHRoZSBwcmV2aW91cyBkb21haW5cblxuICB0aGlzLkRTVERvbWFpbiA9IFtdO1xuICAvKipcbiAgICogRGlzcGxheSB0aGUgZ3JhcGggZm9yIHRoZSBmaXJzdCB0aW1lXG4gICAqIEByZXR1cm4gYm9vbCBUcnVlIGlmIHRoZSBjYWxlbmRhciBpcyBjcmVhdGVkXG4gICAqL1xuXG4gIHRoaXMuX2luaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgc2VsZi5nZXREb21haW4oc2VsZi5vcHRpb25zLnN0YXJ0KS5tYXAoZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiBkLmdldFRpbWUoKTtcbiAgICB9KS5tYXAoZnVuY3Rpb24gKGQpIHtcbiAgICAgIHNlbGYuX2RvbWFpbnMuc2V0KGQsIHNlbGYuZ2V0U3ViRG9tYWluKGQpLm1hcChmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHQ6IHNlbGYuX2RvbWFpblR5cGVbc2VsZi5vcHRpb25zLnN1YkRvbWFpbl0uZXh0cmFjdFVuaXQoZCksXG4gICAgICAgICAgdjogbnVsbFxuICAgICAgICB9O1xuICAgICAgfSkpO1xuICAgIH0pO1xuICAgIHNlbGYucm9vdCA9IGQzLnNlbGVjdChzZWxmLm9wdGlvbnMuaXRlbVNlbGVjdG9yKS5hcHBlbmQoJ3N2ZycpLmF0dHIoJ2NsYXNzJywgJ2NhbC1oZWF0bWFwLWNvbnRhaW5lcicpO1xuICAgIHNlbGYucm9vdC5hdHRyKCd4JywgMCkuYXR0cigneScsIDApLmFwcGVuZCgnc3ZnJykuYXR0cignY2xhc3MnLCAnZ3JhcGgnKTtcbiAgICBzZWxmLkxlZ2VuZCA9IG5ldyBMZWdlbmQoc2VsZik7XG5cbiAgICBpZiAoc2VsZi5vcHRpb25zLnBhaW50T25Mb2FkKSB7XG4gICAgICBfaW5pdENhbGVuZGFyKCk7XG4gICAgfVxuXG4gICAgc2VsZi5yb290LmNhbGwoc2VsZi50aXApO1xuICAgIHNlbGYucm9vdC5jYWxsKHNlbGYubGVnZW5kVGlwKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICBmdW5jdGlvbiBfaW5pdENhbGVuZGFyKCkge1xuICAgIHNlbGYudmVydGljYWxEb21haW5MYWJlbCA9IHNlbGYub3B0aW9ucy5sYWJlbC5wb3NpdGlvbiA9PT0gJ3RvcCcgfHwgc2VsZi5vcHRpb25zLmxhYmVsLnBvc2l0aW9uID09PSAnYm90dG9tJztcbiAgICBzZWxmLmRvbWFpblZlcnRpY2FsTGFiZWxIZWlnaHQgPSBzZWxmLm9wdGlvbnMubGFiZWwuaGVpZ2h0ID09PSBudWxsID8gTWF0aC5tYXgoMjUsIHNlbGYub3B0aW9ucy5jZWxsU2l6ZSAqIDIpIDogc2VsZi5vcHRpb25zLmxhYmVsLmhlaWdodDtcbiAgICBzZWxmLmRvbWFpbkhvcml6b250YWxMYWJlbFdpZHRoID0gMDtcblxuICAgIGlmIChzZWxmLm9wdGlvbnMuZG9tYWluTGFiZWxGb3JtYXQgPT09ICcnICYmIHNlbGYub3B0aW9ucy5sYWJlbC5oZWlnaHQgPT09IG51bGwpIHtcbiAgICAgIHNlbGYuZG9tYWluVmVydGljYWxMYWJlbEhlaWdodCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKCFzZWxmLnZlcnRpY2FsRG9tYWluTGFiZWwpIHtcbiAgICAgIHNlbGYuZG9tYWluVmVydGljYWxMYWJlbEhlaWdodCA9IDA7XG4gICAgICBzZWxmLmRvbWFpbkhvcml6b250YWxMYWJlbFdpZHRoID0gc2VsZi5vcHRpb25zLmxhYmVsLndpZHRoO1xuICAgIH1cblxuICAgIHNlbGYucGFpbnQoKTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vXG4gICAgLy8gQVRUQUNISU5HIERPTUFJTiBOQVZJR0FUSU9OIEVWRU5UICAgICAgICAgICAgICAgICAgICAvL1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xuXG4gICAgaWYgKHNlbGYub3B0aW9ucy5uZXh0U2VsZWN0b3IgIT09IGZhbHNlKSB7XG4gICAgICBkMy5zZWxlY3Qoc2VsZi5vcHRpb25zLm5leHRTZWxlY3Rvcikub24oJ2NsaWNrLicgKyBzZWxmLm9wdGlvbnMuaXRlbU5hbWVzcGFjZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBkMy5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXR1cm4gc2VsZi5sb2FkTmV4dERvbWFpbigxKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChzZWxmLm9wdGlvbnMucHJldmlvdXNTZWxlY3RvciAhPT0gZmFsc2UpIHtcbiAgICAgIGQzLnNlbGVjdChzZWxmLm9wdGlvbnMucHJldmlvdXNTZWxlY3Rvcikub24oJ2NsaWNrLicgKyBzZWxmLm9wdGlvbnMuaXRlbU5hbWVzcGFjZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBkMy5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXR1cm4gc2VsZi5sb2FkUHJldmlvdXNEb21haW4oMSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBzZWxmLkxlZ2VuZC5yZWRyYXcoc2VsZi5ncmFwaERpbS53aWR0aCAtIHNlbGYub3B0aW9ucy5kb21haW5HdXR0ZXIgLSBzZWxmLm9wdGlvbnMuY2VsbFBhZGRpbmcpO1xuICAgIHNlbGYuYWZ0ZXJMb2FkKCk7XG4gICAgdmFyIGRvbWFpbnMgPSBzZWxmLmdldERvbWFpbktleXMoKTsgLy8gRmlsbCB0aGUgZ3JhcGggd2l0aCBzb21lIGRhdGFzXG5cbiAgICBpZiAoc2VsZi5vcHRpb25zLmxvYWRPbkluaXQpIHtcbiAgICAgIHNlbGYuZ2V0RGF0YXMoc2VsZi5vcHRpb25zLmRhdGEsIG5ldyBEYXRlKGRvbWFpbnNbMF0pLCBzZWxmLmdldFN1YkRvbWFpbihkb21haW5zW2RvbWFpbnMubGVuZ3RoIC0gMV0pLnBvcCgpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuZmlsbCgpO1xuICAgICAgICBzZWxmLm9uQ29tcGxldGUoKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLm9uQ29tcGxldGUoKTtcbiAgICB9XG5cbiAgICBzZWxmLmNoZWNrSWZNaW5Eb21haW5Jc1JlYWNoZWQoZG9tYWluc1swXSk7XG4gICAgc2VsZi5jaGVja0lmTWF4RG9tYWluSXNSZWFjaGVkKHNlbGYuZ2V0TmV4dERvbWFpbigpLmdldFRpbWUoKSk7XG4gIH0gLy8gUmV0dXJuIHRoZSB3aWR0aCBvZiB0aGUgZG9tYWluIGJsb2NrLCB3aXRob3V0IHRoZSBkb21haW4gZ3V0dGVyXG4gIC8vIEBwYXJhbSBpbnQgZCBEb21haW4gc3RhcnQgdGltZXN0YW1wXG5cblxuICBmdW5jdGlvbiB3KGQsIG91dGVyKSB7XG4gICAgdmFyIHdpZHRoID0gc2VsZi5vcHRpb25zLmNlbGxTaXplICogc2VsZi5fZG9tYWluVHlwZVtzZWxmLm9wdGlvbnMuc3ViRG9tYWluXS5jb2x1bW4oZCkgKyBzZWxmLm9wdGlvbnMuY2VsbFBhZGRpbmcgKiBzZWxmLl9kb21haW5UeXBlW3NlbGYub3B0aW9ucy5zdWJEb21haW5dLmNvbHVtbihkKTtcblxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYmIG91dGVyID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gd2lkdGggKz0gc2VsZi5kb21haW5Ib3Jpem9udGFsTGFiZWxXaWR0aCArIHNlbGYub3B0aW9ucy5kb21haW5HdXR0ZXIgKyBzZWxmLm9wdGlvbnMuZG9tYWluTWFyZ2luWzFdICsgc2VsZi5vcHRpb25zLmRvbWFpbk1hcmdpblszXTtcbiAgICB9XG5cbiAgICByZXR1cm4gd2lkdGg7XG4gIH0gLy8gUmV0dXJuIHRoZSBoZWlnaHQgb2YgdGhlIGRvbWFpbiBibG9jaywgd2l0aG91dCB0aGUgZG9tYWluIGd1dHRlclxuXG5cbiAgZnVuY3Rpb24gaChkLCBvdXRlcikge1xuICAgIHZhciBoZWlnaHQgPSBzZWxmLm9wdGlvbnMuY2VsbFNpemUgKiBzZWxmLl9kb21haW5UeXBlW3NlbGYub3B0aW9ucy5zdWJEb21haW5dLnJvdyhkKSArIHNlbGYub3B0aW9ucy5jZWxsUGFkZGluZyAqIHNlbGYuX2RvbWFpblR5cGVbc2VsZi5vcHRpb25zLnN1YkRvbWFpbl0ucm93KGQpO1xuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIgJiYgb3V0ZXIgPT09IHRydWUpIHtcbiAgICAgIGhlaWdodCArPSBzZWxmLm9wdGlvbnMuZG9tYWluR3V0dGVyICsgc2VsZi5kb21haW5WZXJ0aWNhbExhYmVsSGVpZ2h0ICsgc2VsZi5vcHRpb25zLmRvbWFpbk1hcmdpblswXSArIHNlbGYub3B0aW9ucy5kb21haW5NYXJnaW5bMl07XG4gICAgfVxuXG4gICAgcmV0dXJuIGhlaWdodDtcbiAgfVxuICAvKipcbiAgICpcbiAgICpcbiAgICogQHBhcmFtIGludCBuYXZpZ2F0aW9uRGlyXG4gICAqL1xuXG5cbiAgdGhpcy5wYWludCA9IGZ1bmN0aW9uIChuYXZpZ2F0aW9uRGlyKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBzZWxmLm9wdGlvbnM7XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmF2aWdhdGlvbkRpciA9IGZhbHNlO1xuICAgIH0gLy8gUGFpbnRpbmcgYWxsIHRoZSBkb21haW5zXG5cblxuICAgIHZhciBkb21haW5TdmcgPSBzZWxmLnJvb3Quc2VsZWN0KCcuZ3JhcGgnKS5zZWxlY3RBbGwoJy5ncmFwaC1kb21haW4nKS5kYXRhKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBkYXRhID0gc2VsZi5nZXREb21haW5LZXlzKCk7XG4gICAgICByZXR1cm4gbmF2aWdhdGlvbkRpciA9PT0gc2VsZi5OQVZJR0FURV9MRUZUID8gZGF0YS5yZXZlcnNlKCkgOiBkYXRhO1xuICAgIH0sIGZ1bmN0aW9uIChkKSB7XG4gICAgICByZXR1cm4gZDtcbiAgICB9KTtcbiAgICB2YXIgZW50ZXJpbmdEb21haW5EaW0gPSAwO1xuICAgIHZhciBleGl0aW5nRG9tYWluRGltID0gMDsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vXG4gICAgLy8gUEFJTlRJTkcgRE9NQUlOICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly9cblxuICAgIHZhciBzdmcgPSBkb21haW5TdmcuZW50ZXIoKS5hcHBlbmQoJ3N2ZycpLmF0dHIoJ3dpZHRoJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiB3KGQsIHRydWUpO1xuICAgIH0pLmF0dHIoJ2hlaWdodCcsIGZ1bmN0aW9uIChkKSB7XG4gICAgICByZXR1cm4gaChkLCB0cnVlKTtcbiAgICB9KS5hdHRyKCd4JywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIGlmIChvcHRpb25zLnZlcnRpY2FsT3JpZW50YXRpb24pIHtcbiAgICAgICAgc2VsZi5ncmFwaERpbS53aWR0aCA9IE1hdGgubWF4KHNlbGYuZ3JhcGhEaW0ud2lkdGgsIHcoZCwgdHJ1ZSkpO1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBnZXREb21haW5Qb3NpdGlvbihkLCBzZWxmLmdyYXBoRGltLCAnd2lkdGgnLCB3KGQsIHRydWUpKTtcbiAgICAgIH1cbiAgICB9KS5hdHRyKCd5JywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIGlmIChvcHRpb25zLnZlcnRpY2FsT3JpZW50YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGdldERvbWFpblBvc2l0aW9uKGQsIHNlbGYuZ3JhcGhEaW0sICdoZWlnaHQnLCBoKGQsIHRydWUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuZ3JhcGhEaW0uaGVpZ2h0ID0gTWF0aC5tYXgoc2VsZi5ncmFwaERpbS5oZWlnaHQsIGgoZCwgdHJ1ZSkpO1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICB9KS5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICB2YXIgY2xhc3NuYW1lID0gJ2dyYXBoLWRvbWFpbic7XG4gICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGQpO1xuXG4gICAgICBzd2l0Y2ggKG9wdGlvbnMuZG9tYWluKSB7XG4gICAgICAgIGNhc2UgJ2hvdXInOlxuICAgICAgICAgIGNsYXNzbmFtZSArPSAnIGhfJyArIGRhdGUuZ2V0SG91cnMoKTtcblxuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG5cbiAgICAgICAgY2FzZSAnZGF5JzpcbiAgICAgICAgICBjbGFzc25hbWUgKz0gJyBkXycgKyBkYXRlLmdldERhdGUoKSArICcgZHlfJyArIGRhdGUuZ2V0RGF5KCk7XG5cbiAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuXG4gICAgICAgIGNhc2UgJ3dlZWsnOlxuICAgICAgICAgIGNsYXNzbmFtZSArPSAnIHdfJyArIHNlbGYuZ2V0V2Vla051bWJlcihkYXRlKTtcblxuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG5cbiAgICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICAgIGNsYXNzbmFtZSArPSAnIG1fJyArIChkYXRlLmdldE1vbnRoKCkgKyAxKTtcblxuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG5cbiAgICAgICAgY2FzZSAneWVhcic6XG4gICAgICAgICAgY2xhc3NuYW1lICs9ICcgeV8nICsgZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2xhc3NuYW1lO1xuICAgIH0pO1xuICAgIHNlbGYubGFzdEluc2VydGVkU3ZnID0gc3ZnO1xuXG4gICAgZnVuY3Rpb24gZ2V0RG9tYWluUG9zaXRpb24oZG9tYWluSW5kZXgsIGdyYXBoRGltLCBheGlzLCBkb21haW5EaW0pIHtcbiAgICAgIHZhciB0bXAgPSAwO1xuXG4gICAgICBzd2l0Y2ggKG5hdmlnYXRpb25EaXIpIHtcbiAgICAgICAgY2FzZSBmYWxzZTpcbiAgICAgICAgICB0bXAgPSBncmFwaERpbVtheGlzXTtcbiAgICAgICAgICBncmFwaERpbVtheGlzXSArPSBkb21haW5EaW07XG4gICAgICAgICAgc2VsZi5kb21haW5Qb3NpdGlvbi5zZXRQb3NpdGlvbihkb21haW5JbmRleCwgdG1wKTtcbiAgICAgICAgICByZXR1cm4gdG1wO1xuXG4gICAgICAgIGNhc2Ugc2VsZi5OQVZJR0FURV9SSUdIVDpcbiAgICAgICAgICBzZWxmLmRvbWFpblBvc2l0aW9uLnNldFBvc2l0aW9uKGRvbWFpbkluZGV4LCBncmFwaERpbVtheGlzXSk7XG4gICAgICAgICAgZW50ZXJpbmdEb21haW5EaW0gPSBkb21haW5EaW07XG4gICAgICAgICAgZXhpdGluZ0RvbWFpbkRpbSA9IHNlbGYuZG9tYWluUG9zaXRpb24uZ2V0UG9zaXRpb25Gcm9tSW5kZXgoMSk7XG4gICAgICAgICAgc2VsZi5kb21haW5Qb3NpdGlvbi5zaGlmdFJpZ2h0QnkoZXhpdGluZ0RvbWFpbkRpbSk7XG4gICAgICAgICAgcmV0dXJuIGdyYXBoRGltW2F4aXNdO1xuXG4gICAgICAgIGNhc2Ugc2VsZi5OQVZJR0FURV9MRUZUOlxuICAgICAgICAgIHRtcCA9IC1kb21haW5EaW07XG4gICAgICAgICAgZW50ZXJpbmdEb21haW5EaW0gPSAtdG1wO1xuICAgICAgICAgIGV4aXRpbmdEb21haW5EaW0gPSBncmFwaERpbVtheGlzXSAtIHNlbGYuZG9tYWluUG9zaXRpb24uZ2V0TGFzdCgpO1xuICAgICAgICAgIHNlbGYuZG9tYWluUG9zaXRpb24uc2V0UG9zaXRpb24oZG9tYWluSW5kZXgsIHRtcCk7XG4gICAgICAgICAgc2VsZi5kb21haW5Qb3NpdGlvbi5zaGlmdExlZnRCeShlbnRlcmluZ0RvbWFpbkRpbSk7XG4gICAgICAgICAgcmV0dXJuIHRtcDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzdmcuYXBwZW5kKCdyZWN0JykuYXR0cignd2lkdGgnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgcmV0dXJuIHcoZCwgdHJ1ZSkgLSBvcHRpb25zLmRvbWFpbkd1dHRlciAtIG9wdGlvbnMuY2VsbFBhZGRpbmc7XG4gICAgfSkuYXR0cignaGVpZ2h0JywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiBoKGQsIHRydWUpIC0gb3B0aW9ucy5kb21haW5HdXR0ZXIgLSBvcHRpb25zLmNlbGxQYWRkaW5nO1xuICAgIH0pLmF0dHIoJ2NsYXNzJywgJ2RvbWFpbi1iYWNrZ3JvdW5kJyk7IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xuICAgIC8vIFBBSU5USU5HIFNVQkRPTUFJTlMgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly9cblxuICAgIHZhciBzdWJEb21haW5TdmdHcm91cCA9IHN2Zy5hcHBlbmQoJ3N2ZycpLmF0dHIoJ3gnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAob3B0aW9ucy5sYWJlbC5wb3NpdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgIHJldHVybiBzZWxmLmRvbWFpbkhvcml6b250YWxMYWJlbFdpZHRoICsgb3B0aW9ucy5kb21haW5NYXJnaW5bM107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5kb21haW5NYXJnaW5bM107XG4gICAgICB9XG4gICAgfSkuYXR0cigneScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChvcHRpb25zLmxhYmVsLnBvc2l0aW9uID09PSAndG9wJykge1xuICAgICAgICByZXR1cm4gc2VsZi5kb21haW5WZXJ0aWNhbExhYmVsSGVpZ2h0ICsgb3B0aW9ucy5kb21haW5NYXJnaW5bMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5kb21haW5NYXJnaW5bMF07XG4gICAgICB9XG4gICAgfSkuYXR0cignY2xhc3MnLCAnZ3JhcGgtc3ViZG9tYWluLWdyb3VwJyk7XG4gICAgdmFyIHJlY3QgPSBzdWJEb21haW5TdmdHcm91cC5zZWxlY3RBbGwoJ2cnKS5kYXRhKGZ1bmN0aW9uIChkKSB7XG4gICAgICByZXR1cm4gc2VsZi5fZG9tYWlucy5nZXQoZCk7XG4gICAgfSkuZW50ZXIoKS5hcHBlbmQoJ2cnKTtcbiAgICByZWN0LmFwcGVuZCgncmVjdCcpLmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiAnZ3JhcGgtcmVjdCcgKyBzZWxmLmdldEhpZ2hsaWdodENsYXNzTmFtZShkLnQpICsgKG9wdGlvbnMub25DbGljayAhPT0gbnVsbCA/ICcgaG92ZXJfY3Vyc29yJyA6ICcnKTtcbiAgICB9KS5hdHRyKCd3aWR0aCcsIG9wdGlvbnMuY2VsbFNpemUpLmF0dHIoJ2hlaWdodCcsIG9wdGlvbnMuY2VsbFNpemUpLmF0dHIoJ3gnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgcmV0dXJuIHNlbGYucG9zaXRpb25TdWJEb21haW5YKGQudCk7XG4gICAgfSkuYXR0cigneScsIGZ1bmN0aW9uIChkKSB7XG4gICAgICByZXR1cm4gc2VsZi5wb3NpdGlvblN1YkRvbWFpblkoZC50KTtcbiAgICB9KS5vbignY2xpY2snLCBmdW5jdGlvbiAoZCkge1xuICAgICAgaWYgKG9wdGlvbnMub25DbGljayAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gc2VsZi5vbkNsaWNrKG5ldyBEYXRlKGQudCksIGQudik7XG4gICAgICB9XG4gICAgfSkuY2FsbChmdW5jdGlvbiAoc2VsZWN0aW9uKSB7XG4gICAgICBpZiAob3B0aW9ucy5jZWxsUmFkaXVzID4gMCkge1xuICAgICAgICBzZWxlY3Rpb24uYXR0cigncngnLCBvcHRpb25zLmNlbGxSYWRpdXMpLmF0dHIoJ3J5Jywgb3B0aW9ucy5jZWxsUmFkaXVzKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNlbGYubGVnZW5kU2NhbGUgIT09IG51bGwgJiYgb3B0aW9ucy5sZWdlbmRDb2xvcnMgIT09IG51bGwgJiYgb3B0aW9ucy5sZWdlbmRDb2xvcnMuaGFzT3duUHJvcGVydHkoJ2Jhc2UnKSkge1xuICAgICAgICBzZWxlY3Rpb24uYXR0cignZmlsbCcsIG9wdGlvbnMubGVnZW5kQ29sb3JzLmJhc2UpO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy50b29sdGlwKSB7XG4gICAgICAgIHNlbGVjdGlvbi5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICBzZWxmLnRpcC5zaG93KGQsIHRoaXMpO1xuICAgICAgICB9KS5vbignbW91c2VvdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc2VsZi50aXAuaGlkZShkKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7IC8vIEFwcGVuZGluZyBhIHRpdGxlIHRvIGVhY2ggc3ViZG9tYWluXG5cbiAgICBpZiAoIW9wdGlvbnMudG9vbHRpcCkge1xuICAgICAgcmVjdC5hcHBlbmQoJ3RpdGxlJykudGV4dChmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4gc2VsZi5mb3JtYXREYXRlKG5ldyBEYXRlKGQudCksIG9wdGlvbnMuc3ViRG9tYWluRGF0ZUZvcm1hdCk7XG4gICAgICB9KTtcbiAgICB9IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xuICAgIC8vIFBBSU5USU5HIExBQkVMICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly9cblxuXG4gICAgaWYgKG9wdGlvbnMuZG9tYWluTGFiZWxGb3JtYXQgIT09ICcnKSB7XG4gICAgICBzdmcuYXBwZW5kKCd0ZXh0JykuYXR0cignY2xhc3MnLCAnZ3JhcGgtbGFiZWwnKS5hdHRyKCd5JywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgdmFyIHkgPSBvcHRpb25zLmRvbWFpbk1hcmdpblswXTtcblxuICAgICAgICBzd2l0Y2ggKG9wdGlvbnMubGFiZWwucG9zaXRpb24pIHtcbiAgICAgICAgICBjYXNlICd0b3AnOlxuICAgICAgICAgICAgeSArPSBzZWxmLmRvbWFpblZlcnRpY2FsTGFiZWxIZWlnaHQgLyAyO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICAgICAgeSArPSBoKGQpICsgc2VsZi5kb21haW5WZXJ0aWNhbExhYmVsSGVpZ2h0IC8gMjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB5ICsgb3B0aW9ucy5sYWJlbC5vZmZzZXQueSAqIChvcHRpb25zLmxhYmVsLnJvdGF0ZSA9PT0gJ3JpZ2h0JyAmJiBvcHRpb25zLmxhYmVsLnBvc2l0aW9uID09PSAncmlnaHQnIHx8IG9wdGlvbnMubGFiZWwucm90YXRlID09PSAnbGVmdCcgJiYgb3B0aW9ucy5sYWJlbC5wb3NpdGlvbiA9PT0gJ2xlZnQnID8gLTEgOiAxKTtcbiAgICAgIH0pLmF0dHIoJ3gnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICB2YXIgeCA9IG9wdGlvbnMuZG9tYWluTWFyZ2luWzNdO1xuXG4gICAgICAgIHN3aXRjaCAob3B0aW9ucy5sYWJlbC5wb3NpdGlvbikge1xuICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgIHggKz0gdyhkKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnYm90dG9tJzpcbiAgICAgICAgICBjYXNlICd0b3AnOlxuICAgICAgICAgICAgeCArPSB3KGQpIC8gMjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLmxhYmVsLmFsaWduID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgcmV0dXJuIHggKyBzZWxmLmRvbWFpbkhvcml6b250YWxMYWJlbFdpZHRoIC0gb3B0aW9ucy5sYWJlbC5vZmZzZXQueCAqIChvcHRpb25zLmxhYmVsLnJvdGF0ZSA9PT0gJ3JpZ2h0JyA/IC0xIDogMSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geCArIG9wdGlvbnMubGFiZWwub2Zmc2V0Lng7XG4gICAgICB9KS5hdHRyKCd0ZXh0LWFuY2hvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc3dpdGNoIChvcHRpb25zLmxhYmVsLmFsaWduKSB7XG4gICAgICAgICAgY2FzZSAnc3RhcnQnOlxuICAgICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgICAgcmV0dXJuICdzdGFydCc7XG5cbiAgICAgICAgICBjYXNlICdlbmQnOlxuICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgIHJldHVybiAnZW5kJztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ21pZGRsZSc7XG4gICAgICAgIH1cbiAgICAgIH0pLmF0dHIoJ2RvbWluYW50LWJhc2VsaW5lJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc2VsZi52ZXJ0aWNhbERvbWFpbkxhYmVsID8gJ21pZGRsZScgOiAndG9wJztcbiAgICAgIH0pLnRleHQoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgcmV0dXJuIHNlbGYuZm9ybWF0RGF0ZShuZXcgRGF0ZShkKSwgb3B0aW9ucy5kb21haW5MYWJlbEZvcm1hdCk7XG4gICAgICB9KS5jYWxsKGRvbWFpblJvdGF0ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZG9tYWluUm90YXRlKHNlbGVjdGlvbikge1xuICAgICAgc3dpdGNoIChvcHRpb25zLmxhYmVsLnJvdGF0ZSkge1xuICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgc2VsZWN0aW9uLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICB2YXIgcyA9ICdyb3RhdGUoOTApLCAnO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKG9wdGlvbnMubGFiZWwucG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgICAgIHMgKz0gJ3RyYW5zbGF0ZSgtJyArIHcoZCkgKyAnICwgLScgKyB3KGQpICsgJyknO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgICAgICAgIHMgKz0gJ3RyYW5zbGF0ZSgwLCAtJyArIHNlbGYuZG9tYWluSG9yaXpvbnRhbExhYmVsV2lkdGggKyAnKSc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgIHNlbGVjdGlvbi5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgdmFyIHMgPSAncm90YXRlKDI3MCksICc7XG5cbiAgICAgICAgICAgIHN3aXRjaCAob3B0aW9ucy5sYWJlbC5wb3NpdGlvbikge1xuICAgICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgcyArPSAndHJhbnNsYXRlKC0nICsgKHcoZCkgKyBzZWxmLmRvbWFpbkhvcml6b250YWxMYWJlbFdpZHRoKSArICcgLCAnICsgdyhkKSArICcpJztcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgICAgICBzICs9ICd0cmFuc2xhdGUoLScgKyBzZWxmLmRvbWFpbkhvcml6b250YWxMYWJlbFdpZHRoICsgJyAsICcgKyBzZWxmLmRvbWFpbkhvcml6b250YWxMYWJlbFdpZHRoICsgJyknO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xuICAgIC8vIFBBSU5USU5HIERPTUFJTiBTVUJET01BSU4gQ09OVEVOVCAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly9cblxuXG4gICAgaWYgKG9wdGlvbnMuc3ViRG9tYWluVGV4dEZvcm1hdCAhPT0gbnVsbCkge1xuICAgICAgcmVjdC5hcHBlbmQoJ3RleHQnKS5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgIHJldHVybiAnc3ViZG9tYWluLXRleHQnICsgc2VsZi5nZXRIaWdobGlnaHRDbGFzc05hbWUoZC50KTtcbiAgICAgIH0pLmF0dHIoJ3gnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4gc2VsZi5wb3NpdGlvblN1YkRvbWFpblgoZC50KSArIG9wdGlvbnMuY2VsbFNpemUgLyAyO1xuICAgICAgfSkuYXR0cigneScsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgIHJldHVybiBzZWxmLnBvc2l0aW9uU3ViRG9tYWluWShkLnQpICsgb3B0aW9ucy5jZWxsU2l6ZSAvIDI7XG4gICAgICB9KS5hdHRyKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKS5hdHRyKCdkb21pbmFudC1iYXNlbGluZScsICdjZW50cmFsJykudGV4dChmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4gc2VsZi5mb3JtYXREYXRlKG5ldyBEYXRlKGQudCksIG9wdGlvbnMuc3ViRG9tYWluVGV4dEZvcm1hdCk7XG4gICAgICB9KTtcbiAgICB9IC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xuICAgIC8vIEFOSU1BVElPTiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly9cblxuXG4gICAgaWYgKG5hdmlnYXRpb25EaXIgIT09IGZhbHNlKSB7XG4gICAgICBkb21haW5TdmcudHJhbnNpdGlvbigpLmR1cmF0aW9uKG9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24pLmF0dHIoJ3gnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy52ZXJ0aWNhbE9yaWVudGF0aW9uID8gMCA6IHNlbGYuZG9tYWluUG9zaXRpb24uZ2V0UG9zaXRpb24oZCk7XG4gICAgICB9KS5hdHRyKCd5JywgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMudmVydGljYWxPcmllbnRhdGlvbiA/IHNlbGYuZG9tYWluUG9zaXRpb24uZ2V0UG9zaXRpb24oZCkgOiAwO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIHRlbXBXaWR0aCA9IHNlbGYuZ3JhcGhEaW0ud2lkdGg7XG4gICAgdmFyIHRlbXBIZWlnaHQgPSBzZWxmLmdyYXBoRGltLmhlaWdodDtcblxuICAgIGlmIChvcHRpb25zLnZlcnRpY2FsT3JpZW50YXRpb24pIHtcbiAgICAgIHNlbGYuZ3JhcGhEaW0uaGVpZ2h0ICs9IGVudGVyaW5nRG9tYWluRGltIC0gZXhpdGluZ0RvbWFpbkRpbTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5ncmFwaERpbS53aWR0aCArPSBlbnRlcmluZ0RvbWFpbkRpbSAtIGV4aXRpbmdEb21haW5EaW07XG4gICAgfSAvLyBBdCB0aGUgdGltZSBvZiBleGl0LCBkb21haW5zV2lkdGggYW5kIGRvbWFpbnNIZWlnaHQgYWxyZWFkeSBhdXRvbWF0aWNhbGx5IHNoaWZ0ZWRcblxuXG4gICAgZG9tYWluU3ZnLmV4aXQoKS50cmFuc2l0aW9uKCkuZHVyYXRpb24ob3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbikuYXR0cigneCcsIGZ1bmN0aW9uIChkKSB7XG4gICAgICBpZiAob3B0aW9ucy52ZXJ0aWNhbE9yaWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3dpdGNoIChuYXZpZ2F0aW9uRGlyKSB7XG4gICAgICAgICAgY2FzZSBzZWxmLk5BVklHQVRFX0xFRlQ6XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oc2VsZi5ncmFwaERpbS53aWR0aCwgdGVtcFdpZHRoKTtcblxuICAgICAgICAgIGNhc2Ugc2VsZi5OQVZJR0FURV9SSUdIVDpcbiAgICAgICAgICAgIHJldHVybiAtdyhkLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLmF0dHIoJ3knLCBmdW5jdGlvbiAoZCkge1xuICAgICAgaWYgKG9wdGlvbnMudmVydGljYWxPcmllbnRhdGlvbikge1xuICAgICAgICBzd2l0Y2ggKG5hdmlnYXRpb25EaXIpIHtcbiAgICAgICAgICBjYXNlIHNlbGYuTkFWSUdBVEVfTEVGVDpcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbihzZWxmLmdyYXBoRGltLmhlaWdodCwgdGVtcEhlaWdodCk7XG5cbiAgICAgICAgICBjYXNlIHNlbGYuTkFWSUdBVEVfUklHSFQ6XG4gICAgICAgICAgICByZXR1cm4gLWgoZCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgIH0pLnJlbW92ZSgpOyAvLyBSZXNpemUgdGhlIHJvb3QgY29udGFpbmVyXG5cbiAgICBzZWxmLnJlc2l6ZSgpO1xuICB9O1xufTtcblxuQ2FsSGVhdE1hcC5wcm90b3R5cGUgPSB7XG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBhbmQgbWVyZ2UgdXNlciBzZXR0aW5ncyB3aXRoIGRlZmF1bHQgc2V0dGluZ3NcbiAgICpcbiAgICogQHBhcmFtICB7b2JqZWN0fSBzZXR0aW5ncyBVc2VyIHNldHRpbmdzXG4gICAqIEByZXR1cm4ge2Jvb2x9IEZhbHNlIGlmIHNldHRpbmdzIGNvbnRhaW5zIGVycm9yXG4gICAqL1xuXG4gIC8qIGpzaGludCBtYXhzdGF0ZW1lbnRzOmZhbHNlICovXG4gIGluaXQ6IGZ1bmN0aW9uIChzZXR0aW5ncykge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBwYXJlbnQgPSB0aGlzO1xuICAgIHZhciBvcHRpb25zID0gcGFyZW50Lm9wdGlvbnMgPSBtZXJnZVJlY3Vyc2l2ZShwYXJlbnQub3B0aW9ucywgc2V0dGluZ3MpOyAvLyBGYXRhbCBlcnJvcnNcbiAgICAvLyBTdG9wIHNjcmlwdCBleGVjdXRpb24gb24gZXJyb3JcblxuICAgIHZhbGlkYXRlRG9tYWluVHlwZSgpO1xuICAgIHZhbGlkYXRlU2VsZWN0b3Iob3B0aW9ucy5pdGVtU2VsZWN0b3IsIGZhbHNlLCAnaXRlbVNlbGVjdG9yJyk7XG5cbiAgICBpZiAocGFyZW50LmFsbG93ZWREYXRhVHlwZS5pbmRleE9mKG9wdGlvbnMuZGF0YVR5cGUpID09PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGRhdGEgdHlwZSAnXCIgKyBvcHRpb25zLmRhdGFUeXBlICsgXCInIGlzIG5vdCB2YWxpZCBkYXRhIHR5cGVcIik7XG4gICAgfVxuXG4gICAgaWYgKGQzLnNlbGVjdChvcHRpb25zLml0ZW1TZWxlY3RvcilbMF1bMF0gPT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBub2RlICdcIiArIG9wdGlvbnMuaXRlbVNlbGVjdG9yICsgXCInIHNwZWNpZmllZCBpbiBpdGVtU2VsZWN0b3IgZG9lcyBub3QgZXhpc3RzXCIpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICB2YWxpZGF0ZVNlbGVjdG9yKG9wdGlvbnMubmV4dFNlbGVjdG9yLCB0cnVlLCAnbmV4dFNlbGVjdG9yJyk7XG4gICAgICB2YWxpZGF0ZVNlbGVjdG9yKG9wdGlvbnMucHJldmlvdXNTZWxlY3RvciwgdHJ1ZSwgJ3ByZXZpb3VzU2VsZWN0b3InKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSAvLyBJZiBvdGhlciBzZXR0aW5ncyBjb250YWlucyBlcnJvciwgd2lsbCBmYWxsYmFjayB0byBkZWZhdWx0XG5cblxuICAgIGlmICghc2V0dGluZ3MuaGFzT3duUHJvcGVydHkoJ3N1YkRvbWFpbicpKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuc3ViRG9tYWluID0gZ2V0T3B0aW1hbFN1YkRvbWFpbihzZXR0aW5ncy5kb21haW4pO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5pdGVtTmFtZXNwYWNlICE9PSAnc3RyaW5nJyB8fCBvcHRpb25zLml0ZW1OYW1lc3BhY2UgPT09ICcnKSB7XG4gICAgICBjb25zb2xlLmxvZygnaXRlbU5hbWVzcGFjZSBjYW4gbm90IGJlIGVtcHR5LCBmYWxsaW5nIGJhY2sgdG8gY2FsLWhlYXRtYXAnKTtcbiAgICAgIG9wdGlvbnMuaXRlbU5hbWVzcGFjZSA9ICdjYWwtaGVhdG1hcCc7XG4gICAgfSAvLyBEb24ndCB0b3VjaCB0aGVzZSBzZXR0aW5nc1xuXG5cbiAgICB2YXIgcyA9IFsnZGF0YScsICdvbkNvbXBsZXRlJywgJ29uQ2xpY2snLCAnYWZ0ZXJMb2FkJywgJ2FmdGVyTG9hZERhdGEnLCAnYWZ0ZXJMb2FkUHJldmlvdXNEb21haW4nLCAnYWZ0ZXJMb2FkTmV4dERvbWFpbicsICdhZnRlclVwZGF0ZSddO1xuXG4gICAgZm9yICh2YXIgayBpbiBzKSB7XG4gICAgICBpZiAoc2V0dGluZ3MuaGFzT3duUHJvcGVydHkoc1trXSkpIHtcbiAgICAgICAgb3B0aW9uc1tzW2tdXSA9IHNldHRpbmdzW3Nba11dO1xuICAgICAgfVxuICAgIH1cblxuICAgIG9wdGlvbnMuc3ViRG9tYWluRGF0ZUZvcm1hdCA9IHR5cGVvZiBvcHRpb25zLnN1YkRvbWFpbkRhdGVGb3JtYXQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBvcHRpb25zLnN1YkRvbWFpbkRhdGVGb3JtYXQgPT09ICdmdW5jdGlvbicgPyBvcHRpb25zLnN1YkRvbWFpbkRhdGVGb3JtYXQgOiB0aGlzLl9kb21haW5UeXBlW29wdGlvbnMuc3ViRG9tYWluXS5mb3JtYXQuZGF0ZTtcbiAgICBvcHRpb25zLmRvbWFpbkxhYmVsRm9ybWF0ID0gdHlwZW9mIG9wdGlvbnMuZG9tYWluTGFiZWxGb3JtYXQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBvcHRpb25zLmRvbWFpbkxhYmVsRm9ybWF0ID09PSAnZnVuY3Rpb24nID8gb3B0aW9ucy5kb21haW5MYWJlbEZvcm1hdCA6IHRoaXMuX2RvbWFpblR5cGVbb3B0aW9ucy5kb21haW5dLmZvcm1hdC5sZWdlbmQ7XG4gICAgb3B0aW9ucy5zdWJEb21haW5UZXh0Rm9ybWF0ID0gdHlwZW9mIG9wdGlvbnMuc3ViRG9tYWluVGV4dEZvcm1hdCA9PT0gJ3N0cmluZycgJiYgb3B0aW9ucy5zdWJEb21haW5UZXh0Rm9ybWF0ICE9PSAnJyB8fCB0eXBlb2Ygb3B0aW9ucy5zdWJEb21haW5UZXh0Rm9ybWF0ID09PSAnZnVuY3Rpb24nID8gb3B0aW9ucy5zdWJEb21haW5UZXh0Rm9ybWF0IDogbnVsbDtcbiAgICBvcHRpb25zLmRvbWFpbk1hcmdpbiA9IGV4cGFuZE1hcmdpblNldHRpbmcob3B0aW9ucy5kb21haW5NYXJnaW4pO1xuICAgIG9wdGlvbnMubGVnZW5kTWFyZ2luID0gZXhwYW5kTWFyZ2luU2V0dGluZyhvcHRpb25zLmxlZ2VuZE1hcmdpbik7XG4gICAgb3B0aW9ucy5oaWdobGlnaHQgPSBwYXJlbnQuZXhwYW5kRGF0ZVNldHRpbmcob3B0aW9ucy5oaWdobGlnaHQpO1xuICAgIG9wdGlvbnMuaXRlbU5hbWUgPSBleHBhbmRJdGVtTmFtZShvcHRpb25zLml0ZW1OYW1lKTtcbiAgICBvcHRpb25zLmNvbExpbWl0ID0gcGFyc2VDb2xMaW1pdChvcHRpb25zLmNvbExpbWl0KTtcbiAgICBvcHRpb25zLnJvd0xpbWl0ID0gcGFyc2VSb3dMaW1pdChvcHRpb25zLnJvd0xpbWl0KTtcblxuICAgIGlmICghc2V0dGluZ3MuaGFzT3duUHJvcGVydHkoJ2xlZ2VuZE1hcmdpbicpKSB7XG4gICAgICBhdXRvQWRkTGVnZW5kTWFyZ2luKCk7XG4gICAgfVxuXG4gICAgYXV0b0FsaWduTGFiZWwoKTtcbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZSB0aGF0IGEgcXVlcnlTdHJpbmcgaXMgdmFsaWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0VsZW1lbnR8c3RyaW5nfGJvb2x9IHNlbGVjdG9yICAgVGhlIHF1ZXJ5U3RyaW5nIHRvIHRlc3RcbiAgICAgKiBAcGFyYW0gIHtib29sfSAgY2FuQmVGYWxzZSAgV2hldGhlciBmYWxzZSBpcyBhbiBhY2NlcHRlZCBhbmQgdmFsaWQgdmFsdWVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWUgICAgTmFtZSBvZiB0aGUgdGVzdGVkIHNlbGVjdG9yXG4gICAgICogQHRocm93cyB7RXJyb3J9ICAgICAgICBJZiB0aGUgc2VsZWN0b3IgaXMgbm90IHZhbGlkXG4gICAgICogQHJldHVybiB7Ym9vbH0gICAgICAgIFRydWUgaWYgdGhlIHNlbGVjdG9yIGlzIGEgdmFsaWQgcXVlcnlTdHJpbmdcbiAgICAgKi9cblxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlU2VsZWN0b3Ioc2VsZWN0b3IsIGNhbkJlRmFsc2UsIG5hbWUpIHtcbiAgICAgIGlmICgoY2FuQmVGYWxzZSAmJiBzZWxlY3RvciA9PT0gZmFsc2UgfHwgc2VsZWN0b3IgaW5zdGFuY2VvZiBFbGVtZW50IHx8IHR5cGVvZiBzZWxlY3RvciA9PT0gJ3N0cmluZycpICYmIHNlbGVjdG9yICE9PSAnJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgJyArIG5hbWUgKyAnIGlzIG5vdCB2YWxpZCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG9wdGltYWwgc3ViRG9tYWluIGZvciB0aGUgc3BlY2lmaWVkIGRvbWFpblxuICAgICAqXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBkb21haW4gYSBkb21haW4gbmFtZVxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgIHRoZSBzdWJEb21haW4gbmFtZVxuICAgICAqL1xuXG5cbiAgICBmdW5jdGlvbiBnZXRPcHRpbWFsU3ViRG9tYWluKGRvbWFpbikge1xuICAgICAgc3dpdGNoIChkb21haW4pIHtcbiAgICAgICAgY2FzZSAneWVhcic6XG4gICAgICAgICAgcmV0dXJuICdtb250aCc7XG5cbiAgICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICAgIHJldHVybiAnZGF5JztcblxuICAgICAgICBjYXNlICd3ZWVrJzpcbiAgICAgICAgICByZXR1cm4gJ2RheSc7XG5cbiAgICAgICAgY2FzZSAnZGF5JzpcbiAgICAgICAgICByZXR1cm4gJ2hvdXInO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuICdtaW4nO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmUgdGhhdCB0aGUgZG9tYWluIGFuZCBzdWJkb21haW4gYXJlIHZhbGlkXG4gICAgICpcbiAgICAgKiBAdGhyb3cge0Vycm9yfSB3aGVuIGRvbWFpbiBvciBzdWJkb21haW4gYXJlIG5vdCB2YWxpZFxuICAgICAqIEByZXR1cm4ge2Jvb2x9IFRydWUgaWYgZG9tYWluIGFuZCBzdWJkb21haW4gYXJlIHZhbGlkIGFuZCBjb21wYXRpYmxlXG4gICAgICovXG5cblxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlRG9tYWluVHlwZSgpIHtcbiAgICAgIGlmICghcGFyZW50Ll9kb21haW5UeXBlLmhhc093blByb3BlcnR5KG9wdGlvbnMuZG9tYWluKSB8fCBvcHRpb25zLmRvbWFpbiA9PT0gJ21pbicgfHwgb3B0aW9ucy5kb21haW4uc3Vic3RyaW5nKDAsIDIpID09PSAneF8nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBkb21haW4gJ1wiICsgb3B0aW9ucy5kb21haW4gKyBcIicgaXMgbm90IHZhbGlkXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXBhcmVudC5fZG9tYWluVHlwZS5oYXNPd25Qcm9wZXJ0eShvcHRpb25zLnN1YkRvbWFpbikgfHwgb3B0aW9ucy5zdWJEb21haW4gPT09ICd5ZWFyJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3ViRG9tYWluICdcIiArIG9wdGlvbnMuc3ViRG9tYWluICsgXCInIGlzIG5vdCB2YWxpZFwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmVudC5fZG9tYWluVHlwZVtvcHRpb25zLmRvbWFpbl0ubGV2ZWwgPD0gcGFyZW50Ll9kb21haW5UeXBlW29wdGlvbnMuc3ViRG9tYWluXS5sZXZlbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCInXCIgKyBvcHRpb25zLnN1YkRvbWFpbiArIFwiJyBpcyBub3QgYSB2YWxpZCBzdWJEb21haW4gdG8gJ1wiICsgb3B0aW9ucy5kb21haW4gKyBcIidcIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5lLXR1bmUgdGhlIGxhYmVsIGFsaWduZW1lbnQgZGVwZW5kaW5nIG9uIGl0cyBwb3NpdGlvblxuICAgICAqXG4gICAgICogQHJldHVybiB2b2lkXG4gICAgICovXG5cblxuICAgIGZ1bmN0aW9uIGF1dG9BbGlnbkxhYmVsKCkge1xuICAgICAgLy8gQXV0by1hbGlnbiBsYWJlbCwgZGVwZW5kaW5nIG9uIGl0J3MgcG9zaXRpb25cbiAgICAgIGlmICghc2V0dGluZ3MuaGFzT3duUHJvcGVydHkoJ2xhYmVsJykgfHwgc2V0dGluZ3MuaGFzT3duUHJvcGVydHkoJ2xhYmVsJykgJiYgIXNldHRpbmdzLmxhYmVsLmhhc093blByb3BlcnR5KCdhbGlnbicpKSB7XG4gICAgICAgIHN3aXRjaCAob3B0aW9ucy5sYWJlbC5wb3NpdGlvbikge1xuICAgICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgICAgb3B0aW9ucy5sYWJlbC5hbGlnbiA9ICdyaWdodCc7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgIG9wdGlvbnMubGFiZWwuYWxpZ24gPSAnbGVmdCc7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBvcHRpb25zLmxhYmVsLmFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5sYWJlbC5yb3RhdGUgPT09ICdsZWZ0Jykge1xuICAgICAgICAgIG9wdGlvbnMubGFiZWwuYWxpZ24gPSAncmlnaHQnO1xuICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMubGFiZWwucm90YXRlID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgb3B0aW9ucy5sYWJlbC5hbGlnbiA9ICdsZWZ0JztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXNldHRpbmdzLmhhc093blByb3BlcnR5KCdsYWJlbCcpIHx8IHNldHRpbmdzLmhhc093blByb3BlcnR5KCdsYWJlbCcpICYmICFzZXR0aW5ncy5sYWJlbC5oYXNPd25Qcm9wZXJ0eSgnb2Zmc2V0JykpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMubGFiZWwucG9zaXRpb24gPT09ICdsZWZ0JyB8fCBvcHRpb25zLmxhYmVsLnBvc2l0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgb3B0aW9ucy5sYWJlbC5vZmZzZXQgPSB7XG4gICAgICAgICAgICB4OiAxMCxcbiAgICAgICAgICAgIHk6IDE1XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiBub3Qgc3BlY2lmaWVkLCBhZGQgc29tZSBtYXJnaW4gYXJvdW5kIHRoZSBsZWdlbmQgZGVwZW5kaW5nIG9uIGl0cyBwb3NpdGlvblxuICAgICAqXG4gICAgICogQHJldHVybiB2b2lkXG4gICAgICovXG5cblxuICAgIGZ1bmN0aW9uIGF1dG9BZGRMZWdlbmRNYXJnaW4oKSB7XG4gICAgICBzd2l0Y2ggKG9wdGlvbnMubGVnZW5kVmVydGljYWxQb3NpdGlvbikge1xuICAgICAgICBjYXNlICd0b3AnOlxuICAgICAgICAgIG9wdGlvbnMubGVnZW5kTWFyZ2luWzJdID0gcGFyZW50LkRFRkFVTFRfTEVHRU5EX01BUkdJTjtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICAgIG9wdGlvbnMubGVnZW5kTWFyZ2luWzBdID0gcGFyZW50LkRFRkFVTFRfTEVHRU5EX01BUkdJTjtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdtaWRkbGUnOlxuICAgICAgICBjYXNlICdjZW50ZXInOlxuICAgICAgICAgIG9wdGlvbnMubGVnZW5kTWFyZ2luW29wdGlvbnMubGVnZW5kSG9yaXpvbnRhbFBvc2l0aW9uID09PSAncmlnaHQnID8gMyA6IDFdID0gcGFyZW50LkRFRkFVTFRfTEVHRU5EX01BUkdJTjtcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhwYW5kIGEgbnVtYmVyIG9mIGFuIGFycmF5IG9mIG51bWJlcnMgdG8gYW4gdXNhYmxlIDQgdmFsdWVzIGFycmF5XG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtpbnRlZ2VyfGFycmF5fSB2YWx1ZVxuICAgICAqIEByZXR1cm4ge2FycmF5fSAgICAgICAgYXJyYXlcbiAgICAgKi9cblxuXG4gICAgZnVuY3Rpb24gZXhwYW5kTWFyZ2luU2V0dGluZyh2YWx1ZSkge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdmFsdWUgPSBbdmFsdWVdO1xuICAgICAgfVxuXG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNYXJnaW4gb25seSB0YWtlcyBhbiBpbnRlZ2VyIG9yIGFuIGFycmF5IG9mIGludGVnZXJzJyk7XG4gICAgICAgIHZhbHVlID0gWzBdO1xuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKHZhbHVlLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgcmV0dXJuIFt2YWx1ZVswXSwgdmFsdWVbMF0sIHZhbHVlWzBdLCB2YWx1ZVswXV07XG5cbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHJldHVybiBbdmFsdWVbMF0sIHZhbHVlWzFdLCB2YWx1ZVswXSwgdmFsdWVbMV1dO1xuXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICByZXR1cm4gW3ZhbHVlWzBdLCB2YWx1ZVsxXSwgdmFsdWVbMl0sIHZhbHVlWzFdXTtcblxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIHZhbHVlLnNsaWNlKDAsIDQpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0IGEgc3RyaW5nIHRvIGFuIGFycmF5IGxpa2UgW3Npbmd1bGFyLWZvcm0sIHBsdXJhbC1mb3JtXVxuICAgICAqXG4gICAgICogQHBhcmFtICB7c3RyaW5nfGFycmF5fSB2YWx1ZSBEYXRlIHRvIGNvbnZlcnRcbiAgICAgKiBAcmV0dXJuIHthcnJheX0gICAgICAgQW4gYXJyYXkgbGlrZSBbc2luZ3VsYXItZm9ybSwgcGx1cmFsLWZvcm1dXG4gICAgICovXG5cblxuICAgIGZ1bmN0aW9uIGV4cGFuZEl0ZW1OYW1lKHZhbHVlKSB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gW3ZhbHVlLCB2YWx1ZSArICh2YWx1ZSAhPT0gJycgPyAncycgOiAnJyldO1xuICAgICAgfVxuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIHJldHVybiBbdmFsdWVbMF0sIHZhbHVlWzBdICsgJ3MnXTtcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlLnNsaWNlKDAsIDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gWydpdGVtJywgJ2l0ZW1zJ107XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VDb2xMaW1pdCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlID4gMCA/IHZhbHVlIDogbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZVJvd0xpbWl0KHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUgPiAwICYmIG9wdGlvbnMuY29sTGltaXQgPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjb2xMaW1pdCBhbmQgcm93TGltaXQgYXJlIG11dHVhbGx5IGV4Y2x1c2l2ZSwgcm93TGltaXQgd2lsbCBiZSBpZ25vcmVkJyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdmFsdWUgPiAwID8gdmFsdWUgOiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9pbml0KCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENvbnZlcnQgYSBrZXl3b3JkIG9yIGFuIGFycmF5IG9mIGtleXdvcmQvZGF0ZSB0byBhbiBhcnJheSBvZiBkYXRlIG9iamVjdHNcbiAgICpcbiAgICogQHBhcmFtICB7c3RyaW5nfGFycmF5fERhdGV9IHZhbHVlIERhdGEgdG8gY29udmVydFxuICAgKiBAcmV0dXJuIHthcnJheX0gICAgICAgQW4gYXJyYXkgb2YgRGF0ZXNcbiAgICovXG4gIGV4cGFuZERhdGVTZXR0aW5nOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICB2YWx1ZSA9IFt2YWx1ZV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlLm1hcChmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgaWYgKGRhdGEgPT09ICdub3cnKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiBkICE9PSBmYWxzZTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogRmlsbCB0aGUgY2FsZW5kYXIgYnkgY29sb3JpbmcgdGhlIGNlbGxzXG4gICAqXG4gICAqIEBwYXJhbSBhcnJheSBzdmcgQW4gYXJyYXkgb2YgaHRtbCBub2RlIHRvIGFwcGx5IHRoZSB0cmFuc2Zvcm1hdGlvbiB0byAob3B0aW9uYWwpXG4gICAqICAgICAgICAgICAgICAgICAgSXQncyB1c2VkIHRvIGxpbWl0IHRoZSBwYWludGluZyB0byBvbmx5IGEgc3Vic2V0IG9mIHRoZSBjYWxlbmRhclxuICAgKiBAcmV0dXJuIHZvaWRcbiAgICovXG4gIGZpbGw6IGZ1bmN0aW9uIChzdmcpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgcGFyZW50ID0gdGhpcztcbiAgICB2YXIgb3B0aW9ucyA9IHBhcmVudC5vcHRpb25zO1xuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHN2ZyA9IHBhcmVudC5yb290LnNlbGVjdEFsbCgnLmdyYXBoLWRvbWFpbicpO1xuICAgIH1cblxuICAgIHZhciByZWN0ID0gc3ZnLnNlbGVjdEFsbCgnc3ZnJykuc2VsZWN0QWxsKCdnJykuZGF0YShmdW5jdGlvbiAoZCkge1xuICAgICAgcmV0dXJuIHBhcmVudC5fZG9tYWlucy5nZXQoZCk7XG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogQ29sb3JpemUgdGhlIGNlbGwgdmlhIGEgc3R5bGUgYXR0cmlidXRlIGlmIGVuYWJsZWRcbiAgICAgKi9cblxuICAgIGZ1bmN0aW9uIGFkZFN0eWxlKGVsZW1lbnQpIHtcbiAgICAgIGlmIChwYXJlbnQubGVnZW5kU2NhbGUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBlbGVtZW50LmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICBpZiAoZC52ID09PSBudWxsICYmIG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2NvbnNpZGVyTWlzc2luZ0RhdGFBc1plcm8nKSAmJiAhb3B0aW9ucy5jb25zaWRlck1pc3NpbmdEYXRhQXNaZXJvKSB7XG4gICAgICAgICAgaWYgKG9wdGlvbnMubGVnZW5kQ29sb3JzLmhhc093blByb3BlcnR5KCdiYXNlJykpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmxlZ2VuZENvbG9ycy5iYXNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLmxlZ2VuZENvbG9ycyAhPT0gbnVsbCAmJiBvcHRpb25zLmxlZ2VuZENvbG9ycy5oYXNPd25Qcm9wZXJ0eSgnZW1wdHknKSAmJiAoZC52ID09PSAwIHx8IGQudiA9PT0gbnVsbCAmJiBvcHRpb25zLmhhc093blByb3BlcnR5KCdjb25zaWRlck1pc3NpbmdEYXRhQXNaZXJvJykgJiYgb3B0aW9ucy5jb25zaWRlck1pc3NpbmdEYXRhQXNaZXJvKSkge1xuICAgICAgICAgIHJldHVybiBvcHRpb25zLmxlZ2VuZENvbG9ycy5lbXB0eTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkLnYgPCAwICYmIG9wdGlvbnMubGVnZW5kWzBdID4gMCAmJiBvcHRpb25zLmxlZ2VuZENvbG9ycyAhPT0gbnVsbCAmJiBvcHRpb25zLmxlZ2VuZENvbG9ycy5oYXNPd25Qcm9wZXJ0eSgnb3ZlcmZsb3cnKSkge1xuICAgICAgICAgIHJldHVybiBvcHRpb25zLmxlZ2VuZENvbG9ycy5vdmVyZmxvdztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYXJlbnQubGVnZW5kU2NhbGUoTWF0aC5taW4oZC52LCBvcHRpb25zLmxlZ2VuZFtvcHRpb25zLmxlZ2VuZC5sZW5ndGggLSAxXSkpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVjdC50cmFuc2l0aW9uKCkuZHVyYXRpb24ob3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbikuc2VsZWN0KCdyZWN0JykuYXR0cignY2xhc3MnLCBmdW5jdGlvbiAoZCkge1xuICAgICAgdmFyIGh0bWxDbGFzcyA9IHBhcmVudC5nZXRIaWdobGlnaHRDbGFzc05hbWUoZC50KS50cmltKCkuc3BsaXQoJyAnKTtcbiAgICAgIHZhciBwYXN0RGF0ZSA9IHBhcmVudC5kYXRlSXNMZXNzVGhhbihkLnQsIG5ldyBEYXRlKCkpO1xuICAgICAgdmFyIHNhbWVEYXRlID0gcGFyZW50LmRhdGVJc0VxdWFsKGQudCwgbmV3IERhdGUoKSk7XG5cbiAgICAgIGlmIChwYXJlbnQubGVnZW5kU2NhbGUgPT09IG51bGwgfHwgZC52ID09PSBudWxsICYmIG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2NvbnNpZGVyTWlzc2luZ0RhdGFBc1plcm8nKSAmJiAhb3B0aW9ucy5jb25zaWRlck1pc3NpbmdEYXRhQXNaZXJvICYmICFvcHRpb25zLmxlZ2VuZENvbG9ycy5oYXNPd25Qcm9wZXJ0eSgnYmFzZScpKSB7XG4gICAgICAgIGh0bWxDbGFzcy5wdXNoKCdncmFwaC1yZWN0Jyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzYW1lRGF0ZSkge1xuICAgICAgICBodG1sQ2xhc3MucHVzaCgnbm93Jyk7XG4gICAgICB9IGVsc2UgaWYgKCFwYXN0RGF0ZSkge1xuICAgICAgICBodG1sQ2xhc3MucHVzaCgnZnV0dXJlJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkLnYgIT09IG51bGwpIHtcbiAgICAgICAgaHRtbENsYXNzLnB1c2gocGFyZW50LkxlZ2VuZC5nZXRDbGFzcyhkLnYsIHBhcmVudC5sZWdlbmRTY2FsZSA9PT0gbnVsbCkpO1xuICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmNvbnNpZGVyTWlzc2luZ0RhdGFBc1plcm8gJiYgcGFzdERhdGUpIHtcbiAgICAgICAgaHRtbENsYXNzLnB1c2gocGFyZW50LkxlZ2VuZC5nZXRDbGFzcygwLCBwYXJlbnQubGVnZW5kU2NhbGUgPT09IG51bGwpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbnMub25DbGljayAhPT0gbnVsbCkge1xuICAgICAgICBodG1sQ2xhc3MucHVzaCgnaG92ZXJfY3Vyc29yJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBodG1sQ2xhc3Muam9pbignICcpO1xuICAgIH0pLmNhbGwoYWRkU3R5bGUpO1xuICAgIHJlY3QudHJhbnNpdGlvbigpLmR1cmF0aW9uKG9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24pLnNlbGVjdCgndGl0bGUnKS50ZXh0KGZ1bmN0aW9uIChkKSB7XG4gICAgICByZXR1cm4gcGFyZW50LmdldFN1YkRvbWFpblRpdGxlKGQpO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gZm9ybWF0U3ViRG9tYWluVGV4dChlbGVtZW50KSB7XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc3ViRG9tYWluVGV4dEZvcm1hdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBlbGVtZW50LnRleHQoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICByZXR1cm4gb3B0aW9ucy5zdWJEb21haW5UZXh0Rm9ybWF0KGQudCwgZC52KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZSB0aGUgc3ViRG9tYWluVGV4dCBjbGFzcyBpZiBuZWNlc3NhcnlcbiAgICAgKiBBbHNvIGNoYW5nZSB0aGUgdGV4dCwgZS5nIHdoZW4gdGV4dCBpcyByZXByZXNlbnRpbmcgdGhlIHZhbHVlXG4gICAgICogaW5zdGVhZCBvZiB0aGUgZGF0ZVxuICAgICAqL1xuXG5cbiAgICByZWN0LnRyYW5zaXRpb24oKS5kdXJhdGlvbihvcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uKS5zZWxlY3QoJ3RleHQnKS5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgICByZXR1cm4gJ3N1YmRvbWFpbi10ZXh0JyArIHBhcmVudC5nZXRIaWdobGlnaHRDbGFzc05hbWUoZC50KTtcbiAgICB9KS5jYWxsKGZvcm1hdFN1YkRvbWFpblRleHQpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTcHJpbnRmIGxpa2UgZnVuY3Rpb24uXG4gICAqIFJlcGxhY2VzIHBsYWNlaG9sZGVycyB7MH0gaW4gc3RyaW5nIHdpdGggdmFsdWVzIGZyb20gcHJvdmlkZWQgb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0gc3RyaW5nIGZvcm1hdHRlZCBTdHJpbmcgY29udGFpbmluZyBwbGFjZWhvbGRlcnMuXG4gICAqIEBwYXJhbSBvYmplY3QgYXJncyBPYmplY3Qgd2l0aCBwcm9wZXJ0aWVzIHRvIHJlcGxhY2UgcGxhY2Vob2xkZXJzIGluIHN0cmluZy5cbiAgICpcbiAgICogQHJldHVybiBTdHJpbmdcbiAgICovXG4gIGZvcm1hdFN0cmluZ1dpdGhPYmplY3Q6IGZ1bmN0aW9uIChmb3JtYXR0ZWQsIGFyZ3MpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmb3IgKHZhciBwcm9wIGluIGFyZ3MpIHtcbiAgICAgIGlmIChhcmdzLmhhc093blByb3BlcnR5KHByb3ApKSB7XG4gICAgICAgIHZhciByZWdleHAgPSBuZXcgUmVnRXhwKCdcXFxceycgKyBwcm9wICsgJ1xcXFx9JywgJ2dpJyk7XG4gICAgICAgIGZvcm1hdHRlZCA9IGZvcm1hdHRlZC5yZXBsYWNlKHJlZ2V4cCwgYXJnc1twcm9wXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvcm1hdHRlZDtcbiAgfSxcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vXG4gIC8vIEVWRU5UUyBDQUxMQkFDSyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xuXG4gIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIGZvciB0cmlnZ2VyaW5nIGV2ZW50IGNhbGxiYWNrXG4gICAqXG4gICAqIEBwYXJhbSAgc3RyaW5nICBldmVudE5hbWUgICAgICAgTmFtZSBvZiB0aGUgZXZlbnQgdG8gdHJpZ2dlclxuICAgKiBAcGFyYW0gIGFycmF5ICBzdWNjZXNzQXJncyAgICAgTGlzdCBvZiBhcmd1bWVudCB0byBwYXNzIHRvIHRoZSBjYWxsYmFja1xuICAgKiBAcGFyYW0gIGJvb2xlYW4gIHNraXAgICAgICBXaGV0aGVyIHRvIHNraXAgdGhlIGV2ZW50IHRyaWdnZXJpbmdcbiAgICogQHJldHVybiBtaXhlZCAgVHJ1ZSB3aGVuIHRoZSB0cmlnZ2VyaW5nIHdhcyBza2lwcGVkLCBmYWxzZSBvbiBlcnJvciwgZWxzZSB0aGUgY2FsbGJhY2sgZnVuY3Rpb25cbiAgICovXG4gIHRyaWdnZXJFdmVudDogZnVuY3Rpb24gKGV2ZW50TmFtZSwgc3VjY2Vzc0FyZ3MsIHNraXApIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMyAmJiBza2lwIHx8IHRoaXMub3B0aW9uc1tldmVudE5hbWVdID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9uc1tldmVudE5hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpZiAodHlwZW9mIHN1Y2Nlc3NBcmdzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHN1Y2Nlc3NBcmdzID0gc3VjY2Vzc0FyZ3MoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1tldmVudE5hbWVdLmFwcGx5KHRoaXMsIHN1Y2Nlc3NBcmdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ1Byb3ZpZGVkIGNhbGxiYWNrIGZvciAnICsgZXZlbnROYW1lICsgJyBpcyBub3QgYSBmdW5jdGlvbi4nKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEV2ZW50IHRyaWdnZXJlZCBvbiBhIG1vdXNlIGNsaWNrIG9uIGEgc3ViRG9tYWluIGNlbGxcbiAgICpcbiAgICogQHBhcmFtICBEYXRlICAgIGQgICAgRGF0ZSBvZiB0aGUgc3ViZG9tYWluIGJsb2NrXG4gICAqIEBwYXJhbSAgaW50ICAgIGl0ZW1OYiAgTnVtYmVyIG9mIGl0ZW1zIGluIHRoYXQgZGF0ZVxuICAgKi9cbiAgb25DbGljazogZnVuY3Rpb24gKGQsIGl0ZW1OYikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHJldHVybiB0aGlzLnRyaWdnZXJFdmVudCgnb25DbGljaycsIFtkLCBpdGVtTmJdKTtcbiAgfSxcblxuICAvKipcbiAgICogRXZlbnQgdHJpZ2dlcmVkIGFmdGVyIGRyYXdpbmcgdGhlIGNhbGVuZGFyLCBieXQgYmVmb3JlIGZpbGxpbmcgaXQgd2l0aCBkYXRhXG4gICAqL1xuICBhZnRlckxvYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyRXZlbnQoJ2FmdGVyTG9hZCcpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBFdmVudCB0cmlnZ2VyZWQgYWZ0ZXIgY29tcGxldGluZyBkcmF3aW5nIGFuZCBmaWxsaW5nIHRoZSBjYWxlbmRhclxuICAgKi9cbiAgb25Db21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciByZXNwb25zZSA9IHRoaXMudHJpZ2dlckV2ZW50KCdvbkNvbXBsZXRlJywgW10sIHRoaXMuX2NvbXBsZXRlZCk7XG4gICAgdGhpcy5fY29tcGxldGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEV2ZW50IHRyaWdnZXJlZCBhZnRlciBzaGlmdGluZyB0aGUgY2FsZW5kYXIgb25lIGRvbWFpbiBiYWNrXG4gICAqXG4gICAqIEBwYXJhbSAgRGF0ZSAgICBzdGFydCAgRG9tYWluIHN0YXJ0IGRhdGVcbiAgICogQHBhcmFtICBEYXRlICAgIGVuZCAgICBEb21haW4gZW5kIGRhdGVcbiAgICovXG4gIGFmdGVyTG9hZFByZXZpb3VzRG9tYWluOiBmdW5jdGlvbiAoc3RhcnQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgcGFyZW50ID0gdGhpcztcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyRXZlbnQoJ2FmdGVyTG9hZFByZXZpb3VzRG9tYWluJywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHN1YkRvbWFpbiA9IHBhcmVudC5nZXRTdWJEb21haW4oc3RhcnQpO1xuICAgICAgcmV0dXJuIFtzdWJEb21haW4uc2hpZnQoKSwgc3ViRG9tYWluLnBvcCgpXTtcbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogRXZlbnQgdHJpZ2dlcmVkIGFmdGVyIHNoaWZ0aW5nIHRoZSBjYWxlbmRhciBvbmUgZG9tYWluIGFib3ZlXG4gICAqXG4gICAqIEBwYXJhbSAgRGF0ZSAgICBzdGFydCAgRG9tYWluIHN0YXJ0IGRhdGVcbiAgICogQHBhcmFtICBEYXRlICAgIGVuZCAgICBEb21haW4gZW5kIGRhdGVcbiAgICovXG4gIGFmdGVyTG9hZE5leHREb21haW46IGZ1bmN0aW9uIChzdGFydCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBwYXJlbnQgPSB0aGlzO1xuICAgIHJldHVybiB0aGlzLnRyaWdnZXJFdmVudCgnYWZ0ZXJMb2FkTmV4dERvbWFpbicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBzdWJEb21haW4gPSBwYXJlbnQuZ2V0U3ViRG9tYWluKHN0YXJ0KTtcbiAgICAgIHJldHVybiBbc3ViRG9tYWluLnNoaWZ0KCksIHN1YkRvbWFpbi5wb3AoKV07XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEV2ZW50IHRyaWdnZXJlZCBhZnRlciBsb2FkaW5nIHRoZSBsZWZ0bW9zdCBkb21haW4gYWxsb3dlZCBieSBtaW5EYXRlXG4gICAqXG4gICAqIEBwYXJhbSAgYm9vbGVhbiAgcmVhY2hlZCBUcnVlIGlmIHRoZSBsZWZ0bW9zdCBkb21haW4gd2FzIHJlYWNoZWRcbiAgICovXG4gIG9uTWluRG9tYWluUmVhY2hlZDogZnVuY3Rpb24gKHJlYWNoZWQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB0aGlzLl9taW5Eb21haW5SZWFjaGVkID0gcmVhY2hlZDtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyRXZlbnQoJ29uTWluRG9tYWluUmVhY2hlZCcsIFtyZWFjaGVkXSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEV2ZW50IHRyaWdnZXJlZCBhZnRlciBsb2FkaW5nIHRoZSByaWdodG1vc3QgZG9tYWluIGFsbG93ZWQgYnkgbWF4RGF0ZVxuICAgKlxuICAgKiBAcGFyYW0gIGJvb2xlYW4gIHJlYWNoZWQgVHJ1ZSBpZiB0aGUgcmlnaHRtb3N0IGRvbWFpbiB3YXMgcmVhY2hlZFxuICAgKi9cbiAgb25NYXhEb21haW5SZWFjaGVkOiBmdW5jdGlvbiAocmVhY2hlZCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHRoaXMuX21heERvbWFpblJlYWNoZWQgPSByZWFjaGVkO1xuICAgIHJldHVybiB0aGlzLnRyaWdnZXJFdmVudCgnb25NYXhEb21haW5SZWFjaGVkJywgW3JlYWNoZWRdKTtcbiAgfSxcbiAgY2hlY2tJZk1pbkRvbWFpbklzUmVhY2hlZDogZnVuY3Rpb24gKGRhdGUsIHVwcGVyQm91bmQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAodGhpcy5taW5Eb21haW5Jc1JlYWNoZWQoZGF0ZSkpIHtcbiAgICAgIHRoaXMub25NaW5Eb21haW5SZWFjaGVkKHRydWUpO1xuICAgIH1cblxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgICBpZiAodGhpcy5fbWF4RG9tYWluUmVhY2hlZCAmJiAhdGhpcy5tYXhEb21haW5Jc1JlYWNoZWQodXBwZXJCb3VuZCkpIHtcbiAgICAgICAgdGhpcy5vbk1heERvbWFpblJlYWNoZWQoZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgY2hlY2tJZk1heERvbWFpbklzUmVhY2hlZDogZnVuY3Rpb24gKGRhdGUsIGxvd2VyQm91bmQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAodGhpcy5tYXhEb21haW5Jc1JlYWNoZWQoZGF0ZSkpIHtcbiAgICAgIHRoaXMub25NYXhEb21haW5SZWFjaGVkKHRydWUpO1xuICAgIH1cblxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgICBpZiAodGhpcy5fbWluRG9tYWluUmVhY2hlZCAmJiAhdGhpcy5taW5Eb21haW5Jc1JlYWNoZWQobG93ZXJCb3VuZCkpIHtcbiAgICAgICAgdGhpcy5vbk1pbkRvbWFpblJlYWNoZWQoZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgYWZ0ZXJVcGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyRXZlbnQoJ2FmdGVyVXBkYXRlJyk7XG4gIH0sXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xuICAvLyBGT1JNQVRURVIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xuICBmb3JtYXROdW1iZXI6IGQzLmZvcm1hdCgnLGcnKSxcbiAgZm9ybWF0RGF0ZTogZnVuY3Rpb24gKGQsIGZvcm1hdCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuICAgICAgZm9ybWF0ID0gJ3RpdGxlJztcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGZvcm1hdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGZvcm1hdChkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGYgPSBkMy50aW1lLmZvcm1hdChmb3JtYXQpO1xuICAgICAgcmV0dXJuIGYoZCk7XG4gICAgfVxuICB9LFxuICBnZXRTdWJEb21haW5UaXRsZTogZnVuY3Rpb24gKGQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAoZC52ID09PSBudWxsICYmICF0aGlzLm9wdGlvbnMuY29uc2lkZXJNaXNzaW5nRGF0YUFzWmVybykge1xuICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0U3RyaW5nV2l0aE9iamVjdCh0aGlzLm9wdGlvbnMuc3ViRG9tYWluVGl0bGVGb3JtYXQuZW1wdHksIHtcbiAgICAgICAgZGF0ZTogdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKGQudCksIHRoaXMub3B0aW9ucy5zdWJEb21haW5EYXRlRm9ybWF0KVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB2YWx1ZSA9IGQudjsgLy8gQ29uc2lkZXIgbnVsbCBhcyAwXG5cbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCAmJiB0aGlzLm9wdGlvbnMuY29uc2lkZXJNaXNzaW5nRGF0YUFzWmVybykge1xuICAgICAgICB2YWx1ZSA9IDA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdFN0cmluZ1dpdGhPYmplY3QodGhpcy5vcHRpb25zLnN1YkRvbWFpblRpdGxlRm9ybWF0LmZpbGxlZCwge1xuICAgICAgICBjb3VudDogdGhpcy5mb3JtYXROdW1iZXIodmFsdWUpLFxuICAgICAgICBuYW1lOiB0aGlzLm9wdGlvbnMuaXRlbU5hbWVbdmFsdWUgIT09IDEgPyAxIDogMF0sXG4gICAgICAgIGNvbm5lY3RvcjogdGhpcy5fZG9tYWluVHlwZVt0aGlzLm9wdGlvbnMuc3ViRG9tYWluXS5mb3JtYXQuY29ubmVjdG9yLFxuICAgICAgICBkYXRlOiB0aGlzLmZvcm1hdERhdGUobmV3IERhdGUoZC50KSwgdGhpcy5vcHRpb25zLnN1YkRvbWFpbkRhdGVGb3JtYXQpXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xuICAvLyBET01BSU4gTkFWSUdBVElPTiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly9cblxuICAvKipcbiAgICogU2hpZnQgdGhlIGNhbGVuZGFyIG9uZSBkb21haW4gZm9yd2FyZFxuICAgKlxuICAgKiBUaGUgbmV3IGRvbWFpbiBpcyBsb2FkZWQgb25seSBpZiBpdCdzIG5vdCBiZXlvbmQgbWF4RGF0ZVxuICAgKlxuICAgKiBAcGFyYW0gaW50IG4gTnVtYmVyIG9mIGRvbWFpbnMgdG8gbG9hZFxuICAgKiBAcmV0dXJuIGJvb2wgVHJ1ZSBpZiB0aGUgbmV4dCBkb21haW4gd2FzIGxvYWRlZCwgZWxzZSBmYWxzZVxuICAgKi9cbiAgbG9hZE5leHREb21haW46IGZ1bmN0aW9uIChuKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgaWYgKHRoaXMuX21heERvbWFpblJlYWNoZWQgfHwgbiA9PT0gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBib3VuZCA9IHRoaXMubG9hZE5ld0RvbWFpbnModGhpcy5OQVZJR0FURV9SSUdIVCwgdGhpcy5nZXREb21haW4odGhpcy5nZXROZXh0RG9tYWluKCksIG4pKTtcbiAgICB0aGlzLmFmdGVyTG9hZE5leHREb21haW4oYm91bmQuZW5kKTtcbiAgICB0aGlzLmNoZWNrSWZNYXhEb21haW5Jc1JlYWNoZWQodGhpcy5nZXROZXh0RG9tYWluKCkuZ2V0VGltZSgpLCBib3VuZC5zdGFydCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNoaWZ0IHRoZSBjYWxlbmRhciBvbmUgZG9tYWluIGJhY2t3YXJkXG4gICAqXG4gICAqIFRoZSBwcmV2aW91cyBkb21haW4gaXMgbG9hZGVkIG9ubHkgaWYgaXQncyBub3QgYmV5b25kIHRoZSBtaW5EYXRlXG4gICAqXG4gICAqIEBwYXJhbSBpbnQgbiBOdW1iZXIgb2YgZG9tYWlucyB0byBsb2FkXG4gICAqIEByZXR1cm4gYm9vbCBUcnVlIGlmIHRoZSBwcmV2aW91cyBkb21haW4gd2FzIGxvYWRlZCwgZWxzZSBmYWxzZVxuICAgKi9cbiAgbG9hZFByZXZpb3VzRG9tYWluOiBmdW5jdGlvbiAobikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGlmICh0aGlzLl9taW5Eb21haW5SZWFjaGVkIHx8IG4gPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgYm91bmQgPSB0aGlzLmxvYWROZXdEb21haW5zKHRoaXMuTkFWSUdBVEVfTEVGVCwgdGhpcy5nZXREb21haW4odGhpcy5nZXREb21haW5LZXlzKClbMF0sIC1uKS5yZXZlcnNlKCkpO1xuICAgIHRoaXMuYWZ0ZXJMb2FkUHJldmlvdXNEb21haW4oYm91bmQuc3RhcnQpO1xuICAgIHRoaXMuY2hlY2tJZk1pbkRvbWFpbklzUmVhY2hlZChib3VuZC5zdGFydCwgYm91bmQuZW5kKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcbiAgbG9hZE5ld0RvbWFpbnM6IGZ1bmN0aW9uIChkaXJlY3Rpb24sIG5ld0RvbWFpbnMpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgcGFyZW50ID0gdGhpcztcbiAgICB2YXIgYmFja3dhcmQgPSBkaXJlY3Rpb24gPT09IHRoaXMuTkFWSUdBVEVfTEVGVDtcbiAgICB2YXIgaSA9IC0xO1xuICAgIHZhciB0b3RhbCA9IG5ld0RvbWFpbnMubGVuZ3RoO1xuICAgIHZhciBkb21haW5zID0gdGhpcy5nZXREb21haW5LZXlzKCk7XG5cbiAgICBmdW5jdGlvbiBidWlsZFN1YkRvbWFpbihkKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0OiBwYXJlbnQuX2RvbWFpblR5cGVbcGFyZW50Lm9wdGlvbnMuc3ViRG9tYWluXS5leHRyYWN0VW5pdChkKSxcbiAgICAgICAgdjogbnVsbFxuICAgICAgfTtcbiAgICB9IC8vIFJlbW92ZSBvdXQgb2YgYm91bmQgZG9tYWlucyBmcm9tIGxpc3Qgb2YgbmV3IGRvbWFpbnMgdG8gcHJlcGVuZFxuXG5cbiAgICB3aGlsZSAoKytpIDwgdG90YWwpIHtcbiAgICAgIGlmIChiYWNrd2FyZCAmJiB0aGlzLm1pbkRvbWFpbklzUmVhY2hlZChuZXdEb21haW5zW2ldKSkge1xuICAgICAgICBuZXdEb21haW5zID0gbmV3RG9tYWlucy5zbGljZSgwLCBpICsgMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWJhY2t3YXJkICYmIHRoaXMubWF4RG9tYWluSXNSZWFjaGVkKG5ld0RvbWFpbnNbaV0pKSB7XG4gICAgICAgIG5ld0RvbWFpbnMgPSBuZXdEb21haW5zLnNsaWNlKDAsIGkpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBuZXdEb21haW5zID0gbmV3RG9tYWlucy5zbGljZSgtdGhpcy5vcHRpb25zLnJhbmdlKTtcblxuICAgIGZvciAoaSA9IDAsIHRvdGFsID0gbmV3RG9tYWlucy5sZW5ndGg7IGkgPCB0b3RhbDsgaSArPSAxKSB7XG4gICAgICB0aGlzLl9kb21haW5zLnNldChuZXdEb21haW5zW2ldLmdldFRpbWUoKSwgdGhpcy5nZXRTdWJEb21haW4obmV3RG9tYWluc1tpXSkubWFwKGJ1aWxkU3ViRG9tYWluKSk7XG5cbiAgICAgIHRoaXMuX2RvbWFpbnMucmVtb3ZlKGJhY2t3YXJkID8gZG9tYWlucy5wb3AoKSA6IGRvbWFpbnMuc2hpZnQoKSk7XG4gICAgfVxuXG4gICAgZG9tYWlucyA9IHRoaXMuZ2V0RG9tYWluS2V5cygpO1xuXG4gICAgaWYgKGJhY2t3YXJkKSB7XG4gICAgICBuZXdEb21haW5zID0gbmV3RG9tYWlucy5yZXZlcnNlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5wYWludChkaXJlY3Rpb24pO1xuICAgIHRoaXMuZ2V0RGF0YXModGhpcy5vcHRpb25zLmRhdGEsIG5ld0RvbWFpbnNbMF0sIHRoaXMuZ2V0U3ViRG9tYWluKG5ld0RvbWFpbnNbbmV3RG9tYWlucy5sZW5ndGggLSAxXSkucG9wKCksIGZ1bmN0aW9uICgpIHtcbiAgICAgIHBhcmVudC5maWxsKHBhcmVudC5sYXN0SW5zZXJ0ZWRTdmcpO1xuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICBzdGFydDogbmV3RG9tYWluc1tiYWNrd2FyZCA/IDAgOiAxXSxcbiAgICAgIGVuZDogZG9tYWluc1tkb21haW5zLmxlbmd0aCAtIDFdXG4gICAgfTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgYSBkYXRlIGlzIGluc2lkZSB0aGUgc2NvcGUgZGV0ZXJtaW5lZCBieSBtYXhEYXRlXG4gICAqXG4gICAqIEBwYXJhbSBpbnQgZGF0ZXRpbWVzdGFtcCBUaGUgdGltZXN0YW1wIGluIG1zIHRvIHRlc3RcbiAgICogQHJldHVybiBib29sIFRydWUgaWYgdGhlIHNwZWNpZmllZCBkYXRlIGNvcnJlc3BvbmQgdG8gdGhlIGNhbGVuZGFyIHVwcGVyIGJvdW5kXG4gICAqL1xuICBtYXhEb21haW5Jc1JlYWNoZWQ6IGZ1bmN0aW9uIChkYXRldGltZXN0YW1wKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5tYXhEYXRlICE9PSBudWxsICYmIHRoaXMub3B0aW9ucy5tYXhEYXRlLmdldFRpbWUoKSA8IGRhdGV0aW1lc3RhbXA7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIGEgZGF0ZSBpcyBpbnNpZGUgdGhlIHNjb3BlIGRldGVybWluZWQgYnkgbWluRGF0ZVxuICAgKlxuICAgKiBAcGFyYW0gaW50IGRhdGV0aW1lc3RhbXAgVGhlIHRpbWVzdGFtcCBpbiBtcyB0byB0ZXN0XG4gICAqIEByZXR1cm4gYm9vbCBUcnVlIGlmIHRoZSBzcGVjaWZpZWQgZGF0ZSBjb3JyZXNwb25kIHRvIHRoZSBjYWxlbmRhciBsb3dlciBib3VuZFxuICAgKi9cbiAgbWluRG9tYWluSXNSZWFjaGVkOiBmdW5jdGlvbiAoZGF0ZXRpbWVzdGFtcCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHJldHVybiB0aGlzLm9wdGlvbnMubWluRGF0ZSAhPT0gbnVsbCAmJiB0aGlzLm9wdGlvbnMubWluRGF0ZS5nZXRUaW1lKCkgPj0gZGF0ZXRpbWVzdGFtcDtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBsaXN0IG9mIHRoZSBjYWxlbmRhcidzIGRvbWFpbiB0aW1lc3RhbXBcbiAgICpcbiAgICogQHJldHVybiBBcnJheSBhIHNvcnRlZCBhcnJheSBvZiB0aW1lc3RhbXBcbiAgICovXG4gIGdldERvbWFpbktleXM6IGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXR1cm4gdGhpcy5fZG9tYWlucy5rZXlzKCkubWFwKGZ1bmN0aW9uIChkKSB7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoZCwgMTApO1xuICAgIH0pLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiBhIC0gYjtcbiAgICB9KTtcbiAgfSxcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vXG4gIC8vIFBPU0lUSU9OTklORyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vXG4gIHBvc2l0aW9uU3ViRG9tYWluWDogZnVuY3Rpb24gKGQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgaW5kZXggPSB0aGlzLl9kb21haW5UeXBlW3RoaXMub3B0aW9ucy5zdWJEb21haW5dLnBvc2l0aW9uLngobmV3IERhdGUoZCkpO1xuXG4gICAgcmV0dXJuIGluZGV4ICogdGhpcy5vcHRpb25zLmNlbGxTaXplICsgaW5kZXggKiB0aGlzLm9wdGlvbnMuY2VsbFBhZGRpbmc7XG4gIH0sXG4gIHBvc2l0aW9uU3ViRG9tYWluWTogZnVuY3Rpb24gKGQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgaW5kZXggPSB0aGlzLl9kb21haW5UeXBlW3RoaXMub3B0aW9ucy5zdWJEb21haW5dLnBvc2l0aW9uLnkobmV3IERhdGUoZCkpO1xuXG4gICAgcmV0dXJuIGluZGV4ICogdGhpcy5vcHRpb25zLmNlbGxTaXplICsgaW5kZXggKiB0aGlzLm9wdGlvbnMuY2VsbFBhZGRpbmc7XG4gIH0sXG4gIGdldFN1YkRvbWFpbkNvbHVtbk51bWJlcjogZnVuY3Rpb24gKGQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnJvd0xpbWl0ID4gMCkge1xuICAgICAgdmFyIGkgPSB0aGlzLl9kb21haW5UeXBlW3RoaXMub3B0aW9ucy5zdWJEb21haW5dLm1heEl0ZW1OdW1iZXI7XG5cbiAgICAgIGlmICh0eXBlb2YgaSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBpID0gaShkKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIE1hdGguY2VpbChpIC8gdGhpcy5vcHRpb25zLnJvd0xpbWl0KTtcbiAgICB9XG5cbiAgICB2YXIgaiA9IHRoaXMuX2RvbWFpblR5cGVbdGhpcy5vcHRpb25zLnN1YkRvbWFpbl0uZGVmYXVsdENvbHVtbk51bWJlcjtcblxuICAgIGlmICh0eXBlb2YgaiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaiA9IGooZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jb2xMaW1pdCB8fCBqO1xuICB9LFxuICBnZXRTdWJEb21haW5Sb3dOdW1iZXI6IGZ1bmN0aW9uIChkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5jb2xMaW1pdCA+IDApIHtcbiAgICAgIHZhciBpID0gdGhpcy5fZG9tYWluVHlwZVt0aGlzLm9wdGlvbnMuc3ViRG9tYWluXS5tYXhJdGVtTnVtYmVyO1xuXG4gICAgICBpZiAodHlwZW9mIGkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgaSA9IGkoZCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBNYXRoLmNlaWwoaSAvIHRoaXMub3B0aW9ucy5jb2xMaW1pdCk7XG4gICAgfVxuXG4gICAgdmFyIGogPSB0aGlzLl9kb21haW5UeXBlW3RoaXMub3B0aW9ucy5zdWJEb21haW5dLmRlZmF1bHRSb3dOdW1iZXI7XG5cbiAgICBpZiAodHlwZW9mIGogPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGogPSBqKGQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm9wdGlvbnMucm93TGltaXQgfHwgajtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJuIGEgY2xhc3NuYW1lIGlmIHRoZSBzcGVjaWZpZWQgZGF0ZSBzaG91bGQgYmUgaGlnaGxpZ2h0ZWRcbiAgICpcbiAgICogQHBhcmFtICB0aW1lc3RhbXAgZGF0ZSBEYXRlIG9mIHRoZSBjdXJyZW50IHN1YkRvbWFpblxuICAgKiBAcmV0dXJuIFN0cmluZyB0aGUgaGlnaGxpZ2h0IGNsYXNzXG4gICAqL1xuICBnZXRIaWdobGlnaHRDbGFzc05hbWU6IGZ1bmN0aW9uIChkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZCA9IG5ldyBEYXRlKGQpO1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5oaWdobGlnaHQubGVuZ3RoID4gMCkge1xuICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0KSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGVJc0VxdWFsKHRoaXMub3B0aW9ucy5oaWdobGlnaHRbaV0sIGQpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuaXNOb3codGhpcy5vcHRpb25zLmhpZ2hsaWdodFtpXSkgPyAnIGhpZ2hsaWdodC1ub3cnIDogJyBoaWdobGlnaHQnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuICcnO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGUgc3BlY2lmaWVkIGRhdGUgaXMgbm93LFxuICAgKiBhY2NvcmRpbmcgdG8gdGhlIHR5cGUgb2Ygc3ViZG9tYWluXG4gICAqXG4gICAqIEBwYXJhbSAgRGF0ZSBkIFRoZSBkYXRlIHRvIGNvbXBhcmVcbiAgICogQHJldHVybiBib29sIFRydWUgaWYgdGhlIGRhdGUgY29ycmVzcG9uZCB0byBhIHN1YmRvbWFpbiBjZWxsXG4gICAqL1xuICBpc05vdzogZnVuY3Rpb24gKGQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICByZXR1cm4gdGhpcy5kYXRlSXNFcXVhbChkLCBuZXcgRGF0ZSgpKTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgMiBkYXRlcyBhcmUgZXF1YWxzXG4gICAqIFRoaXMgZnVuY3Rpb24gaXMgc3ViZG9tYWluLWF3YXJlLFxuICAgKiBhbmQgZGF0ZXMgY29tcGFyaXNvbiBhcmUgZGVwZW5kZW50IG9mIHRoZSBzdWJkb21haW5cbiAgICpcbiAgICogQHBhcmFtICBEYXRlIGRhdGVBIEZpcnN0IGRhdGUgdG8gY29tcGFyZVxuICAgKiBAcGFyYW0gIERhdGUgZGF0ZUIgU2Vjb24gZGF0ZSB0byBjb21wYXJlXG4gICAqIEByZXR1cm4gYm9vbCB0cnVlIGlmIHRoZSAyIGRhdGVzIGFyZSBlcXVhbHNcbiAgICovXG5cbiAgLyoganNoaW50IG1heGNvbXBsZXhpdHk6IGZhbHNlICovXG4gIGRhdGVJc0VxdWFsOiBmdW5jdGlvbiAoZGF0ZUEsIGRhdGVCKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgaWYgKCEoZGF0ZUEgaW5zdGFuY2VvZiBEYXRlKSkge1xuICAgICAgZGF0ZUEgPSBuZXcgRGF0ZShkYXRlQSk7XG4gICAgfVxuXG4gICAgaWYgKCEoZGF0ZUIgaW5zdGFuY2VvZiBEYXRlKSkge1xuICAgICAgZGF0ZUIgPSBuZXcgRGF0ZShkYXRlQik7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0aGlzLm9wdGlvbnMuc3ViRG9tYWluKSB7XG4gICAgICBjYXNlICd4X21pbic6XG4gICAgICBjYXNlICdtaW4nOlxuICAgICAgICByZXR1cm4gZGF0ZUEuZ2V0RnVsbFllYXIoKSA9PT0gZGF0ZUIuZ2V0RnVsbFllYXIoKSAmJiBkYXRlQS5nZXRNb250aCgpID09PSBkYXRlQi5nZXRNb250aCgpICYmIGRhdGVBLmdldERhdGUoKSA9PT0gZGF0ZUIuZ2V0RGF0ZSgpICYmIGRhdGVBLmdldEhvdXJzKCkgPT09IGRhdGVCLmdldEhvdXJzKCkgJiYgZGF0ZUEuZ2V0TWludXRlcygpID09PSBkYXRlQi5nZXRNaW51dGVzKCk7XG5cbiAgICAgIGNhc2UgJ3hfaG91cic6XG4gICAgICBjYXNlICdob3VyJzpcbiAgICAgICAgcmV0dXJuIGRhdGVBLmdldEZ1bGxZZWFyKCkgPT09IGRhdGVCLmdldEZ1bGxZZWFyKCkgJiYgZGF0ZUEuZ2V0TW9udGgoKSA9PT0gZGF0ZUIuZ2V0TW9udGgoKSAmJiBkYXRlQS5nZXREYXRlKCkgPT09IGRhdGVCLmdldERhdGUoKSAmJiBkYXRlQS5nZXRIb3VycygpID09PSBkYXRlQi5nZXRIb3VycygpO1xuXG4gICAgICBjYXNlICd4X2RheSc6XG4gICAgICBjYXNlICdkYXknOlxuICAgICAgICByZXR1cm4gZGF0ZUEuZ2V0RnVsbFllYXIoKSA9PT0gZGF0ZUIuZ2V0RnVsbFllYXIoKSAmJiBkYXRlQS5nZXRNb250aCgpID09PSBkYXRlQi5nZXRNb250aCgpICYmIGRhdGVBLmdldERhdGUoKSA9PT0gZGF0ZUIuZ2V0RGF0ZSgpO1xuXG4gICAgICBjYXNlICd4X3dlZWsnOlxuICAgICAgY2FzZSAnd2Vlayc6XG4gICAgICAgIHJldHVybiBkYXRlQS5nZXRGdWxsWWVhcigpID09PSBkYXRlQi5nZXRGdWxsWWVhcigpICYmIHRoaXMuZ2V0V2Vla051bWJlcihkYXRlQSkgPT09IHRoaXMuZ2V0V2Vla051bWJlcihkYXRlQik7XG5cbiAgICAgIGNhc2UgJ3hfbW9udGgnOlxuICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICByZXR1cm4gZGF0ZUEuZ2V0RnVsbFllYXIoKSA9PT0gZGF0ZUIuZ2V0RnVsbFllYXIoKSAmJiBkYXRlQS5nZXRNb250aCgpID09PSBkYXRlQi5nZXRNb250aCgpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdldGhlciBvciBub3QgZGF0ZUEgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGRhdGVCLiBUaGlzIGZ1bmN0aW9uIGlzIHN1YmRvbWFpbiBhd2FyZS5cbiAgICogUGVyZm9ybXMgYXV0b21hdGljIGNvbnZlcnNpb24gb2YgdmFsdWVzLlxuICAgKiBAcGFyYW0gZGF0ZUEgbWF5IGJlIGEgbnVtYmVyIG9yIGEgRGF0ZVxuICAgKiBAcGFyYW0gZGF0ZUIgbWF5IGJlIGEgbnVtYmVyIG9yIGEgRGF0ZVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGRhdGVJc0xlc3NUaGFuOiBmdW5jdGlvbiAoZGF0ZUEsIGRhdGVCKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgaWYgKCEoZGF0ZUEgaW5zdGFuY2VvZiBEYXRlKSkge1xuICAgICAgZGF0ZUEgPSBuZXcgRGF0ZShkYXRlQSk7XG4gICAgfVxuXG4gICAgaWYgKCEoZGF0ZUIgaW5zdGFuY2VvZiBEYXRlKSkge1xuICAgICAgZGF0ZUIgPSBuZXcgRGF0ZShkYXRlQik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplZE1pbGxpcyhkYXRlLCBzdWJkb21haW4pIHtcbiAgICAgIHN3aXRjaCAoc3ViZG9tYWluKSB7XG4gICAgICAgIGNhc2UgJ3hfbWluJzpcbiAgICAgICAgY2FzZSAnbWluJzpcbiAgICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCksIGRhdGUuZ2V0RGF0ZSgpLCBkYXRlLmdldEhvdXJzKCksIGRhdGUuZ2V0TWludXRlcygpKS5nZXRUaW1lKCk7XG5cbiAgICAgICAgY2FzZSAneF9ob3VyJzpcbiAgICAgICAgY2FzZSAnaG91cic6XG4gICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpLCBkYXRlLmdldERhdGUoKSwgZGF0ZS5nZXRIb3VycygpKS5nZXRUaW1lKCk7XG5cbiAgICAgICAgY2FzZSAneF9kYXknOlxuICAgICAgICBjYXNlICdkYXknOlxuICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXREYXRlKCkpLmdldFRpbWUoKTtcblxuICAgICAgICBjYXNlICd4X3dlZWsnOlxuICAgICAgICBjYXNlICd3ZWVrJzpcbiAgICAgICAgY2FzZSAneF9tb250aCc6XG4gICAgICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCkpLmdldFRpbWUoKTtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBkYXRlLmdldFRpbWUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbm9ybWFsaXplZE1pbGxpcyhkYXRlQSwgdGhpcy5vcHRpb25zLnN1YkRvbWFpbikgPCBub3JtYWxpemVkTWlsbGlzKGRhdGVCLCB0aGlzLm9wdGlvbnMuc3ViRG9tYWluKTtcbiAgfSxcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vXG4gIC8vIERBVEUgQ09NUFVUQVRJT04gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly9cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBkYXkgb2YgdGhlIHllYXIgZm9yIHRoZSBkYXRlXG4gICAqIEBwYXJhbSAgRGF0ZVxuICAgKiBAcmV0dXJuICBpbnQgRGF5IG9mIHRoZSB5ZWFyIFsxLDM2Nl1cbiAgICovXG4gIGdldERheU9mWWVhcjogZDMudGltZS5mb3JtYXQoJyVqJyksXG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgd2VlayBudW1iZXIgb2YgdGhlIHllYXJcbiAgICogTW9uZGF5IGFzIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWtcbiAgICogQHJldHVybiBpbnQgIFdlZWsgbnVtYmVyIFswLTUzXVxuICAgKi9cbiAgZ2V0V2Vla051bWJlcjogZnVuY3Rpb24gKGQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgZiA9IHRoaXMub3B0aW9ucy53ZWVrU3RhcnRPbk1vbmRheSA9PT0gdHJ1ZSA/IGQzLnRpbWUuZm9ybWF0KCclVycpIDogZDMudGltZS5mb3JtYXQoJyVVJyk7XG4gICAgcmV0dXJuIGYoZCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgd2VlayBudW1iZXIsIHJlbGF0aXZlIHRvIGl0cyBtb250aFxuICAgKlxuICAgKiBAcGFyYW0gIGludHxEYXRlIGQgRGF0ZSBvciB0aW1lc3RhbXAgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEByZXR1cm4gaW50IFdlZWsgbnVtYmVyLCByZWxhdGl2ZSB0byB0aGUgbW9udGggWzAtNV1cbiAgICovXG4gIGdldE1vbnRoV2Vla051bWJlcjogZnVuY3Rpb24gKGQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAodHlwZW9mIGQgPT09ICdudW1iZXInKSB7XG4gICAgICBkID0gbmV3IERhdGUoZCk7XG4gICAgfVxuXG4gICAgdmFyIG1vbnRoRmlyc3RXZWVrTnVtYmVyID0gdGhpcy5nZXRXZWVrTnVtYmVyKG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpKSk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0V2Vla051bWJlcihkKSAtIG1vbnRoRmlyc3RXZWVrTnVtYmVyIC0gMTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBudW1iZXIgb2Ygd2Vla3MgaW4gdGhlIGRhdGVzJyB5ZWFyXG4gICAqXG4gICAqIEBwYXJhbSAgaW50fERhdGUgZCBEYXRlIG9yIHRpbWVzdGFtcCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHJldHVybiBpbnQgTnVtYmVyIG9mIHdlZWtzIGluIHRoZSBkYXRlJ3MgeWVhclxuICAgKi9cbiAgZ2V0V2Vla051bWJlckluWWVhcjogZnVuY3Rpb24gKGQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAodHlwZW9mIGQgPT09ICdudW1iZXInKSB7XG4gICAgICBkID0gbmV3IERhdGUoZCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG51bWJlciBvZiBkYXlzIGluIHRoZSBkYXRlJ3MgbW9udGhcbiAgICpcbiAgICogQHBhcmFtICBpbnR8RGF0ZSBkIERhdGUgb3IgdGltZXN0YW1wIGluIG1pbGxpc2Vjb25kc1xuICAgKiBAcmV0dXJuIGludCBOdW1iZXIgb2YgZGF5cyBpbiB0aGUgZGF0ZSdzIG1vbnRoXG4gICAqL1xuICBnZXREYXlDb3VudEluTW9udGg6IGZ1bmN0aW9uIChkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2V0RW5kT2ZNb250aChkKS5nZXREYXRlKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbnVtYmVyIG9mIGRheXMgaW4gdGhlIGRhdGUncyB5ZWFyXG4gICAqXG4gICAqIEBwYXJhbSAgaW50fERhdGUgZCBEYXRlIG9yIHRpbWVzdGFtcCBpbiBtaWxsaXNlY29uZHNcbiAgICogQHJldHVybiBpbnQgTnVtYmVyIG9mIGRheXMgaW4gdGhlIGRhdGUncyB5ZWFyXG4gICAqL1xuICBnZXREYXlDb3VudEluWWVhcjogZnVuY3Rpb24gKGQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAodHlwZW9mIGQgPT09ICdudW1iZXInKSB7XG4gICAgICBkID0gbmV3IERhdGUoZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSwgMSwgMjkpLmdldE1vbnRoKCkgPT09IDEgPyAzNjYgOiAzNjU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgd2Vla2RheSBmcm9tIGEgZGF0ZVxuICAgKlxuICAgKiBSZXR1cm4gdGhlIHdlZWsgZGF5IG51bWJlciAoMC02KSBvZiBhIGRhdGUsXG4gICAqIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3ZWVrIHN0YXJ0IG9uIG1vbmRheSBvciBzdW5kYXlcbiAgICpcbiAgICogQHBhcmFtICBEYXRlIGRcbiAgICogQHJldHVybiBpbnQgVGhlIHdlZWsgZGF5IG51bWJlciAoMC02KVxuICAgKi9cbiAgZ2V0V2Vla0RheTogZnVuY3Rpb24gKGQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLndlZWtTdGFydE9uTW9uZGF5ID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIGQuZ2V0RGF5KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGQuZ2V0RGF5KCkgPT09IDAgPyA2IDogZC5nZXREYXkoKSAtIDE7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGFzdCBkYXkgb2YgdGhlIG1vbnRoXG4gICAqIEBwYXJhbSAgRGF0ZXxpbnQgIGQgIERhdGUgb3IgdGltZXN0YW1wIGluIG1pbGxpc2Vjb25kc1xuICAgKiBAcmV0dXJuIERhdGUgICAgICBMYXN0IGRheSBvZiB0aGUgbW9udGhcbiAgICovXG4gIGdldEVuZE9mTW9udGg6IGZ1bmN0aW9uIChkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgaWYgKHR5cGVvZiBkID09PSAnbnVtYmVyJykge1xuICAgICAgZCA9IG5ldyBEYXRlKGQpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZShkLmdldEZ1bGxZZWFyKCksIGQuZ2V0TW9udGgoKSArIDEsIDApO1xuICB9LFxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gIERhdGUgZGF0ZVxuICAgKiBAcGFyYW0gIGludCBjb3VudFxuICAgKiBAcGFyYW0gIHN0cmluZyBzdGVwXG4gICAqIEByZXR1cm4gRGF0ZVxuICAgKi9cbiAganVtcERhdGU6IGZ1bmN0aW9uIChkYXRlLCBjb3VudCwgc3RlcCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBkID0gbmV3IERhdGUoZGF0ZSk7XG5cbiAgICBzd2l0Y2ggKHN0ZXApIHtcbiAgICAgIGNhc2UgJ2hvdXInOlxuICAgICAgICBkLnNldEhvdXJzKGQuZ2V0SG91cnMoKSArIGNvdW50KTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2RheSc6XG4gICAgICAgIGQuc2V0SG91cnMoZC5nZXRIb3VycygpICsgY291bnQgKiAyNCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICd3ZWVrJzpcbiAgICAgICAgZC5zZXRIb3VycyhkLmdldEhvdXJzKCkgKyBjb3VudCAqIDI0ICogNyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdtb250aCc6XG4gICAgICAgIGQuc2V0TW9udGgoZC5nZXRNb250aCgpICsgY291bnQpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAneWVhcic6XG4gICAgICAgIGQuc2V0RnVsbFllYXIoZC5nZXRGdWxsWWVhcigpICsgY291bnQpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZShkKTtcbiAgfSxcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vXG4gIC8vIERPTUFJTiBDT01QVVRBVElPTiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly9cblxuICAvKipcbiAgICogUmV0dXJuIGFsbCB0aGUgbWludXRlcyBiZXR3ZWVuIDIgZGF0ZXNcbiAgICpcbiAgICogQHBhcmFtICBEYXRlICBkICBkYXRlICBBIGRhdGVcbiAgICogQHBhcmFtICBpbnR8ZGF0ZSAgcmFuZ2UgIE51bWJlciBvZiBtaW51dGVzIGluIHRoZSByYW5nZSwgb3IgYSBzdG9wIGRhdGVcbiAgICogQHJldHVybiBhcnJheSAgQW4gYXJyYXkgb2YgbWludXRlc1xuICAgKi9cbiAgZ2V0TWludXRlRG9tYWluOiBmdW5jdGlvbiAoZCwgcmFuZ2UpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgc3RhcnQgPSBuZXcgRGF0ZShkLmdldEZ1bGxZZWFyKCksIGQuZ2V0TW9udGgoKSwgZC5nZXREYXRlKCksIGQuZ2V0SG91cnMoKSk7XG4gICAgdmFyIHN0b3AgPSBudWxsO1xuXG4gICAgaWYgKHJhbmdlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgc3RvcCA9IG5ldyBEYXRlKHJhbmdlLmdldEZ1bGxZZWFyKCksIHJhbmdlLmdldE1vbnRoKCksIHJhbmdlLmdldERhdGUoKSwgcmFuZ2UuZ2V0SG91cnMoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0b3AgPSBuZXcgRGF0ZSgrc3RhcnQgKyByYW5nZSAqIDEwMDAgKiA2MCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGQzLnRpbWUubWludXRlcyhNYXRoLm1pbihzdGFydCwgc3RvcCksIE1hdGgubWF4KHN0YXJ0LCBzdG9wKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybiBhbGwgdGhlIGhvdXJzIGJldHdlZW4gMiBkYXRlc1xuICAgKlxuICAgKiBAcGFyYW0gIERhdGUgIGQgIEEgZGF0ZVxuICAgKiBAcGFyYW0gIGludHxkYXRlICByYW5nZSAgTnVtYmVyIG9mIGhvdXJzIGluIHRoZSByYW5nZSwgb3IgYSBzdG9wIGRhdGVcbiAgICogQHJldHVybiBhcnJheSAgQW4gYXJyYXkgb2YgaG91cnNcbiAgICovXG4gIGdldEhvdXJEb21haW46IGZ1bmN0aW9uIChkLCByYW5nZSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBzdGFydCA9IG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpLCBkLmdldERhdGUoKSwgZC5nZXRIb3VycygpKTtcbiAgICB2YXIgc3RvcCA9IG51bGw7XG5cbiAgICBpZiAocmFuZ2UgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICBzdG9wID0gbmV3IERhdGUocmFuZ2UuZ2V0RnVsbFllYXIoKSwgcmFuZ2UuZ2V0TW9udGgoKSwgcmFuZ2UuZ2V0RGF0ZSgpLCByYW5nZS5nZXRIb3VycygpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RvcCA9IG5ldyBEYXRlKHN0YXJ0KTtcbiAgICAgIHN0b3Auc2V0SG91cnMoc3RvcC5nZXRIb3VycygpICsgcmFuZ2UpO1xuICAgIH1cblxuICAgIHZhciBkb21haW5zID0gZDMudGltZS5ob3VycyhNYXRoLm1pbihzdGFydCwgc3RvcCksIE1hdGgubWF4KHN0YXJ0LCBzdG9wKSk7IC8vIFBhc3NpbmcgZnJvbSBEU1QgdG8gc3RhbmRhcmQgdGltZVxuICAgIC8vIElmIHRoZXJlIGFyZSAyNSBob3VycywgbGV0J3MgY29tcHJlc3MgdGhlIGR1cGxpY2F0ZSBob3Vyc1xuXG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciB0b3RhbCA9IGRvbWFpbnMubGVuZ3RoO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHRvdGFsOyBpICs9IDEpIHtcbiAgICAgIGlmIChpID4gMCAmJiBkb21haW5zW2ldLmdldEhvdXJzKCkgPT09IGRvbWFpbnNbaSAtIDFdLmdldEhvdXJzKCkpIHtcbiAgICAgICAgdGhpcy5EU1REb21haW4ucHVzaChkb21haW5zW2ldLmdldFRpbWUoKSk7XG4gICAgICAgIGRvbWFpbnMuc3BsaWNlKGksIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IC8vIGQzLnRpbWUuaG91cnMgaXMgcmV0dXJuaW5nIG1vcmUgaG91cnMgdGhhbiBuZWVkZWQgd2hlbiBjaGFuZ2luZ1xuICAgIC8vIGZyb20gRFNUIHRvIHN0YW5kYXJkIHRpbWUsIGJlY2F1c2UgdGhlcmUgaXMgcmVhbGx5IDIgaG91cnMgYmV0d2VlblxuICAgIC8vIDFhbSBhbmQgMmFtIVxuXG5cbiAgICBpZiAodHlwZW9mIHJhbmdlID09PSAnbnVtYmVyJyAmJiBkb21haW5zLmxlbmd0aCA+IE1hdGguYWJzKHJhbmdlKSkge1xuICAgICAgZG9tYWlucy5zcGxpY2UoZG9tYWlucy5sZW5ndGggLSAxLCAxKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZG9tYWlucztcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJuIGFsbCB0aGUgZGF5cyBiZXR3ZWVuIDIgZGF0ZXNcbiAgICpcbiAgICogQHBhcmFtICBEYXRlICAgIGQgICAgQSBkYXRlXG4gICAqIEBwYXJhbSAgaW50fGRhdGUgIHJhbmdlICBOdW1iZXIgb2YgZGF5cyBpbiB0aGUgcmFuZ2UsIG9yIGEgc3RvcCBkYXRlXG4gICAqIEByZXR1cm4gYXJyYXkgIEFuIGFycmF5IG9mIHdlZWtzXG4gICAqL1xuICBnZXREYXlEb21haW46IGZ1bmN0aW9uIChkLCByYW5nZSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBzdGFydCA9IG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpLCBkLmdldERhdGUoKSk7XG4gICAgdmFyIHN0b3AgPSBudWxsO1xuXG4gICAgaWYgKHJhbmdlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgc3RvcCA9IG5ldyBEYXRlKHJhbmdlLmdldEZ1bGxZZWFyKCksIHJhbmdlLmdldE1vbnRoKCksIHJhbmdlLmdldERhdGUoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0b3AgPSBuZXcgRGF0ZShzdGFydCk7XG4gICAgICBzdG9wID0gbmV3IERhdGUoc3RvcC5zZXREYXRlKHN0b3AuZ2V0RGF0ZSgpICsgcGFyc2VJbnQocmFuZ2UsIDEwKSkpO1xuICAgIH1cblxuICAgIHJldHVybiBkMy50aW1lLmRheXMoTWF0aC5taW4oc3RhcnQsIHN0b3ApLCBNYXRoLm1heChzdGFydCwgc3RvcCkpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYWxsIHRoZSB3ZWVrcyBiZXR3ZWVuIDIgZGF0ZXNcbiAgICpcbiAgICogQHBhcmFtICBEYXRlICBkICBBIGRhdGVcbiAgICogQHBhcmFtICBpbnR8ZGF0ZSAgcmFuZ2UgIE51bWJlciBvZiBtaW51dGVzIGluIHRoZSByYW5nZSwgb3IgYSBzdG9wIGRhdGVcbiAgICogQHJldHVybiBhcnJheSAgQW4gYXJyYXkgb2Ygd2Vla3NcbiAgICovXG4gIGdldFdlZWtEb21haW46IGZ1bmN0aW9uIChkLCByYW5nZSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciB3ZWVrU3RhcnQ7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLndlZWtTdGFydE9uTW9uZGF5ID09PSBmYWxzZSkge1xuICAgICAgd2Vla1N0YXJ0ID0gbmV3IERhdGUoZC5nZXRGdWxsWWVhcigpLCBkLmdldE1vbnRoKCksIGQuZ2V0RGF0ZSgpIC0gZC5nZXREYXkoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChkLmdldERheSgpID09PSAxKSB7XG4gICAgICAgIHdlZWtTdGFydCA9IG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpLCBkLmdldERhdGUoKSk7XG4gICAgICB9IGVsc2UgaWYgKGQuZ2V0RGF5KCkgPT09IDApIHtcbiAgICAgICAgd2Vla1N0YXJ0ID0gbmV3IERhdGUoZC5nZXRGdWxsWWVhcigpLCBkLmdldE1vbnRoKCksIGQuZ2V0RGF0ZSgpKTtcbiAgICAgICAgd2Vla1N0YXJ0LnNldERhdGUod2Vla1N0YXJ0LmdldERhdGUoKSAtIDYpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2Vla1N0YXJ0ID0gbmV3IERhdGUoZC5nZXRGdWxsWWVhcigpLCBkLmdldE1vbnRoKCksIGQuZ2V0RGF0ZSgpIC0gZC5nZXREYXkoKSArIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBlbmREYXRlID0gbmV3IERhdGUod2Vla1N0YXJ0KTtcbiAgICB2YXIgc3RvcCA9IHJhbmdlO1xuXG4gICAgaWYgKHR5cGVvZiByYW5nZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHN0b3AgPSBuZXcgRGF0ZShlbmREYXRlLnNldERhdGUoZW5kRGF0ZS5nZXREYXRlKCkgKyByYW5nZSAqIDcpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLndlZWtTdGFydE9uTW9uZGF5ID09PSB0cnVlID8gZDMudGltZS5tb25kYXlzKE1hdGgubWluKHdlZWtTdGFydCwgc3RvcCksIE1hdGgubWF4KHdlZWtTdGFydCwgc3RvcCkpIDogZDMudGltZS5zdW5kYXlzKE1hdGgubWluKHdlZWtTdGFydCwgc3RvcCksIE1hdGgubWF4KHdlZWtTdGFydCwgc3RvcCkpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYWxsIHRoZSBtb250aHMgYmV0d2VlbiAyIGRhdGVzXG4gICAqXG4gICAqIEBwYXJhbSAgRGF0ZSAgICBkICAgIEEgZGF0ZVxuICAgKiBAcGFyYW0gIGludHxkYXRlICByYW5nZSAgTnVtYmVyIG9mIG1vbnRocyBpbiB0aGUgcmFuZ2UsIG9yIGEgc3RvcCBkYXRlXG4gICAqIEByZXR1cm4gYXJyYXkgIEFuIGFycmF5IG9mIG1vbnRoc1xuICAgKi9cbiAgZ2V0TW9udGhEb21haW46IGZ1bmN0aW9uIChkLCByYW5nZSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBzdGFydCA9IG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpKTtcbiAgICB2YXIgc3RvcCA9IG51bGw7XG5cbiAgICBpZiAocmFuZ2UgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICBzdG9wID0gbmV3IERhdGUocmFuZ2UuZ2V0RnVsbFllYXIoKSwgcmFuZ2UuZ2V0TW9udGgoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0b3AgPSBuZXcgRGF0ZShzdGFydCk7XG4gICAgICBzdG9wID0gc3RvcC5zZXRNb250aChzdG9wLmdldE1vbnRoKCkgKyByYW5nZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGQzLnRpbWUubW9udGhzKE1hdGgubWluKHN0YXJ0LCBzdG9wKSwgTWF0aC5tYXgoc3RhcnQsIHN0b3ApKTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJuIGFsbCB0aGUgeWVhcnMgYmV0d2VlbiAyIGRhdGVzXG4gICAqXG4gICAqIEBwYXJhbSAgRGF0ZSAgZCAgZGF0ZSAgQSBkYXRlXG4gICAqIEBwYXJhbSAgaW50fGRhdGUgIHJhbmdlICBOdW1iZXIgb2YgbWludXRlcyBpbiB0aGUgcmFuZ2UsIG9yIGEgc3RvcCBkYXRlXG4gICAqIEByZXR1cm4gYXJyYXkgIEFuIGFycmF5IG9mIGhvdXJzXG4gICAqL1xuICBnZXRZZWFyRG9tYWluOiBmdW5jdGlvbiAoZCwgcmFuZ2UpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgc3RhcnQgPSBuZXcgRGF0ZShkLmdldEZ1bGxZZWFyKCksIDApO1xuICAgIHZhciBzdG9wID0gbnVsbDtcblxuICAgIGlmIChyYW5nZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgIHN0b3AgPSBuZXcgRGF0ZShyYW5nZS5nZXRGdWxsWWVhcigpLCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RvcCA9IG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSArIHJhbmdlLCAwKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZDMudGltZS55ZWFycyhNYXRoLm1pbihzdGFydCwgc3RvcCksIE1hdGgubWF4KHN0YXJ0LCBzdG9wKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBhbiBhcnJheSBvZiBkb21haW4gc3RhcnQgZGF0ZXNcbiAgICpcbiAgICogQHBhcmFtICBpbnR8RGF0ZSBkYXRlIEEgcmFuZG9tIGRhdGUgaW5jbHVkZWQgaW4gdGhlIHdhbnRlZCBkb21haW5cbiAgICogQHBhcmFtICBpbnR8RGF0ZSByYW5nZSBOdW1iZXIgb2YgZGF0ZXMgdG8gZ2V0LCBvciBhIHN0b3AgZGF0ZVxuICAgKiBAcmV0dXJuIEFycmF5IG9mIGRhdGVzXG4gICAqL1xuICBnZXREb21haW46IGZ1bmN0aW9uIChkYXRlLCByYW5nZSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGlmICh0eXBlb2YgZGF0ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIGRhdGUgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICB9XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICAgIHJhbmdlID0gdGhpcy5vcHRpb25zLnJhbmdlO1xuICAgIH1cblxuICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLmRvbWFpbikge1xuICAgICAgY2FzZSAnaG91cic6XG4gICAgICAgIHZhciBkb21haW5zID0gdGhpcy5nZXRIb3VyRG9tYWluKGRhdGUsIHJhbmdlKTsgLy8gQ2FzZSB3aGVyZSBhbiBob3VyIGlzIG1pc3NpbmcsIHdoZW4gcGFzc2luZyBmcm9tIHN0YW5kYXJkIHRpbWUgdG8gRFNUXG4gICAgICAgIC8vIE1pc3NpbmcgaG91ciBpcyBwZXJmZWN0bHkgYWNjZXB0YWJsIGluIHN1YkRvbWFpbiwgYnV0IG5vdCBpbiBkb21haW5zXG5cbiAgICAgICAgaWYgKHR5cGVvZiByYW5nZSA9PT0gJ251bWJlcicgJiYgZG9tYWlucy5sZW5ndGggPCByYW5nZSkge1xuICAgICAgICAgIGlmIChyYW5nZSA+IDApIHtcbiAgICAgICAgICAgIGRvbWFpbnMucHVzaCh0aGlzLmdldEhvdXJEb21haW4oZG9tYWluc1tkb21haW5zLmxlbmd0aCAtIDFdLCAyKVsxXSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRvbWFpbnMuc2hpZnQodGhpcy5nZXRIb3VyRG9tYWluKGRvbWFpbnNbMF0sIC0yKVswXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRvbWFpbnM7XG5cbiAgICAgIGNhc2UgJ2RheSc6XG4gICAgICAgIHJldHVybiB0aGlzLmdldERheURvbWFpbihkYXRlLCByYW5nZSk7XG5cbiAgICAgIGNhc2UgJ3dlZWsnOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRXZWVrRG9tYWluKGRhdGUsIHJhbmdlKTtcblxuICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNb250aERvbWFpbihkYXRlLCByYW5nZSk7XG5cbiAgICAgIGNhc2UgJ3llYXInOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRZZWFyRG9tYWluKGRhdGUsIHJhbmdlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoganNoaW50IG1heGNvbXBsZXhpdHk6IGZhbHNlICovXG4gIGdldFN1YkRvbWFpbjogZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAodHlwZW9mIGRhdGUgPT09ICdudW1iZXInKSB7XG4gICAgICBkYXRlID0gbmV3IERhdGUoZGF0ZSk7XG4gICAgfVxuXG4gICAgdmFyIHBhcmVudCA9IHRoaXM7XG4gICAgLyoqXG4gICAgICogQHJldHVybiBpbnRcbiAgICAgKi9cblxuICAgIHZhciBjb21wdXRlRGF5U3ViRG9tYWluU2l6ZSA9IGZ1bmN0aW9uIChkYXRlLCBkb21haW4pIHtcbiAgICAgIHN3aXRjaCAoZG9tYWluKSB7XG4gICAgICAgIGNhc2UgJ3llYXInOlxuICAgICAgICAgIHJldHVybiBwYXJlbnQuZ2V0RGF5Q291bnRJblllYXIoZGF0ZSk7XG5cbiAgICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICAgIHJldHVybiBwYXJlbnQuZ2V0RGF5Q291bnRJbk1vbnRoKGRhdGUpO1xuXG4gICAgICAgIGNhc2UgJ3dlZWsnOlxuICAgICAgICAgIHJldHVybiA3O1xuICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiBpbnRcbiAgICAgKi9cblxuXG4gICAgdmFyIGNvbXB1dGVNaW5TdWJEb21haW5TaXplID0gZnVuY3Rpb24gKGRhdGUsIGRvbWFpbikge1xuICAgICAgc3dpdGNoIChkb21haW4pIHtcbiAgICAgICAgY2FzZSAnaG91cic6XG4gICAgICAgICAgcmV0dXJuIDYwO1xuXG4gICAgICAgIGNhc2UgJ2RheSc6XG4gICAgICAgICAgcmV0dXJuIDYwICogMjQ7XG5cbiAgICAgICAgY2FzZSAnd2Vlayc6XG4gICAgICAgICAgcmV0dXJuIDYwICogMjQgKiA3O1xuICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiBpbnRcbiAgICAgKi9cblxuXG4gICAgdmFyIGNvbXB1dGVIb3VyU3ViRG9tYWluU2l6ZSA9IGZ1bmN0aW9uIChkYXRlLCBkb21haW4pIHtcbiAgICAgIHN3aXRjaCAoZG9tYWluKSB7XG4gICAgICAgIGNhc2UgJ2RheSc6XG4gICAgICAgICAgcmV0dXJuIDI0O1xuXG4gICAgICAgIGNhc2UgJ3dlZWsnOlxuICAgICAgICAgIHJldHVybiAxNjg7XG5cbiAgICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICAgIHJldHVybiBwYXJlbnQuZ2V0RGF5Q291bnRJbk1vbnRoKGRhdGUpICogMjQ7XG4gICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIGludFxuICAgICAqL1xuXG5cbiAgICB2YXIgY29tcHV0ZVdlZWtTdWJEb21haW5TaXplID0gZnVuY3Rpb24gKGRhdGUsIGRvbWFpbikge1xuICAgICAgaWYgKGRvbWFpbiA9PT0gJ21vbnRoJykge1xuICAgICAgICB2YXIgZW5kT2ZNb250aCA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpICsgMSwgMCk7XG4gICAgICAgIHZhciBlbmRXZWVrTmIgPSBwYXJlbnQuZ2V0V2Vla051bWJlcihlbmRPZk1vbnRoKTtcbiAgICAgICAgdmFyIHN0YXJ0V2Vla05iID0gcGFyZW50LmdldFdlZWtOdW1iZXIobmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCkpKTtcblxuICAgICAgICBpZiAoc3RhcnRXZWVrTmIgPiBlbmRXZWVrTmIpIHtcbiAgICAgICAgICBzdGFydFdlZWtOYiA9IDA7XG4gICAgICAgICAgZW5kV2Vla05iICs9IDE7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZW5kV2Vla05iIC0gc3RhcnRXZWVrTmIgKyAxO1xuICAgICAgfSBlbHNlIGlmIChkb21haW4gPT09ICd5ZWFyJykge1xuICAgICAgICByZXR1cm4gcGFyZW50LmdldFdlZWtOdW1iZXIobmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAxMSwgMzEpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgc3dpdGNoICh0aGlzLm9wdGlvbnMuc3ViRG9tYWluKSB7XG4gICAgICBjYXNlICd4X21pbic6XG4gICAgICBjYXNlICdtaW4nOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNaW51dGVEb21haW4oZGF0ZSwgY29tcHV0ZU1pblN1YkRvbWFpblNpemUoZGF0ZSwgdGhpcy5vcHRpb25zLmRvbWFpbikpO1xuXG4gICAgICBjYXNlICd4X2hvdXInOlxuICAgICAgY2FzZSAnaG91cic6XG4gICAgICAgIHJldHVybiB0aGlzLmdldEhvdXJEb21haW4oZGF0ZSwgY29tcHV0ZUhvdXJTdWJEb21haW5TaXplKGRhdGUsIHRoaXMub3B0aW9ucy5kb21haW4pKTtcblxuICAgICAgY2FzZSAneF9kYXknOlxuICAgICAgY2FzZSAnZGF5JzpcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RGF5RG9tYWluKGRhdGUsIGNvbXB1dGVEYXlTdWJEb21haW5TaXplKGRhdGUsIHRoaXMub3B0aW9ucy5kb21haW4pKTtcblxuICAgICAgY2FzZSAneF93ZWVrJzpcbiAgICAgIGNhc2UgJ3dlZWsnOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRXZWVrRG9tYWluKGRhdGUsIGNvbXB1dGVXZWVrU3ViRG9tYWluU2l6ZShkYXRlLCB0aGlzLm9wdGlvbnMuZG9tYWluKSk7XG5cbiAgICAgIGNhc2UgJ3hfbW9udGgnOlxuICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNb250aERvbWFpbihkYXRlLCAxMik7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG4tdGggbmV4dCBkb21haW4gYWZ0ZXIgdGhlIGNhbGVuZGFyIG5ld2VzdCAocmlnaHRtb3N0KSBkb21haW5cbiAgICogQHBhcmFtICBpbnQgblxuICAgKiBAcmV0dXJuIERhdGUgVGhlIHN0YXJ0IGRhdGUgb2YgdGhlIHdhbnRlZCBkb21haW5cbiAgICovXG4gIGdldE5leHREb21haW46IGZ1bmN0aW9uIChuKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIG4gPSAxO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmdldERvbWFpbih0aGlzLmp1bXBEYXRlKHRoaXMuZ2V0RG9tYWluS2V5cygpLnBvcCgpLCBuLCB0aGlzLm9wdGlvbnMuZG9tYWluKSwgMSlbMF07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbi10aCBkb21haW4gYmVmb3JlIHRoZSBjYWxlbmRhciBvbGRlc3QgKGxlZnRtb3N0KSBkb21haW5cbiAgICogQHBhcmFtICBpbnQgblxuICAgKiBAcmV0dXJuIERhdGUgVGhlIHN0YXJ0IGRhdGUgb2YgdGhlIHdhbnRlZCBkb21haW5cbiAgICovXG4gIGdldFByZXZpb3VzRG9tYWluOiBmdW5jdGlvbiAobikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBuID0gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5nZXREb21haW4odGhpcy5qdW1wRGF0ZSh0aGlzLmdldERvbWFpbktleXMoKS5zaGlmdCgpLCAtbiwgdGhpcy5vcHRpb25zLmRvbWFpbiksIDEpWzBdO1xuICB9LFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly9cbiAgLy8gREFUQVMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vXG5cbiAgLyoqXG4gICAqIEZldGNoIGFuZCBpbnRlcnByZXQgZGF0YSBmcm9tIHRoZSBkYXRhc291cmNlXG4gICAqXG4gICAqIEBwYXJhbSBzdHJpbmd8b2JqZWN0IHNvdXJjZVxuICAgKiBAcGFyYW0gRGF0ZSBzdGFydERhdGVcbiAgICogQHBhcmFtIERhdGUgZW5kRGF0ZVxuICAgKiBAcGFyYW0gZnVuY3Rpb24gY2FsbGJhY2tcbiAgICogQHBhcmFtIGZ1bmN0aW9ufGJvb2xlYW4gYWZ0ZXJMb2FkIGZ1bmN0aW9uIHVzZWQgdG8gY29udmVydCB0aGUgZGF0YSBpbnRvIGEganNvbiBvYmplY3QuIFVzZSB0cnVlIHRvIHVzZSB0aGUgYWZ0ZXJMb2FkIGNhbGxiYWNrXG4gICAqIEBwYXJhbSB1cGRhdGVNb2RlXG4gICAqXG4gICAqIEByZXR1cm4gbWl4ZWRcbiAgICogLSBUcnVlIGlmIHRoZXJlIGFyZSBubyBkYXRhIHRvIGxvYWRcbiAgICogLSBGYWxzZSBpZiBkYXRhIGFyZSBsb2FkZWQgYXN5bmNocm9ub3VzbHlcbiAgICovXG4gIGdldERhdGFzOiBmdW5jdGlvbiAoc291cmNlLCBzdGFydERhdGUsIGVuZERhdGUsIGNhbGxiYWNrLCBhZnRlckxvYWQsIHVwZGF0ZU1vZGUpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDUpIHtcbiAgICAgIGFmdGVyTG9hZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCA2KSB7XG4gICAgICB1cGRhdGVNb2RlID0gdGhpcy5BUFBFTkRfT05fVVBEQVRFO1xuICAgIH1cblxuICAgIHZhciBfY2FsbGJhY2sgPSBmdW5jdGlvbiAoZXJyb3IsIGRhdGEpIHtcbiAgICAgIGlmIChhZnRlckxvYWQgIT09IGZhbHNlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYWZ0ZXJMb2FkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgZGF0YSA9IGFmdGVyTG9hZChkYXRhKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZi5vcHRpb25zLmFmdGVyTG9hZERhdGEgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBkYXRhID0gc2VsZi5vcHRpb25zLmFmdGVyTG9hZERhdGEoZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1Byb3ZpZGVkIGNhbGxiYWNrIGZvciBhZnRlckxvYWREYXRhIGlzIG5vdCBhIGZ1bmN0aW9uLicpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHNlbGYub3B0aW9ucy5kYXRhVHlwZSA9PT0gJ2NzdicgfHwgc2VsZi5vcHRpb25zLmRhdGFUeXBlID09PSAndHN2Jykge1xuICAgICAgICBkYXRhID0gdGhpcy5pbnRlcnByZXRDU1YoZGF0YSk7XG4gICAgICB9XG5cbiAgICAgIHNlbGYucGFyc2VEYXRhcyhkYXRhLCB1cGRhdGVNb2RlLCBzdGFydERhdGUsIGVuZERhdGUpO1xuXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHN3aXRjaCAodHlwZW9mIHNvdXJjZSkge1xuICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgaWYgKHNvdXJjZSA9PT0gJycpIHtcbiAgICAgICAgICBfY2FsbGJhY2sobnVsbCwge30pO1xuXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHVybCA9IHRoaXMucGFyc2VVUkkoc291cmNlLCBzdGFydERhdGUsIGVuZERhdGUpO1xuICAgICAgICAgIHZhciByZXF1ZXN0VHlwZSA9ICdHRVQnO1xuXG4gICAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5kYXRhUG9zdFBheWxvYWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJlcXVlc3RUeXBlID0gJ1BPU1QnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBwYXlsb2FkID0gbnVsbDtcblxuICAgICAgICAgIGlmIChzZWxmLm9wdGlvbnMuZGF0YVBvc3RQYXlsb2FkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBwYXlsb2FkID0gdGhpcy5wYXJzZVVSSShzZWxmLm9wdGlvbnMuZGF0YVBvc3RQYXlsb2FkLCBzdGFydERhdGUsIGVuZERhdGUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciB4aHIgPSBudWxsO1xuXG4gICAgICAgICAgc3dpdGNoICh0aGlzLm9wdGlvbnMuZGF0YVR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2pzb24nOlxuICAgICAgICAgICAgICB4aHIgPSBkMy5qc29uKHVybCk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdjc3YnOlxuICAgICAgICAgICAgICB4aHIgPSBkMy5jc3YodXJsKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgJ3Rzdic6XG4gICAgICAgICAgICAgIHhociA9IGQzLnRzdih1cmwpO1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAndHh0JzpcbiAgICAgICAgICAgICAgeGhyID0gZDMudGV4dCh1cmwsICd0ZXh0L3BsYWluJyk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH0gLy8ganNoaW50IG1heGRlcHRoOjVcblxuXG4gICAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5kYXRhUmVxdWVzdEhlYWRlcnMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGhlYWRlciBpbiBzZWxmLm9wdGlvbnMuZGF0YVJlcXVlc3RIZWFkZXJzKSB7XG4gICAgICAgICAgICAgIGlmIChzZWxmLm9wdGlvbnMuZGF0YVJlcXVlc3RIZWFkZXJzLmhhc093blByb3BlcnR5KGhlYWRlcikpIHtcbiAgICAgICAgICAgICAgICB4aHIuaGVhZGVyKGhlYWRlciwgc2VsZi5vcHRpb25zLmRhdGFSZXF1ZXN0SGVhZGVyc1toZWFkZXJdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHhoci5zZW5kKHJlcXVlc3RUeXBlLCBwYXlsb2FkLCBfY2FsbGJhY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICBpZiAoc291cmNlID09PSBPYmplY3Qoc291cmNlKSkge1xuICAgICAgICAgIF9jYWxsYmFjayhudWxsLCBzb3VyY2UpO1xuXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgX2NhbGxiYWNrKG51bGwsIHt9KTtcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBvcHVsYXRlIHRoZSBjYWxlbmRhciBpbnRlcm5hbCBkYXRhXG4gICAqXG4gICAqIEBwYXJhbSBvYmplY3QgZGF0YVxuICAgKiBAcGFyYW0gY29uc3RhbnQgdXBkYXRlTW9kZVxuICAgKiBAcGFyYW0gRGF0ZSBzdGFydERhdGVcbiAgICogQHBhcmFtIERhdGUgZW5kRGF0ZVxuICAgKlxuICAgKiBAcmV0dXJuIHZvaWRcbiAgICovXG4gIHBhcnNlRGF0YXM6IGZ1bmN0aW9uIChkYXRhLCB1cGRhdGVNb2RlLCBzdGFydERhdGUsIGVuZERhdGUpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAodXBkYXRlTW9kZSA9PT0gdGhpcy5SRVNFVF9BTExfT05fVVBEQVRFKSB7XG4gICAgICB0aGlzLl9kb21haW5zLmZvckVhY2goZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdmFsdWUuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgICAgYXJyYXlbaW5kZXhdLnYgPSBudWxsO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciB0ZW1wID0ge307XG5cbiAgICB2YXIgZXh0cmFjdFRpbWUgPSBmdW5jdGlvbiAoZCkge1xuICAgICAgcmV0dXJuIGQudDtcbiAgICB9O1xuICAgIC8qanNoaW50IGZvcmluOmZhbHNlICovXG5cblxuICAgIGZvciAodmFyIGQgaW4gZGF0YSkge1xuICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShkICogMTAwMCk7XG4gICAgICB2YXIgZG9tYWluVW5pdCA9IHRoaXMuZ2V0RG9tYWluKGRhdGUpWzBdLmdldFRpbWUoKTsgLy8gVGhlIGN1cnJlbnQgZGF0YSBiZWxvbmdzIHRvIGEgZG9tYWluIHRoYXQgd2FzIGNvbXByZXNzZWRcbiAgICAgIC8vIENvbXByZXNzIHRoZSBkYXRhIGZvciB0aGUgdHdvIGR1cGxpY2F0ZSBob3VycyBpbnRvIHRoZSBzYW1lIGhvdXJcblxuICAgICAgaWYgKHRoaXMuRFNURG9tYWluLmluZGV4T2YoZG9tYWluVW5pdCkgPj0gMCkge1xuICAgICAgICAvLyBSZS1hc3NpZ24gYWxsIGRhdGEgdG8gdGhlIGZpcnN0IG9yIHRoZSBzZWNvbmQgZHVwbGljYXRlIGhvdXJzXG4gICAgICAgIC8vIGRlcGVuZGluZyBvbiB3aGljaCBpcyB2aXNpYmxlXG4gICAgICAgIGlmICh0aGlzLl9kb21haW5zLmhhcyhkb21haW5Vbml0IC0gMzYwMCAqIDEwMDApKSB7XG4gICAgICAgICAgZG9tYWluVW5pdCAtPSAzNjAwICogMTAwMDtcbiAgICAgICAgfVxuICAgICAgfSAvLyBTa2lwIGlmIGRhdGEgaXMgbm90IHJlbGV2YW50IHRvIGN1cnJlbnQgZG9tYWluXG5cblxuICAgICAgaWYgKGlzTmFOKGQpIHx8ICFkYXRhLmhhc093blByb3BlcnR5KGQpIHx8ICF0aGlzLl9kb21haW5zLmhhcyhkb21haW5Vbml0KSB8fCAhKGRvbWFpblVuaXQgPj0gK3N0YXJ0RGF0ZSAmJiBkb21haW5Vbml0IDwgK2VuZERhdGUpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3ViRG9tYWluc0RhdGEgPSB0aGlzLl9kb21haW5zLmdldChkb21haW5Vbml0KTtcblxuICAgICAgaWYgKCF0ZW1wLmhhc093blByb3BlcnR5KGRvbWFpblVuaXQpKSB7XG4gICAgICAgIHRlbXBbZG9tYWluVW5pdF0gPSBzdWJEb21haW5zRGF0YS5tYXAoZXh0cmFjdFRpbWUpO1xuICAgICAgfVxuXG4gICAgICB2YXIgaW5kZXggPSB0ZW1wW2RvbWFpblVuaXRdLmluZGV4T2YodGhpcy5fZG9tYWluVHlwZVt0aGlzLm9wdGlvbnMuc3ViRG9tYWluXS5leHRyYWN0VW5pdChkYXRlKSk7XG5cbiAgICAgIGlmICh1cGRhdGVNb2RlID09PSB0aGlzLlJFU0VUX1NJTkdMRV9PTl9VUERBVEUpIHtcbiAgICAgICAgc3ViRG9tYWluc0RhdGFbaW5kZXhdLnYgPSBkYXRhW2RdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFpc05hTihzdWJEb21haW5zRGF0YVtpbmRleF0udikpIHtcbiAgICAgICAgICBzdWJEb21haW5zRGF0YVtpbmRleF0udiArPSBkYXRhW2RdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN1YkRvbWFpbnNEYXRhW2luZGV4XS52ID0gZGF0YVtkXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgcGFyc2VVUkk6IGZ1bmN0aW9uIChzdHIsIHN0YXJ0RGF0ZSwgZW5kRGF0ZSkge1xuICAgICd1c2Ugc3RyaWN0JzsgLy8gVXNlIGEgdGltZXN0YW1wIGluIHNlY29uZHNcblxuICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9cXHtcXHt0OnN0YXJ0XFx9XFx9L2csIHN0YXJ0RGF0ZS5nZXRUaW1lKCkgLyAxMDAwKTtcbiAgICBzdHIgPSBzdHIucmVwbGFjZSgvXFx7XFx7dDplbmRcXH1cXH0vZywgZW5kRGF0ZS5nZXRUaW1lKCkgLyAxMDAwKTsgLy8gVXNlIGEgc3RyaW5nIGRhdGUsIGZvbGxvd2luZyB0aGUgSVNPLTg2MDFcblxuICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9cXHtcXHtkOnN0YXJ0XFx9XFx9L2csIHN0YXJ0RGF0ZS50b0lTT1N0cmluZygpKTtcbiAgICBzdHIgPSBzdHIucmVwbGFjZSgvXFx7XFx7ZDplbmRcXH1cXH0vZywgZW5kRGF0ZS50b0lTT1N0cmluZygpKTtcbiAgICByZXR1cm4gc3RyO1xuICB9LFxuICBpbnRlcnByZXRDU1Y6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGQgPSB7fTtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGFbMF0pO1xuICAgIHZhciBpLCB0b3RhbDtcblxuICAgIGZvciAoaSA9IDAsIHRvdGFsID0gZGF0YS5sZW5ndGg7IGkgPCB0b3RhbDsgaSArPSAxKSB7XG4gICAgICBkW2RhdGFbaV1ba2V5c1swXV1dID0gK2RhdGFbaV1ba2V5c1sxXV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0aGUgY2FsZW5kYXIgbGF5b3V0IGFuZCBkaW1lbnNpb25cbiAgICpcbiAgICogRXhwYW5kIGFuZCBzaHJpbmsgdGhlIGNvbnRhaW5lciBkZXBlbmRpbmcgb24gaXRzIGNoaWxkcmVuIGRpbWVuc2lvblxuICAgKiBBbHNvIHJlYXJyYW5nZSB0aGUgY2hpbGRyZW4gcG9zaXRpb24gZGVwZW5kaW5nIG9uIHRoZWlyIGRpbWVuc2lvbixcbiAgICogYW5kIHRoZSBsZWdlbmQgcG9zaXRpb25cbiAgICpcbiAgICogQHJldHVybiB2b2lkXG4gICAqL1xuICByZXNpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgcGFyZW50ID0gdGhpcztcbiAgICB2YXIgb3B0aW9ucyA9IHBhcmVudC5vcHRpb25zO1xuICAgIHZhciBsZWdlbmRXaWR0aCA9IG9wdGlvbnMuZGlzcGxheUxlZ2VuZCA/IHBhcmVudC5MZWdlbmQuZ2V0RGltKCd3aWR0aCcpICsgb3B0aW9ucy5sZWdlbmRNYXJnaW5bMV0gKyBvcHRpb25zLmxlZ2VuZE1hcmdpblszXSA6IDA7XG4gICAgdmFyIGxlZ2VuZEhlaWdodCA9IG9wdGlvbnMuZGlzcGxheUxlZ2VuZCA/IHBhcmVudC5MZWdlbmQuZ2V0RGltKCdoZWlnaHQnKSArIG9wdGlvbnMubGVnZW5kTWFyZ2luWzBdICsgb3B0aW9ucy5sZWdlbmRNYXJnaW5bMl0gOiAwO1xuICAgIHZhciBncmFwaFdpZHRoID0gcGFyZW50LmdyYXBoRGltLndpZHRoIC0gb3B0aW9ucy5kb21haW5HdXR0ZXIgLSBvcHRpb25zLmNlbGxQYWRkaW5nO1xuICAgIHZhciBncmFwaEhlaWdodCA9IHBhcmVudC5ncmFwaERpbS5oZWlnaHQgLSBvcHRpb25zLmRvbWFpbkd1dHRlciAtIG9wdGlvbnMuY2VsbFBhZGRpbmc7XG4gICAgdGhpcy5yb290LnRyYW5zaXRpb24oKS5kdXJhdGlvbihvcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uKS5hdHRyKCd3aWR0aCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChvcHRpb25zLmxlZ2VuZFZlcnRpY2FsUG9zaXRpb24gPT09ICdtaWRkbGUnIHx8IG9wdGlvbnMubGVnZW5kVmVydGljYWxQb3NpdGlvbiA9PT0gJ2NlbnRlcicpIHtcbiAgICAgICAgcmV0dXJuIGdyYXBoV2lkdGggKyBsZWdlbmRXaWR0aDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIE1hdGgubWF4KGdyYXBoV2lkdGgsIGxlZ2VuZFdpZHRoKTtcbiAgICB9KS5hdHRyKCdoZWlnaHQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAob3B0aW9ucy5sZWdlbmRWZXJ0aWNhbFBvc2l0aW9uID09PSAnbWlkZGxlJyB8fCBvcHRpb25zLmxlZ2VuZFZlcnRpY2FsUG9zaXRpb24gPT09ICdjZW50ZXInKSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1heChncmFwaEhlaWdodCwgbGVnZW5kSGVpZ2h0KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGdyYXBoSGVpZ2h0ICsgbGVnZW5kSGVpZ2h0O1xuICAgIH0pO1xuICAgIHRoaXMucm9vdC5zZWxlY3QoJy5ncmFwaCcpLnRyYW5zaXRpb24oKS5kdXJhdGlvbihvcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uKS5hdHRyKCd5JywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKG9wdGlvbnMubGVnZW5kVmVydGljYWxQb3NpdGlvbiA9PT0gJ3RvcCcpIHtcbiAgICAgICAgcmV0dXJuIGxlZ2VuZEhlaWdodDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIDA7XG4gICAgfSkuYXR0cigneCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICgob3B0aW9ucy5sZWdlbmRWZXJ0aWNhbFBvc2l0aW9uID09PSAnbWlkZGxlJyB8fCBvcHRpb25zLmxlZ2VuZFZlcnRpY2FsUG9zaXRpb24gPT09ICdjZW50ZXInKSAmJiBvcHRpb25zLmxlZ2VuZEhvcml6b250YWxQb3NpdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgIHJldHVybiBsZWdlbmRXaWR0aDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIDA7XG4gICAgfSk7XG4gIH0sXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vL1xuICAvLyBQVUJMSUMgQVBJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly9cblxuICAvKipcbiAgICogU2hpZnQgdGhlIGNhbGVuZGFyIGZvcndhcmRcbiAgICovXG4gIG5leHQ6IGZ1bmN0aW9uIChuKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIG4gPSAxO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmxvYWROZXh0RG9tYWluKG4pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTaGlmdCB0aGUgY2FsZW5kYXIgYmFja3dhcmRcbiAgICovXG4gIHByZXZpb3VzOiBmdW5jdGlvbiAobikge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBuID0gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5sb2FkUHJldmlvdXNEb21haW4obik7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEp1bXAgZGlyZWN0bHkgdG8gYSBzcGVjaWZpYyBkYXRlXG4gICAqXG4gICAqIEp1bXBUbyB3aWxsIHNjcm9sbCB0aGUgY2FsZW5kYXIgdW50aWwgdGhlIHdhbnRlZCBkb21haW4gd2l0aCB0aGUgc3BlY2lmaWVkXG4gICAqIGRhdGUgaXMgdmlzaWJsZS4gVW5sZXNzIHlvdSBzZXQgcmVzZXQgdG8gdHJ1ZSwgdGhlIHdhbnRlZCBkb21haW5cbiAgICogd2lsbCBub3QgbmVjZXNzYXJpbHkgYmUgdGhlIGZpcnN0IChsZWZ0bW9zdCkgZG9tYWluIG9mIHRoZSBjYWxlbmRhci5cbiAgICpcbiAgICogQHBhcmFtIERhdGUgZGF0ZSBKdW1wIHRvIHRoZSBkb21haW4gY29udGFpbmluZyB0aGF0IGRhdGVcbiAgICogQHBhcmFtIGJvb2wgcmVzZXQgV2hldGhlciB0aGUgd2FudGVkIGRvbWFpbiBzaG91bGQgYmUgdGhlIGZpcnN0IGRvbWFpbiBvZiB0aGUgY2FsZW5kYXJcbiAgICogQHBhcmFtIGJvb2wgVHJ1ZSBvZiB0aGUgY2FsZW5kYXIgd2FzIHNjcm9sbGVkXG4gICAqL1xuICBqdW1wVG86IGZ1bmN0aW9uIChkYXRlLCByZXNldCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuICAgICAgcmVzZXQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgZG9tYWlucyA9IHRoaXMuZ2V0RG9tYWluS2V5cygpO1xuICAgIHZhciBmaXJzdERvbWFpbiA9IGRvbWFpbnNbMF07XG4gICAgdmFyIGxhc3REb21haW4gPSBkb21haW5zW2RvbWFpbnMubGVuZ3RoIC0gMV07XG5cbiAgICBpZiAoZGF0ZSA8IGZpcnN0RG9tYWluKSB7XG4gICAgICByZXR1cm4gdGhpcy5sb2FkUHJldmlvdXNEb21haW4odGhpcy5nZXREb21haW4oZmlyc3REb21haW4sIGRhdGUpLmxlbmd0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChyZXNldCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkTmV4dERvbWFpbih0aGlzLmdldERvbWFpbihmaXJzdERvbWFpbiwgZGF0ZSkubGVuZ3RoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGUgPiBsYXN0RG9tYWluKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvYWROZXh0RG9tYWluKHRoaXMuZ2V0RG9tYWluKGxhc3REb21haW4sIGRhdGUpLmxlbmd0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBOYXZpZ2F0ZSBiYWNrIHRvIHRoZSBzdGFydCBkYXRlXG4gICAqXG4gICAqIEBzaW5jZSAgMy4zLjhcbiAgICogQHJldHVybiB2b2lkXG4gICAqL1xuICByZXdpbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB0aGlzLmp1bXBUbyh0aGlzLm9wdGlvbnMuc3RhcnQsIHRydWUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGNhbGVuZGFyIHdpdGggbmV3IGRhdGFcbiAgICpcbiAgICogQHBhcmFtICBvYmplY3R8c3RyaW5nICAgIGRhdGFTb3VyY2UgICAgVGhlIGNhbGVuZGFyJ3MgZGF0YXNvdXJjZSwgc2FtZSB0eXBlIGFzIHRoaXMub3B0aW9ucy5kYXRhXG4gICAqIEBwYXJhbSAgYm9vbGVhbnxmdW5jdGlvbiAgICBhZnRlckxvYWQgICAgV2hldGhlciB0byBleGVjdXRlIGFmdGVyTG9hZCgpIG9uIHRoZSBkYXRhLiBQYXNzIGRpcmVjdGx5IGEgZnVuY3Rpb25cbiAgICogaWYgeW91IGRvbid0IHdhbnQgdG8gdXNlIHRoZSBhZnRlckxvYWQoKSBjYWxsYmFja1xuICAgKi9cbiAgdXBkYXRlOiBmdW5jdGlvbiAoZGF0YVNvdXJjZSwgYWZ0ZXJMb2FkLCB1cGRhdGVNb2RlKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIGRhdGFTb3VyY2UgPSB0aGlzLm9wdGlvbnMuZGF0YTtcbiAgICB9XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcbiAgICAgIGFmdGVyTG9hZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAzKSB7XG4gICAgICB1cGRhdGVNb2RlID0gdGhpcy5SRVNFVF9BTExfT05fVVBEQVRFO1xuICAgIH1cblxuICAgIHZhciBkb21haW5zID0gdGhpcy5nZXREb21haW5LZXlzKCk7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuZ2V0RGF0YXMoZGF0YVNvdXJjZSwgbmV3IERhdGUoZG9tYWluc1swXSksIHRoaXMuZ2V0U3ViRG9tYWluKGRvbWFpbnNbZG9tYWlucy5sZW5ndGggLSAxXSkucG9wKCksIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlbGYuZmlsbCgpO1xuICAgICAgc2VsZi5hZnRlclVwZGF0ZSgpO1xuICAgIH0sIGFmdGVyTG9hZCwgdXBkYXRlTW9kZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldCB0aGUgbGVnZW5kXG4gICAqXG4gICAqIEBwYXJhbSBhcnJheSBsZWdlbmQgYW4gYXJyYXkgb2YgaW50ZWdlciwgcmVwcmVzZW50aW5nIHRoZSBkaWZmZXJlbnQgdGhyZXNob2xkIHZhbHVlXG4gICAqIEBwYXJhbSBhcnJheSBjb2xvclJhbmdlIGFuIGFycmF5IG9mIDIgaGV4IGNvbG9ycywgZm9yIHRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIGNvbG9yc1xuICAgKi9cbiAgc2V0TGVnZW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIG9sZExlZ2VuZCA9IHRoaXMub3B0aW9ucy5sZWdlbmQuc2xpY2UoMCk7XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAxICYmIEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgdGhpcy5vcHRpb25zLmxlZ2VuZCA9IGFyZ3VtZW50c1swXTtcbiAgICB9XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAyKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMV0pICYmIGFyZ3VtZW50c1sxXS5sZW5ndGggPj0gMikge1xuICAgICAgICB0aGlzLm9wdGlvbnMubGVnZW5kQ29sb3JzID0gW2FyZ3VtZW50c1sxXVswXSwgYXJndW1lbnRzWzFdWzFdXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5sZWdlbmRDb2xvcnMgPSBhcmd1bWVudHNbMV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwICYmICFhcnJheUVxdWFscyhvbGRMZWdlbmQsIHRoaXMub3B0aW9ucy5sZWdlbmQpIHx8IGFyZ3VtZW50cy5sZW5ndGggPj0gMikge1xuICAgICAgdGhpcy5MZWdlbmQuYnVpbGRDb2xvcnMoKTtcbiAgICAgIHRoaXMuZmlsbCgpO1xuICAgIH1cblxuICAgIHRoaXMuTGVnZW5kLnJlZHJhdyh0aGlzLmdyYXBoRGltLndpZHRoIC0gdGhpcy5vcHRpb25zLmRvbWFpbkd1dHRlciAtIHRoaXMub3B0aW9ucy5jZWxsUGFkZGluZyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgbGVnZW5kXG4gICAqXG4gICAqIEByZXR1cm4gYm9vbCBGYWxzZSBpZiB0aGVyZSBpcyBubyBsZWdlbmQgdG8gcmVtb3ZlXG4gICAqL1xuICByZW1vdmVMZWdlbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAoIXRoaXMub3B0aW9ucy5kaXNwbGF5TGVnZW5kKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5vcHRpb25zLmRpc3BsYXlMZWdlbmQgPSBmYWxzZTtcbiAgICB0aGlzLkxlZ2VuZC5yZW1vdmUoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcblxuICAvKipcbiAgICogRGlzcGxheSB0aGUgbGVnZW5kXG4gICAqXG4gICAqIEByZXR1cm4gYm9vbCBGYWxzZSBpZiB0aGUgbGVnZW5kIHdhcyBhbHJlYWR5IGRpc3BsYXllZFxuICAgKi9cbiAgc2hvd0xlZ2VuZDogZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGlmICh0aGlzLm9wdGlvbnMuZGlzcGxheUxlZ2VuZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMub3B0aW9ucy5kaXNwbGF5TGVnZW5kID0gdHJ1ZTtcbiAgICB0aGlzLkxlZ2VuZC5yZWRyYXcodGhpcy5ncmFwaERpbS53aWR0aCAtIHRoaXMub3B0aW9ucy5kb21haW5HdXR0ZXIgLSB0aGlzLm9wdGlvbnMuY2VsbFBhZGRpbmcpO1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBIaWdobGlnaHQgZGF0ZXNcbiAgICpcbiAgICogQWRkIGEgaGlnaGxpZ2h0IGNsYXNzIHRvIGEgc2V0IG9mIGRhdGVzXG4gICAqXG4gICAqIEBzaW5jZSAgMy4zLjVcbiAgICogQHBhcmFtICBhcnJheSBBcnJheSBvZiBkYXRlcyB0byBoaWdobGlnaHRcbiAgICogQHJldHVybiBib29sIFRydWUgaWYgZGF0ZXMgd2VyZSBoaWdobGlnaHRlZFxuICAgKi9cbiAgaGlnaGxpZ2h0OiBmdW5jdGlvbiAoYXJncykge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGlmICgodGhpcy5vcHRpb25zLmhpZ2hsaWdodCA9IHRoaXMuZXhwYW5kRGF0ZVNldHRpbmcoYXJncykpLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuZmlsbCgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEZXN0cm95IHRoZSBjYWxlbmRhclxuICAgKlxuICAgKiBVc2FnZTogY2FsID0gY2FsLmRlc3Ryb3koKTtcbiAgICpcbiAgICogQHNpbmNlICAzLjMuNlxuICAgKiBAcGFyYW0gZnVuY3Rpb24gQSBjYWxsYmFjayBmdW5jdGlvbiB0byB0cmlnZ2VyIGFmdGVyIGRlc3Ryb3lpbmcgdGhlIGNhbGVuZGFyXG4gICAqIEByZXR1cm4gbnVsbFxuICAgKi9cbiAgZGVzdHJveTogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdGhpcy5yb290LnRyYW5zaXRpb24oKS5kdXJhdGlvbih0aGlzLm9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24pLmF0dHIoJ3dpZHRoJywgMCkuYXR0cignaGVpZ2h0JywgMCkucmVtb3ZlKCkuZWFjaCgnZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdQcm92aWRlZCBjYWxsYmFjayBmb3IgZGVzdHJveSgpIGlzIG5vdCBhIGZ1bmN0aW9uLicpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBudWxsO1xuICB9LFxuICBnZXRTVkc6IGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgc3R5bGVzID0ge1xuICAgICAgJy5jYWwtaGVhdG1hcC1jb250YWluZXInOiB7fSxcbiAgICAgICcuZ3JhcGgnOiB7fSxcbiAgICAgICcuZ3JhcGgtcmVjdCc6IHt9LFxuICAgICAgJ3JlY3QuaGlnaGxpZ2h0Jzoge30sXG4gICAgICAncmVjdC5ub3cnOiB7fSxcbiAgICAgICdyZWN0LmhpZ2hsaWdodC1ub3cnOiB7fSxcbiAgICAgICd0ZXh0LmhpZ2hsaWdodCc6IHt9LFxuICAgICAgJ3RleHQubm93Jzoge30sXG4gICAgICAndGV4dC5oaWdobGlnaHQtbm93Jzoge30sXG4gICAgICAnLmRvbWFpbi1iYWNrZ3JvdW5kJzoge30sXG4gICAgICAnLmdyYXBoLWxhYmVsJzoge30sXG4gICAgICAnLnN1YmRvbWFpbi10ZXh0Jzoge30sXG4gICAgICAnLnEwJzoge30sXG4gICAgICAnLnFpJzoge31cbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaiA9IDEsIHRvdGFsID0gdGhpcy5vcHRpb25zLmxlZ2VuZC5sZW5ndGggKyAxOyBqIDw9IHRvdGFsOyBqICs9IDEpIHtcbiAgICAgIHN0eWxlc1snLnEnICsgal0gPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgcm9vdCA9IHRoaXMucm9vdDtcbiAgICB2YXIgd2hpdGVsaXN0U3R5bGVzID0gWy8vIFNWRyBzcGVjaWZpYyBwcm9wZXJ0aWVzXG4gICAgJ3N0cm9rZScsICdzdHJva2Utd2lkdGgnLCAnc3Ryb2tlLW9wYWNpdHknLCAnc3Ryb2tlLWRhc2hhcnJheScsICdzdHJva2UtZGFzaG9mZnNldCcsICdzdHJva2UtbGluZWNhcCcsICdzdHJva2UtbWl0ZXJsaW1pdCcsICdmaWxsJywgJ2ZpbGwtb3BhY2l0eScsICdmaWxsLXJ1bGUnLCAnbWFya2VyJywgJ21hcmtlci1zdGFydCcsICdtYXJrZXItbWlkJywgJ21hcmtlci1lbmQnLCAnYWxpZ25lbWVudC1iYXNlbGluZScsICdiYXNlbGluZS1zaGlmdCcsICdkb21pbmFudC1iYXNlbGluZScsICdnbHlwaC1vcmllbnRhdGlvbi1ob3Jpem9udGFsJywgJ2dseXBoLW9yaWVudGF0aW9uLXZlcnRpY2FsJywgJ2tlcm5pbmcnLCAndGV4dC1hbmNob3InLCAnc2hhcGUtcmVuZGVyaW5nJywgLy8gVGV4dCBTcGVjaWZpYyBwcm9wZXJ0aWVzXG4gICAgJ3RleHQtdHJhbnNmb3JtJywgJ2ZvbnQtZmFtaWx5JywgJ2ZvbnQnLCAnZm9udC1zaXplJywgJ2ZvbnQtd2VpZ2h0J107XG5cbiAgICB2YXIgZmlsdGVyU3R5bGVzID0gZnVuY3Rpb24gKGF0dHJpYnV0ZSwgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgICBpZiAod2hpdGVsaXN0U3R5bGVzLmluZGV4T2YocHJvcGVydHkpICE9PSAtMSkge1xuICAgICAgICBzdHlsZXNbYXR0cmlidXRlXVtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGdldEVsZW1lbnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIHJvb3Quc2VsZWN0KGUpWzBdWzBdO1xuICAgIH07XG4gICAgLyoganNoaW50IGZvcmluOmZhbHNlICovXG5cblxuICAgIGZvciAodmFyIGVsZW1lbnQgaW4gc3R5bGVzKSB7XG4gICAgICBpZiAoIXN0eWxlcy5oYXNPd25Qcm9wZXJ0eShlbGVtZW50KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGRvbSA9IGdldEVsZW1lbnQoZWxlbWVudCk7XG5cbiAgICAgIGlmIChkb20gPT09IG51bGwpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IC8vIFRoZSBET00gTGV2ZWwgMiBDU1Mgd2F5XG5cbiAgICAgIC8qIGpzaGludCBtYXhkZXB0aDogZmFsc2UgKi9cblxuXG4gICAgICBpZiAoJ2dldENvbXB1dGVkU3R5bGUnIGluIHdpbmRvdykge1xuICAgICAgICB2YXIgY3MgPSBnZXRDb21wdXRlZFN0eWxlKGRvbSwgbnVsbCk7XG5cbiAgICAgICAgaWYgKGNzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3MubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGZpbHRlclN0eWxlcyhlbGVtZW50LCBjcy5pdGVtKGkpLCBjcy5nZXRQcm9wZXJ0eVZhbHVlKGNzLml0ZW0oaSkpKTtcbiAgICAgICAgICB9IC8vIE9wZXJhIHdvcmthcm91bmQuIE9wZXJhIGRvZXNuXCJ0IHN1cHBvcnQgYGl0ZW1gL2BsZW5ndGhgXG4gICAgICAgICAgLy8gb24gQ1NTU3R5bGVEZWNsYXJhdGlvbi5cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAodmFyIGsgaW4gY3MpIHtcbiAgICAgICAgICAgIGlmIChjcy5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgICAgICAgICBmaWx0ZXJTdHlsZXMoZWxlbWVudCwgaywgY3Nba10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSAvLyBUaGUgSUUgd2F5XG5cbiAgICAgIH0gZWxzZSBpZiAoJ2N1cnJlbnRTdHlsZScgaW4gZG9tKSB7XG4gICAgICAgIHZhciBjc3MgPSBkb20uY3VycmVudFN0eWxlO1xuXG4gICAgICAgIGZvciAodmFyIHAgaW4gY3NzKSB7XG4gICAgICAgICAgZmlsdGVyU3R5bGVzKGVsZW1lbnQsIHAsIGNzc1twXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgc3RyaW5nID0gJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiICcgKyAneG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCI+PHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPjwhW0NEQVRBWyAnO1xuXG4gICAgZm9yICh2YXIgc3R5bGUgaW4gc3R5bGVzKSB7XG4gICAgICBzdHJpbmcgKz0gc3R5bGUgKyAnIHtcXG4nO1xuXG4gICAgICBmb3IgKHZhciBsIGluIHN0eWxlc1tzdHlsZV0pIHtcbiAgICAgICAgc3RyaW5nICs9ICdcXHQnICsgbCArICc6JyArIHN0eWxlc1tzdHlsZV1bbF0gKyAnO1xcbic7XG4gICAgICB9XG5cbiAgICAgIHN0cmluZyArPSAnfVxcbic7XG4gICAgfVxuXG4gICAgc3RyaW5nICs9ICddXT48L3N0eWxlPic7XG4gICAgc3RyaW5nICs9IG5ldyBYTUxTZXJpYWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcodGhpcy5yb290WzBdWzBdKTtcbiAgICBzdHJpbmcgKz0gJzwvc3ZnPic7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfVxufTsgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vXG4vLyBET01BSU4gUE9TSVRJT04gQ09NUFVUQVRJT04gICAgICAgICAgICAgICAgICAgICAgICAvL1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vXG5cbi8qKlxuICogQ29tcHV0ZSB0aGUgcG9zaXRpb24gb2YgYSBkb21haW4sIHJlbGF0aXZlIHRvIHRoZSBjYWxlbmRhclxuICovXG5cbnZhciBEb21haW5Qb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHRoaXMucG9zaXRpb25zID0gZDMubWFwKCk7XG59O1xuXG5Eb21haW5Qb3NpdGlvbi5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoZCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgcmV0dXJuIHRoaXMucG9zaXRpb25zLmdldChkKTtcbn07XG5cbkRvbWFpblBvc2l0aW9uLnByb3RvdHlwZS5nZXRQb3NpdGlvbkZyb21JbmRleCA9IGZ1bmN0aW9uIChpKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgZG9tYWlucyA9IHRoaXMuZ2V0S2V5cygpO1xuICByZXR1cm4gdGhpcy5wb3NpdGlvbnMuZ2V0KGRvbWFpbnNbaV0pO1xufTtcblxuRG9tYWluUG9zaXRpb24ucHJvdG90eXBlLmdldExhc3QgPSBmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgZG9tYWlucyA9IHRoaXMuZ2V0S2V5cygpO1xuICByZXR1cm4gdGhpcy5wb3NpdGlvbnMuZ2V0KGRvbWFpbnNbZG9tYWlucy5sZW5ndGggLSAxXSk7XG59O1xuXG5Eb21haW5Qb3NpdGlvbi5wcm90b3R5cGUuc2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoZCwgZGltKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB0aGlzLnBvc2l0aW9ucy5zZXQoZCwgZGltKTtcbn07XG5cbkRvbWFpblBvc2l0aW9uLnByb3RvdHlwZS5zaGlmdFJpZ2h0QnkgPSBmdW5jdGlvbiAoZXhpdGluZ0RvbWFpbkRpbSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdGhpcy5wb3NpdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgIHRoaXMuc2V0KGtleSwgdmFsdWUgLSBleGl0aW5nRG9tYWluRGltKTtcbiAgfSk7XG4gIHZhciBkb21haW5zID0gdGhpcy5nZXRLZXlzKCk7XG4gIHRoaXMucG9zaXRpb25zLnJlbW92ZShkb21haW5zWzBdKTtcbn07XG5cbkRvbWFpblBvc2l0aW9uLnByb3RvdHlwZS5zaGlmdExlZnRCeSA9IGZ1bmN0aW9uIChlbnRlcmluZ0RvbWFpbkRpbSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdGhpcy5wb3NpdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgIHRoaXMuc2V0KGtleSwgdmFsdWUgKyBlbnRlcmluZ0RvbWFpbkRpbSk7XG4gIH0pO1xuICB2YXIgZG9tYWlucyA9IHRoaXMuZ2V0S2V5cygpO1xuICB0aGlzLnBvc2l0aW9ucy5yZW1vdmUoZG9tYWluc1tkb21haW5zLmxlbmd0aCAtIDFdKTtcbn07XG5cbkRvbWFpblBvc2l0aW9uLnByb3RvdHlwZS5nZXRLZXlzID0gZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgcmV0dXJuIHRoaXMucG9zaXRpb25zLmtleXMoKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KGEsIDEwKSAtIHBhcnNlSW50KGIsIDEwKTtcbiAgfSk7XG59OyAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly9cbi8vIExFR0VORCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vXG5cblxudmFyIExlZ2VuZCA9IGZ1bmN0aW9uIChjYWxlbmRhcikge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdGhpcy5jYWxlbmRhciA9IGNhbGVuZGFyO1xuICB0aGlzLmNvbXB1dGVEaW0oKTtcblxuICBpZiAoY2FsZW5kYXIub3B0aW9ucy5sZWdlbmRDb2xvcnMgIT09IG51bGwpIHtcbiAgICB0aGlzLmJ1aWxkQ29sb3JzKCk7XG4gIH1cbn07XG5cbkxlZ2VuZC5wcm90b3R5cGUuY29tcHV0ZURpbSA9IGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBvcHRpb25zID0gdGhpcy5jYWxlbmRhci5vcHRpb25zOyAvLyBTaG9ydGVyIGFjY2Vzc29yIGZvciB2YXJpYWJsZSBuYW1lIG1hbmdsaW5nIHdoZW4gbWluaWZ5aW5nXG5cbiAgdGhpcy5kaW0gPSB7XG4gICAgd2lkdGg6IG9wdGlvbnMubGVnZW5kQ2VsbFNpemUgKiAob3B0aW9ucy5sZWdlbmQubGVuZ3RoICsgMSkgKyBvcHRpb25zLmxlZ2VuZENlbGxQYWRkaW5nICogb3B0aW9ucy5sZWdlbmQubGVuZ3RoLFxuICAgIGhlaWdodDogb3B0aW9ucy5sZWdlbmRDZWxsU2l6ZVxuICB9O1xufTtcblxuTGVnZW5kLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB0aGlzLmNhbGVuZGFyLnJvb3Quc2VsZWN0KCcuZ3JhcGgtbGVnZW5kJykucmVtb3ZlKCk7XG4gIHRoaXMuY2FsZW5kYXIucmVzaXplKCk7XG59O1xuXG5MZWdlbmQucHJvdG90eXBlLnJlZHJhdyA9IGZ1bmN0aW9uICh3aWR0aCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgaWYgKCF0aGlzLmNhbGVuZGFyLm9wdGlvbnMuZGlzcGxheUxlZ2VuZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBwYXJlbnQgPSB0aGlzO1xuICB2YXIgY2FsZW5kYXIgPSB0aGlzLmNhbGVuZGFyO1xuICB2YXIgbGVnZW5kID0gY2FsZW5kYXIucm9vdDtcbiAgdmFyIGxlZ2VuZEl0ZW07XG4gIHZhciBvcHRpb25zID0gY2FsZW5kYXIub3B0aW9uczsgLy8gU2hvcnRlciBhY2Nlc3NvciBmb3IgdmFyaWFibGUgbmFtZSBtYW5nbGluZyB3aGVuIG1pbmlmeWluZ1xuXG4gIHRoaXMuY29tcHV0ZURpbSgpO1xuXG4gIHZhciBfbGVnZW5kID0gb3B0aW9ucy5sZWdlbmQuc2xpY2UoMCk7XG5cbiAgX2xlZ2VuZC5wdXNoKF9sZWdlbmRbX2xlZ2VuZC5sZW5ndGggLSAxXSArIDEpO1xuXG4gIHZhciBsZWdlbmRFbGVtZW50ID0gY2FsZW5kYXIucm9vdC5zZWxlY3QoJy5ncmFwaC1sZWdlbmQnKTtcblxuICBpZiAobGVnZW5kRWxlbWVudFswXVswXSAhPT0gbnVsbCkge1xuICAgIGxlZ2VuZCA9IGxlZ2VuZEVsZW1lbnQ7XG4gICAgbGVnZW5kSXRlbSA9IGxlZ2VuZC5zZWxlY3QoJ2cnKS5zZWxlY3RBbGwoJ3JlY3QnKS5kYXRhKF9sZWdlbmQpO1xuICB9IGVsc2Uge1xuICAgIC8vIENyZWF0aW5nIHRoZSBuZXcgbGVnZW5kIERPTSBpZiBpdCBkb2Vzbid0IGFscmVhZHkgZXhpc3RcbiAgICBsZWdlbmQgPSBvcHRpb25zLmxlZ2VuZFZlcnRpY2FsUG9zaXRpb24gPT09ICd0b3AnID8gbGVnZW5kLmluc2VydCgnc3ZnJywgJy5ncmFwaCcpIDogbGVnZW5kLmFwcGVuZCgnc3ZnJyk7XG4gICAgbGVnZW5kLmF0dHIoJ3gnLCBnZXRMZWdlbmRYUG9zaXRpb24oKSkuYXR0cigneScsIGdldExlZ2VuZFlQb3NpdGlvbigpKTtcbiAgICBsZWdlbmRJdGVtID0gbGVnZW5kLmF0dHIoJ2NsYXNzJywgJ2dyYXBoLWxlZ2VuZCcpLmF0dHIoJ2hlaWdodCcsIHBhcmVudC5nZXREaW0oJ2hlaWdodCcpKS5hdHRyKCd3aWR0aCcsIHBhcmVudC5nZXREaW0oJ3dpZHRoJykpLmFwcGVuZCgnZycpLnNlbGVjdEFsbCgpLmRhdGEoX2xlZ2VuZCk7XG4gIH1cblxuICBsZWdlbmRJdGVtLmVudGVyKCkuYXBwZW5kKCdyZWN0JykuY2FsbChsZWdlbmRDZWxsTGF5b3V0KS5hdHRyKCdjbGFzcycsIGZ1bmN0aW9uIChkKSB7XG4gICAgcmV0dXJuIGNhbGVuZGFyLkxlZ2VuZC5nZXRDbGFzcyhkLCBjYWxlbmRhci5sZWdlbmRTY2FsZSA9PT0gbnVsbCk7XG4gIH0pLmF0dHIoJ2ZpbGwtb3BhY2l0eScsIDApLmNhbGwoZnVuY3Rpb24gKHNlbGVjdGlvbikge1xuICAgIGlmIChjYWxlbmRhci5sZWdlbmRTY2FsZSAhPT0gbnVsbCAmJiBvcHRpb25zLmxlZ2VuZENvbG9ycyAhPT0gbnVsbCAmJiBvcHRpb25zLmxlZ2VuZENvbG9ycy5oYXNPd25Qcm9wZXJ0eSgnYmFzZScpKSB7XG4gICAgICBzZWxlY3Rpb24uYXR0cignZmlsbCcsIG9wdGlvbnMubGVnZW5kQ29sb3JzLmJhc2UpO1xuICAgIH1cbiAgfSkuYXBwZW5kKCd0aXRsZScpO1xuICBsZWdlbmRJdGVtLmV4aXQoKS50cmFuc2l0aW9uKCkuZHVyYXRpb24ob3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbikuYXR0cignZmlsbC1vcGFjaXR5JywgMCkucmVtb3ZlKCk7XG4gIGxlZ2VuZEl0ZW0udHJhbnNpdGlvbigpLmRlbGF5KGZ1bmN0aW9uIChkLCBpKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24gKiBpIC8gMTA7XG4gIH0pLmNhbGwobGVnZW5kQ2VsbExheW91dCkuYXR0cignZmlsbC1vcGFjaXR5JywgMSkuY2FsbChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIGVsZW1lbnQuYXR0cignZmlsbCcsIGZ1bmN0aW9uIChkLCBpKSB7XG4gICAgICBpZiAoY2FsZW5kYXIubGVnZW5kU2NhbGUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuXG4gICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gY2FsZW5kYXIubGVnZW5kU2NhbGUoZCAtIDEpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2FsZW5kYXIubGVnZW5kU2NhbGUob3B0aW9ucy5sZWdlbmRbaSAtIDFdKTtcbiAgICB9KTtcbiAgICBlbGVtZW50LmF0dHIoJ2NsYXNzJywgZnVuY3Rpb24gKGQpIHtcbiAgICAgIHJldHVybiBjYWxlbmRhci5MZWdlbmQuZ2V0Q2xhc3MoZCwgY2FsZW5kYXIubGVnZW5kU2NhbGUgPT09IG51bGwpO1xuICAgIH0pO1xuICB9KTtcblxuICBmdW5jdGlvbiBsZWdlbmRDZWxsTGF5b3V0KHNlbGVjdGlvbikge1xuICAgIHNlbGVjdGlvbi5hdHRyKCd3aWR0aCcsIG9wdGlvbnMubGVnZW5kQ2VsbFNpemUpLmF0dHIoJ2hlaWdodCcsIG9wdGlvbnMubGVnZW5kQ2VsbFNpemUpLmF0dHIoJ3J4Jywgb3B0aW9ucy5sZWdlbmRDZWxsUmFkaXVzKS5hdHRyKCdyeScsIG9wdGlvbnMubGVnZW5kQ2VsbFJhZGl1cykuYXR0cigneCcsIGZ1bmN0aW9uIChkLCBpKSB7XG4gICAgICByZXR1cm4gaSAqIChvcHRpb25zLmxlZ2VuZENlbGxTaXplICsgb3B0aW9ucy5sZWdlbmRDZWxsUGFkZGluZyk7XG4gICAgfSk7XG4gIH1cblxuICBsZWdlbmRJdGVtLnNlbGVjdCgndGl0bGUnKS50ZXh0KGZ1bmN0aW9uIChkLCBpKSB7XG4gICAgaWYgKGkgPT09IDApIHtcbiAgICAgIHJldHVybiBjYWxlbmRhci5mb3JtYXRTdHJpbmdXaXRoT2JqZWN0KG9wdGlvbnMubGVnZW5kVGl0bGVGb3JtYXQubG93ZXIsIHtcbiAgICAgICAgbWluOiBvcHRpb25zLmxlZ2VuZFtpXSxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5pdGVtTmFtZVsxXVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChpID09PSBfbGVnZW5kLmxlbmd0aCAtIDEpIHtcbiAgICAgIHJldHVybiBjYWxlbmRhci5mb3JtYXRTdHJpbmdXaXRoT2JqZWN0KG9wdGlvbnMubGVnZW5kVGl0bGVGb3JtYXQudXBwZXIsIHtcbiAgICAgICAgbWF4OiBvcHRpb25zLmxlZ2VuZFtpIC0gMV0sXG4gICAgICAgIG5hbWU6IG9wdGlvbnMuaXRlbU5hbWVbMV1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY2FsZW5kYXIuZm9ybWF0U3RyaW5nV2l0aE9iamVjdChvcHRpb25zLmxlZ2VuZFRpdGxlRm9ybWF0LmlubmVyLCB7XG4gICAgICAgIGRvd246IG9wdGlvbnMubGVnZW5kW2kgLSAxXSxcbiAgICAgICAgdXA6IG9wdGlvbnMubGVnZW5kW2ldLFxuICAgICAgICBuYW1lOiBvcHRpb25zLml0ZW1OYW1lWzFdXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBsZWdlbmRJdGVtLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoZCkge1xuICAgIGNhbGVuZGFyLmxlZ2VuZFRpcC5zaG93KGQsIHRoaXMpO1xuICB9KS5vbignbW91c2VvdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgY2FsZW5kYXIubGVnZW5kVGlwLmhpZGUoKTtcbiAgfSk7XG4gIGxlZ2VuZC50cmFuc2l0aW9uKCkuZHVyYXRpb24ob3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbikuYXR0cigneCcsIGdldExlZ2VuZFhQb3NpdGlvbigpKS5hdHRyKCd5JywgZ2V0TGVnZW5kWVBvc2l0aW9uKCkpLmF0dHIoJ3dpZHRoJywgcGFyZW50LmdldERpbSgnd2lkdGgnKSkuYXR0cignaGVpZ2h0JywgcGFyZW50LmdldERpbSgnaGVpZ2h0JykpO1xuICBsZWdlbmQuc2VsZWN0KCdnJykudHJhbnNpdGlvbigpLmR1cmF0aW9uKG9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24pLmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAob3B0aW9ucy5sZWdlbmRPcmllbnRhdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgcmV0dXJuICdyb3RhdGUoOTAgJyArIG9wdGlvbnMubGVnZW5kQ2VsbFNpemUgLyAyICsgJyAnICsgb3B0aW9ucy5sZWdlbmRDZWxsU2l6ZSAvIDIgKyAnKSc7XG4gICAgfVxuXG4gICAgcmV0dXJuICcnO1xuICB9KTtcblxuICBmdW5jdGlvbiBnZXRMZWdlbmRYUG9zaXRpb24oKSB7XG4gICAgc3dpdGNoIChvcHRpb25zLmxlZ2VuZEhvcml6b250YWxQb3NpdGlvbikge1xuICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICBpZiAob3B0aW9ucy5sZWdlbmRWZXJ0aWNhbFBvc2l0aW9uID09PSAnY2VudGVyJyB8fCBvcHRpb25zLmxlZ2VuZFZlcnRpY2FsUG9zaXRpb24gPT09ICdtaWRkbGUnKSB7XG4gICAgICAgICAgcmV0dXJuIHdpZHRoICsgb3B0aW9ucy5sZWdlbmRNYXJnaW5bM107XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gd2lkdGggLSBwYXJlbnQuZ2V0RGltKCd3aWR0aCcpIC0gb3B0aW9ucy5sZWdlbmRNYXJnaW5bMV07XG5cbiAgICAgIGNhc2UgJ21pZGRsZSc6XG4gICAgICBjYXNlICdjZW50ZXInOlxuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh3aWR0aCAvIDIgLSBwYXJlbnQuZ2V0RGltKCd3aWR0aCcpIC8gMik7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBvcHRpb25zLmxlZ2VuZE1hcmdpblszXTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRMZWdlbmRZUG9zaXRpb24oKSB7XG4gICAgaWYgKG9wdGlvbnMubGVnZW5kVmVydGljYWxQb3NpdGlvbiA9PT0gJ2JvdHRvbScpIHtcbiAgICAgIHJldHVybiBjYWxlbmRhci5ncmFwaERpbS5oZWlnaHQgKyBvcHRpb25zLmxlZ2VuZE1hcmdpblswXSAtIG9wdGlvbnMuZG9tYWluR3V0dGVyIC0gb3B0aW9ucy5jZWxsUGFkZGluZztcbiAgICB9XG5cbiAgICByZXR1cm4gb3B0aW9ucy5sZWdlbmRNYXJnaW5bMF07XG4gIH1cblxuICBjYWxlbmRhci5yZXNpemUoKTtcbn07XG4vKipcbiAqIFJldHVybiB0aGUgZGltZW5zaW9uIG9mIHRoZSBsZWdlbmRcbiAqXG4gKiBUYWtlcyBpbnRvIGFjY291bnQgcm90YXRpb25cbiAqXG4gKiBAcGFyYW0gIHN0cmluZyBheGlzIFdpZHRoIG9yIGhlaWdodFxuICogQHJldHVybiBpbnQgaGVpZ2h0IG9yIHdpZHRoIGluIHBpeGVsc1xuICovXG5cblxuTGVnZW5kLnByb3RvdHlwZS5nZXREaW0gPSBmdW5jdGlvbiAoYXhpcykge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIGlzSG9yaXpvbnRhbCA9IHRoaXMuY2FsZW5kYXIub3B0aW9ucy5sZWdlbmRPcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnO1xuXG4gIHN3aXRjaCAoYXhpcykge1xuICAgIGNhc2UgJ3dpZHRoJzpcbiAgICAgIHJldHVybiB0aGlzLmRpbVtpc0hvcml6b250YWwgPyAnd2lkdGgnIDogJ2hlaWdodCddO1xuXG4gICAgY2FzZSAnaGVpZ2h0JzpcbiAgICAgIHJldHVybiB0aGlzLmRpbVtpc0hvcml6b250YWwgPyAnaGVpZ2h0JyA6ICd3aWR0aCddO1xuICB9XG59O1xuXG5MZWdlbmQucHJvdG90eXBlLmJ1aWxkQ29sb3JzID0gZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIG9wdGlvbnMgPSB0aGlzLmNhbGVuZGFyLm9wdGlvbnM7IC8vIFNob3J0ZXIgYWNjZXNzb3IgZm9yIHZhcmlhYmxlIG5hbWUgbWFuZ2xpbmcgd2hlbiBtaW5pZnlpbmdcblxuICBpZiAob3B0aW9ucy5sZWdlbmRDb2xvcnMgPT09IG51bGwpIHtcbiAgICB0aGlzLmNhbGVuZGFyLmxlZ2VuZFNjYWxlID0gbnVsbDtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIgX2NvbG9yUmFuZ2UgPSBbXTtcblxuICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLmxlZ2VuZENvbG9ycykpIHtcbiAgICBfY29sb3JSYW5nZSA9IG9wdGlvbnMubGVnZW5kQ29sb3JzO1xuICB9IGVsc2UgaWYgKG9wdGlvbnMubGVnZW5kQ29sb3JzLmhhc093blByb3BlcnR5KCdtaW4nKSAmJiBvcHRpb25zLmxlZ2VuZENvbG9ycy5oYXNPd25Qcm9wZXJ0eSgnbWF4JykpIHtcbiAgICBfY29sb3JSYW5nZSA9IFtvcHRpb25zLmxlZ2VuZENvbG9ycy5taW4sIG9wdGlvbnMubGVnZW5kQ29sb3JzLm1heF07XG4gIH0gZWxzZSB7XG4gICAgb3B0aW9ucy5sZWdlbmRDb2xvcnMgPSBudWxsO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBfbGVnZW5kID0gb3B0aW9ucy5sZWdlbmQuc2xpY2UoMCk7XG5cbiAgaWYgKF9sZWdlbmRbMF0gPiAwKSB7XG4gICAgX2xlZ2VuZC51bnNoaWZ0KDApO1xuICB9IGVsc2UgaWYgKF9sZWdlbmRbMF0gPD0gMCkge1xuICAgIC8vIExldCdzIGd1ZXNzIHRoZSBsZWZ0bW9zdCB2YWx1ZSwgaXQgd2UgaGF2ZSB0byBhZGQgb25lXG4gICAgX2xlZ2VuZC51bnNoaWZ0KF9sZWdlbmRbMF0gLSAoX2xlZ2VuZFtfbGVnZW5kLmxlbmd0aCAtIDFdIC0gX2xlZ2VuZFswXSkgLyBfbGVnZW5kLmxlbmd0aCk7XG4gIH1cblxuICB2YXIgY29sb3JTY2FsZTtcblxuICBpZiAob3B0aW9ucy5sZWdlbmRDb2xvcnMuaGFzT3duUHJvcGVydHkoJ2NvbG9yU2NhbGUnKSkge1xuICAgIGNvbG9yU2NhbGUgPSBvcHRpb25zLmxlZ2VuZENvbG9ycy5jb2xvclNjYWxlO1xuICB9IGVsc2Uge1xuICAgIGNvbG9yU2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShfY29sb3JSYW5nZSkuaW50ZXJwb2xhdGUoZDMuaW50ZXJwb2xhdGVIY2wpLmRvbWFpbihbZDMubWluKF9sZWdlbmQpLCBkMy5tYXgoX2xlZ2VuZCldKTtcbiAgfVxuXG4gIHZhciBsZWdlbmRDb2xvcnMgPSBfbGVnZW5kLm1hcChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHJldHVybiBjb2xvclNjYWxlKGVsZW1lbnQpO1xuICB9KTtcblxuICB0aGlzLmNhbGVuZGFyLmxlZ2VuZFNjYWxlID0gZDMuc2NhbGUudGhyZXNob2xkKCkuZG9tYWluKG9wdGlvbnMubGVnZW5kKS5yYW5nZShsZWdlbmRDb2xvcnMpO1xuICByZXR1cm4gdHJ1ZTtcbn07XG4vKipcbiAqIFJldHVybiB0aGUgY2xhc3NuYW1lIG9uIHRoZSBsZWdlbmQgZm9yIHRoZSBzcGVjaWZpZWQgdmFsdWVcbiAqXG4gKiBAcGFyYW0gaW50ZWdlciBuIFZhbHVlIGFzc29jaWF0ZWQgdG8gYSBkYXRlXG4gKiBAcGFyYW0gYm9vbCB3aXRoQ3NzQ2xhc3MgV2hldGhlciB0byBkaXNwbGF5IHRoZSBjc3MgY2xhc3MgdXNlZCB0byBzdHlsZSB0aGUgY2VsbC5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICBEaXNhYmxpbmcgd2lsbCBhbGxvdyBzdHlsaW5nIGRpcmVjdGx5IHZpYSBodG1sIGZpbGwgYXR0cmlidXRlXG4gKlxuICogQHJldHVybiBzdHJpbmcgQ2xhc3NuYW1lIGFjY29yZGluZyB0byB0aGUgbGVnZW5kXG4gKi9cblxuXG5MZWdlbmQucHJvdG90eXBlLmdldENsYXNzID0gZnVuY3Rpb24gKG4sIHdpdGhDc3NDbGFzcykge1xuICAndXNlIHN0cmljdCc7XG5cbiAgaWYgKG4gPT09IG51bGwgfHwgaXNOYU4obikpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICB2YXIgaW5kZXggPSBbdGhpcy5jYWxlbmRhci5vcHRpb25zLmxlZ2VuZC5sZW5ndGggKyAxXTtcblxuICBmb3IgKHZhciBpID0gMCwgdG90YWwgPSB0aGlzLmNhbGVuZGFyLm9wdGlvbnMubGVnZW5kLmxlbmd0aCAtIDE7IGkgPD0gdG90YWw7IGkgKz0gMSkge1xuICAgIGlmICh0aGlzLmNhbGVuZGFyLm9wdGlvbnMubGVnZW5kWzBdID4gMCAmJiBuIDwgMCkge1xuICAgICAgaW5kZXggPSBbJzEnLCAnaSddO1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKG4gPD0gdGhpcy5jYWxlbmRhci5vcHRpb25zLmxlZ2VuZFtpXSkge1xuICAgICAgaW5kZXggPSBbaSArIDFdO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKG4gPT09IDApIHtcbiAgICBpbmRleC5wdXNoKDApO1xuICB9XG5cbiAgaW5kZXgudW5zaGlmdCgnJyk7XG4gIHJldHVybiAoaW5kZXguam9pbignIHInKSArICh3aXRoQ3NzQ2xhc3MgPyBpbmRleC5qb2luKCcgcScpIDogJycpKS50cmltKCk7XG59O1xuLyoqXG4gKiAjc291cmNlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM4MzI0NS84MDU2NDlcbiAqL1xuXG5cbmZ1bmN0aW9uIG1lcmdlUmVjdXJzaXZlKG9iajEsIG9iajIpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKmpzaGludCBmb3JpbjpmYWxzZSAqL1xuXG4gIGZvciAodmFyIHAgaW4gb2JqMikge1xuICAgIHRyeSB7XG4gICAgICAvLyBQcm9wZXJ0eSBpbiBkZXN0aW5hdGlvbiBvYmplY3Qgc2V0OyB1cGRhdGUgaXRzIHZhbHVlLlxuICAgICAgaWYgKG9iajJbcF0uY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xuICAgICAgICBvYmoxW3BdID0gbWVyZ2VSZWN1cnNpdmUob2JqMVtwXSwgb2JqMltwXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvYmoxW3BdID0gb2JqMltwXTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBQcm9wZXJ0eSBpbiBkZXN0aW5hdGlvbiBvYmplY3Qgbm90IHNldDsgY3JlYXRlIGl0IGFuZCBzZXQgaXRzIHZhbHVlLlxuICAgICAgb2JqMVtwXSA9IG9iajJbcF07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9iajE7XG59XG4vKipcbiAqIENoZWNrIGlmIDIgYXJyYXlzIGFyZSBlcXVhbHNcbiAqXG4gKiBAbGluayBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNDg1Mzk3NC84MDU2NDlcbiAqIEBwYXJhbSAgYXJyYXkgYXJyYXkgdGhlIGFycmF5IHRvIGNvbXBhcmUgdG9cbiAqIEByZXR1cm4gYm9vbCB0cnVlIG9mIHRoZSAyIGFycmF5cyBhcmUgZXF1YWxzXG4gKi9cblxuXG5mdW5jdGlvbiBhcnJheUVxdWFscyhhcnJheUEsIGFycmF5Qikge1xuICAndXNlIHN0cmljdCc7IC8vIGlmIHRoZSBvdGhlciBhcnJheSBpcyBhIGZhbHN5IHZhbHVlLCByZXR1cm5cblxuICBpZiAoIWFycmF5QiB8fCAhYXJyYXlBKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IC8vIGNvbXBhcmUgbGVuZ3RocyAtIGNhbiBzYXZlIGEgbG90IG9mIHRpbWVcblxuXG4gIGlmIChhcnJheUEubGVuZ3RoICE9PSBhcnJheUIubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheUEubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIG5lc3RlZCBhcnJheXNcbiAgICBpZiAoYXJyYXlBW2ldIGluc3RhbmNlb2YgQXJyYXkgJiYgYXJyYXlCW2ldIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgIC8vIHJlY3Vyc2UgaW50byB0aGUgbmVzdGVkIGFycmF5c1xuICAgICAgaWYgKCFhcnJheUVxdWFscyhhcnJheUFbaV0sIGFycmF5QltpXSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYXJyYXlBW2ldICE9PSBhcnJheUJbaV0pIHtcbiAgICAgIC8vIFdhcm5pbmcgLSB0d28gZGlmZmVyZW50IG9iamVjdCBpbnN0YW5jZXMgd2lsbCBuZXZlciBiZSBlcXVhbDoge3g6MjB9ICE9IHt4OjIwfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBDYWxIZWF0TWFwOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/cal-heatmap.js\n");

/***/ }),

/***/ "./node_modules/@superset-ui/legacy-plugin-chart-calendar/node_modules/d3-array/src/extent.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@superset-ui/legacy-plugin-chart-calendar/node_modules/d3-array/src/extent.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(values, valueof) {\n  let min;\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  }\n  return [min, max];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHN1cGVyc2V0LXVpL2xlZ2FjeS1wbHVnaW4tY2hhcnQtY2FsZW5kYXIvbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9leHRlbnQuanMuanMiLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vbm9kZV9tb2R1bGVzL0BzdXBlcnNldC11aS9sZWdhY3ktcGx1Z2luLWNoYXJ0LWNhbGVuZGFyL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvZXh0ZW50LmpzPzk4MmEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odmFsdWVzLCB2YWx1ZW9mKSB7XG4gIGxldCBtaW47XG4gIGxldCBtYXg7XG4gIGlmICh2YWx1ZW9mID09PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgaWYgKG1pbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKHZhbHVlID49IHZhbHVlKSBtaW4gPSBtYXggPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAobWluID4gdmFsdWUpIG1pbiA9IHZhbHVlO1xuICAgICAgICAgIGlmIChtYXggPCB2YWx1ZSkgbWF4ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IGluZGV4ID0gLTE7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICBpZiAoKHZhbHVlID0gdmFsdWVvZih2YWx1ZSwgKytpbmRleCwgdmFsdWVzKSkgIT0gbnVsbCkge1xuICAgICAgICBpZiAobWluID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAodmFsdWUgPj0gdmFsdWUpIG1pbiA9IG1heCA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChtaW4gPiB2YWx1ZSkgbWluID0gdmFsdWU7XG4gICAgICAgICAgaWYgKG1heCA8IHZhbHVlKSBtYXggPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gW21pbiwgbWF4XTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@superset-ui/legacy-plugin-chart-calendar/node_modules/d3-array/src/extent.js\n");

/***/ }),

/***/ "./node_modules/@superset-ui/legacy-plugin-chart-calendar/node_modules/d3-array/src/range.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@superset-ui/legacy-plugin-chart-calendar/node_modules/d3-array/src/range.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHN1cGVyc2V0LXVpL2xlZ2FjeS1wbHVnaW4tY2hhcnQtY2FsZW5kYXIvbm9kZV9tb2R1bGVzL2QzLWFycmF5L3NyYy9yYW5nZS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vbm9kZV9tb2R1bGVzL0BzdXBlcnNldC11aS9sZWdhY3ktcGx1Z2luLWNoYXJ0LWNhbGVuZGFyL25vZGVfbW9kdWxlcy9kMy1hcnJheS9zcmMvcmFuZ2UuanM/MGJhYiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzdGFydCwgc3RvcCwgc3RlcCkge1xuICBzdGFydCA9ICtzdGFydCwgc3RvcCA9ICtzdG9wLCBzdGVwID0gKG4gPSBhcmd1bWVudHMubGVuZ3RoKSA8IDIgPyAoc3RvcCA9IHN0YXJ0LCBzdGFydCA9IDAsIDEpIDogbiA8IDMgPyAxIDogK3N0ZXA7XG5cbiAgdmFyIGkgPSAtMSxcbiAgICAgIG4gPSBNYXRoLm1heCgwLCBNYXRoLmNlaWwoKHN0b3AgLSBzdGFydCkgLyBzdGVwKSkgfCAwLFxuICAgICAgcmFuZ2UgPSBuZXcgQXJyYXkobik7XG5cbiAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICByYW5nZVtpXSA9IHN0YXJ0ICsgaSAqIHN0ZXA7XG4gIH1cblxuICByZXR1cm4gcmFuZ2U7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@superset-ui/legacy-plugin-chart-calendar/node_modules/d3-array/src/range.js\n");

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/cal-heatmap.css":
/*!*************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/cal-heatmap.css ***!
  \*************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../css-loader/dist/runtime/cssWithMappingToString.js */ \"./node_modules/css-loader/dist/runtime/cssWithMappingToString.js\");\n/* harmony import */ var _css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"/* [LICENSE TBD] */\\n/* Cal-HeatMap CSS */\\n\\n.cal-heatmap-container {\\n  display: block;\\n}\\n\\n.cal-heatmap-container .graph-label {\\n  fill: #999;\\n  font-size: 10px;\\n}\\n\\n.cal-heatmap-container .graph,\\n.cal-heatmap-container .graph-legend rect {\\n  shape-rendering: crispedges;\\n}\\n\\n.cal-heatmap-container .graph-rect {\\n  fill: #ededed;\\n}\\n\\n.cal-heatmap-container .graph-subdomain-group rect:hover {\\n  stroke: #000;\\n  stroke-width: 1px;\\n}\\n\\n.cal-heatmap-container .subdomain-text {\\n  font-size: 8px;\\n  fill: #999;\\n  pointer-events: none;\\n}\\n\\n.cal-heatmap-container .hover_cursor:hover {\\n  cursor: pointer;\\n}\\n\\n.cal-heatmap-container .qi {\\n  background-color: #999;\\n  fill: #999;\\n}\\n\\n/*\\nRemove comment to apply this style to date with value equal to 0\\n.q0\\n{\\n  background-color: #fff;\\n  fill: #fff;\\n  stroke: #ededed\\n}\\n*/\\n\\n.cal-heatmap-container .q1 {\\n  background-color: #dae289;\\n  fill: #dae289;\\n}\\n\\n.cal-heatmap-container .q2 {\\n  background-color: #cedb9c;\\n  fill: #9cc069;\\n}\\n\\n.cal-heatmap-container .q3 {\\n  background-color: #b5cf6b;\\n  fill: #669d45;\\n}\\n\\n.cal-heatmap-container .q4 {\\n  background-color: #637939;\\n  fill: #637939;\\n}\\n\\n.cal-heatmap-container .q5 {\\n  background-color: #3b6427;\\n  fill: #3b6427;\\n}\\n\\n.cal-heatmap-container rect.highlight {\\n  stroke: #444;\\n  stroke-width: 1;\\n}\\n\\n.cal-heatmap-container text.highlight {\\n  fill: #444;\\n}\\n\\n.cal-heatmap-container rect.highlight-now {\\n  stroke: red;\\n}\\n\\n.cal-heatmap-container text.highlight-now {\\n  fill: red;\\n  font-weight: 800;\\n}\\n\\n.cal-heatmap-container .domain-background {\\n  fill: none;\\n  shape-rendering: crispedges;\\n}\\n\\n.ch-tooltip {\\n  padding: 10px;\\n  background: #222;\\n  color: #bbb;\\n  font-size: 12px;\\n  line-height: 1.4;\\n  width: 140px;\\n  position: absolute;\\n  z-index: 99999;\\n  text-align: center;\\n  border-radius: 2px;\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\n  display: none;\\n  box-sizing: border-box;\\n}\\n\\n.ch-tooltip::after {\\n  position: absolute;\\n  width: 0;\\n  height: 0;\\n  border-color: transparent;\\n  border-style: solid;\\n  content: '';\\n  padding: 0;\\n  display: block;\\n  bottom: -6px;\\n  left: 50%;\\n  margin-left: -6px;\\n  border-width: 6px 6px 0;\\n  border-top-color: #222;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/cal-heatmap.css\"],\"names\":[],\"mappings\":\"AAAA,kBAAkB;AAClB,oBAAoB;;AAEpB;EACE,cAAc;AAChB;;AAEA;EACE,UAAU;EACV,eAAe;AACjB;;AAEA;;EAEE,2BAA2B;AAC7B;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,YAAY;EACZ,iBAAiB;AACnB;;AAEA;EACE,cAAc;EACd,UAAU;EACV,oBAAoB;AACtB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,sBAAsB;EACtB,UAAU;AACZ;;AAEA;;;;;;;;CAQC;;AAED;EACE,yBAAyB;EACzB,aAAa;AACf;;AAEA;EACE,yBAAyB;EACzB,aAAa;AACf;;AAEA;EACE,yBAAyB;EACzB,aAAa;AACf;;AAEA;EACE,yBAAyB;EACzB,aAAa;AACf;;AAEA;EACE,yBAAyB;EACzB,aAAa;AACf;;AAEA;EACE,YAAY;EACZ,eAAe;AACjB;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,SAAS;EACT,gBAAgB;AAClB;;AAEA;EACE,UAAU;EACV,2BAA2B;AAC7B;;AAEA;EACE,aAAa;EACb,gBAAgB;EAChB,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,YAAY;EACZ,kBAAkB;EAClB,cAAc;EACd,kBAAkB;EAClB,kBAAkB;EAClB,0CAA0C;EAC1C,aAAa;EACb,sBAAsB;AACxB;;AAEA;EACE,kBAAkB;EAClB,QAAQ;EACR,SAAS;EACT,yBAAyB;EACzB,mBAAmB;EACnB,WAAW;EACX,UAAU;EACV,cAAc;EACd,YAAY;EACZ,SAAS;EACT,iBAAiB;EACjB,uBAAuB;EACvB,sBAAsB;AACxB\",\"sourcesContent\":[\"/* [LICENSE TBD] */\\n/* Cal-HeatMap CSS */\\n\\n.cal-heatmap-container {\\n  display: block;\\n}\\n\\n.cal-heatmap-container .graph-label {\\n  fill: #999;\\n  font-size: 10px;\\n}\\n\\n.cal-heatmap-container .graph,\\n.cal-heatmap-container .graph-legend rect {\\n  shape-rendering: crispedges;\\n}\\n\\n.cal-heatmap-container .graph-rect {\\n  fill: #ededed;\\n}\\n\\n.cal-heatmap-container .graph-subdomain-group rect:hover {\\n  stroke: #000;\\n  stroke-width: 1px;\\n}\\n\\n.cal-heatmap-container .subdomain-text {\\n  font-size: 8px;\\n  fill: #999;\\n  pointer-events: none;\\n}\\n\\n.cal-heatmap-container .hover_cursor:hover {\\n  cursor: pointer;\\n}\\n\\n.cal-heatmap-container .qi {\\n  background-color: #999;\\n  fill: #999;\\n}\\n\\n/*\\nRemove comment to apply this style to date with value equal to 0\\n.q0\\n{\\n  background-color: #fff;\\n  fill: #fff;\\n  stroke: #ededed\\n}\\n*/\\n\\n.cal-heatmap-container .q1 {\\n  background-color: #dae289;\\n  fill: #dae289;\\n}\\n\\n.cal-heatmap-container .q2 {\\n  background-color: #cedb9c;\\n  fill: #9cc069;\\n}\\n\\n.cal-heatmap-container .q3 {\\n  background-color: #b5cf6b;\\n  fill: #669d45;\\n}\\n\\n.cal-heatmap-container .q4 {\\n  background-color: #637939;\\n  fill: #637939;\\n}\\n\\n.cal-heatmap-container .q5 {\\n  background-color: #3b6427;\\n  fill: #3b6427;\\n}\\n\\n.cal-heatmap-container rect.highlight {\\n  stroke: #444;\\n  stroke-width: 1;\\n}\\n\\n.cal-heatmap-container text.highlight {\\n  fill: #444;\\n}\\n\\n.cal-heatmap-container rect.highlight-now {\\n  stroke: red;\\n}\\n\\n.cal-heatmap-container text.highlight-now {\\n  fill: red;\\n  font-weight: 800;\\n}\\n\\n.cal-heatmap-container .domain-background {\\n  fill: none;\\n  shape-rendering: crispedges;\\n}\\n\\n.ch-tooltip {\\n  padding: 10px;\\n  background: #222;\\n  color: #bbb;\\n  font-size: 12px;\\n  line-height: 1.4;\\n  width: 140px;\\n  position: absolute;\\n  z-index: 99999;\\n  text-align: center;\\n  border-radius: 2px;\\n  box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);\\n  display: none;\\n  box-sizing: border-box;\\n}\\n\\n.ch-tooltip::after {\\n  position: absolute;\\n  width: 0;\\n  height: 0;\\n  border-color: transparent;\\n  border-style: solid;\\n  content: '';\\n  padding: 0;\\n  display: block;\\n  bottom: -6px;\\n  left: 50%;\\n  margin-left: -6px;\\n  border-width: 6px 6px 0;\\n  border-top-color: #222;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFsxXS5ydWxlc1szXS51c2VbMV0hLi9ub2RlX21vZHVsZXMvQHN1cGVyc2V0LXVpL2xlZ2FjeS1wbHVnaW4tY2hhcnQtY2FsZW5kYXIvZXNtL3ZlbmRvci9jYWwtaGVhdG1hcC5jc3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL25vZGVfbW9kdWxlcy9Ac3VwZXJzZXQtdWkvbGVnYWN5LXBsdWdpbi1jaGFydC1jYWxlbmRhci9lc20vdmVuZG9yL2NhbC1oZWF0bWFwLmNzcz83MWNkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi8uLi9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9jc3NXaXRoTWFwcGluZ1RvU3RyaW5nLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi8uLi9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcIi8qIFtMSUNFTlNFIFRCRF0gKi9cXG4vKiBDYWwtSGVhdE1hcCBDU1MgKi9cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIHtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbn1cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIC5ncmFwaC1sYWJlbCB7XFxuICBmaWxsOiAjOTk5O1xcbiAgZm9udC1zaXplOiAxMHB4O1xcbn1cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIC5ncmFwaCxcXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIC5ncmFwaC1sZWdlbmQgcmVjdCB7XFxuICBzaGFwZS1yZW5kZXJpbmc6IGNyaXNwZWRnZXM7XFxufVxcblxcbi5jYWwtaGVhdG1hcC1jb250YWluZXIgLmdyYXBoLXJlY3Qge1xcbiAgZmlsbDogI2VkZWRlZDtcXG59XFxuXFxuLmNhbC1oZWF0bWFwLWNvbnRhaW5lciAuZ3JhcGgtc3ViZG9tYWluLWdyb3VwIHJlY3Q6aG92ZXIge1xcbiAgc3Ryb2tlOiAjMDAwO1xcbiAgc3Ryb2tlLXdpZHRoOiAxcHg7XFxufVxcblxcbi5jYWwtaGVhdG1hcC1jb250YWluZXIgLnN1YmRvbWFpbi10ZXh0IHtcXG4gIGZvbnQtc2l6ZTogOHB4O1xcbiAgZmlsbDogIzk5OTtcXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbn1cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIC5ob3Zlcl9jdXJzb3I6aG92ZXIge1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbn1cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIC5xaSB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjOTk5O1xcbiAgZmlsbDogIzk5OTtcXG59XFxuXFxuLypcXG5SZW1vdmUgY29tbWVudCB0byBhcHBseSB0aGlzIHN0eWxlIHRvIGRhdGUgd2l0aCB2YWx1ZSBlcXVhbCB0byAwXFxuLnEwXFxue1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcXG4gIGZpbGw6ICNmZmY7XFxuICBzdHJva2U6ICNlZGVkZWRcXG59XFxuKi9cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIC5xMSB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGFlMjg5O1xcbiAgZmlsbDogI2RhZTI4OTtcXG59XFxuXFxuLmNhbC1oZWF0bWFwLWNvbnRhaW5lciAucTIge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2NlZGI5YztcXG4gIGZpbGw6ICM5Y2MwNjk7XFxufVxcblxcbi5jYWwtaGVhdG1hcC1jb250YWluZXIgLnEzIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNiNWNmNmI7XFxuICBmaWxsOiAjNjY5ZDQ1O1xcbn1cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIC5xNCB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjM3OTM5O1xcbiAgZmlsbDogIzYzNzkzOTtcXG59XFxuXFxuLmNhbC1oZWF0bWFwLWNvbnRhaW5lciAucTUge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogIzNiNjQyNztcXG4gIGZpbGw6ICMzYjY0Mjc7XFxufVxcblxcbi5jYWwtaGVhdG1hcC1jb250YWluZXIgcmVjdC5oaWdobGlnaHQge1xcbiAgc3Ryb2tlOiAjNDQ0O1xcbiAgc3Ryb2tlLXdpZHRoOiAxO1xcbn1cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIHRleHQuaGlnaGxpZ2h0IHtcXG4gIGZpbGw6ICM0NDQ7XFxufVxcblxcbi5jYWwtaGVhdG1hcC1jb250YWluZXIgcmVjdC5oaWdobGlnaHQtbm93IHtcXG4gIHN0cm9rZTogcmVkO1xcbn1cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIHRleHQuaGlnaGxpZ2h0LW5vdyB7XFxuICBmaWxsOiByZWQ7XFxuICBmb250LXdlaWdodDogODAwO1xcbn1cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIC5kb21haW4tYmFja2dyb3VuZCB7XFxuICBmaWxsOiBub25lO1xcbiAgc2hhcGUtcmVuZGVyaW5nOiBjcmlzcGVkZ2VzO1xcbn1cXG5cXG4uY2gtdG9vbHRpcCB7XFxuICBwYWRkaW5nOiAxMHB4O1xcbiAgYmFja2dyb3VuZDogIzIyMjtcXG4gIGNvbG9yOiAjYmJiO1xcbiAgZm9udC1zaXplOiAxMnB4O1xcbiAgbGluZS1oZWlnaHQ6IDEuNDtcXG4gIHdpZHRoOiAxNDBweDtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHotaW5kZXg6IDk5OTk5O1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xcbiAgYm94LXNoYWRvdzogMnB4IDJweCAycHggcmdiYSgwLCAwLCAwLCAwLjIpO1xcbiAgZGlzcGxheTogbm9uZTtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxufVxcblxcbi5jaC10b29sdGlwOjphZnRlciB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB3aWR0aDogMDtcXG4gIGhlaWdodDogMDtcXG4gIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7XFxuICBib3JkZXItc3R5bGU6IHNvbGlkO1xcbiAgY29udGVudDogJyc7XFxuICBwYWRkaW5nOiAwO1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICBib3R0b206IC02cHg7XFxuICBsZWZ0OiA1MCU7XFxuICBtYXJnaW4tbGVmdDogLTZweDtcXG4gIGJvcmRlci13aWR0aDogNnB4IDZweCAwO1xcbiAgYm9yZGVyLXRvcC1jb2xvcjogIzIyMjtcXG59XFxuXCIsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vbm9kZV9tb2R1bGVzL0BzdXBlcnNldC11aS9sZWdhY3ktcGx1Z2luLWNoYXJ0LWNhbGVuZGFyL2VzbS92ZW5kb3IvY2FsLWhlYXRtYXAuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBLGtCQUFrQjtBQUNsQixvQkFBb0I7O0FBRXBCO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTtFQUNFLFVBQVU7RUFDVixlQUFlO0FBQ2pCOztBQUVBOztFQUVFLDJCQUEyQjtBQUM3Qjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLFlBQVk7RUFDWixpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxjQUFjO0VBQ2QsVUFBVTtFQUNWLG9CQUFvQjtBQUN0Qjs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxzQkFBc0I7RUFDdEIsVUFBVTtBQUNaOztBQUVBOzs7Ozs7OztDQVFDOztBQUVEO0VBQ0UseUJBQXlCO0VBQ3pCLGFBQWE7QUFDZjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixhQUFhO0FBQ2Y7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsYUFBYTtBQUNmOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLGFBQWE7QUFDZjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxZQUFZO0VBQ1osZUFBZTtBQUNqQjs7QUFFQTtFQUNFLFVBQVU7QUFDWjs7QUFFQTtFQUNFLFdBQVc7QUFDYjs7QUFFQTtFQUNFLFNBQVM7RUFDVCxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsMkJBQTJCO0FBQzdCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLGdCQUFnQjtFQUNoQixXQUFXO0VBQ1gsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGNBQWM7RUFDZCxrQkFBa0I7RUFDbEIsa0JBQWtCO0VBQ2xCLDBDQUEwQztFQUMxQyxhQUFhO0VBQ2Isc0JBQXNCO0FBQ3hCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFFBQVE7RUFDUixTQUFTO0VBQ1QseUJBQXlCO0VBQ3pCLG1CQUFtQjtFQUNuQixXQUFXO0VBQ1gsVUFBVTtFQUNWLGNBQWM7RUFDZCxZQUFZO0VBQ1osU0FBUztFQUNULGlCQUFpQjtFQUNqQix1QkFBdUI7RUFDdkIsc0JBQXNCO0FBQ3hCXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIi8qIFtMSUNFTlNFIFRCRF0gKi9cXG4vKiBDYWwtSGVhdE1hcCBDU1MgKi9cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIHtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbn1cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIC5ncmFwaC1sYWJlbCB7XFxuICBmaWxsOiAjOTk5O1xcbiAgZm9udC1zaXplOiAxMHB4O1xcbn1cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIC5ncmFwaCxcXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIC5ncmFwaC1sZWdlbmQgcmVjdCB7XFxuICBzaGFwZS1yZW5kZXJpbmc6IGNyaXNwZWRnZXM7XFxufVxcblxcbi5jYWwtaGVhdG1hcC1jb250YWluZXIgLmdyYXBoLXJlY3Qge1xcbiAgZmlsbDogI2VkZWRlZDtcXG59XFxuXFxuLmNhbC1oZWF0bWFwLWNvbnRhaW5lciAuZ3JhcGgtc3ViZG9tYWluLWdyb3VwIHJlY3Q6aG92ZXIge1xcbiAgc3Ryb2tlOiAjMDAwO1xcbiAgc3Ryb2tlLXdpZHRoOiAxcHg7XFxufVxcblxcbi5jYWwtaGVhdG1hcC1jb250YWluZXIgLnN1YmRvbWFpbi10ZXh0IHtcXG4gIGZvbnQtc2l6ZTogOHB4O1xcbiAgZmlsbDogIzk5OTtcXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbn1cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIC5ob3Zlcl9jdXJzb3I6aG92ZXIge1xcbiAgY3Vyc29yOiBwb2ludGVyO1xcbn1cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIC5xaSB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjOTk5O1xcbiAgZmlsbDogIzk5OTtcXG59XFxuXFxuLypcXG5SZW1vdmUgY29tbWVudCB0byBhcHBseSB0aGlzIHN0eWxlIHRvIGRhdGUgd2l0aCB2YWx1ZSBlcXVhbCB0byAwXFxuLnEwXFxue1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcXG4gIGZpbGw6ICNmZmY7XFxuICBzdHJva2U6ICNlZGVkZWRcXG59XFxuKi9cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIC5xMSB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGFlMjg5O1xcbiAgZmlsbDogI2RhZTI4OTtcXG59XFxuXFxuLmNhbC1oZWF0bWFwLWNvbnRhaW5lciAucTIge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2NlZGI5YztcXG4gIGZpbGw6ICM5Y2MwNjk7XFxufVxcblxcbi5jYWwtaGVhdG1hcC1jb250YWluZXIgLnEzIHtcXG4gIGJhY2tncm91bmQtY29sb3I6ICNiNWNmNmI7XFxuICBmaWxsOiAjNjY5ZDQ1O1xcbn1cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIC5xNCB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjM3OTM5O1xcbiAgZmlsbDogIzYzNzkzOTtcXG59XFxuXFxuLmNhbC1oZWF0bWFwLWNvbnRhaW5lciAucTUge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogIzNiNjQyNztcXG4gIGZpbGw6ICMzYjY0Mjc7XFxufVxcblxcbi5jYWwtaGVhdG1hcC1jb250YWluZXIgcmVjdC5oaWdobGlnaHQge1xcbiAgc3Ryb2tlOiAjNDQ0O1xcbiAgc3Ryb2tlLXdpZHRoOiAxO1xcbn1cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIHRleHQuaGlnaGxpZ2h0IHtcXG4gIGZpbGw6ICM0NDQ7XFxufVxcblxcbi5jYWwtaGVhdG1hcC1jb250YWluZXIgcmVjdC5oaWdobGlnaHQtbm93IHtcXG4gIHN0cm9rZTogcmVkO1xcbn1cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIHRleHQuaGlnaGxpZ2h0LW5vdyB7XFxuICBmaWxsOiByZWQ7XFxuICBmb250LXdlaWdodDogODAwO1xcbn1cXG5cXG4uY2FsLWhlYXRtYXAtY29udGFpbmVyIC5kb21haW4tYmFja2dyb3VuZCB7XFxuICBmaWxsOiBub25lO1xcbiAgc2hhcGUtcmVuZGVyaW5nOiBjcmlzcGVkZ2VzO1xcbn1cXG5cXG4uY2gtdG9vbHRpcCB7XFxuICBwYWRkaW5nOiAxMHB4O1xcbiAgYmFja2dyb3VuZDogIzIyMjtcXG4gIGNvbG9yOiAjYmJiO1xcbiAgZm9udC1zaXplOiAxMnB4O1xcbiAgbGluZS1oZWlnaHQ6IDEuNDtcXG4gIHdpZHRoOiAxNDBweDtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHotaW5kZXg6IDk5OTk5O1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xcbiAgYm94LXNoYWRvdzogMnB4IDJweCAycHggcmdiYSgwLCAwLCAwLCAwLjIpO1xcbiAgZGlzcGxheTogbm9uZTtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxufVxcblxcbi5jaC10b29sdGlwOjphZnRlciB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB3aWR0aDogMDtcXG4gIGhlaWdodDogMDtcXG4gIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7XFxuICBib3JkZXItc3R5bGU6IHNvbGlkO1xcbiAgY29udGVudDogJyc7XFxuICBwYWRkaW5nOiAwO1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICBib3R0b206IC02cHg7XFxuICBsZWZ0OiA1MCU7XFxuICBtYXJnaW4tbGVmdDogLTZweDtcXG4gIGJvcmRlci13aWR0aDogNnB4IDZweCAwO1xcbiAgYm9yZGVyLXRvcC1jb2xvcjogIzIyMjtcXG59XFxuXCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/cal-heatmap.css\n");

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/d3tip.css":
/*!*******************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/d3tip.css ***!
  \*******************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../css-loader/dist/runtime/cssWithMappingToString.js */ \"./node_modules/css-loader/dist/runtime/cssWithMappingToString.js\");\n/* harmony import */ var _css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_css_loader_dist_runtime_cssWithMappingToString_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\\"License\\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n/* from d3-tip */\\n.d3-tip {\\n  line-height: 1;\\n  padding: 12px;\\n  background: rgba(0, 0, 0, 0.8);\\n  color: #fff;\\n  border-radius: 2px;\\n  pointer-events: none;\\n  z-index: 1000;\\n}\\n\\n/* Creates a small triangle extender for the tooltip */\\n.d3-tip:after {\\n  box-sizing: border-box;\\n  display: inline;\\n  font-size: 10px;\\n  width: 100%;\\n  line-height: 1;\\n  color: rgba(0, 0, 0, 0.8);\\n  position: absolute;\\n  pointer-events: none;\\n}\\n\\n/* Northward tooltips */\\n.d3-tip.n:after {\\n  content: '\\\\25BC';\\n  margin: -1px 0 0 0;\\n  top: 100%;\\n  left: 0;\\n  text-align: center;\\n}\\n\\n/* Eastward tooltips */\\n.d3-tip.e:after {\\n  content: '\\\\25C0';\\n  margin: -4px 0 0 0;\\n  top: 50%;\\n  left: -8px;\\n}\\n\\n/* Southward tooltips */\\n.d3-tip.s:after {\\n  content: '\\\\25B2';\\n  margin: 0 0 1px 0;\\n  top: -8px;\\n  left: 0;\\n  text-align: center;\\n}\\n\\n/* Westward tooltips */\\n.d3-tip.w:after {\\n  content: '\\\\25B6';\\n  margin: -4px 0 0 -1px;\\n  top: 50%;\\n  left: 100%;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/d3tip.css\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;;;;EAiBE;AACF,gBAAgB;AAChB;EACE,cAAc;EACd,aAAa;EACb,8BAA8B;EAC9B,WAAW;EACX,kBAAkB;EAClB,oBAAoB;EACpB,aAAa;AACf;;AAEA,sDAAsD;AACtD;EACE,sBAAsB;EACtB,eAAe;EACf,eAAe;EACf,WAAW;EACX,cAAc;EACd,yBAAyB;EACzB,kBAAkB;EAClB,oBAAoB;AACtB;;AAEA,uBAAuB;AACvB;EACE,gBAAgB;EAChB,kBAAkB;EAClB,SAAS;EACT,OAAO;EACP,kBAAkB;AACpB;;AAEA,sBAAsB;AACtB;EACE,gBAAgB;EAChB,kBAAkB;EAClB,QAAQ;EACR,UAAU;AACZ;;AAEA,uBAAuB;AACvB;EACE,gBAAgB;EAChB,iBAAiB;EACjB,SAAS;EACT,OAAO;EACP,kBAAkB;AACpB;;AAEA,sBAAsB;AACtB;EACE,gBAAgB;EAChB,qBAAqB;EACrB,QAAQ;EACR,UAAU;AACZ\",\"sourcesContent\":[\"/**\\n * Licensed to the Apache Software Foundation (ASF) under one\\n * or more contributor license agreements.  See the NOTICE file\\n * distributed with this work for additional information\\n * regarding copyright ownership.  The ASF licenses this file\\n * to you under the Apache License, Version 2.0 (the\\n * \\\"License\\\"); you may not use this file except in compliance\\n * with the License.  You may obtain a copy of the License at\\n *\\n *   http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing,\\n * software distributed under the License is distributed on an\\n * \\\"AS IS\\\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\\n * KIND, either express or implied.  See the License for the\\n * specific language governing permissions and limitations\\n * under the License.\\n */\\n/* from d3-tip */\\n.d3-tip {\\n  line-height: 1;\\n  padding: 12px;\\n  background: rgba(0, 0, 0, 0.8);\\n  color: #fff;\\n  border-radius: 2px;\\n  pointer-events: none;\\n  z-index: 1000;\\n}\\n\\n/* Creates a small triangle extender for the tooltip */\\n.d3-tip:after {\\n  box-sizing: border-box;\\n  display: inline;\\n  font-size: 10px;\\n  width: 100%;\\n  line-height: 1;\\n  color: rgba(0, 0, 0, 0.8);\\n  position: absolute;\\n  pointer-events: none;\\n}\\n\\n/* Northward tooltips */\\n.d3-tip.n:after {\\n  content: '\\\\25BC';\\n  margin: -1px 0 0 0;\\n  top: 100%;\\n  left: 0;\\n  text-align: center;\\n}\\n\\n/* Eastward tooltips */\\n.d3-tip.e:after {\\n  content: '\\\\25C0';\\n  margin: -4px 0 0 0;\\n  top: 50%;\\n  left: -8px;\\n}\\n\\n/* Southward tooltips */\\n.d3-tip.s:after {\\n  content: '\\\\25B2';\\n  margin: 0 0 1px 0;\\n  top: -8px;\\n  left: 0;\\n  text-align: center;\\n}\\n\\n/* Westward tooltips */\\n.d3-tip.w:after {\\n  content: '\\\\25B6';\\n  margin: -4px 0 0 -1px;\\n  top: 50%;\\n  left: 100%;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cnVsZVNldFsxXS5ydWxlc1szXS51c2VbMV0hLi9ub2RlX21vZHVsZXMvQHN1cGVyc2V0LXVpL2xlZ2FjeS1wbHVnaW4tY2hhcnQtY2FsZW5kYXIvZXNtL3ZlbmRvci9kM3RpcC5jc3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL25vZGVfbW9kdWxlcy9Ac3VwZXJzZXQtdWkvbGVnYWN5LXBsdWdpbi1jaGFydC1jYWxlbmRhci9lc20vdmVuZG9yL2QzdGlwLmNzcz8xMDUzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi8uLi9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9jc3NXaXRoTWFwcGluZ1RvU3RyaW5nLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi8uLi8uLi8uLi9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIjtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcIi8qKlxcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxcbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXFxuICogXFxcIkxpY2Vuc2VcXFwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcXG4gKlxcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXFxuICpcXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cXG4gKiBcXFwiQVMgSVNcXFwiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXFxuICogdW5kZXIgdGhlIExpY2Vuc2UuXFxuICovXFxuLyogZnJvbSBkMy10aXAgKi9cXG4uZDMtdGlwIHtcXG4gIGxpbmUtaGVpZ2h0OiAxO1xcbiAgcGFkZGluZzogMTJweDtcXG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC44KTtcXG4gIGNvbG9yOiAjZmZmO1xcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxuICB6LWluZGV4OiAxMDAwO1xcbn1cXG5cXG4vKiBDcmVhdGVzIGEgc21hbGwgdHJpYW5nbGUgZXh0ZW5kZXIgZm9yIHRoZSB0b29sdGlwICovXFxuLmQzLXRpcDphZnRlciB7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgZGlzcGxheTogaW5saW5lO1xcbiAgZm9udC1zaXplOiAxMHB4O1xcbiAgd2lkdGg6IDEwMCU7XFxuICBsaW5lLWhlaWdodDogMTtcXG4gIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuOCk7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcXG59XFxuXFxuLyogTm9ydGh3YXJkIHRvb2x0aXBzICovXFxuLmQzLXRpcC5uOmFmdGVyIHtcXG4gIGNvbnRlbnQ6ICdcXFxcMjVCQyc7XFxuICBtYXJnaW46IC0xcHggMCAwIDA7XFxuICB0b3A6IDEwMCU7XFxuICBsZWZ0OiAwO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbn1cXG5cXG4vKiBFYXN0d2FyZCB0b29sdGlwcyAqL1xcbi5kMy10aXAuZTphZnRlciB7XFxuICBjb250ZW50OiAnXFxcXDI1QzAnO1xcbiAgbWFyZ2luOiAtNHB4IDAgMCAwO1xcbiAgdG9wOiA1MCU7XFxuICBsZWZ0OiAtOHB4O1xcbn1cXG5cXG4vKiBTb3V0aHdhcmQgdG9vbHRpcHMgKi9cXG4uZDMtdGlwLnM6YWZ0ZXIge1xcbiAgY29udGVudDogJ1xcXFwyNUIyJztcXG4gIG1hcmdpbjogMCAwIDFweCAwO1xcbiAgdG9wOiAtOHB4O1xcbiAgbGVmdDogMDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG59XFxuXFxuLyogV2VzdHdhcmQgdG9vbHRpcHMgKi9cXG4uZDMtdGlwLnc6YWZ0ZXIge1xcbiAgY29udGVudDogJ1xcXFwyNUI2JztcXG4gIG1hcmdpbjogLTRweCAwIDAgLTFweDtcXG4gIHRvcDogNTAlO1xcbiAgbGVmdDogMTAwJTtcXG59XFxuXCIsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vbm9kZV9tb2R1bGVzL0BzdXBlcnNldC11aS9sZWdhY3ktcGx1Z2luLWNoYXJ0LWNhbGVuZGFyL2VzbS92ZW5kb3IvZDN0aXAuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7OztFQWlCRTtBQUNGLGdCQUFnQjtBQUNoQjtFQUNFLGNBQWM7RUFDZCxhQUFhO0VBQ2IsOEJBQThCO0VBQzlCLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsb0JBQW9CO0VBQ3BCLGFBQWE7QUFDZjs7QUFFQSxzREFBc0Q7QUFDdEQ7RUFDRSxzQkFBc0I7RUFDdEIsZUFBZTtFQUNmLGVBQWU7RUFDZixXQUFXO0VBQ1gsY0FBYztFQUNkLHlCQUF5QjtFQUN6QixrQkFBa0I7RUFDbEIsb0JBQW9CO0FBQ3RCOztBQUVBLHVCQUF1QjtBQUN2QjtFQUNFLGdCQUFnQjtFQUNoQixrQkFBa0I7RUFDbEIsU0FBUztFQUNULE9BQU87RUFDUCxrQkFBa0I7QUFDcEI7O0FBRUEsc0JBQXNCO0FBQ3RCO0VBQ0UsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixRQUFRO0VBQ1IsVUFBVTtBQUNaOztBQUVBLHVCQUF1QjtBQUN2QjtFQUNFLGdCQUFnQjtFQUNoQixpQkFBaUI7RUFDakIsU0FBUztFQUNULE9BQU87RUFDUCxrQkFBa0I7QUFDcEI7O0FBRUEsc0JBQXNCO0FBQ3RCO0VBQ0UsZ0JBQWdCO0VBQ2hCLHFCQUFxQjtFQUNyQixRQUFRO0VBQ1IsVUFBVTtBQUNaXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIi8qKlxcbiAqIExpY2Vuc2VkIHRvIHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmVcXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxcbiAqIHJlZ2FyZGluZyBjb3B5cmlnaHQgb3duZXJzaGlwLiAgVGhlIEFTRiBsaWNlbnNlcyB0aGlzIGZpbGVcXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXFxuICogXFxcIkxpY2Vuc2VcXFwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZVxcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcXG4gKlxcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXFxuICpcXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXFxuICogc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW5cXG4gKiBcXFwiQVMgSVNcXFwiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcXG4gKiBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiAgU2VlIHRoZSBMaWNlbnNlIGZvciB0aGVcXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXFxuICogdW5kZXIgdGhlIExpY2Vuc2UuXFxuICovXFxuLyogZnJvbSBkMy10aXAgKi9cXG4uZDMtdGlwIHtcXG4gIGxpbmUtaGVpZ2h0OiAxO1xcbiAgcGFkZGluZzogMTJweDtcXG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC44KTtcXG4gIGNvbG9yOiAjZmZmO1xcbiAgYm9yZGVyLXJhZGl1czogMnB4O1xcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxuICB6LWluZGV4OiAxMDAwO1xcbn1cXG5cXG4vKiBDcmVhdGVzIGEgc21hbGwgdHJpYW5nbGUgZXh0ZW5kZXIgZm9yIHRoZSB0b29sdGlwICovXFxuLmQzLXRpcDphZnRlciB7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgZGlzcGxheTogaW5saW5lO1xcbiAgZm9udC1zaXplOiAxMHB4O1xcbiAgd2lkdGg6IDEwMCU7XFxuICBsaW5lLWhlaWdodDogMTtcXG4gIGNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuOCk7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcXG59XFxuXFxuLyogTm9ydGh3YXJkIHRvb2x0aXBzICovXFxuLmQzLXRpcC5uOmFmdGVyIHtcXG4gIGNvbnRlbnQ6ICdcXFxcMjVCQyc7XFxuICBtYXJnaW46IC0xcHggMCAwIDA7XFxuICB0b3A6IDEwMCU7XFxuICBsZWZ0OiAwO1xcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcbn1cXG5cXG4vKiBFYXN0d2FyZCB0b29sdGlwcyAqL1xcbi5kMy10aXAuZTphZnRlciB7XFxuICBjb250ZW50OiAnXFxcXDI1QzAnO1xcbiAgbWFyZ2luOiAtNHB4IDAgMCAwO1xcbiAgdG9wOiA1MCU7XFxuICBsZWZ0OiAtOHB4O1xcbn1cXG5cXG4vKiBTb3V0aHdhcmQgdG9vbHRpcHMgKi9cXG4uZDMtdGlwLnM6YWZ0ZXIge1xcbiAgY29udGVudDogJ1xcXFwyNUIyJztcXG4gIG1hcmdpbjogMCAwIDFweCAwO1xcbiAgdG9wOiAtOHB4O1xcbiAgbGVmdDogMDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG59XFxuXFxuLyogV2VzdHdhcmQgdG9vbHRpcHMgKi9cXG4uZDMtdGlwLnc6YWZ0ZXIge1xcbiAgY29udGVudDogJ1xcXFwyNUI2JztcXG4gIG1hcmdpbjogLTRweCAwIDAgLTFweDtcXG4gIHRvcDogNTAlO1xcbiAgbGVmdDogMTAwJTtcXG59XFxuXCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/d3tip.css\n");

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {

eval("\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === \"string\") {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \"\"]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qcz8yNGZiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKSB7XG4gIHZhciBsaXN0ID0gW107IC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblxuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSk7XG5cbiAgICAgIGlmIChpdGVtWzJdKSB7XG4gICAgICAgIHJldHVybiBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKS5jb25jYXQoY29udGVudCwgXCJ9XCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKFwiXCIpO1xuICB9OyAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXG5cbiAgbGlzdC5pID0gZnVuY3Rpb24gKG1vZHVsZXMsIG1lZGlhUXVlcnksIGRlZHVwZSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XG4gICAgfVxuXG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblxuICAgIGlmIChkZWR1cGUpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcbiAgICAgICAgdmFyIGlkID0gdGhpc1tpXVswXTtcblxuICAgICAgICBpZiAoaWQgIT0gbnVsbCkge1xuICAgICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBtb2R1bGVzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIGl0ZW0gPSBbXS5jb25jYXQobW9kdWxlc1tfaV0pO1xuXG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRpbnVlXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAobWVkaWFRdWVyeSkge1xuICAgICAgICBpZiAoIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWFRdWVyeTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzJdID0gXCJcIi5jb25jYXQobWVkaWFRdWVyeSwgXCIgYW5kIFwiKS5jb25jYXQoaXRlbVsyXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gbGlzdDtcbn07Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/css-loader/dist/runtime/api.js\n");

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/cssWithMappingToString.js":
/*!************************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/cssWithMappingToString.js ***!
  \************************************************************************/
/***/ ((module) => {

eval("\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nmodule.exports = function cssWithMappingToString(item) {\n  var _item = _slicedToArray(item, 4),\n      content = _item[1],\n      cssMapping = _item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    // eslint-disable-next-line no-undef\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvY3NzV2l0aE1hcHBpbmdUb1N0cmluZy5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9jc3NXaXRoTWFwcGluZ1RvU3RyaW5nLmpzPzc1ZTkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgeyByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFyciwgaSkgfHwgX25vbkl0ZXJhYmxlUmVzdCgpOyB9XG5cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7IHZhciBfaSA9IGFyciA9PSBudWxsID8gbnVsbCA6IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgYXJyW1N5bWJvbC5pdGVyYXRvcl0gfHwgYXJyW1wiQEBpdGVyYXRvclwiXTsgaWYgKF9pID09IG51bGwpIHJldHVybjsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfcywgX2U7IHRyeSB7IGZvciAoX2kgPSBfaS5jYWxsKGFycik7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdICE9IG51bGwpIF9pW1wicmV0dXJuXCJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfVxuXG5mdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0pIHtcbiAgdmFyIF9pdGVtID0gX3NsaWNlZFRvQXJyYXkoaXRlbSwgNCksXG4gICAgICBjb250ZW50ID0gX2l0ZW1bMV0sXG4gICAgICBjc3NNYXBwaW5nID0gX2l0ZW1bM107XG5cbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICBpZiAodHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShjc3NNYXBwaW5nKSkpKTtcbiAgICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG4gICAgdmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgIHJldHVybiBcIi8qIyBzb3VyY2VVUkw9XCIuY29uY2F0KGNzc01hcHBpbmcuc291cmNlUm9vdCB8fCBcIlwiKS5jb25jYXQoc291cmNlLCBcIiAqL1wiKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKFwiXFxuXCIpO1xuICB9XG5cbiAgcmV0dXJuIFtjb250ZW50XS5qb2luKFwiXFxuXCIpO1xufTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/css-loader/dist/runtime/cssWithMappingToString.js\n");

/***/ }),

/***/ "./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/cal-heatmap.css":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/cal-heatmap.css ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

eval("/* harmony import */ var _style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n/* harmony import */ var _style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/styleDomAPI.js */ \"./node_modules/style-loader/dist/runtime/styleDomAPI.js\");\n/* harmony import */ var _style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/insertBySelector.js */ \"./node_modules/style-loader/dist/runtime/insertBySelector.js\");\n/* harmony import */ var _style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/setAttributesWithoutAttributes.js */ \"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\");\n/* harmony import */ var _style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/insertStyleElement.js */ \"./node_modules/style-loader/dist/runtime/insertStyleElement.js\");\n/* harmony import */ var _style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/styleTagTransform.js */ \"./node_modules/style-loader/dist/runtime/styleTagTransform.js\");\n/* harmony import */ var _style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_cal_heatmap_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../../../css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./cal-heatmap.css */ \"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/cal-heatmap.css\");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\n\n      options.insert = _style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, \"head\");\n    \noptions.domAPI = (_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_cal_heatmap_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"], options);\n\n\n\n\n       /* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = (_css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_cal_heatmap_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"] && _css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_cal_heatmap_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals ? _css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_cal_heatmap_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals : undefined);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHN1cGVyc2V0LXVpL2xlZ2FjeS1wbHVnaW4tY2hhcnQtY2FsZW5kYXIvZXNtL3ZlbmRvci9jYWwtaGVhdG1hcC5jc3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vbm9kZV9tb2R1bGVzL0BzdXBlcnNldC11aS9sZWdhY3ktcGx1Z2luLWNoYXJ0LWNhbGVuZGFyL2VzbS92ZW5kb3IvY2FsLWhlYXRtYXAuY3NzPzE2ZTAiXSwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICBpbXBvcnQgQVBJIGZyb20gXCIhLi4vLi4vLi4vLi4vc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi8uLi8uLi9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi8uLi8uLi8uLi9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanNcIjtcbiAgICAgIGltcG9ydCBzZXRBdHRyaWJ1dGVzIGZyb20gXCIhLi4vLi4vLi4vLi4vc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi8uLi8uLi9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi8uLi8uLi8uLi9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzXCI7XG4gICAgICBpbXBvcnQgY29udGVudCwgKiBhcyBuYW1lZEV4cG9ydCBmcm9tIFwiISEuLi8uLi8uLi8uLi9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzNdLnVzZVsxXSEuL2NhbC1oZWF0bWFwLmNzc1wiO1xuICAgICAgXG4gICAgICBcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybSA9IHN0eWxlVGFnVHJhbnNmb3JtRm47XG5vcHRpb25zLnNldEF0dHJpYnV0ZXMgPSBzZXRBdHRyaWJ1dGVzO1xuXG4gICAgICBvcHRpb25zLmluc2VydCA9IGluc2VydEZuLmJpbmQobnVsbCwgXCJoZWFkXCIpO1xuICAgIFxub3B0aW9ucy5kb21BUEkgPSBkb21BUEk7XG5vcHRpb25zLmluc2VydFN0eWxlRWxlbWVudCA9IGluc2VydFN0eWxlRWxlbWVudDtcblxudmFyIHVwZGF0ZSA9IEFQSShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCAqIGZyb20gXCIhIS4uLy4uLy4uLy4uL2Nzcy1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMV0ucnVsZXNbM10udXNlWzFdIS4vY2FsLWhlYXRtYXAuY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/cal-heatmap.css\n");

/***/ }),

/***/ "./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/d3tip.css":
/*!*************************************************************************************!*\
  !*** ./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/d3tip.css ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

eval("/* harmony import */ var _style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n/* harmony import */ var _style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/styleDomAPI.js */ \"./node_modules/style-loader/dist/runtime/styleDomAPI.js\");\n/* harmony import */ var _style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/insertBySelector.js */ \"./node_modules/style-loader/dist/runtime/insertBySelector.js\");\n/* harmony import */ var _style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/setAttributesWithoutAttributes.js */ \"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\");\n/* harmony import */ var _style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/insertStyleElement.js */ \"./node_modules/style-loader/dist/runtime/insertStyleElement.js\");\n/* harmony import */ var _style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../../../style-loader/dist/runtime/styleTagTransform.js */ \"./node_modules/style-loader/dist/runtime/styleTagTransform.js\");\n/* harmony import */ var _style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_d3tip_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../../../css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./d3tip.css */ \"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[3].use[1]!./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/d3tip.css\");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\n\n      options.insert = _style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, \"head\");\n    \noptions.domAPI = (_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_d3tip_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"], options);\n\n\n\n\n       /* unused harmony default export */ var __WEBPACK_DEFAULT_EXPORT__ = (_css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_d3tip_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"] && _css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_d3tip_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals ? _css_loader_dist_cjs_js_ruleSet_1_rules_3_use_1_d3tip_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals : undefined);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQHN1cGVyc2V0LXVpL2xlZ2FjeS1wbHVnaW4tY2hhcnQtY2FsZW5kYXIvZXNtL3ZlbmRvci9kM3RpcC5jc3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vbm9kZV9tb2R1bGVzL0BzdXBlcnNldC11aS9sZWdhY3ktcGx1Z2luLWNoYXJ0LWNhbGVuZGFyL2VzbS92ZW5kb3IvZDN0aXAuY3NzP2IyYjYiXSwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICBpbXBvcnQgQVBJIGZyb20gXCIhLi4vLi4vLi4vLi4vc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi8uLi8uLi8uLi9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi8uLi8uLi8uLi9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydEJ5U2VsZWN0b3IuanNcIjtcbiAgICAgIGltcG9ydCBzZXRBdHRyaWJ1dGVzIGZyb20gXCIhLi4vLi4vLi4vLi4vc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi8uLi8uLi8uLi9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi8uLi8uLi8uLi9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzXCI7XG4gICAgICBpbXBvcnQgY29udGVudCwgKiBhcyBuYW1lZEV4cG9ydCBmcm9tIFwiISEuLi8uLi8uLi8uLi9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzNdLnVzZVsxXSEuL2QzdGlwLmNzc1wiO1xuICAgICAgXG4gICAgICBcblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybSA9IHN0eWxlVGFnVHJhbnNmb3JtRm47XG5vcHRpb25zLnNldEF0dHJpYnV0ZXMgPSBzZXRBdHRyaWJ1dGVzO1xuXG4gICAgICBvcHRpb25zLmluc2VydCA9IGluc2VydEZuLmJpbmQobnVsbCwgXCJoZWFkXCIpO1xuICAgIFxub3B0aW9ucy5kb21BUEkgPSBkb21BUEk7XG5vcHRpb25zLmluc2VydFN0eWxlRWxlbWVudCA9IGluc2VydFN0eWxlRWxlbWVudDtcblxudmFyIHVwZGF0ZSA9IEFQSShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbmV4cG9ydCAqIGZyb20gXCIhIS4uLy4uLy4uLy4uL2Nzcy1sb2FkZXIvZGlzdC9janMuanM/P3J1bGVTZXRbMV0ucnVsZXNbM10udXNlWzFdIS4vZDN0aXAuY3NzXCI7XG4gICAgICAgZXhwb3J0IGRlZmF1bHQgY29udGVudCAmJiBjb250ZW50LmxvY2FscyA/IGNvbnRlbnQubG9jYWxzIDogdW5kZWZpbmVkO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@superset-ui/legacy-plugin-chart-calendar/esm/vendor/d3tip.css\n");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module) => {

eval("\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qcz8yZGJhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgc3R5bGVzSW5Eb20gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRvbS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRvbVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdXG4gICAgfTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZXNJbkRvbS5wdXNoKHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogYWRkU3R5bGUob2JqLCBvcHRpb25zKSxcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBhcGkgPSBvcHRpb25zLmRvbUFQSShvcHRpb25zKTtcbiAgYXBpLnVwZGF0ZShvYmopO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGFwaS51cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBpLnJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgbGlzdCA9IGxpc3QgfHwgW107XG4gIHZhciBsYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obGlzdCwgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIG5ld0xpc3QgPSBuZXdMaXN0IHx8IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cblxuICAgIHZhciBuZXdMYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obmV3TGlzdCwgb3B0aW9ucyk7XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9pZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW19pXTtcblxuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcblxuICAgICAgaWYgKHN0eWxlc0luRG9tW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgICAgICBzdHlsZXNJbkRvbVtfaW5kZXhdLnVwZGF0ZXIoKTtcblxuICAgICAgICBzdHlsZXNJbkRvbS5zcGxpY2UoX2luZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\n");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertBySelector.js":
/*!********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertBySelector.js ***!
  \********************************************************************/
/***/ ((module) => {

eval("\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qcz9iMjE0Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgbWVtbyA9IHt9O1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cbmZ1bmN0aW9uIGdldFRhcmdldCh0YXJnZXQpIHtcbiAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cbiAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gIH1cblxuICByZXR1cm4gbWVtb1t0YXJnZXRdO1xufVxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5cblxuZnVuY3Rpb24gaW5zZXJ0QnlTZWxlY3RvcihpbnNlcnQsIHN0eWxlKSB7XG4gIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQoaW5zZXJ0KTtcblxuICBpZiAoIXRhcmdldCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gIH1cblxuICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluc2VydEJ5U2VsZWN0b3I7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/style-loader/dist/runtime/insertBySelector.js\n");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertStyleElement.js":
/*!**********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertStyleElement.js ***!
  \**********************************************************************/
/***/ ((module) => {

eval("\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var style = document.createElement(\"style\");\n  options.setAttributes(style, options.attributes);\n  options.insert(style);\n  return style;\n}\n\nmodule.exports = insertStyleElement;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0U3R5bGVFbGVtZW50LmpzP2RlNmMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICBvcHRpb25zLnNldEF0dHJpYnV0ZXMoc3R5bGUsIG9wdGlvbnMuYXR0cmlidXRlcyk7XG4gIG9wdGlvbnMuaW5zZXJ0KHN0eWxlKTtcbiAgcmV0dXJuIHN0eWxlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluc2VydFN0eWxlRWxlbWVudDsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/style-loader/dist/runtime/insertStyleElement.js\n");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js ***!
  \**********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(style) {\n  var nonce =  true ? __webpack_require__.nc : 0;\n\n  if (nonce) {\n    style.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3VwZXJzZXQvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanM/ZGRjZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBzZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMoc3R5bGUpIHtcbiAgdmFyIG5vbmNlID0gdHlwZW9mIF9fd2VicGFja19ub25jZV9fICE9PSBcInVuZGVmaW5lZFwiID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gIGlmIChub25jZSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIG5vbmNlKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlczsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\n");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleDomAPI.js":
/*!***************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleDomAPI.js ***!
  \***************************************************************/
/***/ ((module) => {

eval("\n\n/* istanbul ignore next  */\nfunction apply(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute(\"media\", media);\n  } else {\n    style.removeAttribute(\"media\");\n  }\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, style);\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var style = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(style, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(style);\n    }\n  };\n}\n\nmodule.exports = domAPI;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdXBlcnNldC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzP2U0NzkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gYXBwbHkoc3R5bGUsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gb2JqLmNzcztcbiAgdmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuICBpZiAobWVkaWEpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlKFwibWVkaWFcIik7XG4gIH1cblxuICBpZiAoc291cmNlTWFwICYmIHR5cGVvZiBidG9hICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIG9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0oY3NzLCBzdHlsZSk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbmZ1bmN0aW9uIGRvbUFQSShvcHRpb25zKSB7XG4gIHZhciBzdHlsZSA9IG9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICByZXR1cm4ge1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKG9iaikge1xuICAgICAgYXBwbHkoc3R5bGUsIG9wdGlvbnMsIG9iaik7XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRvbUFQSTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/style-loader/dist/runtime/styleDomAPI.js\n");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleTagTransform.js":
/*!*********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleTagTransform.js ***!
  \*********************************************************************/
/***/ ((module) => {

eval("\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, style) {\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qcy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N1cGVyc2V0Ly4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanM/MWRkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBzdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlKSB7XG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN0eWxlVGFnVHJhbnNmb3JtOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/style-loader/dist/runtime/styleTagTransform.js\n");

/***/ })

}]);