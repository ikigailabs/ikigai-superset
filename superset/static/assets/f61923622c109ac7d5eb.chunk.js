/*! For license information please see f61923622c109ac7d5eb.chunk.js.LICENSE.txt */
(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[1128],{79873:(e,t,a)=>{"use strict";var o=a(16338),n=a(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(10434)),i=o(a(67294)),l=a(75531),s=n(a(64543)),d=n(a(94055)),u=i.forwardRef((function(e,t){var a=e.visible,o=(0,i.useRef)(null),n=(0,i.useRef)(null);function u(){s.default.cancel(n.current),n.current=null}function c(){n.current=(0,s.default)((function(){var e;null===(e=o.current)||void 0===e||e.forcePopupAlign(),n.current=null,c()}))}return i.useEffect((function(){return a?c():u(),u}),[a]),i.createElement(d.default,(0,r.default)({ref:(0,l.composeRef)(o,t)},e))}));t.default=u},36155:(e,t,a)=>{"use strict";var o=a(16338),n=a(64836);t.Z=void 0;var r=n(a(18698)),i=n(a(38416)),l=n(a(10434)),s=n(a(27424)),d=o(a(67294)),u=o(a(5417)),c=n(a(94184)),h=n(a(79873)),p=a(31929),f=function(e,t){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(a[o[n]]=e[o[n]])}return a},g=d.forwardRef((function(e,t){var a,o=d.useContext(p.ConfigContext),n=o.getPrefixCls,g=o.direction,m=o.getPopupContainer,v=d.useState({}),b=(0,s.default)(v,2),y=b[0],x=b[1],w=function(e,t){x((function(a){return(0,l.default)((0,l.default)({},a),(0,i.default)({},e,t))}))},C=function(e,t){return e||(t?"rtl"===g?"left":"right":"top")},S=function(t){var a=t.tooltipPrefixCls,o=t.prefixCls,n=t.info,r=n.value,i=n.dragging,s=n.index,c=f(n,["value","dragging","index"]),p=e.tipFormatter,g=e.tooltipVisible,v=e.tooltipPlacement,b=e.getTooltipPopupContainer,x=e.vertical,S=!!p&&(y[s]||i),Z=g||void 0===g&&S;return d.createElement(h.default,{prefixCls:a,title:p?p(r):"",visible:Z,placement:C(v,x),transitionName:"zoom-down",key:s,overlayClassName:"".concat(o,"-tooltip"),getPopupContainer:b||m},d.createElement(u.Handle,(0,l.default)({},c,{value:r,onMouseEnter:function(){return w(s,!0)},onMouseLeave:function(){return w(s,!1)}})))},Z=e.prefixCls,k=e.tooltipPrefixCls,_=e.range,E=e.className,M=f(e,["prefixCls","tooltipPrefixCls","range","className"]),T=n("slider",Z),O=n("tooltip",k),D=(0,c.default)(E,(0,i.default)({},"".concat(T,"-rtl"),"rtl"===g));return"rtl"!==g||M.vertical||(M.reverse=!M.reverse),"object"===(0,r.default)(_)&&(a=_.draggableTrack),_?d.createElement(u.Range,(0,l.default)({},M,{step:M.step,draggableTrack:a,className:D,ref:t,handle:function(e){return S({tooltipPrefixCls:O,prefixCls:T,info:e})},prefixCls:T})):d.createElement(u.default,(0,l.default)({},M,{step:M.step,className:D,ref:t,handle:function(e){return S({tooltipPrefixCls:O,prefixCls:T,info:e})},prefixCls:T}))}));g.displayName="Slider",g.defaultProps={tipFormatter:function(e){return"number"==typeof e?e.toString():""}};var m=g;t.Z=m},79217:(e,t,a)=>{"use strict";a.d(t,{z:()=>o});const o=e=>{var t;return{columns:e.columns,name:(null==e?void 0:e.datasource_name)||(null==e?void 0:e.name)||"Untitled",dbId:(null==e||null==(t=e.database)?void 0:t.id)||(null==e?void 0:e.dbId),sql:(null==e?void 0:e.sql)||"",schema:null==e?void 0:e.schema}}},79512:function(e,t){var a;!function(o,n){"use strict";function r(){}r.TO_RAD=Math.PI/180,r.TO_DEG=180/Math.PI,r.PI_X2=2*Math.PI,r.PI_DIV4=Math.PI/4;var i=Object.create(r.prototype,{version:{value:"2.0.23"},radius:{value:6378137},minLat:{value:-90},maxLat:{value:90},minLon:{value:-180},maxLon:{value:180},sexagesimalPattern:{value:/^([0-9]{1,3})°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,2}))?)'\s*(([0-9]{1,3}(\.([0-9]{1,4}))?)"\s*)?([NEOSW]?)$/},measures:{value:Object.create(Object.prototype,{m:{value:1},km:{value:.001},cm:{value:100},mm:{value:1e3},mi:{value:1/1609.344},sm:{value:1/1852.216},ft:{value:100/30.48},in:{value:100/2.54},yd:{value:1/.9144}})},prototype:{value:r.prototype},extend:{value:function(e,t){for(var a in e)void 0!==i.prototype[a]&&!0!==t||("function"==typeof e[a]&&"function"==typeof e[a].bind?i.prototype[a]=e[a].bind(i):i.prototype[a]=e[a])}}});void 0===Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*r.TO_RAD}),void 0===Number.prototype.toDeg&&(Number.prototype.toDeg=function(){return this*r.TO_DEG}),i.extend({decimal:{},sexagesimal:{},distance:null,getKeys:function(e){if("[object Array]"==Object.prototype.toString.call(e))return{longitude:e.length>=1?0:n,latitude:e.length>=2?1:n,elevation:e.length>=3?2:n};var t=function(t){var a;return t.every((function(t){return"object"!=typeof e||!e.hasOwnProperty(t)||(a=t,!1)})),a},a=t(["lng","lon","longitude"]),o=t(["lat","latitude"]),r=t(["alt","altitude","elevation","elev"]);return void 0===o&&void 0===a&&void 0===r?n:{latitude:o,longitude:a,elevation:r}},getLat:function(e,t){return!0===t?e[this.getKeys(e).latitude]:this.useDecimal(e[this.getKeys(e).latitude])},latitude:function(e){return this.getLat.call(this,e)},getLon:function(e,t){return!0===t?e[this.getKeys(e).longitude]:this.useDecimal(e[this.getKeys(e).longitude])},longitude:function(e){return this.getLon.call(this,e)},getElev:function(e){return e[this.getKeys(e).elevation]},elevation:function(e){return this.getElev.call(this,e)},coords:function(e,t){var a={latitude:!0===t?e[this.getKeys(e).latitude]:this.useDecimal(e[this.getKeys(e).latitude]),longitude:!0===t?e[this.getKeys(e).longitude]:this.useDecimal(e[this.getKeys(e).longitude])},o=e[this.getKeys(e).elevation];return void 0!==o&&(a.elevation=o),a},ll:function(e,t){return this.coords.call(this,e,t)},validate:function(e){var t=this.getKeys(e);if(void 0===t||void 0===t.latitude||"undefined"===t.longitude)return!1;var a=e[t.latitude],o=e[t.longitude];return!(void 0===a||!this.isDecimal(a)&&!this.isSexagesimal(a)||void 0===o||!this.isDecimal(o)&&!this.isSexagesimal(o)||(a=this.useDecimal(a),o=this.useDecimal(o),a<this.minLat||a>this.maxLat||o<this.minLon||o>this.maxLon))},getDistance:function(e,t,a,o){a=Math.floor(a)||1,o=Math.floor(o)||0;var n,r,l,s,d,u,c,h=this.coords(e),p=this.coords(t),f=6378137,g=6356752.314245,m=1/298.257223563,v=(p.longitude-h.longitude).toRad(),b=Math.atan((1-m)*Math.tan(parseFloat(h.latitude).toRad())),y=Math.atan((1-m)*Math.tan(parseFloat(p.latitude).toRad())),x=Math.sin(b),w=Math.cos(b),C=Math.sin(y),S=Math.cos(y),Z=v,k=100;do{var _=Math.sin(Z),E=Math.cos(Z);if(0===(u=Math.sqrt(S*_*(S*_)+(w*C-x*S*E)*(w*C-x*S*E))))return i.distance=0;n=x*C+w*S*E,r=Math.atan2(u,n),d=n-2*x*C/(s=1-(l=w*S*_/u)*l),isNaN(d)&&(d=0);var M=m/16*s*(4+m*(4-3*s));c=Z,Z=v+(1-M)*m*l*(r+M*u*(d+M*n*(2*d*d-1)))}while(Math.abs(Z-c)>1e-12&&--k>0);if(0===k)return NaN;var T=s*(f*f-g*g)/(g*g),O=T/1024*(256+T*(T*(74-47*T)-128)),D=g*(1+T/16384*(4096+T*(T*(320-175*T)-768)))*(r-O*u*(d+O/4*(n*(2*d*d-1)-O/6*d*(4*u*u-3)*(4*d*d-3))));if(D=D.toFixed(o),void 0!==this.elevation(e)&&void 0!==this.elevation(t)){var R=Math.abs(this.elevation(e)-this.elevation(t));D=Math.sqrt(D*D+R*R)}return this.distance=Math.round(D*Math.pow(10,o)/a)*a/Math.pow(10,o)},getDistanceSimple:function(e,t,a){a=Math.floor(a)||1;var o=Math.round(Math.acos(Math.sin(this.latitude(t).toRad())*Math.sin(this.latitude(e).toRad())+Math.cos(this.latitude(t).toRad())*Math.cos(this.latitude(e).toRad())*Math.cos(this.longitude(e).toRad()-this.longitude(t).toRad()))*this.radius);return i.distance=Math.floor(Math.round(o/a)*a)},getCenter:function(e){var t=e;if("object"==typeof e&&!(e instanceof Array))for(var a in t=[],e)t.push(this.coords(e[a]));if(!t.length)return!1;var o,n,i,l=0,s=0,d=0;t.forEach((function(e){o=this.latitude(e).toRad(),n=this.longitude(e).toRad(),l+=Math.cos(o)*Math.cos(n),s+=Math.cos(o)*Math.sin(n),d+=Math.sin(o)}),this);var u=t.length;return l/=u,s/=u,d/=u,n=Math.atan2(s,l),i=Math.sqrt(l*l+s*s),{latitude:((o=Math.atan2(d,i))*r.TO_DEG).toFixed(6),longitude:(n*r.TO_DEG).toFixed(6)}},getBounds:function(e){if(!e.length)return!1;var t=this.elevation(e[0]),a={maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0};void 0!==t&&(a.maxElev=0,a.minElev=1/0);for(var o=0,n=e.length;o<n;++o)a.maxLat=Math.max(this.latitude(e[o]),a.maxLat),a.minLat=Math.min(this.latitude(e[o]),a.minLat),a.maxLng=Math.max(this.longitude(e[o]),a.maxLng),a.minLng=Math.min(this.longitude(e[o]),a.minLng),t&&(a.maxElev=Math.max(this.elevation(e[o]),a.maxElev),a.minElev=Math.min(this.elevation(e[o]),a.minElev));return a},getCenterOfBounds:function(e){var t=this.getBounds(e),a=t.minLat+(t.maxLat-t.minLat)/2,o=t.minLng+(t.maxLng-t.minLng)/2;return{latitude:parseFloat(a.toFixed(6)),longitude:parseFloat(o.toFixed(6))}},getBoundsOfDistance:function(e,t){var a,o,n=this.latitude(e),i=this.longitude(e),l=n.toRad(),s=i.toRad(),d=t/this.radius,u=l-d,c=l+d,h=this.maxLat.toRad(),p=this.minLat.toRad(),f=this.maxLon.toRad(),g=this.minLon.toRad();if(u>p&&c<h){var m=Math.asin(Math.sin(d)/Math.cos(l));(a=s-m)<g&&(a+=r.PI_X2),(o=s+m)>f&&(o-=r.PI_X2)}else u=Math.max(u,p),c=Math.min(c,h),a=g,o=f;return[{latitude:u.toDeg(),longitude:a.toDeg()},{latitude:c.toDeg(),longitude:o.toDeg()}]},isPointInside:function(e,t){for(var a=!1,o=-1,n=t.length,r=n-1;++o<n;r=o)(this.longitude(t[o])<=this.longitude(e)&&this.longitude(e)<this.longitude(t[r])||this.longitude(t[r])<=this.longitude(e)&&this.longitude(e)<this.longitude(t[o]))&&this.latitude(e)<(this.latitude(t[r])-this.latitude(t[o]))*(this.longitude(e)-this.longitude(t[o]))/(this.longitude(t[r])-this.longitude(t[o]))+this.latitude(t[o])&&(a=!a);return a},preparePolygonForIsPointInsideOptimized:function(e){for(var t=0,a=e.length-1;t<e.length;t++)this.longitude(e[a])===this.longitude(e[t])?(e[t].constant=this.latitude(e[t]),e[t].multiple=0):(e[t].constant=this.latitude(e[t])-this.longitude(e[t])*this.latitude(e[a])/(this.longitude(e[a])-this.longitude(e[t]))+this.longitude(e[t])*this.latitude(e[t])/(this.longitude(e[a])-this.longitude(e[t])),e[t].multiple=(this.latitude(e[a])-this.latitude(e[t]))/(this.longitude(e[a])-this.longitude(e[t]))),a=t},isPointInsideWithPreparedPolygon:function(e,t){for(var a=!1,o=this.longitude(e),n=this.latitude(e),r=0,i=t.length-1;r<t.length;r++)(this.longitude(t[r])<o&&this.longitude(t[i])>=o||this.longitude(t[i])<o&&this.longitude(t[r])>=o)&&(a^=o*t[r].multiple+t[r].constant<n),i=r;return a},isInside:function(){return this.isPointInside.apply(this,arguments)},isPointInCircle:function(e,t,a){return this.getDistance(e,t)<a},withinRadius:function(){return this.isPointInCircle.apply(this,arguments)},getRhumbLineBearing:function(e,t){var a=this.longitude(t).toRad()-this.longitude(e).toRad(),o=Math.log(Math.tan(this.latitude(t).toRad()/2+r.PI_DIV4)/Math.tan(this.latitude(e).toRad()/2+r.PI_DIV4));return Math.abs(a)>Math.PI&&(a=a>0?-1*(r.PI_X2-a):r.PI_X2+a),(Math.atan2(a,o).toDeg()+360)%360},getBearing:function(e,t){return t.latitude=this.latitude(t),t.longitude=this.longitude(t),e.latitude=this.latitude(e),e.longitude=this.longitude(e),(Math.atan2(Math.sin(t.longitude.toRad()-e.longitude.toRad())*Math.cos(t.latitude.toRad()),Math.cos(e.latitude.toRad())*Math.sin(t.latitude.toRad())-Math.sin(e.latitude.toRad())*Math.cos(t.latitude.toRad())*Math.cos(t.longitude.toRad()-e.longitude.toRad())).toDeg()+360)%360},getCompassDirection:function(e,t,a){var o,n;switch(n="circle"==a?this.getBearing(e,t):this.getRhumbLineBearing(e,t),Math.round(n/22.5)){case 1:o={exact:"NNE",rough:"N"};break;case 2:o={exact:"NE",rough:"N"};break;case 3:o={exact:"ENE",rough:"E"};break;case 4:o={exact:"E",rough:"E"};break;case 5:o={exact:"ESE",rough:"E"};break;case 6:o={exact:"SE",rough:"E"};break;case 7:o={exact:"SSE",rough:"S"};break;case 8:o={exact:"S",rough:"S"};break;case 9:o={exact:"SSW",rough:"S"};break;case 10:o={exact:"SW",rough:"S"};break;case 11:o={exact:"WSW",rough:"W"};break;case 12:o={exact:"W",rough:"W"};break;case 13:o={exact:"WNW",rough:"W"};break;case 14:o={exact:"NW",rough:"W"};break;case 15:o={exact:"NNW",rough:"N"};break;default:o={exact:"N",rough:"N"}}return o.bearing=n,o},getDirection:function(e,t,a){return this.getCompassDirection.apply(this,arguments)},orderByDistance:function(e,t){return Object.keys(t).map((function(a){var o=this.getDistance(e,t[a]),n=Object.create(t[a]);return n.distance=o,n.key=a,n}),this).sort((function(e,t){return e.distance-t.distance}))},isPointInLine:function(e,t,a){return(this.getDistance(t,e,1,3)+this.getDistance(e,a,1,3)).toFixed(3)==this.getDistance(t,a,1,3)},isPointNearLine:function(e,t,a,o){return this.getDistanceFromLine(e,t,a)<o},getDistanceFromLine:function(e,t,a){var o=this.getDistance(t,e,1,3),n=this.getDistance(e,a,1,3),r=this.getDistance(t,a,1,3),i=Math.acos((o*o+r*r-n*n)/(2*o*r)),l=Math.acos((n*n+r*r-o*o)/(2*n*r));return i>Math.PI/2?o:l>Math.PI/2?n:Math.sin(i)*o},findNearest:function(e,t,a,o){a=a||0,o=o||1;var n=this.orderByDistance(e,t);return 1===o?n[a]:n.splice(a,o)},getPathLength:function(e){for(var t,a=0,o=0,n=e.length;o<n;++o)t&&(a+=this.getDistance(this.coords(e[o]),t)),t=this.coords(e[o]);return a},getSpeed:function(e,t,a){var o=a&&a.unit||"km";"mph"==o?o="mi":"kmh"==o&&(o="km");var n=i.getDistance(e,t)/(1*t.time/1e3-1*e.time/1e3)*3600;return Math.round(n*this.measures[o]*1e4)/1e4},computeDestinationPoint:function(e,t,a,o){var n=this.latitude(e),r=this.longitude(e);o=void 0===o?this.radius:Number(o);var i=Number(t)/o,l=Number(a).toRad(),s=Number(n).toRad(),d=Number(r).toRad(),u=Math.asin(Math.sin(s)*Math.cos(i)+Math.cos(s)*Math.sin(i)*Math.cos(l)),c=d+Math.atan2(Math.sin(l)*Math.sin(i)*Math.cos(s),Math.cos(i)-Math.sin(s)*Math.sin(u));return c=(c+3*Math.PI)%(2*Math.PI)-Math.PI,{latitude:u.toDeg(),longitude:c.toDeg()}},convertUnit:function(e,t,a){if(0===t)return 0;if(void 0===t){if(null===this.distance)throw new Error("No distance was given");if(0===this.distance)return 0;t=this.distance}if(e=e||"m",a=null==a?4:a,void 0!==this.measures[e])return this.round(t*this.measures[e],a);throw new Error("Unknown unit for conversion.")},useDecimal:function(e){if("[object Array]"===Object.prototype.toString.call(e)){var t=this;return e=e.map((function(e){if(t.isDecimal(e))return t.useDecimal(e);if("object"==typeof e){if(t.validate(e))return t.coords(e);for(var a in e)e[a]=t.useDecimal(e[a]);return e}return t.isSexagesimal(e)?t.sexagesimal2decimal(e):e})),e}if("object"==typeof e&&this.validate(e))return this.coords(e);if("object"==typeof e){for(var a in e)e[a]=this.useDecimal(e[a]);return e}if(this.isDecimal(e))return parseFloat(e);if(!0===this.isSexagesimal(e))return parseFloat(this.sexagesimal2decimal(e));throw new Error("Unknown format.")},decimal2sexagesimal:function(e){if(e in this.sexagesimal)return this.sexagesimal[e];var t=e.toString().split("."),a=Math.abs(t[0]),o=60*("0."+(t[1]||0)),n=o.toString().split(".");return o=Math.floor(o),n=(60*("0."+(n[1]||0))).toFixed(2),this.sexagesimal[e]=a+"° "+o+"' "+n+'"',this.sexagesimal[e]},sexagesimal2decimal:function(e){if(e in this.decimal)return this.decimal[e];var t=new RegExp(this.sexagesimalPattern).exec(e),a=0,o=0;t&&(a=parseFloat(t[2]/60),o=parseFloat(t[4]/3600)||0);var n=(parseFloat(t[1])+a+o).toFixed(8);return n="S"==t[7]||"W"==t[7]?parseFloat(-n):parseFloat(n),this.decimal[e]=n,n},isDecimal:function(e){return e=e.toString().replace(/\s*/,""),!isNaN(parseFloat(e))&&parseFloat(e)==e},isSexagesimal:function(e){return e=e.toString().replace(/\s*/,""),this.sexagesimalPattern.test(e)},round:function(e,t){var a=Math.pow(10,t);return Math.round(e*a)/a}}),void 0!==e.exports?(e.exports=i,"object"==typeof o&&(o.geolib=i)):(a=function(){return i}.apply(t,[]))===n||(e.exports=a)}(this)},41143:e=>{"use strict";e.exports=function(e,t,a,o,n,r,i,l){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[a,o,n,r,i,l],u=0;(s=new Error(t.replace(/%s/g,(function(){return d[u++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},54290:(e,t,a)=>{var o=a(6557);e.exports=function(e){return"function"==typeof e?e:o}},66073:(e,t,a)=>{e.exports=a(84486)},84486:(e,t,a)=>{var o=a(77412),n=a(89881),r=a(54290),i=a(1469);e.exports=function(e,t){return(i(e)?o:n)(e,r(t))}},2525:(e,t,a)=>{var o=a(47816),n=a(54290);e.exports=function(e,t){return e&&o(e,n(t))}},90233:(e,t,a)=>{"use strict";a.d(t,{Lu:()=>l,tL:()=>r});var o=a(76826),n=a.n(o);const r={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0},i=(e,t)=>String(e.rankedValue).localeCompare(String(t.rankedValue));function l(e,t,a){void 0===a&&(a={});const{keys:o,threshold:n=r.MATCHES,baseSort:l=i,sorter:u=(e=>e.sort(((e,t)=>d(e,t,l))))}=a,h=e.reduce((function(e,i,l){const d=function(e,t,a,o){if(!t)return{rankedValue:e,rank:s(e,a,o),keyIndex:-1,keyThreshold:o.threshold};const n=function(e,t){const a=[];for(let o=0,n=t.length;o<n;o++){const n=t[o],r=p(n),i=c(e,n);for(let e=0,t=i.length;e<t;e++)a.push({itemValue:i[e],attributes:r})}return a}(e,t);return n.reduce(((e,t,n)=>{let{rank:i,rankedValue:l,keyIndex:d,keyThreshold:u}=e,{itemValue:c,attributes:h}=t,p=s(c,a,o),f=l;const{minRanking:g,maxRanking:m,threshold:v}=h;return p<g&&p>=r.MATCHES?p=g:p>m&&(p=m),p>i&&(i=p,d=n,u=v,f=c),{rankedValue:f,rank:i,keyIndex:d,keyThreshold:u}}),{rankedValue:e,rank:r.NO_MATCH,keyIndex:-1,keyThreshold:o.threshold})}(i,o,t,a),{rank:u,keyThreshold:h=n}=d;return u>=h&&e.push({...d,item:i,index:l}),e}),[]);return u(h).map((e=>{let{item:t}=e;return t}))}function s(e,t,a){return e=u(e,a),(t=u(t,a)).length>e.length?r.NO_MATCH:e===t?r.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase())===(t=t.toLowerCase())?r.EQUAL:e.startsWith(t)?r.STARTS_WITH:e.includes(` ${t}`)?r.WORD_STARTS_WITH:e.includes(t)?r.CONTAINS:1===t.length?r.NO_MATCH:function(e){let t="";return e.split(" ").forEach((e=>{e.split("-").forEach((e=>{t+=e.substr(0,1)}))})),t}(e).includes(t)?r.ACRONYM:function(e,t){let a=0,o=0;function n(e,t,o){for(let n=o,r=t.length;n<r;n++)if(t[n]===e)return a+=1,n+1;return-1}const i=n(t[0],e,0);if(i<0)return r.NO_MATCH;o=i;for(let a=1,i=t.length;a<i;a++)if(o=n(t[a],e,o),!(o>-1))return r.NO_MATCH;return function(e){const o=1/e,n=a/t.length;return r.MATCHES+n*o}(o-i)}(e,t)}function d(e,t,a){const{rank:o,keyIndex:n}=e,{rank:r,keyIndex:i}=t;return o===r?n===i?a(e,t):n<i?-1:1:o>r?-1:1}function u(e,t){let{keepDiacritics:a}=t;return e=`${e}`,a||(e=n()(e)),e}function c(e,t){let a;if("object"==typeof t&&(t=t.key),"function"==typeof t)a=t(e);else if(null==e)a=null;else if(Object.hasOwn(e,t))a=e[t];else{if(t.includes("."))return function(e,t){const a=e.split(".");let o=[t];for(let e=0,t=a.length;e<t;e++){const t=a[e];let n=[];for(let e=0,a=o.length;e<a;e++){const a=o[e];if(null!=a)if(Object.hasOwn(a,t)){const e=a[t];null!=e&&n.push(e)}else"*"===t&&(n=n.concat(a))}o=n}return Array.isArray(o[0])?[].concat(...o):o}(t,e);a=null}return null==a?[]:Array.isArray(a)?a:[String(a)]}l.rankings=r;const h={maxRanking:1/0,minRanking:-1/0};function p(e){return"string"==typeof e?h:{...h,...e}}},53893:(e,t,a)=>{"use strict";a.r(t),a.d(t,{amber:()=>m,black:()=>E,blue:()=>s,blueGrey:()=>w,brown:()=>y,cyan:()=>u,darkIcons:()=>Z,darkText:()=>C,deepOrange:()=>b,deepPurple:()=>i,default:()=>M,green:()=>h,grey:()=>x,indigo:()=>l,lightBlue:()=>d,lightGreen:()=>p,lightIcons:()=>k,lightText:()=>S,lime:()=>f,orange:()=>v,pink:()=>n,purple:()=>r,red:()=>o,teal:()=>c,white:()=>_,yellow:()=>g});var o={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},n={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},r={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},i={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},l={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},s={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},d={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},u={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},c={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},h={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},p={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},f={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},g={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},m={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},v={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},b={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},y={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},x={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},w={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},C={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},S={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},Z={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},k={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},_="#ffffff",E="#000000";const M={red:o,pink:n,purple:r,deepPurple:i,indigo:l,blue:s,lightBlue:d,cyan:u,teal:c,green:h,lightGreen:p,lime:f,yellow:g,amber:m,orange:v,deepOrange:b,brown:y,grey:x,blueGrey:w,darkText:C,lightText:S,darkIcons:Z,lightIcons:k,white:_,black:E}},9563:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlphaPicker=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},n=s(a(67294)),r=s(a(79941)),i=a(1150),l=s(a(82519));function s(e){return e&&e.__esModule?e:{default:e}}var d=t.AlphaPicker=function(e){var t=e.rgb,a=e.hsl,l=e.width,s=e.height,d=e.onChange,u=e.direction,c=e.style,h=e.renderers,p=e.pointer,f=e.className,g=void 0===f?"":f,m=(0,r.default)({default:{picker:{position:"relative",width:l,height:s},alpha:{radius:"2px",style:c}}});return n.default.createElement("div",{style:m.picker,className:"alpha-picker "+g},n.default.createElement(i.Alpha,o({},m.alpha,{rgb:t,hsl:a,pointer:p,renderers:h,onChange:d,direction:u})))};d.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:l.default},t.default=(0,i.ColorWrap)(d)},82519:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlphaPointer=void 0;var o=r(a(67294)),n=r(a(79941));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.AlphaPointer=function(e){var t=e.direction,a=(0,n.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return o.default.createElement("div",{style:a.picker})};t.default=i},88858:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;var o=d(a(67294)),n=d(a(45697)),r=d(a(79941)),i=d(a(64809)),l=a(1150),s=d(a(53014));function d(e){return e&&e.__esModule?e:{default:e}}var u=t.Block=function(e){var t=e.onChange,a=e.onSwatchHover,n=e.hex,d=e.colors,u=e.width,c=e.triangle,h=e.className,p=void 0===h?"":h,f="transparent"===n,g=function(e,a){i.default.isValidHex(e)&&t({hex:e,source:"hex"},a)},m=(0,r.default)({default:{card:{width:u,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:n,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:i.default.getContrastingColor(n),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+n+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},{"hide-triangle":"hide"===c});return o.default.createElement("div",{style:m.card,className:"block-picker "+p},o.default.createElement("div",{style:m.triangle}),o.default.createElement("div",{style:m.head},f&&o.default.createElement(l.Checkboard,{borderRadius:"6px 6px 0 0"}),o.default.createElement("div",{style:m.label},n)),o.default.createElement("div",{style:m.body},o.default.createElement(s.default,{colors:d,onClick:g,onSwatchHover:a}),o.default.createElement(l.EditableInput,{style:{input:m.input},value:n,onChange:g})))};u.propTypes={width:n.default.oneOfType([n.default.string,n.default.number]),colors:n.default.arrayOf(n.default.string),triangle:n.default.oneOf(["top","hide"])},u.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top"},t.default=(0,l.ColorWrap)(u)},53014:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockSwatches=void 0;var o=l(a(67294)),n=l(a(79941)),r=l(a(87740)),i=a(1150);function l(e){return e&&e.__esModule?e:{default:e}}var s=t.BlockSwatches=function(e){var t=e.colors,a=e.onClick,l=e.onSwatchHover,s=(0,n.default)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return o.default.createElement("div",{style:s.swatches},(0,r.default)(t,(function(e){return o.default.createElement(i.Swatch,{key:e,color:e,style:s.swatch,onClick:a,onHover:l,focusStyle:{boxShadow:"0 0 4px "+e}})})),o.default.createElement("div",{style:s.clear}))};t.default=s},53891:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome=void 0;var o=u(a(67294)),n=u(a(45697)),r=u(a(79941)),i=a(1150),l=u(a(32564)),s=u(a(14066)),d=u(a(20289));function u(e){return e&&e.__esModule?e:{default:e}}var c=t.Chrome=function(e){var t=e.onChange,a=e.disableAlpha,n=e.rgb,u=e.hsl,c=e.hsv,h=e.hex,p=e.renderers,f=e.className,g=void 0===f?"":f,m=(0,r.default)({default:{picker:{background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",width:"225px",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+n.r+", "+n.g+", "+n.b+", "+n.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},{disableAlpha:a});return o.default.createElement("div",{style:m.picker,className:"chrome-picker "+g},o.default.createElement("div",{style:m.saturation},o.default.createElement(i.Saturation,{style:m.Saturation,hsl:u,hsv:c,pointer:d.default,onChange:t})),o.default.createElement("div",{style:m.body},o.default.createElement("div",{style:m.controls,className:"flexbox-fix"},o.default.createElement("div",{style:m.color},o.default.createElement("div",{style:m.swatch},o.default.createElement("div",{style:m.active}),o.default.createElement(i.Checkboard,{renderers:p}))),o.default.createElement("div",{style:m.toggles},o.default.createElement("div",{style:m.hue},o.default.createElement(i.Hue,{style:m.Hue,hsl:u,pointer:s.default,onChange:t})),o.default.createElement("div",{style:m.alpha},o.default.createElement(i.Alpha,{style:m.Alpha,rgb:n,hsl:u,pointer:s.default,renderers:p,onChange:t})))),o.default.createElement(l.default,{rgb:n,hsl:u,hex:h,onChange:t,disableAlpha:a})))};c.propTypes={disableAlpha:n.default.bool},c.defaultProps={disableAlpha:!1},t.default=(0,i.ColorWrap)(c)},32564:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromeFields=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=s(a(67294)),r=s(a(79941)),i=s(a(64809)),l=a(1150);function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=t.ChromeFields=function(e){function t(){var e,a,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=o=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),o.state={view:""},o.toggleViews=function(){"hex"===o.state.view?o.setState({view:"rgb"}):"rgb"===o.state.view?o.setState({view:"hsl"}):"hsl"===o.state.view&&(1===o.props.hsl.a?o.setState({view:"hex"}):o.setState({view:"rgb"}))},o.handleChange=function(e,t){e.hex?i.default.isValidHex(e.hex)&&o.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?o.props.onChange({r:e.r||o.props.rgb.r,g:e.g||o.props.rgb.g,b:e.b||o.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),o.props.onChange({h:o.props.hsl.h,s:o.props.hsl.s,l:o.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&o.props.onChange({h:e.h||o.props.hsl.h,s:Number(e.s&&e.s||o.props.hsl.s),l:Number(e.l&&e.l||o.props.hsl.l),source:"hsl"},t)},o.showHighlight=function(e){e.target.style.background="#eee"},o.hideHighlight=function(e){e.target.style.background="transparent"},d(o,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){1===this.props.hsl.a&&"hex"!==this.state.view?this.setState({view:"hex"}):"rgb"!==this.state.view&&"hsl"!==this.state.view&&this.setState({view:"rgb"})}},{key:"componentWillReceiveProps",value:function(e){1!==e.hsl.a&&"hex"===this.state.view&&this.setState({view:"rgb"})}},{key:"render",value:function(){var e=this,t=(0,r.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),a=void 0;return"hex"===this.state.view?a=n.default.createElement("div",{style:t.fields,className:"flexbox-fix"},n.default.createElement("div",{style:t.field},n.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?a=n.default.createElement("div",{style:t.fields,className:"flexbox-fix"},n.default.createElement("div",{style:t.field},n.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),n.default.createElement("div",{style:t.field},n.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),n.default.createElement("div",{style:t.field},n.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),n.default.createElement("div",{style:t.alpha},n.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(a=n.default.createElement("div",{style:t.fields,className:"flexbox-fix"},n.default.createElement("div",{style:t.field},n.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),n.default.createElement("div",{style:t.field},n.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),n.default.createElement("div",{style:t.field},n.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),n.default.createElement("div",{style:t.alpha},n.default.createElement(l.EditableInput,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),n.default.createElement("div",{style:t.wrap,className:"flexbox-fix"},a,n.default.createElement("div",{style:t.toggle},n.default.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},n.default.createElement("svg",{style:t.svg,viewBox:"0 0 24 24",onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight},n.default.createElement("path",{ref:function(t){return e.iconUp=t},fill:"#333",d:"M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}),n.default.createElement("path",{ref:function(t){return e.iconDown=t},fill:"#333",d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15Z"})))))}}]),t}(n.default.Component);t.default=u},14066:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromePointer=void 0;var o=r(a(67294)),n=r(a(79941));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.ChromePointer=function(){var e=(0,n.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return o.default.createElement("div",{style:e.picker})};t.default=i},20289:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromePointerCircle=void 0;var o=r(a(67294)),n=r(a(79941));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.ChromePointerCircle=function(){var e=(0,n.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return o.default.createElement("div",{style:e.picker})};t.default=i},9703:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Circle=void 0;var o=u(a(67294)),n=u(a(45697)),r=u(a(79941)),i=u(a(87740)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(53893)),s=a(1150),d=u(a(26249));function u(e){return e&&e.__esModule?e:{default:e}}var c=t.Circle=function(e){var t=e.width,a=e.onChange,n=e.onSwatchHover,l=e.colors,s=e.hex,u=e.circleSize,c=e.circleSpacing,h=e.className,p=void 0===h?"":h,f=(0,r.default)({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-c,marginBottom:-c}}}),g=function(e,t){return a({hex:e,source:"hex"},t)};return o.default.createElement("div",{style:f.card,className:"circle-picker "+p},(0,i.default)(l,(function(e){return o.default.createElement(d.default,{key:e,color:e,onClick:g,onSwatchHover:n,active:s===e.toLowerCase(),circleSize:u,circleSpacing:c})})))};c.propTypes={width:n.default.oneOfType([n.default.string,n.default.number]),circleSize:n.default.number,circleSpacing:n.default.number},c.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[l.red[500],l.pink[500],l.purple[500],l.deepPurple[500],l.indigo[500],l.blue[500],l.lightBlue[500],l.cyan[500],l.teal[500],l.green[500],l.lightGreen[500],l.lime[500],l.yellow[500],l.amber[500],l.orange[500],l.deepOrange[500],l.brown[500],l.blueGrey[500]]},t.default=(0,s.ColorWrap)(c)},26249:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CircleSwatch=void 0;var o=l(a(67294)),n=a(79941),r=l(n),i=a(1150);function l(e){return e&&e.__esModule?e:{default:e}}var s=t.CircleSwatch=function(e){var t=e.color,a=e.onClick,n=e.onSwatchHover,l=e.hover,s=e.active,d=e.circleSize,u=e.circleSpacing,c=(0,r.default)({default:{swatch:{width:d,height:d,marginRight:u,marginBottom:u,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+d/2+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:l,active:s});return o.default.createElement("div",{style:c.swatch},o.default.createElement(i.Swatch,{style:c.Swatch,color:t,onClick:a,onHover:n,focusStyle:{boxShadow:c.Swatch.boxShadow+", 0 0 5px "+t}}))};s.defaultProps={circleSize:28,circleSpacing:14},t.default=(0,n.handleHover)(s)},57319:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Alpha=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),r=a(67294),i=u(r),l=u(a(79941)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(66713)),d=u(a(34349));function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=t.Alpha=function(e){function t(){var e,a,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=o=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),o.handleChange=function(e,t){var a=s.calculateChange(e,t,o.props,o.container);a&&o.props.onChange&&o.props.onChange(a,e)},o.handleMouseDown=function(e){o.handleChange(e,!0),window.addEventListener("mousemove",o.handleChange),window.addEventListener("mouseup",o.handleMouseUp)},o.handleMouseUp=function(){o.unbindEventListeners()},o.unbindEventListeners=function(){window.removeEventListener("mousemove",o.handleChange),window.removeEventListener("mouseup",o.handleMouseUp)},c(o,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,a=(0,l.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:o({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return i.default.createElement("div",{style:a.alpha},i.default.createElement("div",{style:a.checkboard},i.default.createElement(d.default,{renderers:this.props.renderers})),i.default.createElement("div",{style:a.gradient}),i.default.createElement("div",{style:a.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},i.default.createElement("div",{style:a.pointer},this.props.pointer?i.default.createElement(this.props.pointer,this.props):i.default.createElement("div",{style:a.slider}))))}}]),t}(r.PureComponent||r.Component);t.default=h},34349:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Checkboard=void 0;var o=i(a(67294)),n=i(a(79941)),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(45704));function i(e){return e&&e.__esModule?e:{default:e}}var l=t.Checkboard=function(e){var t=e.white,a=e.grey,i=e.size,l=e.renderers,s=e.borderRadius,d=e.boxShadow,u=(0,n.default)({default:{grid:{borderRadius:s,boxShadow:d,absolute:"0px 0px 0px 0px",background:"url("+r.get(t,a,i,l.canvas)+") center left"}}});return o.default.createElement("div",{style:u.grid})};l.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},t.default=l},88288:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorWrap=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),r=a(67294),i=d(r),l=d(a(23279)),s=d(a(64809));function d(e){return e&&e.__esModule?e:{default:e}}var u=t.ColorWrap=function(e){var t=function(t){function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return t.handleChange=function(e,a){if(s.default.simpleCheckForValidColor(e)){var o=s.default.toState(e,e.h||t.state.oldHue);t.setState(o),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,o,a),t.props.onChange&&t.props.onChange(o,a)}},t.handleSwatchHover=function(e,a){if(s.default.simpleCheckForValidColor(e)){var o=s.default.toState(e,e.h||t.state.oldHue);t.setState(o),t.props.onSwatchHover&&t.props.onSwatchHover(o,a)}},t.state=o({},s.default.toState(e.color,0)),t.debounce=(0,l.default)((function(e,t,a){e(t,a)}),100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,t),n(a,[{key:"componentWillReceiveProps",value:function(e){this.setState(o({},s.default.toState(e.color,this.state.oldHue)))}},{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),i.default.createElement(e,o({},this.props,this.state,{onChange:this.handleChange},t))}}]),a}(r.PureComponent||r.Component);return t.propTypes=o({},e.propTypes),t.defaultProps=o({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t};t.default=u},27747:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableInput=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=a(67294),r=l(n),i=l(a(79941));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d=t.EditableInput=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.handleBlur=function(){a.state.blurValue&&a.setState({value:a.state.blurValue,blurValue:null})},a.handleChange=function(e){a.props.label?a.props.onChange&&a.props.onChange(s({},a.props.label,e.target.value),e):a.props.onChange&&a.props.onChange(e.target.value,e),a.setState({value:e.target.value})},a.handleKeyDown=function(e){var t=String(e.target.value),o=t.indexOf("%")>-1,n=Number(t.replace(/%/g,""));if(!isNaN(n)){var r=a.props.arrowOffset||1;38===e.keyCode&&(null!==a.props.label?a.props.onChange&&a.props.onChange(s({},a.props.label,n+r),e):a.props.onChange&&a.props.onChange(n+r,e),o?a.setState({value:n+r+"%"}):a.setState({value:n+r})),40===e.keyCode&&(null!==a.props.label?a.props.onChange&&a.props.onChange(s({},a.props.label,n-r),e):a.props.onChange&&a.props.onChange(n-r,e),o?a.setState({value:n-r+"%"}):a.setState({value:n-r}))}},a.handleDrag=function(e){if(a.props.dragLabel){var t=Math.round(a.props.value+e.movementX);t>=0&&t<=a.props.dragMax&&a.props.onChange&&a.props.onChange(s({},a.props.label,t),e)}},a.handleMouseDown=function(e){a.props.dragLabel&&(e.preventDefault(),a.handleDrag(e),window.addEventListener("mousemove",a.handleDrag),window.addEventListener("mouseup",a.handleMouseUp))},a.handleMouseUp=function(){a.unbindEventListeners()},a.unbindEventListeners=function(){window.removeEventListener("mousemove",a.handleDrag),window.removeEventListener("mouseup",a.handleMouseUp)},a.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.input;e.value!==this.state.value&&(t===document.activeElement?this.setState({blurValue:String(e.value).toUpperCase()}):this.setState({value:String(e.value).toUpperCase(),blurValue:!this.state.blurValue&&String(e.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=(0,i.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return r.default.createElement("div",{style:t.wrap},r.default.createElement("input",{style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?r.default.createElement("span",{style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(n.PureComponent||n.Component);t.default=d},26358:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hue=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=a(67294),r=s(n),i=s(a(79941)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(33716));function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=t.Hue=function(e){function t(){var e,a,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=o=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),o.handleChange=function(e,t){var a=l.calculateChange(e,t,o.props,o.container);a&&o.props.onChange&&o.props.onChange(a,e)},o.handleMouseDown=function(e){o.handleChange(e,!0),window.addEventListener("mousemove",o.handleChange),window.addEventListener("mouseup",o.handleMouseUp)},o.handleMouseUp=function(){o.unbindEventListeners()},d(o,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,a=void 0===t?"horizontal":t,o=(0,i.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===a});return r.default.createElement("div",{style:o.hue},r.default.createElement("div",{className:"hue-"+a,style:o.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},r.default.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),r.default.createElement("div",{style:o.pointer},this.props.pointer?r.default.createElement(this.props.pointer,this.props):r.default.createElement("div",{style:o.slider}))))}}]),t}(n.PureComponent||n.Component);t.default=u},96207:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Raised=void 0;var o=i(a(67294)),n=i(a(45697)),r=i(a(79941));function i(e){return e&&e.__esModule?e:{default:e}}var l=t.Raised=function(e){var t=e.zDepth,a=e.radius,n=e.background,i=e.children,l=(0,r.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:a,background:n}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},{"zDepth-1":1===t});return o.default.createElement("div",{style:l.wrap},o.default.createElement("div",{style:l.bg}),o.default.createElement("div",{style:l.content},i))};l.propTypes={background:n.default.string,zDepth:n.default.oneOf([0,1,2,3,4,5]),radius:n.default.number},l.defaultProps={background:"#fff",zDepth:1,radius:2},t.default=l},76659:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Saturation=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=a(67294),r=d(n),i=d(a(79941)),l=d(a(23493)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(37599));function d(e){return e&&e.__esModule?e:{default:e}}var u=t.Saturation=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleChange=function(e,t){a.props.onChange&&a.throttle(a.props.onChange,s.calculateChange(e,t,a.props,a.container),e)},a.handleMouseDown=function(e){a.handleChange(e,!0),window.addEventListener("mousemove",a.handleChange),window.addEventListener("mouseup",a.handleMouseUp)},a.handleMouseUp=function(){a.unbindEventListeners()},a.throttle=(0,l.default)((function(e,t,a){e(t,a)}),50),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},a=t.color,o=t.white,n=t.black,l=t.pointer,s=t.circle,d=(0,i.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:a,white:o,black:n,pointer:l,circle:s}},{custom:!!this.props.style});return r.default.createElement("div",{style:d.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},r.default.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),r.default.createElement("div",{style:d.white,className:"saturation-white"},r.default.createElement("div",{style:d.black,className:"saturation-black"}),r.default.createElement("div",{style:d.pointer},this.props.pointer?r.default.createElement(this.props.pointer,this.props):r.default.createElement("div",{style:d.circle}))))}}]),t}(n.PureComponent||n.Component);t.default=u},62489:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatch=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},n=s(a(67294)),r=s(a(79941)),i=a(82538),l=a(1150);function s(e){return e&&e.__esModule?e:{default:e}}var d=t.Swatch=function(e){var t=e.color,a=e.style,i=e.onClick,s=void 0===i?function(){}:i,d=e.onHover,u=e.title,c=void 0===u?t:u,h=e.children,p=e.focus,f=e.focusStyle,g=void 0===f?{}:f,m="transparent"===t,v=(0,r.default)({default:{swatch:o({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},a,p?g:{})}}),b={};return d&&(b.onMouseOver=function(e){return d(t,e)}),n.default.createElement("div",o({style:v.swatch,onClick:function(e){return s(t,e)},title:c,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&s(t,e)}},b),h,m&&n.default.createElement(l.Checkboard,{borderRadius:v.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};t.default=(0,i.handleFocus)(d)},1150:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(57319);Object.defineProperty(t,"Alpha",{enumerable:!0,get:function(){return c(o).default}});var n=a(34349);Object.defineProperty(t,"Checkboard",{enumerable:!0,get:function(){return c(n).default}});var r=a(27747);Object.defineProperty(t,"EditableInput",{enumerable:!0,get:function(){return c(r).default}});var i=a(26358);Object.defineProperty(t,"Hue",{enumerable:!0,get:function(){return c(i).default}});var l=a(96207);Object.defineProperty(t,"Raised",{enumerable:!0,get:function(){return c(l).default}});var s=a(76659);Object.defineProperty(t,"Saturation",{enumerable:!0,get:function(){return c(s).default}});var d=a(88288);Object.defineProperty(t,"ColorWrap",{enumerable:!0,get:function(){return c(d).default}});var u=a(62489);function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"Swatch",{enumerable:!0,get:function(){return c(u).default}})},99766:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Compact=void 0;var o=c(a(67294)),n=c(a(45697)),r=c(a(79941)),i=c(a(87740)),l=c(a(64809)),s=a(1150),d=c(a(49613)),u=c(a(82018));function c(e){return e&&e.__esModule?e:{default:e}}var h=t.Compact=function(e){var t=e.onChange,a=e.onSwatchHover,n=e.colors,c=e.hex,h=e.rgb,p=e.className,f=void 0===p?"":p,g=(0,r.default)({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}}),m=function(e,a){e.hex?l.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},a):t(e,a)};return o.default.createElement(s.Raised,{style:g.Compact},o.default.createElement("div",{style:g.compact,className:"compact-picker "+f},o.default.createElement("div",null,(0,i.default)(n,(function(e){return o.default.createElement(d.default,{key:e,color:e,active:e.toLowerCase()===c,onClick:m,onSwatchHover:a})})),o.default.createElement("div",{style:g.clear})),o.default.createElement(u.default,{hex:c,rgb:h,onChange:m})))};h.propTypes={colors:n.default.arrayOf(n.default.string)},h.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"]},t.default=(0,s.ColorWrap)(h)},49613:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactColor=void 0;var o=l(a(67294)),n=l(a(79941)),r=l(a(64809)),i=a(1150);function l(e){return e&&e.__esModule?e:{default:e}}var s=t.CompactColor=function(e){var t=e.color,a=e.onClick,l=void 0===a?function(){}:a,s=e.onSwatchHover,d=e.active,u=(0,n.default)({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:r.default.getContrastingColor(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:d,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return o.default.createElement(i.Swatch,{style:u.color,color:t,onClick:l,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},o.default.createElement("div",{style:u.dot}))};t.default=s},82018:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompactFields=void 0;var o=i(a(67294)),n=i(a(79941)),r=a(1150);function i(e){return e&&e.__esModule?e:{default:e}}var l=t.CompactFields=function(e){var t=e.hex,a=e.rgb,i=e.onChange,l=(0,n.default)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),s=function(e,t){e.r||e.g||e.b?i({r:e.r||a.r,g:e.g||a.g,b:e.b||a.b,source:"rgb"},t):i({hex:e.hex,source:"hex"},t)};return o.default.createElement("div",{style:l.fields,className:"flexbox-fix"},o.default.createElement("div",{style:l.active}),o.default.createElement(r.EditableInput,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"hex",value:t,onChange:s}),o.default.createElement(r.EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:a.r,onChange:s}),o.default.createElement(r.EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:a.g,onChange:s}),o.default.createElement(r.EditableInput,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:a.b,onChange:s}))};t.default=l},19700:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Github=void 0;var o=d(a(67294)),n=d(a(45697)),r=d(a(79941)),i=d(a(87740)),l=a(1150),s=d(a(13255));function d(e){return e&&e.__esModule?e:{default:e}}var u=t.Github=function(e){var t=e.width,a=e.colors,n=e.onChange,l=e.onSwatchHover,d=e.triangle,u=e.className,c=void 0===u?"":u,h=(0,r.default)({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},{"hide-triangle":"hide"===d,"top-left-triangle":"top-left"===d,"top-right-triangle":"top-right"===d,"bottom-left-triangle":"bottom-left"==d,"bottom-right-triangle":"bottom-right"===d}),p=function(e,t){return n({hex:e,source:"hex"},t)};return o.default.createElement("div",{style:h.card,className:"github-picker "+c},o.default.createElement("div",{style:h.triangleShadow}),o.default.createElement("div",{style:h.triangle}),(0,i.default)(a,(function(e){return o.default.createElement(s.default,{color:e,key:e,onClick:p,onSwatchHover:l})})))};u.propTypes={width:n.default.oneOfType([n.default.string,n.default.number]),colors:n.default.arrayOf(n.default.string),triangle:n.default.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"])},u.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left"},t.default=(0,l.ColorWrap)(u)},13255:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GithubSwatch=void 0;var o=l(a(67294)),n=a(79941),r=l(n),i=a(1150);function l(e){return e&&e.__esModule?e:{default:e}}var s=t.GithubSwatch=function(e){var t=e.hover,a=e.color,n=e.onClick,l=e.onSwatchHover,s={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},d=(0,r.default)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:s}},{hover:t});return o.default.createElement("div",{style:d.swatch},o.default.createElement(i.Swatch,{color:a,onClick:n,onHover:l,focusStyle:s}))};t.default=(0,n.handleHover)(s)},10565:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HuePicker=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},n=s(a(67294)),r=s(a(79941)),i=a(1150),l=s(a(88878));function s(e){return e&&e.__esModule?e:{default:e}}var d=t.HuePicker=function(e){var t=e.width,a=e.height,l=e.onChange,s=e.hsl,d=e.direction,u=e.pointer,c=e.className,h=void 0===c?"":c,p=(0,r.default)({default:{picker:{position:"relative",width:t,height:a},hue:{radius:"2px"}}});return n.default.createElement("div",{style:p.picker,className:"hue-picker "+h},n.default.createElement(i.Hue,o({},p.hue,{hsl:s,pointer:u,onChange:function(e){return l({a:1,h:e.h,l:.5,s:1})},direction:d})))};d.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:l.default},t.default=(0,i.ColorWrap)(d)},88878:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderPointer=void 0;var o=r(a(67294)),n=r(a(79941));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.SliderPointer=function(e){var t=e.direction,a=(0,n.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return o.default.createElement("div",{style:a.picker})};t.default=i},54363:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Material=void 0;var o=l(a(67294)),n=l(a(79941)),r=l(a(64809)),i=a(1150);function l(e){return e&&e.__esModule?e:{default:e}}var s=t.Material=function(e){var t=e.onChange,a=e.hex,l=e.rgb,s=e.className,d=void 0===s?"":s,u=(0,n.default)({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+a,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}}),c=function(e,a){e.hex?r.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},a):(e.r||e.g||e.b)&&t({r:e.r||l.r,g:e.g||l.g,b:e.b||l.b,source:"rgb"},a)};return o.default.createElement(i.Raised,null,o.default.createElement("div",{style:u.material,className:"material-picker "+d},o.default.createElement(i.EditableInput,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"hex",value:a,onChange:c}),o.default.createElement("div",{style:u.split,className:"flexbox-fix"},o.default.createElement("div",{style:u.third},o.default.createElement(i.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:l.r,onChange:c})),o.default.createElement("div",{style:u.third},o.default.createElement(i.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:l.g,onChange:c})),o.default.createElement("div",{style:u.third},o.default.createElement(i.EditableInput,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:l.b,onChange:c})))))};t.default=(0,i.ColorWrap)(s)},33165:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Photoshop=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=p(a(67294)),r=p(a(45697)),i=p(a(79941)),l=a(1150),s=p(a(21962)),d=p(a(31804)),u=p(a(40670)),c=p(a(10170)),h=p(a(29628));function p(e){return e&&e.__esModule?e:{default:e}}var f=t.Photoshop=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.state={currentColor:e.hex},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"render",value:function(){var e=this.props.className,t=void 0===e?"":e,a=(0,i.default)({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}});return n.default.createElement("div",{style:a.picker,className:"photoshop-picker "+t},n.default.createElement("div",{style:a.head},this.props.header),n.default.createElement("div",{style:a.body,className:"flexbox-fix"},n.default.createElement("div",{style:a.saturation},n.default.createElement(l.Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:d.default,onChange:this.props.onChange})),n.default.createElement("div",{style:a.hue},n.default.createElement(l.Hue,{direction:"vertical",hsl:this.props.hsl,pointer:u.default,onChange:this.props.onChange})),n.default.createElement("div",{style:a.controls},n.default.createElement("div",{style:a.top,className:"flexbox-fix"},n.default.createElement("div",{style:a.previews},n.default.createElement(h.default,{rgb:this.props.rgb,currentColor:this.state.currentColor})),n.default.createElement("div",{style:a.actions},n.default.createElement(c.default,{label:"OK",onClick:this.props.onAccept,active:!0}),n.default.createElement(c.default,{label:"Cancel",onClick:this.props.onCancel}),n.default.createElement(s.default,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(n.default.Component);f.propTypes={header:r.default.string},f.defaultProps={header:"Color Picker"},t.default=(0,l.ColorWrap)(f)},10170:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopBotton=void 0;var o=r(a(67294)),n=r(a(79941));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopBotton=function(e){var t=e.onClick,a=e.label,r=e.children,i=e.active,l=(0,n.default)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return o.default.createElement("div",{style:l.button,onClick:t},a||r)};t.default=i},21962:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPicker=void 0;var o=l(a(67294)),n=l(a(79941)),r=l(a(64809)),i=a(1150);function l(e){return e&&e.__esModule?e:{default:e}}var s=t.PhotoshopPicker=function(e){var t=e.onChange,a=e.rgb,l=e.hsv,s=e.hex,d=(0,n.default)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),u=function(e,o){e["#"]?r.default.isValidHex(e["#"])&&t({hex:e["#"],source:"hex"},o):e.r||e.g||e.b?t({r:e.r||a.r,g:e.g||a.g,b:e.b||a.b,source:"rgb"},o):(e.h||e.s||e.v)&&t({h:e.h||l.h,s:e.s||l.s,v:e.v||l.v,source:"hsv"},o)};return o.default.createElement("div",{style:d.fields},o.default.createElement(i.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"h",value:Math.round(l.h),onChange:u}),o.default.createElement(i.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"s",value:Math.round(100*l.s),onChange:u}),o.default.createElement(i.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"v",value:Math.round(100*l.v),onChange:u}),o.default.createElement("div",{style:d.divider}),o.default.createElement(i.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"r",value:a.r,onChange:u}),o.default.createElement(i.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"g",value:a.g,onChange:u}),o.default.createElement(i.EditableInput,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"b",value:a.b,onChange:u}),o.default.createElement("div",{style:d.divider}),o.default.createElement(i.EditableInput,{style:{wrap:d.HEXwrap,input:d.HEXinput,label:d.HEXlabel},label:"#",value:s.replace("#",""),onChange:u}),o.default.createElement("div",{style:d.fieldSymbols},o.default.createElement("div",{style:d.symbol},"°"),o.default.createElement("div",{style:d.symbol},"%"),o.default.createElement("div",{style:d.symbol},"%")))};t.default=s},40670:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPointerCircle=void 0;var o=r(a(67294)),n=r(a(79941));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopPointerCircle=function(){var e=(0,n.default)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return o.default.createElement("div",{style:e.pointer},o.default.createElement("div",{style:e.left},o.default.createElement("div",{style:e.leftInside})),o.default.createElement("div",{style:e.right},o.default.createElement("div",{style:e.rightInside})))};t.default=i},31804:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPointerCircle=void 0;var o=r(a(67294)),n=r(a(79941));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopPointerCircle=function(e){var t=e.hsl,a=(0,n.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return o.default.createElement("div",{style:a.picker})};t.default=i},29628:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoshopPreviews=void 0;var o=r(a(67294)),n=r(a(79941));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.PhotoshopPreviews=function(e){var t=e.rgb,a=e.currentColor,r=(0,n.default)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:a,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return o.default.createElement("div",null,o.default.createElement("div",{style:r.label},"new"),o.default.createElement("div",{style:r.swatches},o.default.createElement("div",{style:r.new}),o.default.createElement("div",{style:r.current})),o.default.createElement("div",{style:r.label},"current"))};t.default=i},89753:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sketch=void 0;var o=d(a(67294)),n=d(a(45697)),r=d(a(79941)),i=a(1150),l=d(a(24530)),s=d(a(13067));function d(e){return e&&e.__esModule?e:{default:e}}var u=t.Sketch=function(e){var t=e.width,a=e.rgb,n=e.hex,d=e.hsv,u=e.hsl,c=e.onChange,h=e.onSwatchHover,p=e.disableAlpha,f=e.presetColors,g=e.renderers,m=e.className,v=void 0===m?"":m,b=(0,r.default)({default:{picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+a.r+","+a.g+","+a.b+","+a.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},{disableAlpha:p});return o.default.createElement("div",{style:b.picker,className:"sketch-picker "+v},o.default.createElement("div",{style:b.saturation},o.default.createElement(i.Saturation,{style:b.Saturation,hsl:u,hsv:d,onChange:c})),o.default.createElement("div",{style:b.controls,className:"flexbox-fix"},o.default.createElement("div",{style:b.sliders},o.default.createElement("div",{style:b.hue},o.default.createElement(i.Hue,{style:b.Hue,hsl:u,onChange:c})),o.default.createElement("div",{style:b.alpha},o.default.createElement(i.Alpha,{style:b.Alpha,rgb:a,hsl:u,renderers:g,onChange:c}))),o.default.createElement("div",{style:b.color},o.default.createElement(i.Checkboard,null),o.default.createElement("div",{style:b.activeColor}))),o.default.createElement(l.default,{rgb:a,hsl:u,hex:n,onChange:c,disableAlpha:p}),o.default.createElement(s.default,{colors:f,onClick:c,onSwatchHover:h}))};u.propTypes={disableAlpha:n.default.bool,width:n.default.oneOfType([n.default.string,n.default.number])},u.defaultProps={disableAlpha:!1,width:200,presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},t.default=(0,i.ColorWrap)(u)},24530:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SketchFields=void 0;var o=l(a(67294)),n=l(a(79941)),r=l(a(64809)),i=a(1150);function l(e){return e&&e.__esModule?e:{default:e}}var s=t.SketchFields=function(e){var t=e.onChange,a=e.rgb,l=e.hsl,s=e.hex,d=e.disableAlpha,u=(0,n.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:d}),c=function(e,o){e.hex?r.default.isValidHex(e.hex)&&t({hex:e.hex,source:"hex"},o):e.r||e.g||e.b?t({r:e.r||a.r,g:e.g||a.g,b:e.b||a.b,a:a.a,source:"rgb"},o):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:l.h,s:l.s,l:l.l,a:e.a,source:"rgb"},o))};return o.default.createElement("div",{style:u.fields,className:"flexbox-fix"},o.default.createElement("div",{style:u.double},o.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"hex",value:s.replace("#",""),onChange:c})),o.default.createElement("div",{style:u.single},o.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"r",value:a.r,onChange:c,dragLabel:"true",dragMax:"255"})),o.default.createElement("div",{style:u.single},o.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"g",value:a.g,onChange:c,dragLabel:"true",dragMax:"255"})),o.default.createElement("div",{style:u.single},o.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"b",value:a.b,onChange:c,dragLabel:"true",dragMax:"255"})),o.default.createElement("div",{style:u.alpha},o.default.createElement(i.EditableInput,{style:{input:u.input,label:u.label},label:"a",value:Math.round(100*a.a),onChange:c,dragLabel:"true",dragMax:"100"})))};t.default=s},13067:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SketchPresetColors=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},n=s(a(67294)),r=s(a(45697)),i=s(a(79941)),l=a(1150);function s(e){return e&&e.__esModule?e:{default:e}}var d=t.SketchPresetColors=function(e){var t=e.colors,a=e.onClick,r=void 0===a?function(){}:a,s=e.onSwatchHover,d=(0,i.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),u=function(e,t){r({hex:e,source:"hex"},t)};return n.default.createElement("div",{style:d.colors,className:"flexbox-fix"},t.map((function(e){var t="string"==typeof e?{color:e}:e,a=""+t.color+(t.title||"");return n.default.createElement("div",{key:a,style:d.swatchWrap},n.default.createElement(l.Swatch,o({},t,{style:d.swatch,onClick:u,onHover:s,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};d.propTypes={colors:r.default.arrayOf(r.default.oneOfType([r.default.string,r.default.shape({color:r.default.string,title:r.default.string})])).isRequired},t.default=d},49857:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Slider=void 0;var o=s(a(67294)),n=s(a(79941)),r=a(1150),i=s(a(6457)),l=s(a(77792));function s(e){return e&&e.__esModule?e:{default:e}}var d=t.Slider=function(e){var t=e.hsl,a=e.onChange,l=e.pointer,s=e.className,d=void 0===s?"":s,u=(0,n.default)({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}});return o.default.createElement("div",{className:"slider-picker "+d},o.default.createElement("div",{style:u.hue},o.default.createElement(r.Hue,{style:u.Hue,hsl:t,pointer:l,onChange:a})),o.default.createElement("div",{style:u.swatches},o.default.createElement(i.default,{hsl:t,onClick:a})))};d.defaultProps={pointer:l.default},t.default=(0,r.ColorWrap)(d)},77792:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderPointer=void 0;var o=r(a(67294)),n=r(a(79941));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.SliderPointer=function(){var e=(0,n.default)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return o.default.createElement("div",{style:e.picker})};t.default=i},64377:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderSwatch=void 0;var o=r(a(67294)),n=r(a(79941));function r(e){return e&&e.__esModule?e:{default:e}}var i=t.SliderSwatch=function(e){var t=e.hsl,a=e.offset,r=e.onClick,i=void 0===r?function(){}:r,l=e.active,s=e.first,d=e.last,u=(0,n.default)({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*a+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:l,first:s,last:d});return o.default.createElement("div",{style:u.swatch,onClick:function(e){return i({h:t.h,s:.5,l:a,source:"hsl"},e)}})};t.default=i},6457:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderSwatches=void 0;var o=i(a(67294)),n=i(a(79941)),r=i(a(64377));function i(e){return e&&e.__esModule?e:{default:e}}var l=t.SliderSwatches=function(e){var t=e.onClick,a=e.hsl,i=(0,n.default)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}});return o.default.createElement("div",{style:i.swatches},o.default.createElement("div",{style:i.swatch},o.default.createElement(r.default,{hsl:a,offset:".80",active:Math.round(100*a.l)/100==.8&&Math.round(100*a.s)/100==.5,onClick:t,first:!0})),o.default.createElement("div",{style:i.swatch},o.default.createElement(r.default,{hsl:a,offset:".65",active:Math.round(100*a.l)/100==.65&&Math.round(100*a.s)/100==.5,onClick:t})),o.default.createElement("div",{style:i.swatch},o.default.createElement(r.default,{hsl:a,offset:".50",active:Math.round(100*a.l)/100==.5&&Math.round(100*a.s)/100==.5,onClick:t})),o.default.createElement("div",{style:i.swatch},o.default.createElement(r.default,{hsl:a,offset:".35",active:Math.round(100*a.l)/100==.35&&Math.round(100*a.s)/100==.5,onClick:t})),o.default.createElement("div",{style:i.swatch},o.default.createElement(r.default,{hsl:a,offset:".20",active:Math.round(100*a.l)/100==.2&&Math.round(100*a.s)/100==.5,onClick:t,last:!0})),o.default.createElement("div",{style:i.clear}))};t.default=l},93926:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Swatches=void 0;var o=c(a(67294)),n=c(a(45697)),r=c(a(79941)),i=c(a(87740)),l=c(a(64809)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(53893)),d=a(1150),u=c(a(23088));function c(e){return e&&e.__esModule?e:{default:e}}var h=t.Swatches=function(e){var t=e.width,a=e.height,n=e.onChange,s=e.onSwatchHover,c=e.colors,h=e.hex,p=e.className,f=void 0===p?"":p,g=(0,r.default)({default:{picker:{width:t,height:a},overflow:{height:a,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}}),m=function(e,t){l.default.isValidHex(e)&&n({hex:e,source:"hex"},t)};return o.default.createElement("div",{style:g.picker,className:"swatches-picker "+f},o.default.createElement(d.Raised,null,o.default.createElement("div",{style:g.overflow},o.default.createElement("div",{style:g.body},(0,i.default)(c,(function(e){return o.default.createElement(u.default,{key:e.toString(),group:e,active:h,onClick:m,onSwatchHover:s})})),o.default.createElement("div",{style:g.clear})))))};h.propTypes={width:n.default.oneOfType([n.default.string,n.default.number]),height:n.default.oneOfType([n.default.string,n.default.number]),colors:n.default.arrayOf(n.default.arrayOf(n.default.string))},h.defaultProps={width:320,height:240,colors:[[s.red[900],s.red[700],s.red[500],s.red[300],s.red[100]],[s.pink[900],s.pink[700],s.pink[500],s.pink[300],s.pink[100]],[s.purple[900],s.purple[700],s.purple[500],s.purple[300],s.purple[100]],[s.deepPurple[900],s.deepPurple[700],s.deepPurple[500],s.deepPurple[300],s.deepPurple[100]],[s.indigo[900],s.indigo[700],s.indigo[500],s.indigo[300],s.indigo[100]],[s.blue[900],s.blue[700],s.blue[500],s.blue[300],s.blue[100]],[s.lightBlue[900],s.lightBlue[700],s.lightBlue[500],s.lightBlue[300],s.lightBlue[100]],[s.cyan[900],s.cyan[700],s.cyan[500],s.cyan[300],s.cyan[100]],[s.teal[900],s.teal[700],s.teal[500],s.teal[300],s.teal[100]],["#194D33",s.green[700],s.green[500],s.green[300],s.green[100]],[s.lightGreen[900],s.lightGreen[700],s.lightGreen[500],s.lightGreen[300],s.lightGreen[100]],[s.lime[900],s.lime[700],s.lime[500],s.lime[300],s.lime[100]],[s.yellow[900],s.yellow[700],s.yellow[500],s.yellow[300],s.yellow[100]],[s.amber[900],s.amber[700],s.amber[500],s.amber[300],s.amber[100]],[s.orange[900],s.orange[700],s.orange[500],s.orange[300],s.orange[100]],[s.deepOrange[900],s.deepOrange[700],s.deepOrange[500],s.deepOrange[300],s.deepOrange[100]],[s.brown[900],s.brown[700],s.brown[500],s.brown[300],s.brown[100]],[s.blueGrey[900],s.blueGrey[700],s.blueGrey[500],s.blueGrey[300],s.blueGrey[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]]},t.default=(0,d.ColorWrap)(h)},85638:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwatchesColor=void 0;var o=l(a(67294)),n=l(a(79941)),r=l(a(64809)),i=a(1150);function l(e){return e&&e.__esModule?e:{default:e}}var s=t.SwatchesColor=function(e){var t=e.color,a=e.onClick,l=void 0===a?function(){}:a,s=e.onSwatchHover,d=e.first,u=e.last,c=e.active,h=(0,n.default)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{fill:r.default.getContrastingColor(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{fill:"#333"}},transparent:{check:{fill:"#333"}}},{first:d,last:u,active:c,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return o.default.createElement(i.Swatch,{color:t,style:h.color,onClick:l,onHover:s,focusStyle:{boxShadow:"0 0 4px "+t}},o.default.createElement("div",{style:h.check},o.default.createElement("svg",{style:{width:"24px",height:"24px"},viewBox:"0 0 24 24"},o.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))))};t.default=s},23088:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SwatchesGroup=void 0;var o=l(a(67294)),n=l(a(79941)),r=l(a(87740)),i=l(a(85638));function l(e){return e&&e.__esModule?e:{default:e}}var s=t.SwatchesGroup=function(e){var t=e.onClick,a=e.onSwatchHover,l=e.group,s=e.active,d=(0,n.default)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return o.default.createElement("div",{style:d.group},(0,r.default)(l,(function(e,n){return o.default.createElement(i.default,{key:e,color:e,active:e.toLowerCase()===s,first:0===n,last:n===l.length-1,onClick:t,onSwatchHover:a})})))};t.default=s},64503:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Twitter=void 0;var o=d(a(67294)),n=d(a(45697)),r=d(a(79941)),i=d(a(87740)),l=d(a(64809)),s=a(1150);function d(e){return e&&e.__esModule?e:{default:e}}var u=t.Twitter=function(e){var t=e.onChange,a=e.onSwatchHover,n=e.hex,d=e.colors,u=e.width,c=e.triangle,h=e.className,p=void 0===h?"":h,f=(0,r.default)({default:{card:{width:u,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},{"hide-triangle":"hide"===c,"top-left-triangle":"top-left"===c,"top-right-triangle":"top-right"===c}),g=function(e,a){l.default.isValidHex(e)&&t({hex:e,source:"hex"},a)};return o.default.createElement("div",{style:f.card,className:"twitter-picker "+p},o.default.createElement("div",{style:f.triangleShadow}),o.default.createElement("div",{style:f.triangle}),o.default.createElement("div",{style:f.body},(0,i.default)(d,(function(e,t){return o.default.createElement(s.Swatch,{key:t,color:e,hex:e,style:f.swatch,onClick:g,onHover:a,focusStyle:{boxShadow:"0 0 4px "+e}})})),o.default.createElement("div",{style:f.hash},"#"),o.default.createElement(s.EditableInput,{style:{input:f.input},value:n.replace("#",""),onChange:g}),o.default.createElement("div",{style:f.clear})))};u.propTypes={width:n.default.oneOfType([n.default.string,n.default.number]),triangle:n.default.oneOf(["hide","top-left","top-right"]),colors:n.default.arrayOf(n.default.string)},u.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left"},t.default=(0,s.ColorWrap)(u)},66713:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateChange=function(e,t,a,o){e.preventDefault();var n=o.clientWidth,r=o.clientHeight,i="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,s=i-(o.getBoundingClientRect().left+window.pageXOffset),d=l-(o.getBoundingClientRect().top+window.pageYOffset);if("vertical"===a.direction){var u;if(u=d<0?0:d>r?1:Math.round(100*d/r)/100,a.hsl.a!==u)return{h:a.hsl.h,s:a.hsl.s,l:a.hsl.l,a:u,source:"rgb"}}else{var c;if(c=s<0?0:s>n?1:Math.round(100*s/n)/100,a.a!==c)return{h:a.hsl.h,s:a.hsl.s,l:a.hsl.l,a:c,source:"rgb"}}return null}},45704:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={},o=t.render=function(e,t,a,o){if("undefined"==typeof document&&!o)return null;var n=o?new o:document.createElement("canvas");n.width=2*a,n.height=2*a;var r=n.getContext("2d");return r?(r.fillStyle=e,r.fillRect(0,0,n.width,n.height),r.fillStyle=t,r.fillRect(0,0,a,a),r.translate(a,a),r.fillRect(0,0,a,a),n.toDataURL()):null};t.get=function(e,t,n,r){var i=e+"-"+t+"-"+n+(r?"-server":""),l=o(e,t,n,r);return a[i]?a[i]:(a[i]=l,l)}},64809:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.red=void 0;var o=r(a(66073)),n=r(a(17621));function r(e){return e&&e.__esModule?e:{default:e}}t.default={simpleCheckForValidColor:function(e){var t=0,a=0;return(0,o.default)(["r","g","b","a","h","s","l","v"],(function(o){e[o]&&(t+=1,isNaN(e[o])||(a+=1),"s"===o||"l"===o)&&/^\d+%$/.test(e[o])&&(a+=1)})),t===a&&e},toState:function(e,t){var a=e.hex?(0,n.default)(e.hex):(0,n.default)(e),o=a.toHsl(),r=a.toHsv(),i=a.toRgb(),l=a.toHex();return 0===o.s&&(o.h=t||0,r.h=t||0),{hsl:o,hex:"000000"===l&&0===i.a?"transparent":"#"+l,rgb:i,hsv:r,oldHue:e.h||t||o.h,source:e.source}},isValidHex:function(e){var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&(0,n.default)(e).isValid()},getContrastingColor:function(e){if(!e)return"#fff";var t=this.toState(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"}},t.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}}},33716:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateChange=function(e,t,a,o){e.preventDefault();var n=o.clientWidth,r=o.clientHeight,i="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,s=i-(o.getBoundingClientRect().left+window.pageXOffset),d=l-(o.getBoundingClientRect().top+window.pageYOffset);if("vertical"===a.direction){var u=void 0;if(u=d<0?359:d>r?0:360*(-100*d/r+100)/100,a.hsl.h!==u)return{h:u,s:a.hsl.s,l:a.hsl.l,a:a.hsl.a,source:"rgb"}}else{var c=void 0;if(c=s<0?0:s>n?359:100*s/n*360/100,a.hsl.h!==c)return{h:c,s:a.hsl.s,l:a.hsl.l,a:a.hsl.a,source:"rgb"}}return null}},82538:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleFocus=void 0;var o,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},r=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),i=(o=a(67294))&&o.__esModule?o:{default:o};function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.handleFocus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(a){function o(){var e,t,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=a=l(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(r))),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},l(a,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a),r(o,[{key:"render",value:function(){return i.default.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},i.default.createElement(e,n({},this.props,this.state)))}}]),o}(i.default.Component)}},37599:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateChange=function(e,t,a,o){e.preventDefault();var n=o.getBoundingClientRect(),r=n.width,i=n.height,l="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,d=l-(o.getBoundingClientRect().left+window.pageXOffset),u=s-(o.getBoundingClientRect().top+window.pageYOffset);d<0?d=0:d>r?d=r:u<0?u=0:u>i&&(u=i);var c=100*d/r,h=-100*u/i+100;return{h:a.hsl.h,s:c,v:h,a:a.hsl.a,source:"rgb"}}},24198:(e,t,a)=>{"use strict";t.xS=t.Ie=void 0;a(9563),a(88858),a(9703);var o=a(53891),n=a(99766);Object.defineProperty(t,"Ie",{enumerable:!0,get:function(){return i(n).default}});a(19700),a(10565),a(54363),a(33165);var r=a(89753);Object.defineProperty(t,"xS",{enumerable:!0,get:function(){return i(r).default}});a(49857),a(93926),a(64503),a(88288);function i(e){return e&&e.__esModule?e:{default:e}}i(o).default},24754:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var o,n=(o=a(2525))&&o.__esModule?o:{default:o},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},i={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){return t[e]||{extend:e}}},l=t.autoprefix=function(e){var t={};return(0,n.default)(e,(function(e,a){var o={};(0,n.default)(e,(function(e,t){var a=i[t];a?o=r({},o,a(e)):o[t]=e})),t[a]=o})),t};t.default=l},36002:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var o,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},r=(o=a(67294))&&o.__esModule?o:{default:o};function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=t.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(a){function o(){var a,l,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var d=arguments.length,u=Array(d),c=0;c<d;c++)u[c]=arguments[c];return l=s=i(this,(a=o.__proto__||Object.getPrototypeOf(o)).call.apply(a,[this].concat(u))),s.state={active:!1},s.handleMouseDown=function(){return s.setState({active:!0})},s.handleMouseUp=function(){return s.setState({active:!1})},s.render=function(){return r.default.createElement(t,{onMouseDown:s.handleMouseDown,onMouseUp:s.handleMouseUp},r.default.createElement(e,n({},s.props,s.state)))},i(s,l)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a),o}(r.default.Component)};t.default=l},91765:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var o,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},r=(o=a(67294))&&o.__esModule?o:{default:o};function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(a){function o(){var a,l,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var d=arguments.length,u=Array(d),c=0;c<d;c++)u[c]=arguments[c];return l=s=i(this,(a=o.__proto__||Object.getPrototypeOf(o)).call.apply(a,[this].concat(u))),s.state={hover:!1},s.handleMouseOver=function(){return s.setState({hover:!0})},s.handleMouseOut=function(){return s.setState({hover:!1})},s.render=function(){return r.default.createElement(t,{onMouseOver:s.handleMouseOver,onMouseOut:s.handleMouseOut},r.default.createElement(e,n({},s.props,s.state)))},i(s,l)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a),o}(r.default.Component)};t.default=l},14147:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var o=l(a(47037)),n=l(a(2525)),r=l(a(68630)),i=l(a(87740));function l(e){return e&&e.__esModule?e:{default:e}}var s=t.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=[];return(0,i.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return a.push(e)})):(0,r.default)(t)?(0,n.default)(t,(function(e,t){!0===e&&a.push(t),a.push(t+"-"+e)})):(0,o.default)(t)&&a.push(t)})),a};t.default=s},79941:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactCSS=t.loop=t.handleActive=t.handleHover=t.hover=void 0;var o=d(a(14147)),n=d(a(18556)),r=d(a(24754)),i=d(a(91765)),l=d(a(36002)),s=d(a(57742));function d(e){return e&&e.__esModule?e:{default:e}}t.hover=i.default,t.handleHover=i.default,t.handleActive=l.default,t.loop=s.default;var u=t.ReactCSS=function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];var l=(0,o.default)(a),s=(0,n.default)(e,l);return(0,r.default)(s)};t.default=u},57742:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a={},o=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a[e]=t};return 0===e&&o("first-child"),e===t-1&&o("last-child"),(0===e||e%2==0)&&o("even"),1===Math.abs(e%2)&&o("odd"),o("nth-child",e),a}},18556:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var o=i(a(2525)),n=i(a(50361)),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e};function i(e){return e&&e.__esModule?e:{default:e}}var l=t.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=e.default&&(0,n.default)(e.default)||{};return t.map((function(t){var n=e[t];return n&&(0,o.default)(n,(function(e,t){a[t]||(a[t]={}),a[t]=r({},a[t],n[t])})),t})),a};t.default=l},76826:e=>{var t={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ả:"A",Ạ:"A",Ẩ:"A",Ẫ:"A",Ậ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ẻ:"E",Ẽ:"E",Ẹ:"E",Ể:"E",Ễ:"E",Ệ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ỉ:"I",Ị:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ỏ:"O",Ọ:"O",Ổ:"O",Ỗ:"O",Ộ:"O",Ờ:"O",Ở:"O",Ỡ:"O",Ớ:"O",Ợ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ủ:"U",Ụ:"U",Ử:"U",Ữ:"U",Ự:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ả:"a",ạ:"a",ẩ:"a",ẫ:"a",ậ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ẻ:"e",ẽ:"e",ẹ:"e",ể:"e",ễ:"e",ệ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ỉ:"i",ị:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ỏ:"o",ọ:"o",ổ:"o",ỗ:"o",ộ:"o",ờ:"o",ở:"o",ỡ:"o",ớ:"o",ợ:"o",ù:"u",ú:"u",û:"u",ü:"u",ủ:"u",ụ:"u",ử:"u",ữ:"u",ự:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z",й:"и",Й:"И",ё:"е",Ё:"Е"},a=Object.keys(t).join("|"),o=new RegExp(a,"g"),n=new RegExp(a,"");function r(e){return t[e]}var i=function(e){return e.replace(o,r)};e.exports=i,e.exports.has=function(e){return!!e.match(n)},e.exports.remove=i},47710:(e,t,a)=>{"use strict";a.d(t,{W:()=>D});var o=a(47037),n=a.n(o),r=a(41609),i=a.n(r),l=a(67294),s=a(87183),d=a(4715),u=a(9875),c=a(74069),h=a(35932),p=a(42968),f=a(31069),g=a(61988),m=a(28216),v=a(30381),b=a.n(v),y=a(15926),x=a.n(y),w=a(11409),C=a(72570),S=a(28241),Z=a(12515),k=a(40219),_=a(27600),E=a(11965);const M=p.Z.div`
  .sdm-body {
    margin: 0 8px;
  }
  .sdm-input {
    margin-left: 45px;
    width: 401px;
  }
  .sdm-autocomplete {
    width: 401px;
    align-self: center;
  }
  .sdm-radio {
    display: block;
    height: 30px;
    margin: 10px 0px;
    line-height: 30px;
  }
  .sdm-overwrite-msg {
    margin: 7px;
  }
  .sdm-overwrite-container {
    flex: 1 1 auto;
    display: flex;
  }
`,T=async(e,t,a,o,n,r)=>{const i=`api/v1/dataset/${t}?override_columns=${r}`,l=JSON.stringify({sql:a,columns:o,owners:n,database_id:e});return(await f.Z.put({endpoint:i,headers:{"Content-Type":"application/json"},body:l})).json.result},O=(0,g.t)("Untitled Dataset"),D=({visible:e,onHide:t,buttonTextOnSave:a,buttonTextOnOverwrite:o,modalDescription:r,datasource:p,openWindow:v=!0,formData:y={}})=>{const D=(0,m.v9)((e=>{var t,a;return(null==(t=e.common)||null==(a=t.conf)?void 0:a.DEFAULT_VIZ_TYPE)||"table"})),R=()=>`${(null==p?void 0:p.name)||O} ${b()().format("L HH:mm:ss")}`,[P,N]=(0,l.useState)(R()),[A,I]=(0,l.useState)(S.fT.SaveNew),[L,F]=(0,l.useState)(!1),[j,B]=(0,l.useState)({}),[$,z]=(0,l.useState)(void 0),[U,W]=(0,l.useState)(!1),H=(0,m.v9)((e=>e.user)),q=(0,m.I0)(),V=e=>{v?window.open(e,"_blank","noreferrer"):window.location.href=e},G={...S.C9,...y||{}},X=(0,l.useCallback)((async(e="")=>{const{userId:t}=H,a=x().encode({filters:[{col:"table_name",opr:"ct",value:e},{col:"owners",opr:"rel_m_m",value:t}],order_column:"changed_on_delta_humanized",order_direction:"desc"});return f.Z.get({endpoint:`/api/v1/dataset/?q=${a}`}).then((e=>({data:e.json.result.map((e=>({value:e.table_name,label:e.table_name,datasetid:e.id,owners:e.owners}))),totalCount:e.json.count})))}),[H]),Y=A===S.fT.SaveNew&&0===P.length||A===S.fT.OverwriteDataset&&i()($);return(0,E.tZ)(c.default,{show:e,title:(0,g.t)("Save or Overwrite Dataset"),onHide:t,footer:(0,E.tZ)(l.Fragment,null,A===S.fT.SaveNew&&(0,E.tZ)(h.Z,{disabled:Y,buttonStyle:"primary",onClick:()=>{var e,a;W(!0);const o=null!=(e=null==p?void 0:p.columns)?e:[];let r;if(n()(null==p?void 0:p.templateParams)){const e=JSON.parse(p.templateParams);e._filters&&(delete e._filters,r=JSON.stringify(e))}q((0,w.createDatasource)({sql:p.sql,dbId:p.dbId||(null==p||null==(a=p.database)?void 0:a.id),schema:null==p?void 0:p.schema,templateParams:r,datasourceName:P})).then((e=>(0,k.nv)(e.id,"table",{...G,datasource:`${e.id}__table`,..."table"===D&&{all_columns:o.map((e=>e.column_name))}}))).then((e=>{W(!1);const a=(0,Z.y8)(null,{[_.KD.formDataKey.name]:e});V(a),N(R()),t()})).catch((()=>{W(!1),(0,C.Gb)((0,g.t)("An error occurred saving dataset"))}))},loading:U},a),A===S.fT.OverwriteDataset&&(0,E.tZ)(l.Fragment,null,L&&(0,E.tZ)(h.Z,{onClick:()=>{F(!1),B({})}},(0,g.t)("Back")),(0,E.tZ)(h.Z,{className:"md",buttonStyle:"primary",onClick:async()=>{var e,a,o;if(!L)return void F(!0);W(!0);const[,n]=await Promise.all([T(null==p?void 0:p.dbId,null==j?void 0:j.datasetid,null==p?void 0:p.sql,null==p||null==(e=p.columns)?void 0:e.map((e=>({column_name:e.column_name,type:e.type,is_dttm:e.is_dttm}))),null==j||null==(a=j.owners)?void 0:a.map((e=>e.id)),!0),(0,k.nv)(j.datasetid,"table",{...G,datasource:`${j.datasetid}__table`,..."table"===D&&{all_columns:null==p||null==(o=p.columns)?void 0:o.map((e=>e.column_name))}})]);W(!1);const r=(0,Z.y8)(null,{[_.KD.formDataKey.name]:n});V(r),F(!1),N(R()),t()},disabled:Y,loading:U},o)))},(0,E.tZ)(M,null,!L&&(0,E.tZ)("div",{className:"sdm-body"},r&&(0,E.tZ)("div",{className:"sdm-prompt"},r),(0,E.tZ)(s.Y.Group,{onChange:e=>{I(Number(e.target.value))},value:A},(0,E.tZ)(s.Y,{className:"sdm-radio",value:1},(0,g.t)("Save as new"),(0,E.tZ)(u.II,{className:"sdm-input",value:P,onChange:e=>{N(e.target.value)},disabled:1!==A})),(0,E.tZ)("div",{className:"sdm-overwrite-container"},(0,E.tZ)(s.Y,{className:"sdm-radio",value:2},(0,g.t)("Overwrite existing")),(0,E.tZ)("div",{className:"sdm-autocomplete"},(0,E.tZ)(d.qb,{allowClear:!0,showSearch:!0,placeholder:(0,g.t)("Select or type dataset name"),ariaLabel:(0,g.t)("Existing dataset"),onChange:(e,t)=>{B(t),z(e)},options:e=>X(e),value:$,filterOption:(e,t)=>t.value.toLowerCase().includes(e.toLowerCase()),disabled:2!==A,getPopupContainer:()=>document.body}))))),L&&(0,E.tZ)("div",{className:"sdm-overwrite-msg"},(0,g.t)("Are you sure you want to overwrite this dataset?"))))}},5492:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var o=a(67294),n=a(42968),r=a(37921),i=a(44814),l=a(11965);const s=(0,n.Z)(r.Z)`
  text-align: left;
  font-family: ${({theme:e})=>e.typography.families.monospace};
`;function d({endTime:e,isRunning:t,startTime:a,status:n="success"}){const[r,d]=(0,o.useState)("00:00:00.00"),u=(0,o.useRef)();return(0,o.useEffect)((()=>{const o=()=>{u.current&&(clearInterval(u.current),u.current=void 0)};return t&&(u.current=setInterval((()=>{if(a){const n=e||(0,i.zO)();a<n&&d((0,i.zQ)(a,n)),t||o()}}),30)),o}),[e,t,a]),(0,l.tZ)(s,{type:n,role:"timer"},r)}},5584:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Gl});var o=a(67294),n=a(28216),r=a(16550),i=a(37731),l=a(22102),s=a(61988),d=a(78161),u=a(38703),c=a(72570),h=a(23525),p=a(27600),f=a(98286),g=a(91914),m=a(43399);const v={form_data:{name:"form_data",parser:e=>{const t=JSON.parse(e);if(t.datasource){const[e,a]=t.datasource.split("__");t.datasource_id=e,t.datasource_type=a,delete t.datasource}return t}},slice_id:{name:"slice_id"},datasource_id:{name:"datasource_id"},datasource_type:{name:"datasource_type"},datasource:{name:"datasource",parser:e=>{const[t,a]=e.split("__");return{datasource_id:t,datasource_type:a}}},form_data_key:{name:"form_data_key"},permalink_key:{name:"permalink_key"},viz_type:{name:"viz_type"},dashboard_id:{name:"dashboard_id"}},b={p:"permalink_key",table:"datasource_id"},y=e=>{const t=new URLSearchParams(e);return Array.from(t.keys()).reduce(((e,a)=>{var o;const n=t.get(a);if(null===n)return e;let r;try{var i,l,s;r=null!=(i=null==(l=(s=v[a]).parser)?void 0:l.call(s,n))?i:n}catch{r=n}if("object"==typeof r)return{...e,...r};const d=(null==(o=v[a])?void 0:o.name)||a;return{...e,[d]:r}}),{})},x=(e=window.location)=>{return new URLSearchParams(Object.entries({...y(e.search),...(t=e.pathname,Object.keys(b).reduce(((e,a)=>{const o=new RegExp(`/(${a})/(\\w+)`),n=t.match(o);return null!=n&&n[2]?{...e,[b[a]]:n[2]}:e}),{}))}).map((e=>e.join("="))).join("&"));var t};var w=a(76445),C=a(73126),S=a(78718),Z=a.n(S),k=a(57557),_=a.n(k),E=a(23279),M=a.n(E),T=a(45697),O=a.n(T),D=a(14890),R=a(42968),P=a(11965),N=a(68492),A=a(85716),I=a(51995),L=a(4756),F=a(28291),j=a(29119),B=a(14278),$=a(58593),z=a(13322),U=a(61337),W=a(69856),H=a(99543),q=a(97381),V=a(3741),G=a(94184),X=a.n(G),Y=a(52256),Q=a(50810),K=a(2275),J=a(1510),ee=a(40219),te=a(99068),ae=a(12515),oe=a(10331),ne=a(651),re=a(19485),ie=a(6954),le=a(14114),se=a(40323),de=a(93185),ue=a(11064),ce=a(46078),he=a(55786),pe=a(31069),fe=a(40730),ge=a(29487),me=a(47710),ve=a(79217),be=a(75701),ye=a(21496),xe=a(89555),we=a(37921),Ce=a(30381),Se=a.n(Ce);const Ze=({cachedTimestamp:e})=>{const t=e?(0,P.tZ)("span",null,(0,s.t)("Loaded data cached"),(0,P.tZ)("b",null," ",Se().utc(e).fromNow())):(0,s.t)("Loaded from cache");return(0,P.tZ)("span",{"data-test":"tooltip-content"},t,". ",(0,s.t)("Click to force-refresh"))},ke=({className:e,onClick:t,cachedTimestamp:a})=>{const[n,r]=(0,o.useState)(!1),i=n?"primary":"default";return(0,P.tZ)($.u,{title:(0,P.tZ)(Ze,{cachedTimestamp:a}),id:"cache-desc-tooltip"},(0,P.tZ)(we.Z,{className:`${e}`,type:i,onClick:t,onMouseOver:()=>r(!0),onMouseOut:()=>r(!1)},(0,s.t)("Cached")," ",(0,P.tZ)("i",{className:"fa fa-refresh"})))};var _e=a(5492);const Ee={failed:"danger",loading:"warning",success:"success"},Me=(0,o.forwardRef)((({queriesResponse:e,chartStatus:t,chartUpdateStartTime:a,chartUpdateEndTime:o,refreshCachedQuery:n,rowLimit:r},i)=>{const l="loading"===t,s=null==e?void 0:e[0];return(0,P.tZ)("div",{ref:i},(0,P.tZ)("div",{css:e=>P.iv`
            display: flex;
            justify-content: flex-end;
            padding-bottom: ${4*e.gridUnit}px;
            & .ant-tag:last-of-type {
              margin: 0;
            }
          `},!l&&s&&(0,P.tZ)(xe.Z,{rowcount:Number(s.sql_rowcount)||0,limit:Number(r)||0}),!l&&(null==s?void 0:s.is_cached)&&(0,P.tZ)(ke,{onClick:n,cachedTimestamp:s.cached_dttm}),(0,P.tZ)(_e.Z,{startTime:a,endTime:o,isRunning:l,status:Ee[t]})))}));var Te=a(35932);const Oe=R.Z.div`
  ${({theme:e})=>P.iv`
    margin: ${4*e.gridUnit}px;
    padding: ${4*e.gridUnit}px;

    border: 1px solid ${e.colors.info.base};
    background-color: ${e.colors.info.light2};
    border-radius: 2px;

    color: ${e.colors.info.dark2};
    font-size: ${e.typography.sizes.m}px;

    p {
      margin-bottom: ${e.gridUnit}px;
    }

    & a,
    & span[role='button'] {
      color: inherit;
      text-decoration: underline;
      &:hover {
        color: ${e.colors.info.dark1};
      }
    }

    &.alert-type-warning {
      border-color: ${e.colors.alert.base};
      background-color: ${e.colors.alert.light2};

      p {
        color: ${e.colors.alert.dark2};
      }

      & a:hover,
      & span[role='button']:hover {
        color: ${e.colors.alert.dark1};
      }
    }
  `}
`,De=R.Z.div`
  display: flex;
  justify-content: flex-end;
  button {
    line-height: 1;
  }
`,Re=R.Z.p`
  font-weight: ${({theme:e})=>e.typography.weights.bold};
`,Pe={warning:"warning",danger:"danger"},Ne=(0,o.forwardRef)((({title:e,bodyText:t,primaryButtonAction:a,secondaryButtonAction:o,primaryButtonText:n,secondaryButtonText:r,type:i="info",className:l=""},s)=>(0,P.tZ)(Oe,{className:`alert-type-${i} ${l}`,ref:s},(0,P.tZ)(Re,null,e),(0,P.tZ)("p",null,t),n&&a&&(0,P.tZ)(De,null,o&&r&&(0,P.tZ)(Te.Z,{buttonStyle:"link",buttonSize:"small",onClick:o},r),(0,P.tZ)(Te.Z,{buttonStyle:i in Pe?Pe[i]:"primary",buttonSize:"small",onClick:a},n)))));var Ae=a(99612);const Ie={actions:O().object.isRequired,onQuery:O().func,can_overwrite:O().bool.isRequired,can_download:O().bool.isRequired,datasource:O().object,dashboardId:O().number,column_formats:O().object,containerId:O().string.isRequired,isStarred:O().bool.isRequired,slice:O().object,sliceName:O().string,table_name:O().string,vizType:O().string.isRequired,form_data:O().object,ownState:O().object,standalone:O().bool,force:O().bool,timeout:O().number,chartIsStale:O().bool,chart:K.$6,errorMessage:O().node,triggerRender:O().bool},Le=1.25,Fe=[100,0],je=[300,65],Be=R.Z.div`
  display: flex;
  flex-direction: column;
  align-items: stretch;
  align-content: stretch;
  overflow: auto;
  box-shadow: none;
  height: 100%;

  & > div {
    height: 100%;
  }

  .gutter {
    border-top: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    border-bottom: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    width: ${({theme:e})=>9*e.gridUnit}px;
    margin: ${({theme:e})=>e.gridUnit*Le}px auto;
  }

  .gutter.gutter-vertical {
    display: ${({showSplite:e})=>e?"block":"none"};
    cursor: row-resize;
  }

  .ant-collapse {
    .ant-tabs {
      height: 100%;
      .ant-tabs-nav {
        padding-left: ${({theme:e})=>5*e.gridUnit}px;
        margin: 0;
      }
      .ant-tabs-content-holder {
        overflow: hidden;
        .ant-tabs-content {
          height: 100%;
        }
      }
    }
  }
`;var $e={name:"1wbll7q",styles:"text-decoration:underline"};const ze=({chart:e,slice:t,vizType:a,ownState:n,triggerRender:r,force:i,datasource:l,errorMessage:d,form_data:u,onQuery:c,actions:h,timeout:p,standalone:f,chartIsStale:g,chartAlert:m})=>{var v;const b=(0,I.Fg)(),y=b.gridUnit*Le,x=b.gridUnit*Le,{ref:w,observerRef:C,width:S,height:Z}=function(){const e=(0,o.useRef)(),[{width:t,height:a},n]=(0,o.useState)({}),r=(0,o.useCallback)((()=>{if(e.current){const{width:t,height:a}=(null==e.current.getBoundingClientRect?void 0:e.current.getBoundingClientRect())||{};n({width:t,height:a})}}),[]),{ref:i}=(0,Ae.NB)({refreshMode:"debounce",refreshRate:300,onResize:r});return{ref:e,observerRef:i,width:t,height:a}}(),[k,_]=(0,o.useState)((0,de.cr)(de.TT.DatapanelClosedByDefault)?Fe:(0,U.rV)(U.dR.ChartSplitSizes,Fe)),[E,M]=(0,o.useState)(!(0,de.cr)(de.TT.DatapanelClosedByDefault)&&(0,U.rV)(U.dR.IsDatapanelOpen,!1)),[T,O]=(0,o.useState)(!1),D=(0,ue.Z)(),{useLegacyApi:R}=null!=(v=D.get(a))?v:{},N=R&&l.type!==ce.i9.Table,A=!m&&g&&!N&&"failed"!==e.chartStatus&&(0,he.Z)(e.queriesResponse).length>0,L=(0,o.useCallback)((async function(){if(t&&null===t.query_context){const e=(0,ae.u)({formData:t.form_data,force:i,resultFormat:"json",resultType:"full",setDataMask:null,ownState:null});await pe.Z.put({endpoint:`/api/v1/chart/${t.slice_id}`,headers:{"Content-Type":"application/json"},body:JSON.stringify({query_context:JSON.stringify(e),query_context_generation:!0})})}}),[t]);(0,o.useEffect)((()=>{L()}),[L]),(0,o.useEffect)((()=>{(0,U.LS)(U.dR.ChartSplitSizes,k)}),[k]);const F=(0,o.useCallback)((e=>{_(e)}),[]),j=(0,o.useCallback)((()=>{h.setForceQuery(!0),h.postChartFormData(u,!0,p,e.id,void 0,n),h.updateQueryFormData(u,e.id)}),[h,e.id,u,n,p]),B=(0,o.useCallback)((e=>{let t;t=e?[60,40]:Fe,_(t),M(e)}),[]),$=(0,o.useCallback)((()=>(0,P.tZ)("div",{css:P.iv`
          min-height: 0;
          flex: 1;
          overflow: visible;
        `,ref:w},S&&Z&&(0,P.tZ)(fe.Z,{width:Math.floor(S),height:Z,ownState:n,annotationData:e.annotationData,chartAlert:e.chartAlert,chartStackTrace:e.chartStackTrace,chartId:e.id,chartStatus:e.chartStatus,triggerRender:r,force:i,datasource:l,errorMessage:d,formData:u,latestQueryFormData:e.latestQueryFormData,onQuery:c,queriesResponse:e.queriesResponse,chartIsStale:g,setControlValue:h.setControlValue,timeout:p,triggerQuery:e.triggerQuery,vizType:a}))),[h.setControlValue,e.annotationData,e.chartAlert,e.chartStackTrace,e.chartStatus,e.id,e.latestQueryFormData,e.queriesResponse,e.triggerQuery,g,Z,w,S,l,d,i,u,c,n,p,r,a]),z=(0,o.useMemo)((()=>(0,P.tZ)("div",{className:"panel-body",css:P.iv`
          display: flex;
          flex-direction: column;
        `,ref:C},N&&(0,P.tZ)(ge.Z,{message:(0,s.t)("Chart type requires a dataset"),type:"error",css:e=>P.iv`
              margin: 0 0 ${4*e.gridUnit}px 0;
            `,description:(0,P.tZ)(o.Fragment,null,(0,s.t)("This chart type is not supported when using an unsaved query as a chart source. "),(0,P.tZ)("span",{role:"button",tabIndex:0,onClick:()=>O(!0),css:$e},(0,s.t)("Create a dataset")),(0,s.t)(" to visualize your data."))}),A&&(0,P.tZ)(Ne,{title:d?(0,s.t)("Required control values have been removed"):(0,s.t)("Your chart is not up to date"),bodyText:d?(0,be.J)(!1):(0,P.tZ)("span",null,(0,s.t)('You updated the values in the control panel, but the chart was not updated automatically. Run the query by clicking on the "Update chart" button or')," ",(0,P.tZ)("span",{role:"button",tabIndex:0,onClick:c},(0,s.t)("click here")),"."),type:"warning",css:e=>P.iv`
              margin: 0 0 ${4*e.gridUnit}px 0;
            `}),(0,P.tZ)(Me,{queriesResponse:e.queriesResponse,chartStatus:e.chartStatus,chartUpdateStartTime:e.chartUpdateStartTime,chartUpdateEndTime:e.chartUpdateEndTime,refreshCachedQuery:j,rowLimit:null==u?void 0:u.row_limit}),$())),[C,A,d,c,e.queriesResponse,e.chartStatus,e.chartUpdateStartTime,e.chartUpdateEndTime,j,null==u?void 0:u.row_limit,$]),W=(0,o.useMemo)((()=>$()),[$]),[H,q]=(0,o.useState)(e.latestQueryFormData);(0,o.useEffect)((()=>{r||q(e.latestQueryFormData)}),[e.latestQueryFormData]);const V=(0,o.useCallback)(((e,t,a)=>({[e]:`calc(${t}% - ${a+y}px)`})),[y]);if(f){const e="background-transparent";return document.body.className.split(" ").includes(e)||(document.body.className+=` ${e}`),(0,P.tZ)("div",{id:"app","data-test":"standalone-app",ref:C},W)}return(0,P.tZ)(Be,{className:"panel panel-default chart-container",showSplite:E},(0,P.tZ)(se.Z,{sizes:k,minSize:je,direction:"vertical",gutterSize:x,onDragEnd:F,elementStyle:V,expandToMin:!0},z,(0,P.tZ)(ye.c9,{ownState:n,queryFormData:H,datasource:l,queryForce:i,onCollapseChange:B,chartStatus:e.chartStatus,errorMessage:d,actions:h})),T&&(0,P.tZ)(me.W,{visible:T,onHide:()=>O(!1),buttonTextOnSave:(0,s.t)("Save"),buttonTextOnOverwrite:(0,s.t)("Overwrite"),datasource:(0,ve.z)(l),openWindow:!1,formData:u}))};ze.propTypes=Ie;const Ue=ze;var We=a(21804),He=a.n(We),qe=a(5364),Ve=a(37687),Ge=a(82233),Xe=a(45211),Ye=a(49484),Qe=a(43700),Ke=a(71262),Je=a(74069);function et({controls:e}){const t=(0,o.useCallback)((e=>{const t=e&&"shouldStash"in e.props?e.props.children.props:null==e?void 0:e.props;return"HiddenControl"===(null==t?void 0:t.type)||!1===(null==t?void 0:t.isVisible)}),[]),a=e.filter((e=>!t(e))),n=a.length?12/a.length:12;return(0,P.tZ)("div",{className:"row"},e.map(((e,a)=>(0,P.tZ)("div",{"data-test":"control-item",className:`col-lg-${n} col-xs-12`,style:{display:t(e)?"none":"block"},key:a},e))))}var tt=a(18446),at=a.n(tt),ot=a(57368),nt=a(93362),rt=a(4715),it=a(68135),lt=a(9882),st=a(67913);function dt(e){const{selectable:t,children:a,...o}=e,n=(0,I.Fg)(),r={"&.ant-list-item":{padding:`${n.gridUnit+2}px ${3*n.gridUnit}px`,":first-of-type":{borderTopLeftRadius:n.gridUnit,borderTopRightRadius:n.gridUnit},":last-of-type":{borderBottomLeftRadius:n.gridUnit,borderBottomRightRadius:n.gridUnit}}};return t&&(r["&:hover"]={cursor:"pointer",backgroundColor:n.colors.grayscale.light4}),(0,P.tZ)(rt.aV.Item,(0,C.Z)({},o,{css:r}),a)}var ut=a(27845);const ct=(0,st.Z)((()=>a.e(4199).then(a.bind(a,31997))),(()=>(0,P.tZ)("div",{style:{width:450,height:368}}))),ht={colorScheme:O().string.isRequired,annotationError:O().object,annotationQuery:O().object,vizType:O().string,validationErrors:O().array,name:O().string.isRequired,actions:O().object,value:O().arrayOf(O().object),onChange:O().func,refreshAnnotationData:O().func};class pt extends o.PureComponent{constructor(e){super(e),this.state={popoverVisible:{},addedAnnotationIndex:null},this.addAnnotationLayer=this.addAnnotationLayer.bind(this),this.removeAnnotationLayer=this.removeAnnotationLayer.bind(this),this.handleVisibleChange=this.handleVisibleChange.bind(this)}componentDidMount(){ct.preload()}UNSAFE_componentWillReceiveProps(e){const{name:t,annotationError:a,validationErrors:o,value:n}=e;Object.keys(a).length&&!o.length&&this.props.actions.setControlValue(t,n,Object.keys(a)),!Object.keys(a).length&&o.length&&this.props.actions.setControlValue(t,n,[])}addAnnotationLayer(e,t){let a=this.props.value;a.includes(e)?a=a.map((a=>a===e?t:a)):(a=[...a,t],this.setState({addedAnnotationIndex:a.length-1})),this.props.refreshAnnotationData({annotation:t,force:!0}),this.props.onChange(a)}handleVisibleChange(e,t){this.setState((a=>({popoverVisible:{...a.popoverVisible,[t]:e}})))}removeAnnotationLayer(e){const t=this.props.value.filter((t=>t!==e)),a=(0,ut.j)();a&&a.style.setProperty("overflow-y","auto","important"),this.props.onChange(t)}renderPopover(e,t,a){const o=(null==t?void 0:t.name)||"_new";return(0,P.tZ)("div",{id:`annotation-pop-${o}`,"data-test":"popover-content"},(0,P.tZ)(ct,(0,C.Z)({},t,{error:a,colorScheme:this.props.colorScheme,vizType:this.props.vizType,addAnnotationLayer:e=>this.addAnnotationLayer(t,e),removeAnnotationLayer:()=>this.removeAnnotationLayer(t),close:()=>{this.handleVisibleChange(!1,e),this.setState({addedAnnotationIndex:null})}})))}renderInfo(e){const{annotationError:t,annotationQuery:a,theme:o}=this.props;return a[e.name]?(0,P.tZ)("i",{className:"fa fa-refresh",style:{color:o.colors.primary.base},"aria-hidden":!0}):t[e.name]?(0,P.tZ)(lt.V,{label:"validation-errors",bsStyle:"danger",tooltip:t[e.name]}):e.show?"":(0,P.tZ)("span",{style:{color:o.colors.error.base}}," Hidden ")}render(){const{addedAnnotationIndex:e}=this.state,t=this.props.value[e],a=this.props.value.map(((e,t)=>(0,P.tZ)(ut.Z,{key:t,trigger:"click",title:(0,s.t)("Edit annotation layer"),css:e=>({"&:hover":{cursor:"pointer",backgroundColor:e.colors.grayscale.light4}}),content:this.renderPopover(t,e,this.props.annotationError[e.name]),visible:this.state.popoverVisible[t],onVisibleChange:e=>this.handleVisibleChange(e,t)},(0,P.tZ)(dt,{selectable:!0},(0,P.tZ)("span",null,e.name),(0,P.tZ)("span",{style:{float:"right"}},this.renderInfo(e)))))),o="add";return(0,P.tZ)("div",null,(0,P.tZ)(rt.aV,{bordered:!0,css:e=>({borderRadius:e.gridUnit})},a,(0,P.tZ)(ut.Z,{trigger:"click",content:this.renderPopover(o,t),title:(0,s.t)("Add annotation layer"),visible:this.state.popoverVisible[o],destroyTooltipOnHide:!0,onVisibleChange:e=>this.handleVisibleChange(e,o)},(0,P.tZ)(dt,{selectable:!0},(0,P.tZ)("i",{"data-test":"add-annotation-layer-button",className:"fa fa-plus"})," ","  ",(0,s.t)("Add annotation layer")))))}}pt.propTypes=ht,pt.defaultProps={vizType:"",value:[],annotationError:{},annotationQuery:{},onChange:()=>{}};const ft=(0,it.b)(pt),gt=(0,n.$j)((function({charts:e,explore:t}){var a,o;const n=e[(0,ae.Jp)(t)]||e[0]||{};return{colorScheme:null==(a=t.controls)||null==(o=a.color_scheme)?void 0:o.value,annotationError:n.annotationError,annotationQuery:n.annotationQuery,vizType:t.controls.viz_type.value}}),(function(e){return{refreshAnnotationData:t=>e((0,Y.runAnnotationQuery)(t))}}))(ft);var mt=a(9875),vt=a(82342);const bt=R.Z.div`
  display: flex;
`,yt=(0,R.Z)(mt.Rn)`
  flex: 1;
  margin-right: ${({theme:e})=>e.gridUnit}px;
`,xt=(0,R.Z)(mt.Rn)`
  flex: 1;
  margin-left: ${({theme:e})=>e.gridUnit}px;
`,wt=e=>null===e||Number.isNaN(Number(e))?null:Number(e);function Ct({onChange:e=(()=>{}),value:t=[null,null],...a}){const[n,r]=(0,o.useState)([wt(t[0]),wt(t[1])]),i=t[0],l=t[1],d=(0,o.useRef)(M()(e,300)).current,u=e=>{r(e),d([void 0===e[0]?null:e[0],void 0===e[1]?null:e[1]])};return(0,o.useEffect)((()=>{r([wt(i),wt(l)])}),[i,l]),(0,P.tZ)("div",null,(0,P.tZ)(vt.Z,a),(0,P.tZ)(bt,null,(0,P.tZ)(yt,{"data-test":"min-bound",placeholder:(0,s.t)("Min"),onChange:e=>{u([wt(e),n[1]])},value:null===n[0]?void 0:n[0]}),(0,P.tZ)(xt,{"data-test":"max-bound",placeholder:(0,s.t)("Max"),onChange:e=>{u([n[0],wt(e)])},value:null===n[1]?void 0:n[1]})))}var St=a(79069),Zt=a(14670),kt=a.n(Zt),_t=a(87462),Et=a(29439),Mt=a(94334),Tt=a(15671),Ot=a(43144),Dt=a(82963),Rt=a(61120),Pt=a(60136),Nt=a(97326),At=a(4942),It=a(73935),Lt=a(41143),Ft=a.n(Lt),jt=a(93433),Bt=function(){function e(){(0,Tt.Z)(this,e),(0,At.Z)(this,"refs",{})}return(0,Ot.Z)(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var a=this.getIndex(e,t);-1!==a&&this.refs[e].splice(a,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find((function(t){return t.node.sortableInfo.index==e.active.index}))}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort($t)}}]),e}();function $t(e,t){return e.node.sortableInfo.index-t.node.sortableInfo.index}function zt(e,t){return Object.keys(e).reduce((function(a,o){return-1===t.indexOf(o)&&(a[o]=e[o]),a}),{})}var Ut={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},Wt=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return"ms"===t?"ms":t&&t.length?t[0].toUpperCase()+t.substr(1):""}();function Ht(e,t){Object.keys(t).forEach((function(a){e.style[a]=t[a]}))}function qt(e,t){e.style["".concat(Wt,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function Vt(e,t){e.style["".concat(Wt,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function Gt(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function Xt(e,t,a){return Math.max(e,Math.min(a,t))}function Yt(e){return"px"===e.substr(-2)?parseFloat(e):0}function Qt(e,t){var a=t.displayName||t.name;return a?"".concat(e,"(").concat(a,")"):e}function Kt(e,t){var a=e.getBoundingClientRect();return{top:a.top+t.top,left:a.left+t.left}}function Jt(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function ea(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(e){var o={left:a.left+e.offsetLeft,top:a.top+e.offsetTop};return e.parentNode===t?o:ea(e.parentNode,t,o)}}function ta(e){var t=e.lockOffset,a=e.width,o=e.height,n=t,r=t,i="px";if("string"==typeof t){var l=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);Ft()(null!==l,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),n=parseFloat(t),r=parseFloat(t),i=l[1]}return Ft()(isFinite(n)&&isFinite(r),"lockOffset value should be a finite. Given %s",t),"%"===i&&(n=n*a/100,r=r*o/100),{x:n,y:r}}function aa(e){return e instanceof HTMLElement?function(e){var t=window.getComputedStyle(e),a=/(auto|scroll)/;return["overflow","overflowX","overflowY"].find((function(e){return a.test(t[e])}))}(e)?e:aa(e.parentNode):null}var oa={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function na(e){return null!=e.sortableHandle}var ra=function(){function e(t,a){(0,Tt.Z)(this,e),this.container=t,this.onScrollCallback=a}return(0,Ot.Z)(e,[{key:"clear",value:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(e){var t=this,a=e.translate,o=e.minTranslate,n=e.maxTranslate,r=e.width,i=e.height,l={x:0,y:0},s={x:1,y:1},d=this.container,u=d.scrollTop,c=d.scrollLeft,h=d.scrollHeight,p=d.scrollWidth,f=0===u,g=h-u-d.clientHeight==0,m=0===c,v=p-c-d.clientWidth==0;a.y>=n.y-i/2&&!g?(l.y=1,s.y=10*Math.abs((n.y-i/2-a.y)/i)):a.x>=n.x-r/2&&!v?(l.x=1,s.x=10*Math.abs((n.x-r/2-a.x)/r)):a.y<=o.y+i/2&&!f?(l.y=-1,s.y=10*Math.abs((a.y-i/2-o.y)/i)):a.x<=o.x+r/2&&!m&&(l.x=-1,s.x=10*Math.abs((a.x-r/2-o.x)/r)),this.interval&&(this.clear(),this.isAutoScrolling=!1),0===l.x&&0===l.y||(this.interval=setInterval((function(){t.isAutoScrolling=!0;var e={left:s.x*l.x,top:s.y*l.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)}),5))}}]),e}(),ia={axis:O().oneOf(["x","y","xy"]),contentWindow:O().any,disableAutoscroll:O().bool,distance:O().number,getContainer:O().func,getHelperDimensions:O().func,helperClass:O().string,helperContainer:O().oneOfType([O().func,"undefined"==typeof HTMLElement?O().any:O().instanceOf(HTMLElement)]),hideSortableGhost:O().bool,keyboardSortingTransitionDuration:O().number,lockAxis:O().string,lockOffset:O().oneOfType([O().number,O().string,O().arrayOf(O().oneOfType([O().number,O().string]))]),lockToContainerEdges:O().bool,onSortEnd:O().func,onSortMove:O().func,onSortOver:O().func,onSortStart:O().func,pressDelay:O().number,pressThreshold:O().number,keyCodes:O().shape({lift:O().arrayOf(O().number),drop:O().arrayOf(O().number),cancel:O().arrayOf(O().number),up:O().arrayOf(O().number),down:O().arrayOf(O().number)}),shouldCancelStart:O().func,transitionDuration:O().number,updateBeforeSortStart:O().func,useDragHandle:O().bool,useWindowAsScrollContainer:O().bool},la={lift:[32],drop:[32],cancel:[27],up:[38,37],down:[40,39]},sa={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:la,shouldCancelStart:function(e){return-1!==[oa.Input,oa.Textarea,oa.Select,oa.Option,oa.Button].indexOf(e.target.tagName)||!!Gt(e.target,(function(e){return"true"===e.contentEditable}))},transitionDuration:300,useWindowAsScrollContainer:!1},da=Object.keys(ia),ua=(0,o.createContext)({manager:{}}),ca={index:O().number.isRequired,collection:O().oneOfType([O().number,O().string]),disabled:O().bool},ha=Object.keys(ca),pa=a(33334);const fa={name:O().string.isRequired,label:O().string,description:O().string,placeholder:O().string,addTooltip:O().string,itemGenerator:O().func,keyAccessor:O().func,onChange:O().func,value:O().oneOfType([O().array]),isFloat:O().bool,isInt:O().bool,controlName:O().string.isRequired},ga={label:null,description:null,onChange:()=>{},placeholder:(0,s.t)("Empty collection"),itemGenerator:()=>({key:kt().generate()}),keyAccessor:e=>e.key,value:[],addTooltip:(0,s.t)("Add an item")},ma=function(e){var t,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return a=t=function(t){function a(){var e,t;(0,Tt.Z)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=(0,Dt.Z)(this,(e=(0,Rt.Z)(a)).call.apply(e,[this].concat(r))),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"wrappedInstance",(0,o.createRef)()),t}return(0,Pt.Z)(a,t),(0,Ot.Z)(a,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e=this.props,t=e.collection,a=e.disabled,o=e.index,n=(0,It.findDOMNode)(this);n.sortableInfo={collection:t,disabled:a,index:o,manager:this.context.manager},this.node=n,this.ref={node:n},this.context.manager.add(t,this.ref)}},{key:"unregister",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return Ft()(n.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var t=n.withRef?this.wrappedInstance:null;return(0,o.createElement)(e,(0,_t.Z)({ref:t},zt(this.props,ha)))}}]),a}(o.Component),(0,At.Z)(t,"displayName",Qt("sortableElement",e)),(0,At.Z)(t,"contextType",ua),(0,At.Z)(t,"propTypes",ca),(0,At.Z)(t,"defaultProps",{collection:0}),a}(dt),va=function(e){var t,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return a=t=function(t){function a(e){var t;(0,Tt.Z)(this,a),t=(0,Dt.Z)(this,(0,Rt.Z)(a).call(this,e)),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"state",{}),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"handleStart",(function(e){var a=t.props,o=a.distance,n=a.shouldCancelStart;if(2!==e.button&&!n(e)){t.touched=!0,t.position=Jt(e);var r=Gt(e.target,(function(e){return null!=e.sortableInfo}));if(r&&r.sortableInfo&&t.nodeIsChild(r)&&!t.state.sorting){var i=t.props.useDragHandle,l=r.sortableInfo,s=l.index,d=l.collection;if(l.disabled)return;if(i&&!Gt(e.target,na))return;t.manager.active={collection:d,index:s},function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}(e)||e.target.tagName!==oa.Anchor||e.preventDefault(),o||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout((function(){return t.handlePress(e)}),t.props.pressDelay))}}})),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"nodeIsChild",(function(e){return e.sortableInfo.manager===t.manager})),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"handleMove",(function(e){var a=t.props,o=a.distance,n=a.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var r=Jt(e),i={x:t.position.x-r.x,y:t.position.y-r.y},l=Math.abs(i.x)+Math.abs(i.y);t.delta=i,o||n&&!(l>=n)?o&&l>=o&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}})),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"handleEnd",(function(){t.touched=!1,t.cancel()})),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"cancel",(function(){var e=t.props.distance;t.state.sorting||(e||clearTimeout(t.pressTimer),t.manager.active=null)})),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"handlePress",(function(e){try{var a=t.manager.getActive(),o=function(){if(a){var o=function(){var a,o,n,d,g,m,v=h.sortableInfo.index,b=(a=h,{bottom:Yt((o=window.getComputedStyle(a)).marginBottom),left:Yt(o.marginLeft),right:Yt(o.marginRight),top:Yt(o.marginTop)}),y=function(e){var t=window.getComputedStyle(e);return"grid"===t.display?{x:Yt(t.gridColumnGap),y:Yt(t.gridRowGap)}:{x:0,y:0}}(t.container),x=t.scrollContainer.getBoundingClientRect(),w=i({index:v,node:h,collection:p});if(t.node=h,t.margin=b,t.gridGap=y,t.width=w.width,t.height=w.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=h.getBoundingClientRect(),t.containerBoundingRect=x,t.index=v,t.newIndex=v,t.axis={x:r.indexOf("x")>=0,y:r.indexOf("y")>=0},t.offsetEdge=ea(h,t.container),t.initialOffset=Jt(f?(0,Mt.Z)({},e,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):e),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild((d="input, textarea, select, canvas, [contenteditable]",g=(n=h).querySelectorAll(d),m=n.cloneNode(!0),(0,jt.Z)(m.querySelectorAll(d)).forEach((function(e,t){"file"!==e.type&&(e.value=g[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),e.tagName===oa.Canvas&&g[t].width>0&&g[t].height>0&&e.getContext("2d").drawImage(g[t],0,0)})),m)),Ht(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-b.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-b.top,"px"),width:"".concat(t.width,"px")}),f&&t.helper.focus(),s&&(t.sortableGhost=h,Ht(h,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},f){var C=c?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,S=C.top,Z=C.left,k=C.width,_=S+C.height,E=Z+k;t.axis.x&&(t.minTranslate.x=Z-t.boundingClientRect.left,t.maxTranslate.x=E-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=S-t.boundingClientRect.top,t.maxTranslate.y=_-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(c?0:x.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(c?t.contentWindow.innerWidth:x.left+x.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(c?0:x.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(c?t.contentWindow.innerHeight:x.top+x.height)-t.boundingClientRect.top-t.height/2);l&&l.split(" ").forEach((function(e){return t.helper.classList.add(e)})),t.listenerNode=e.touches?e.target:t.contentWindow,f?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(Ut.move.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)})),Ut.end.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)}))),t.setState({sorting:!0,sortingIndex:v}),u&&u({node:h,index:v,collection:p,isKeySorting:f,nodes:t.manager.getOrderedRefs(),helper:t.helper},e),f&&t.keyMove(0)},n=t.props,r=n.axis,i=n.getHelperDimensions,l=n.helperClass,s=n.hideSortableGhost,d=n.updateBeforeSortStart,u=n.onSortStart,c=n.useWindowAsScrollContainer,h=a.node,p=a.collection,f=t.manager.isKeySorting,g=function(){if("function"==typeof d){t._awaitingUpdateBeforeSortStart=!0;var a=function(t,a){try{var o=(n=h.sortableInfo.index,Promise.resolve(d({collection:p,index:n,node:h,isKeySorting:f},e)).then((function(){})))}catch(e){return a(!0,e)}var n;return o&&o.then?o.then(a.bind(null,!1),a.bind(null,!0)):a(!1,value)}(0,(function(e,a){if(t._awaitingUpdateBeforeSortStart=!1,e)throw a;return a}));if(a&&a.then)return a.then((function(){}))}}();return g&&g.then?g.then(o):o()}}();return Promise.resolve(o&&o.then?o.then((function(){})):void 0)}catch(e){return Promise.reject(e)}})),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"handleSortMove",(function(e){var a=t.props.onSortMove;"function"==typeof e.preventDefault&&e.cancelable&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),a&&a(e)})),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"handleSortEnd",(function(e){var a=t.props,o=a.hideSortableGhost,n=a.onSortEnd,r=t.manager,i=r.active.collection,l=r.isKeySorting,s=t.manager.getOrderedRefs();t.listenerNode&&(l?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(Ut.move.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)})),Ut.end.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)})))),t.helper.parentNode.removeChild(t.helper),o&&t.sortableGhost&&Ht(t.sortableGhost,{opacity:"",visibility:""});for(var d=0,u=s.length;d<u;d++){var c=s[d],h=c.node;c.edgeOffset=null,c.boundingClientRect=null,qt(h,null),Vt(h,null),c.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"==typeof n&&n({collection:i,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:l,nodes:s},e),t.touched=!1})),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"autoscroll",(function(){var e=t.props.disableAutoscroll,a=t.manager.isKeySorting;if(e)t.autoScroller.clear();else{if(a){var o=(0,Mt.Z)({},t.translate),n=0,r=0;return t.axis.x&&(o.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),n=t.translate.x-o.x),t.axis.y&&(o.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),r=t.translate.y-o.y),t.translate=o,qt(t.helper,t.translate),t.scrollContainer.scrollLeft+=n,void(t.scrollContainer.scrollTop+=r)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}})),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"onAutoScroll",(function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()})),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"handleKeyDown",(function(e){var a=e.keyCode,o=t.props,n=o.shouldCancelStart,r=o.keyCodes,i=void 0===r?{}:r,l=(0,Mt.Z)({},la,i);t.manager.active&&!t.manager.isKeySorting||!(t.manager.active||l.lift.includes(a)&&!n(e)&&t.isValidSortingTarget(e))||(e.stopPropagation(),e.preventDefault(),l.lift.includes(a)&&!t.manager.active?t.keyLift(e):l.drop.includes(a)&&t.manager.active?t.keyDrop(e):l.cancel.includes(a)?(t.newIndex=t.manager.active.index,t.keyDrop(e)):l.up.includes(a)?t.keyMove(-1):l.down.includes(a)&&t.keyMove(1))})),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"keyLift",(function(e){var a=e.target,o=Gt(a,(function(e){return null!=e.sortableInfo})).sortableInfo,n=o.index,r=o.collection;t.initialFocusedNode=a,t.manager.isKeySorting=!0,t.manager.active={index:n,collection:r},t.handlePress(e)})),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"keyMove",(function(e){var a=t.manager.getOrderedRefs(),o=a[a.length-1].node.sortableInfo.index,n=t.newIndex+e,r=t.newIndex;if(!(n<0||n>o)){t.prevIndex=r,t.newIndex=n;var i=function(e,t,a){return e<a&&e>t?e-1:e>a&&e<t?e+1:e}(t.newIndex,t.prevIndex,t.index),l=a.find((function(e){return e.node.sortableInfo.index===i})),s=l.node,d=t.containerScrollDelta,u=l.boundingClientRect||Kt(s,d),c=l.translate||{x:0,y:0},h=u.top+c.y-d.top,p=u.left+c.x-d.left,f=r<n,g=f&&t.axis.x?s.offsetWidth-t.width:0,m=f&&t.axis.y?s.offsetHeight-t.height:0;t.handleSortMove({pageX:p+g,pageY:h+m,ignoreTransition:0===e})}})),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"keyDrop",(function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()})),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"handleKeyEnd",(function(e){t.manager.active&&t.keyDrop(e)})),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"isValidSortingTarget",(function(e){var a=t.props.useDragHandle,o=e.target,n=Gt(o,(function(e){return null!=e.sortableInfo}));return n&&n.sortableInfo&&!n.sortableInfo.disabled&&(a?na(o):o.sortableInfo)}));var n=new Bt;return function(e){Ft()(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}(e),t.manager=n,t.wrappedInstance=(0,o.createRef)(),t.sortableContextValue={manager:n},t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return(0,Pt.Z)(a,t),(0,Ot.Z)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,a=this.getContainer();Promise.resolve(a).then((function(a){e.container=a,e.document=e.container.ownerDocument||document;var o=e.props.contentWindow||e.document.defaultView||window;e.contentWindow="function"==typeof o?o():o,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:aa(e.container)||e.container,e.autoScroller=new ra(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach((function(t){return Ut[t].forEach((function(a){return e.container.addEventListener(a,e.events[t],!1)}))})),e.container.addEventListener("keydown",e.handleKeyDown)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach((function(t){return Ut[t].forEach((function(a){return e.container.removeEventListener(a,e.events[t])}))})),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t=this.props,a=t.lockAxis,o=t.lockOffset,n=t.lockToContainerEdges,r=t.transitionDuration,i=t.keyboardSortingTransitionDuration,l=void 0===i?r:i,s=this.manager.isKeySorting,d=e.ignoreTransition,u=Jt(e),c={x:u.x-this.initialOffset.x,y:u.y-this.initialOffset.y};if(c.y-=window.pageYOffset-this.initialWindowScroll.top,c.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=c,n){var h=function(e){var t=e.height,a=e.width,o=e.lockOffset,n=Array.isArray(o)?o:[o,o];Ft()(2===n.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",o);var r=(0,Et.Z)(n,2),i=r[0],l=r[1];return[ta({height:t,lockOffset:i,width:a}),ta({height:t,lockOffset:l,width:a})]}({height:this.height,lockOffset:o,width:this.width}),p=(0,Et.Z)(h,2),f=p[0],g=p[1],m={x:this.width/2-f.x,y:this.height/2-f.y},v={x:this.width/2-g.x,y:this.height/2-g.y};c.x=Xt(this.minTranslate.x+m.x,this.maxTranslate.x-v.x,c.x),c.y=Xt(this.minTranslate.y+m.y,this.maxTranslate.y-v.y,c.y)}"x"===a?c.y=0:"y"===a&&(c.x=0),s&&l&&!d&&Vt(this.helper,l),qt(this.helper,c)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,a=e.hideSortableGhost,o=e.onSortOver,n=this.containerScrollDelta,r=this.windowScrollDelta,i=this.manager.getOrderedRefs(),l=this.offsetEdge.left+this.translate.x+n.left,s=this.offsetEdge.top+this.translate.y+n.top,d=this.manager.isKeySorting,u=this.newIndex;this.newIndex=null;for(var c=0,h=i.length;c<h;c++){var p=i[c].node,f=p.sortableInfo.index,g=p.offsetWidth,m=p.offsetHeight,v={height:this.height>m?m/2:this.height/2,width:this.width>g?g/2:this.width/2},b=d&&f>this.index&&f<=u,y=d&&f<this.index&&f>=u,x={x:0,y:0},w=i[c].edgeOffset;w||(w=ea(p,this.container),i[c].edgeOffset=w,d&&(i[c].boundingClientRect=Kt(p,n)));var C=c<i.length-1&&i[c+1],S=c>0&&i[c-1];C&&!C.edgeOffset&&(C.edgeOffset=ea(C.node,this.container),d&&(C.boundingClientRect=Kt(C.node,n))),f!==this.index?(t&&Vt(p,t),this.axis.x?this.axis.y?y||f<this.index&&(l+r.left-v.width<=w.left&&s+r.top<=w.top+v.height||s+r.top+v.height<=w.top)?(x.x=this.width+this.marginOffset.x,w.left+x.x>this.containerBoundingRect.width-v.width&&C&&(x.x=C.edgeOffset.left-w.left,x.y=C.edgeOffset.top-w.top),null===this.newIndex&&(this.newIndex=f)):(b||f>this.index&&(l+r.left+v.width>=w.left&&s+r.top+v.height>=w.top||s+r.top+v.height>=w.top+m))&&(x.x=-(this.width+this.marginOffset.x),w.left+x.x<this.containerBoundingRect.left+v.width&&S&&(x.x=S.edgeOffset.left-w.left,x.y=S.edgeOffset.top-w.top),this.newIndex=f):b||f>this.index&&l+r.left+v.width>=w.left?(x.x=-(this.width+this.marginOffset.x),this.newIndex=f):(y||f<this.index&&l+r.left<=w.left+v.width)&&(x.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=f)):this.axis.y&&(b||f>this.index&&s+r.top+v.height>=w.top?(x.y=-(this.height+this.marginOffset.y),this.newIndex=f):(y||f<this.index&&s+r.top<=w.top+v.height)&&(x.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=f))),qt(p,x),i[c].translate=x):a&&(this.sortableGhost=p,Ht(p,{opacity:0,visibility:"hidden"}))}null==this.newIndex&&(this.newIndex=this.index),d&&(this.newIndex=u);var Z=d?this.prevIndex:u;o&&this.newIndex!==Z&&o({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:Z,isKeySorting:d,nodes:i,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return Ft()(n.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var e=this.props.getContainer;return"function"!=typeof e?(0,It.findDOMNode)(this):e(n.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=n.withRef?this.wrappedInstance:null;return(0,o.createElement)(ua.Provider,{value:this.sortableContextValue},(0,o.createElement)(e,(0,_t.Z)({ref:t},zt(this.props,da))))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"==typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){return this.props.useWindowAsScrollContainer?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),a}(o.Component),(0,At.Z)(t,"displayName",Qt("sortableList",e)),(0,At.Z)(t,"defaultProps",sa),(0,At.Z)(t,"propTypes",ia),a}(rt.aV),ba=function(e){var t,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return a=t=function(t){function a(){var e,t;(0,Tt.Z)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=(0,Dt.Z)(this,(e=(0,Rt.Z)(a)).call.apply(e,[this].concat(r))),(0,At.Z)((0,Nt.Z)((0,Nt.Z)(t)),"wrappedInstance",(0,o.createRef)()),t}return(0,Pt.Z)(a,t),(0,Ot.Z)(a,[{key:"componentDidMount",value:function(){(0,It.findDOMNode)(this).sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return Ft()(n.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.wrappedInstance.current}},{key:"render",value:function(){var t=n.withRef?this.wrappedInstance:null;return(0,o.createElement)(e,(0,_t.Z)({ref:t},this.props))}}]),a}(o.Component),(0,At.Z)(t,"displayName",Qt("sortableHandle",e)),a}((()=>(0,P.tZ)("i",{role:"img","aria-label":"drag",className:"fa fa-bars text-primary",style:{cursor:"ns-resize"}})));var ya={name:"11g6mpt",styles:"justify-content:flex-start"};class xa extends o.Component{constructor(e){super(e),this.onAdd=this.onAdd.bind(this)}onChange(e,t){const a=[...this.props.value];a[e]={...this.props.value[e],...t},this.props.onChange(a)}onAdd(){this.props.onChange(this.props.value.concat([this.props.itemGenerator()]))}onSortEnd({oldIndex:e,newIndex:t}){var a,o,n;this.props.onChange((o=e,n=t,(a=(a=this.props.value).slice()).splice(n<0?a.length+n:n,0,a.splice(o,1)[0]),a))}removeItem(e){this.props.onChange(this.props.value.filter(((t,a)=>e!==a)))}renderList(){if(0===this.props.value.length)return(0,P.tZ)("div",{className:"text-muted"},this.props.placeholder);const e=Zi[this.props.controlName];return(0,P.tZ)(va,{useDragHandle:!0,lockAxis:"y",onSortEnd:this.onSortEnd.bind(this),bordered:!0,css:e=>({borderRadius:e.gridUnit})},this.props.value.map(((t,a)=>{const{label:o,...n}=this.props;return(0,P.tZ)(ma,{className:"clearfix",css:ya,key:this.props.keyAccessor(t),index:a},(0,P.tZ)(ba,null),(0,P.tZ)("div",{css:e=>({flex:1,marginLeft:2*e.gridUnit,marginRight:2*e.gridUnit})},(0,P.tZ)(e,(0,C.Z)({},n,t,{onChange:this.onChange.bind(this,a)}))),(0,P.tZ)(lt.V,{icon:"times",label:"remove-item",tooltip:(0,s.t)("Remove item"),bsStyle:"primary",onClick:this.removeItem.bind(this,a)}))})))}render(){const{theme:e}=this.props;return(0,P.tZ)("div",{"data-test":"CollectionControl",className:"CollectionControl"},(0,P.tZ)(pa.gM,null,(0,P.tZ)(vt.Z,this.props),(0,P.tZ)(pa.IG,{onClick:this.onAdd},(0,P.tZ)(z.Z.PlusLarge,{iconSize:"s",iconColor:e.colors.grayscale.light5}))),this.renderList())}}xa.propTypes=fa,xa.defaultProps=ga;const wa=(0,it.b)(xa);var Ca=a(24198),Sa=a(81545),Za=a(99299);const ka={onChange:O().func,value:O().object},_a={position:"absolute",width:"50px",height:"20px",top:"0px",left:"0px",right:"0px",bottom:"0px"},Ea=R.Z.div`
  ${({theme:e})=>`\n      width: 50px;\n      height: 20px;\n      position: relative;\n      padding: ${e.gridUnit}px;\n      borderRadius: ${e.borderRadius}px;\n      display: inline-block;\n      cursor: pointer;\n    `}
`,Ma={color:{..._a,borderRadius:"2px"},checkerboard:{..._a,background:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==") left center'}};class Ta extends o.Component{constructor(e){super(e),this.onChange=this.onChange.bind(this)}onChange(e){this.props.onChange(e.rgb)}renderPopover(){const e=(0,Sa.Z)().get().colors.filter(((e,t)=>t<7));return(0,P.tZ)("div",{id:"filter-popover",className:"color-popover"},(0,P.tZ)(Ca.xS,{css:P.iv`
            // We need to use important here as these are element level styles
            padding: 0 !important;
            box-shadow: none !important;
          `,color:this.props.value,onChange:this.onChange,presetColors:e}))}render(){const e=this.props.value||{r:0,g:0,b:0,a:0},t={...Ma.color,background:`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`};return(0,P.tZ)("div",null,(0,P.tZ)(vt.Z,this.props),(0,P.tZ)(Za.Z,{trigger:"click",placement:"right",content:this.renderPopover()},(0,P.tZ)(Ea,null,(0,P.tZ)("div",{style:Ma.checkerboard}),(0,P.tZ)("div",{style:t}))))}}Ta.propTypes=ka,Ta.defaultProps={onChange:()=>{}};var Oa=a(76787),Da=a(47037),Ra=a.n(Da),Pa=a(83862),Na=a(77775),Aa=a(91178),Ia=a(86057),La=a(22318),Fa=a(1304),ja=a(13218),Ba=a.n(ja);const $a=(0,s.t)("Close"),za=(0,s.t)("Save as Dataset"),Ua=(0,s.t)("Open in SQL Lab"),Wa=e=>{const t=(0,r.k6)();return(0,P.tZ)("div",null,(0,P.tZ)(Te.Z,{onClick:()=>{null==e||null==e.closeModal||e.closeModal(),null==e||null==e.changeDatasource||e.changeDatasource()}},za),(0,P.tZ)(Te.Z,{onClick:({metaKey:a})=>(a=>{const{datasource:o}=e;if(Ba()(o)){const{id:e,type:n,sql:r}=o;((e,a,o,n)=>{const r={datasourceKey:`${a}__${o}`,sql:n};e?pe.Z.postForm("/sqllab/",r):t.push({pathname:"/sqllab",state:{requestedQuery:r}})})(a,e,n,r)}})(Boolean(a))},Ua),(0,P.tZ)(Te.Z,{buttonStyle:"primary",onClick:()=>{null==e||null==e.closeModal||e.closeModal()}},$a))};var Ha=a(85626),qa=a(9679),Va=a(73727);const Ga={actions:O().object.isRequired,onChange:O().func,value:O().string,datasource:O().object.isRequired,form_data:O().object.isRequired,isEditable:O().bool,onDatasourceSave:O().func},Xa=R.Z.div`
  .data-container {
    display: none;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    padding: ${({theme:e})=>4*e.gridUnit}px;
    padding-right: ${({theme:e})=>2*e.gridUnit}px;
  }
  .error-alert {
    margin: ${({theme:e})=>2*e.gridUnit}px;
  }
  .ant-dropdown-trigger {
    margin-left: ${({theme:e})=>2*e.gridUnit}px;
    box-shadow: none;
    &:active {
      box-shadow: none;
    }
  }
  .btn-group .open .dropdown-toggle {
    box-shadow: none;
    &.button-default {
      background: none;
    }
  }
  i.angle {
    color: ${({theme:e})=>e.colors.primary.base};
  }
  svg.datasource-modal-trigger {
    color: ${({theme:e})=>e.colors.primary.base};
    cursor: pointer;
  }
  .title-select {
    flex: 1 1 100%;
    display: inline-block;
    background-color: ${({theme:e})=>e.colors.grayscale.light3};
    padding: ${({theme:e})=>2*e.gridUnit}px;
    border-radius: ${({theme:e})=>e.borderRadius}px;
    text-align: center;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
  }
  .datasource-svg {
    margin-right: ${({theme:e})=>2*e.gridUnit}px;
    flex: none;
  }
  span[aria-label='dataset-physical'] {
    color: ${({theme:e})=>e.colors.grayscale.base};
  }
  span[aria-label='more-vert'] {
    color: ${({theme:e})=>e.colors.primary.base};
  }
`,Ya="change_dataset",Qa="view_in_sql_lab",Ka="edit_dataset",Ja="save_as_dataset",eo={[ce.i9.Query]:(0,P.tZ)(z.Z.ConsoleSqlOutlined,{className:"datasource-svg"}),[ce.i9.Table]:(0,P.tZ)(z.Z.DatasetPhysical,{className:"datasource-svg"})},to=e=>{e.metaKey?e.preventDefault():e.stopPropagation()};class ao extends o.PureComponent{constructor(e){super(e),this.onDatasourceSave=e=>{var t,a,o;this.props.actions.changeDatasource(e);const{temporalColumns:n,defaultTemporalColumn:r}=(0,Xe.X)(e),{columns:i}=e,l=null==(t=this.props.form_data)?void 0:t.granularity_sqla,s=null==(a=i.find((({column_name:e})=>e===l)))?void 0:a.is_dttm,d=null==(o=i.find((({column_name:e})=>e===r)))?void 0:o.is_dttm;if("table"===e.type&&!s){const e=d?r:null==n?void 0:n[0];this.props.actions.setControlValue("granularity_sqla",e||null)}this.props.onDatasourceSave&&this.props.onDatasourceSave(e)},this.toggleShowDatasource=()=>{this.setState((({showDatasource:e})=>({showDatasource:!e})))},this.toggleChangeDatasourceModal=()=>{this.setState((({showChangeDatasourceModal:e})=>({showChangeDatasourceModal:!e})))},this.toggleEditDatasourceModal=()=>{this.setState((({showEditDatasourceModal:e})=>({showEditDatasourceModal:!e})))},this.toggleSaveDatasetModal=()=>{this.setState((({showSaveDatasetModal:e})=>({showSaveDatasetModal:!e})))},this.handleMenuItemClick=({key:e})=>{switch(e){case Ya:this.toggleChangeDatasourceModal();break;case Ka:this.toggleEditDatasourceModal();break;case Qa:{const{datasource:e}=this.props,t={datasourceKey:`${e.id}__${e.type}`,sql:e.sql};pe.Z.postForm("/sqllab/",{form_data:(0,qa.o)(t)})}break;case Ja:this.toggleSaveDatasetModal()}},this.state={showEditDatasourceModal:!1,showChangeDatasourceModal:!1,showSaveDatasetModal:!1}}render(){var e,t;const{showChangeDatasourceModal:a,showEditDatasourceModal:n,showSaveDatasetModal:r}=this.state,{datasource:i,onChange:l,theme:d}=this.props,u=!(null!=i&&i.id);let c=!1;if(u){const e=(0,h.eY)(p.KD.datasourceId),t=(0,h.eY)(p.KD.sliceId);e||t||(c=!0)}const{user:f}=this.props,g=(null==(e=i.owners)?void 0:e.map((e=>e.id||e.value)).includes(f.userId))||(0,La.i5)(f),m=(0,La.N$)(f,"SQL Lab","menu_access"),v=(0,s.t)("Edit dataset"),b={datasourceKey:`${i.id}__${i.type}`,sql:i.sql},y=(0,P.tZ)(Pa.Menu,{onClick:this.handleMenuItemClick},this.props.isEditable&&!u&&(0,P.tZ)(Pa.Menu.Item,{key:Ka,"data-test":"edit-dataset",disabled:!g},g?v:(0,P.tZ)($.u,{title:(0,s.t)("You must be a dataset owner in order to edit. Please reach out to a dataset owner to request modifications or edit access.")},v)),(0,P.tZ)(Pa.Menu.Item,{key:Ya},(0,s.t)("Swap dataset")),!u&&m&&(0,P.tZ)(Pa.Menu.Item,{key:Qa},(0,P.tZ)(Va.rU,{to:{pathname:"/sqllab",state:{requestedQuery:b}},onClick:to},(0,s.t)("View in SQL Lab")))),x=(0,P.tZ)(Pa.Menu,{onClick:this.handleMenuItemClick},(0,P.tZ)(Pa.Menu.Item,{key:"query_preview"},(0,P.tZ)(Fa.Z,{triggerNode:(0,P.tZ)("span",{"data-test":"view-query-menu-item"},(0,s.t)("Query preview")),modalTitle:(0,s.t)("Query preview"),modalBody:(0,P.tZ)(Ha.Z,{sql:(null==i?void 0:i.sql)||(null==i?void 0:i.select_star)||""}),modalFooter:(0,P.tZ)(Wa,{changeDatasource:this.toggleSaveDatasetModal,datasource:i}),draggable:!1,resizable:!1,responsive:!0})),m&&(0,P.tZ)(Pa.Menu.Item,{key:Qa},(0,P.tZ)(Va.rU,{to:{pathname:"/sqllab",state:{requestedQuery:b}},onClick:to},(0,s.t)("View in SQL Lab"))),(0,P.tZ)(Pa.Menu.Item,{key:Ja},(0,s.t)("Save as dataset"))),{health_check_message:w}=i;let C;if(null!=i&&i.extra)if(Ra()(i.extra))try{C=JSON.parse(i.extra)}catch{}else C=i.extra;const S=u?(0,s.t)("Missing dataset"):(e=>"query"===(null==e?void 0:e.type)?null==e?void 0:e.sql:(null==e?void 0:e.name)||"")(i),Z=S;return(0,P.tZ)(Xa,{"data-test":"datasource-control",className:"DatasourceControl"},(0,P.tZ)("div",{className:"data-container"},eo[null==i?void 0:i.type],((e,t)=>(null==e?void 0:e.length)>25?(0,P.tZ)($.u,{title:t},(0,P.tZ)("span",{className:"title-select"},e)):(0,P.tZ)("span",{title:t,className:"title-select"},e))(S,Z),w&&(0,P.tZ)($.u,{title:w},(0,P.tZ)(z.Z.AlertSolid,{iconColor:d.colors.warning.base})),(null==(t=C)?void 0:t.warning_markdown)&&(0,P.tZ)(Ia.Z,{warningMarkdown:C.warning_markdown}),(0,P.tZ)(rt.Gj,{overlay:i.type===ce.i9.Query?x:y,trigger:["click"],"data-test":"datasource-menu"},(0,P.tZ)(z.Z.MoreVert,{className:"datasource-modal-trigger","data-test":"datasource-menu-trigger"}))),u&&c&&(0,P.tZ)("div",{className:"error-alert"},(0,P.tZ)(Aa.Z,{level:"warning",title:(0,s.t)("Missing URL parameters"),source:"explore",subtitle:(0,P.tZ)(o.Fragment,null,(0,P.tZ)("p",null,(0,s.t)("The URL is missing the dataset_id or slice_id parameters.")))})),u&&!c&&(0,P.tZ)("div",{className:"error-alert"},(0,P.tZ)(Aa.Z,{level:"warning",title:(0,s.t)("Missing dataset"),source:"explore",subtitle:(0,P.tZ)(o.Fragment,null,(0,P.tZ)("p",null,(0,s.t)("The dataset linked to this chart may have been deleted.")),(0,P.tZ)("p",null,(0,P.tZ)(Te.Z,{buttonStyle:"primary",onClick:()=>this.handleMenuItemClick({key:Ya})},(0,s.t)("Swap dataset"))))})),n&&(0,P.tZ)(Na.W,{datasource:i,show:n,onDatasourceSave:this.onDatasourceSave,onHide:this.toggleEditDatasourceModal}),a&&(0,P.tZ)(Na.Q,{onDatasourceSave:this.onDatasourceSave,onHide:this.toggleChangeDatasourceModal,show:a,onChange:l}),r&&(0,P.tZ)(me.W,{visible:r,onHide:this.toggleSaveDatasetModal,buttonTextOnSave:(0,s.t)("Save"),buttonTextOnOverwrite:(0,s.t)("Overwrite"),modalDescription:(0,s.t)("Save this query as a virtual dataset to continue exploring"),datasource:(0,ve.z)(i),openWindow:!1,formData:this.props.form_data}))}}ao.propTypes=Ga,ao.defaultProps={onChange:()=>{},onDatasourceSave:null,value:null,isEditable:!0};const oo=(0,it.b)(ao);var no=a(1090),ro=a(79684),io=a(34087),lo=a(42753),so=a(19113),uo=a(27130);const co=R.Z.span`
  display: inline-block;
  padding: 2px 0;
`,ho=(0,R.Z)(mt.II)`
  border-radius: ${({theme:e})=>e.borderRadius};
  height: 26px;
  padding-left: ${({theme:e})=>2.5*e.gridUnit}px;
`,po=({title:e,isEditDisabled:t,onChange:a})=>{const[n,r]=(0,o.useState)(!1),[i,l]=(0,o.useState)(!1),d=(0,s.t)("My metric"),u=(0,o.useCallback)((()=>r(!0)),[]),c=(0,o.useCallback)((()=>r(!1)),[]),h=(0,o.useCallback)((()=>l(!0)),[]),p=(0,o.useCallback)((()=>l(!1)),[]),f=(0,o.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),p())}),[p]),g=(0,o.useCallback)((e=>{""===e.target.value&&a(e),p()}),[a,p]);return t?(0,P.tZ)("span",{"data-test":"AdhocMetricTitle"},(null==e?void 0:e.label)||d):i?(0,P.tZ)(ho,{type:"text",placeholder:null==e?void 0:e.label,value:null!=e&&e.hasCustomLabel?e.label:"",autoFocus:!0,onChange:a,onBlur:g,onKeyPress:f,"data-test":"AdhocMetricEditTitle#input"}):(0,P.tZ)($.u,{placement:"top",title:(0,s.t)("Click to edit label")},(0,P.tZ)("span",{className:"AdhocMetricEditPopoverTitle inline-editable","data-test":"AdhocMetricEditTitle#trigger",onMouseOver:u,onMouseOut:c,onClick:h,onBlur:p,role:"button",tabIndex:0},(0,P.tZ)(co,null,(null==e?void 0:e.label)||d)," ",(0,P.tZ)("i",{className:"fa fa-pencil",style:{color:n?"black":"grey"}})))};var fo=a(63325),go=a(94301),mo=a(49238),vo=a(94670),bo=a(33313),yo=a(54076),xo=a(99963);const wo={onChange:O().func.isRequired,onClose:O().func.isRequired,onResize:O().func.isRequired,getCurrentTab:O().func,getCurrentLabel:O().func,adhocMetric:O().instanceOf(so.Z).isRequired,columns:O().arrayOf(io.Z),savedMetricsOptions:O().arrayOf(uo.Z),savedMetric:uo.Z,datasource:O().object,isNewMetric:O().bool,isLabelModified:O().bool},Co={columns:[],getCurrentTab:yo.EI,isNewMetric:!1},So=(0,R.Z)(rt.Ph)`
  .metric-option {
    & > svg {
      min-width: ${({theme:e})=>4*e.gridUnit+"px"};
    }
    & > .option-label {
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
`,Zo="SAVED";class ko extends o.PureComponent{constructor(e){super(e),this.defaultActiveTabKey=this.getDefaultTab(),this.onSave=this.onSave.bind(this),this.onResetStateAndClose=this.onResetStateAndClose.bind(this),this.onColumnChange=this.onColumnChange.bind(this),this.onAggregateChange=this.onAggregateChange.bind(this),this.onSavedMetricChange=this.onSavedMetricChange.bind(this),this.onSqlExpressionChange=this.onSqlExpressionChange.bind(this),this.onDragDown=this.onDragDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTabChange=this.onTabChange.bind(this),this.handleAceEditorRef=this.handleAceEditorRef.bind(this),this.refreshAceEditor=this.refreshAceEditor.bind(this),this.getDefaultTab=this.getDefaultTab.bind(this),this.state={adhocMetric:this.props.adhocMetric,savedMetric:this.props.savedMetric,width:W.kc,height:W.H7},document.addEventListener("mouseup",this.onMouseUp)}componentDidMount(){this.props.getCurrentTab(this.defaultActiveTabKey)}componentDidUpdate(e,t){var a,o,n,r,i,l,s,d,u,c,h,p,f;(null==(a=t.adhocMetric)?void 0:a.sqlExpression)===(null==(o=this.state.adhocMetric)?void 0:o.sqlExpression)&&(null==(n=t.adhocMetric)?void 0:n.aggregate)===(null==(r=this.state.adhocMetric)?void 0:r.aggregate)&&(null==(i=t.adhocMetric)||null==(l=i.column)?void 0:l.column_name)===(null==(s=this.state.adhocMetric)||null==(d=s.column)?void 0:d.column_name)&&(null==(u=t.savedMetric)?void 0:u.metric_name)===(null==(c=this.state.savedMetric)?void 0:c.metric_name)||this.props.getCurrentLabel({savedMetricLabel:(null==(h=this.state.savedMetric)?void 0:h.verbose_name)||(null==(p=this.state.savedMetric)?void 0:p.metric_name),adhocMetricLabel:null==(f=this.state.adhocMetric)?void 0:f.getDefaultLabel()})}componentWillUnmount(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove)}getDefaultTab(){const{adhocMetric:e,savedMetric:t,savedMetricsOptions:a,isNewMetric:o}=this.props;return(0,i.Z)(e.column)||(0,i.Z)(e.sqlExpression)?e.expressionType:(o||t.metric_name)&&Array.isArray(a)&&a.length>0?Zo:e.expressionType}onSave(){var e;const{adhocMetric:t,savedMetric:a}=this.state,o=null!=a&&a.metric_name?a:t,n=null!=(e=this.props.savedMetric)&&e.metric_name?this.props.savedMetric:this.props.adhocMetric;this.props.onChange({...o},n),this.props.onClose()}onResetStateAndClose(){this.setState({adhocMetric:this.props.adhocMetric,savedMetric:this.props.savedMetric},this.props.onClose)}onColumnChange(e){const t=this.props.columns.find((t=>t.column_name===e));this.setState((e=>({adhocMetric:e.adhocMetric.duplicateWith({column:t,expressionType:so.v.SIMPLE}),savedMetric:void 0})))}onAggregateChange(e){this.setState((t=>({adhocMetric:t.adhocMetric.duplicateWith({aggregate:e,expressionType:so.v.SIMPLE}),savedMetric:void 0})))}onSavedMetricChange(e){const t=this.props.savedMetricsOptions.find((t=>t.metric_name===e));this.setState((e=>({savedMetric:t,adhocMetric:e.adhocMetric.duplicateWith({column:void 0,aggregate:void 0,sqlExpression:void 0,expressionType:so.v.SIMPLE})})))}onSqlExpressionChange(e){this.setState((t=>({adhocMetric:t.adhocMetric.duplicateWith({sqlExpression:e,expressionType:so.v.SQL}),savedMetric:void 0})))}onDragDown(e){this.dragStartX=e.clientX,this.dragStartY=e.clientY,this.dragStartWidth=this.state.width,this.dragStartHeight=this.state.height,document.addEventListener("mousemove",this.onMouseMove)}onMouseMove(e){this.props.onResize(),this.setState({width:Math.max(this.dragStartWidth+(e.clientX-this.dragStartX),W.kc),height:Math.max(this.dragStartHeight+(e.clientY-this.dragStartY),W.H7)})}onMouseUp(){document.removeEventListener("mousemove",this.onMouseMove)}onTabChange(e){this.refreshAceEditor(),this.props.getCurrentTab(e)}handleAceEditorRef(e){e&&(this.aceEditorRef=e)}refreshAceEditor(){setTimeout((()=>{this.aceEditorRef&&this.aceEditorRef.editor.resize()}),0)}renderColumnOption(e){const t={...e};return t.metric_name&&!t.verbose_name&&(t.verbose_name=t.metric_name),(0,P.tZ)(xo.l,{column:t,showType:!0})}renderMetricOption(e){return(0,P.tZ)(xo.B,{metric:e,showType:!0})}render(){var e;const{adhocMetric:t,savedMetric:a,columns:n,savedMetricsOptions:r,onChange:i,onClose:l,onResize:d,datasource:u,isNewMetric:c,isLabelModified:h,...p}=this.props,{adhocMetric:f,savedMetric:g}=this.state,m=bo.Z.concat(n.map((e=>({name:e.column_name,value:e.column_name,score:50,meta:"column"})))),v=f.column&&f.column.column_name||f.inferSqlExpressionColumn(),b={ariaLabel:(0,s.t)("Select column"),placeholder:(0,s.t)("%s column(s)",n.length),value:v,onChange:this.onColumnChange,allowClear:!0,autoFocus:!v},y={ariaLabel:(0,s.t)("Select aggregate options"),placeholder:(0,s.t)("%s aggregates(s)",W.Ps.length),value:f.aggregate||f.inferSqlExpressionAggregate(),onChange:this.onAggregateChange,allowClear:!0,autoFocus:!!v},x={ariaLabel:(0,s.t)("Select saved metrics"),placeholder:(0,s.t)("%s saved metric(s)",null!=(e=null==r?void 0:r.length)?e:0),value:null==g?void 0:g.metric_name,onChange:this.onSavedMetricChange,allowClear:!0,autoFocus:!0},w=f.isValid()||(null==g?void 0:g.metric_name),S=h||c||!f.equals(t)||!(void 0===(null==g?void 0:g.metric_name)&&void 0===(null==a?void 0:a.metric_name))&&(null==g?void 0:g.metric_name)!==(null==a?void 0:a.metric_name);let Z={};if(null!=u&&u.extra)try{Z=JSON.parse(u.extra)}catch{}return(0,P.tZ)(mo.l0,(0,C.Z)({layout:"vertical",id:"metrics-edit-popover","data-test":"metrics-edit-popover"},p),(0,P.tZ)(Ke.ZP,{id:"adhoc-metric-edit-tabs","data-test":"adhoc-metric-edit-tabs",defaultActiveKey:this.defaultActiveTabKey,className:"adhoc-metric-edit-tabs",style:{height:this.state.height,width:this.state.width},onChange:this.onTabChange,allowOverflow:!0},(0,P.tZ)(Ke.ZP.TabPane,{key:Zo,tab:(0,s.t)("Saved")},(0,he.Z)(r).length>0?(0,P.tZ)(mo.xJ,{label:(0,s.t)("Saved metric")},(0,P.tZ)(So,(0,C.Z)({options:(0,he.Z)(r).map((e=>({value:e.metric_name,label:e.metric_name,customLabel:this.renderMetricOption(e),key:e.id})))},x))):u.type===ce.i9.Table?(0,P.tZ)(go.Tc,{image:"empty.svg",title:(0,s.t)("No saved metrics found"),description:(0,s.t)('Add metrics to dataset in "Edit datasource" modal')}):(0,P.tZ)(go.Tc,{image:"empty.svg",title:(0,s.t)("No saved metrics found"),description:(0,P.tZ)(o.Fragment,null,(0,P.tZ)("span",{tabIndex:0,role:"button",onClick:()=>{this.props.handleDatasetModal(!0),this.props.onClose()}},(0,s.t)("Create a dataset")),(0,s.t)(" to add metrics"))})),(0,P.tZ)(Ke.ZP.TabPane,{key:so.v.SIMPLE,tab:Z.disallow_adhoc_metrics?(0,P.tZ)($.u,{title:(0,s.t)("Simple ad-hoc metrics are not enabled for this dataset")},(0,s.t)("Simple")):(0,s.t)("Simple"),disabled:Z.disallow_adhoc_metrics},(0,P.tZ)(mo.xJ,{label:(0,s.t)("column")},(0,P.tZ)(rt.Ph,(0,C.Z)({options:n.map((e=>({value:e.column_name,label:e.verbose_name||e.column_name,key:e.id,customLabel:this.renderColumnOption(e)})))},b))),(0,P.tZ)(mo.xJ,{label:(0,s.t)("aggregate")},(0,P.tZ)(rt.Ph,(0,C.Z)({options:W.Ps.map((e=>({value:e,label:e,key:e})))},y)))),(0,P.tZ)(Ke.ZP.TabPane,{key:so.v.SQL,tab:Z.disallow_adhoc_metrics?(0,P.tZ)($.u,{title:(0,s.t)("Custom SQL ad-hoc metrics are not enabled for this dataset")},(0,s.t)("Custom SQL")):(0,s.t)("Custom SQL"),"data-test":"adhoc-metric-edit-tab#custom",disabled:Z.disallow_adhoc_metrics},(0,P.tZ)(vo.iO,{"data-test":"sql-editor",showLoadingForImport:!0,ref:this.handleAceEditorRef,keywords:m,height:this.state.height-80+"px",onChange:this.onSqlExpressionChange,width:"100%",showGutter:!1,value:f.sqlExpression||f.translateToSql({transformCountDistinct:!0}),editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,className:"filter-sql-editor",wrapEnabled:!0}))),(0,P.tZ)("div",null,(0,P.tZ)(Te.Z,{buttonSize:"small",onClick:this.onResetStateAndClose,"data-test":"AdhocMetricEdit#cancel",cta:!0},(0,s.t)("Close")),(0,P.tZ)(Te.Z,{disabled:!w||!S,buttonStyle:"primary",buttonSize:"small","data-test":"AdhocMetricEdit#save",onClick:this.onSave,cta:!0},(0,s.t)("Save")),(0,P.tZ)("i",{role:"button","aria-label":"Resize",tabIndex:0,onMouseDown:this.onDragDown,className:"fa fa-expand edit-popover-resize text-muted"})))}}ko.propTypes=wo,ko.defaultProps=Co;class _o extends o.PureComponent{constructor(e){super(e),this.onPopoverResize=this.onPopoverResize.bind(this),this.onLabelChange=this.onLabelChange.bind(this),this.closePopover=this.closePopover.bind(this),this.togglePopover=this.togglePopover.bind(this),this.getCurrentTab=this.getCurrentTab.bind(this),this.getCurrentLabel=this.getCurrentLabel.bind(this),this.onChange=this.onChange.bind(this),this.handleDatasetModal=this.handleDatasetModal.bind(this),this.state={adhocMetric:e.adhocMetric,popoverVisible:!1,title:{label:e.adhocMetric.label,hasCustomLabel:e.adhocMetric.hasCustomLabel},currentLabel:"",labelModified:!1,isTitleEditDisabled:!1,showSaveDatasetModal:!1}}static getDerivedStateFromProps(e,t){return t.adhocMetric.optionName!==e.adhocMetric.optionName?{adhocMetric:e.adhocMetric,title:{label:e.adhocMetric.label,hasCustomLabel:e.adhocMetric.hasCustomLabel},currentLabel:"",labelModified:!1}:{adhocMetric:e.adhocMetric}}onLabelChange(e){var t;const{verbose_name:a,metric_name:o}=this.props.savedMetric,n=null==(t=this.props.adhocMetric)?void 0:t.getDefaultLabel(),r=e.target.value;this.setState((e=>({title:{label:r||e.currentLabel||a||o||n,hasCustomLabel:!!r},labelModified:!0})))}onPopoverResize(){this.forceUpdate()}handleDatasetModal(e){this.setState({showSaveDatasetModal:e})}closePopover(){this.togglePopover(!1),this.setState({labelModified:!1})}togglePopover(e){this.setState({popoverVisible:e})}getCurrentTab(e){this.setState({isTitleEditDisabled:e===Zo})}getCurrentLabel({savedMetricLabel:e,adhocMetricLabel:t}){const a=e||t;this.setState({currentLabel:a,labelModified:!0}),!e&&this.state.title.hasCustomLabel||this.setState({title:{label:a,hasCustomLabel:!1}})}onChange(e,t){this.props.onMetricEdit({...e,...this.state.title},t)}render(){const{adhocMetric:e,savedMetric:t,columns:a,savedMetricsOptions:n,datasource:r,isControlledComponent:i}=this.props,{verbose_name:l,metric_name:d}=t,{hasCustomLabel:u,label:c}=e,h=u?c:e.getDefaultLabel(),p=this.state.labelModified?this.state.title:{label:l||d||h,hasCustomLabel:u},{visible:f,togglePopover:g,closePopover:m}=i?{visible:this.props.visible,togglePopover:this.props.togglePopover,closePopover:this.props.closePopover}:{visible:this.state.popoverVisible,togglePopover:this.togglePopover,closePopover:this.closePopover},v=(0,P.tZ)(fo.b,null,(0,P.tZ)(ko,{adhocMetric:e,columns:a,savedMetricsOptions:n,savedMetric:t,datasource:r,handleDatasetModal:this.handleDatasetModal,onResize:this.onPopoverResize,onClose:m,onChange:this.onChange,getCurrentTab:this.getCurrentTab,getCurrentLabel:this.getCurrentLabel,isNewMetric:this.props.isNew,isLabelModified:this.state.labelModified&&h!==this.state.title.label})),b=(0,P.tZ)(po,{title:p,onChange:this.onLabelChange,isEditDisabled:this.state.isTitleEditDisabled});return(0,P.tZ)(o.Fragment,null,this.state.showSaveDatasetModal&&(0,P.tZ)(me.W,{visible:this.state.showSaveDatasetModal,onHide:()=>this.handleDatasetModal(!1),buttonTextOnSave:(0,s.t)("Save"),buttonTextOnOverwrite:(0,s.t)("Overwrite"),modalDescription:(0,s.t)("Save this query as a virtual dataset to continue exploring"),datasource:r}),(0,P.tZ)(ut.Z,{placement:"right",trigger:"click",content:v,defaultVisible:f,visible:f,onVisibleChange:g,title:b,destroyTooltipOnHide:!0},this.props.children))}}const Eo=_o,Mo={adhocMetric:O().instanceOf(so.Z),onMetricEdit:O().func.isRequired,onRemoveMetric:O().func,columns:O().arrayOf(io.Z),savedMetricsOptions:O().arrayOf(uo.Z),savedMetric:uo.Z,datasource:O().object,onMoveLabel:O().func,onDropLabel:O().func,index:O().number,type:O().string,multi:O().bool,datasourceWarningMessage:O().string};class To extends o.PureComponent{constructor(e){super(e),this.onRemoveMetric=this.onRemoveMetric.bind(this)}onRemoveMetric(e){null==e||e.stopPropagation(),this.props.onRemoveMetric(this.props.index)}render(){const{adhocMetric:e,onMetricEdit:t,columns:a,savedMetricsOptions:o,savedMetric:n,datasource:r,onMoveLabel:i,onDropLabel:l,index:s,type:d,multi:u,datasourceWarningMessage:c}=this.props;return(0,P.tZ)(Eo,{adhocMetric:e,onMetricEdit:t,columns:a,savedMetricsOptions:o,savedMetric:n,datasource:r},(0,P.tZ)(pa.yz,{savedMetric:n,adhocMetric:e,label:e.label,onRemove:this.onRemoveMetric,onMoveLabel:i,onDropLabel:l,index:s,type:null!=d?d:lo.g.AdhocMetricOption,withCaret:!0,isFunction:!0,multi:u,datasourceWarningMessage:c}))}}const Oo=To;To.propTypes=Mo;const Do={option:O().oneOfType([O().object,O().string]).isRequired,index:O().number.isRequired,onMetricEdit:O().func,onRemoveMetric:O().func,onMoveLabel:O().func,onDropLabel:O().func,columns:O().arrayOf(io.Z),savedMetrics:O().arrayOf(uo.Z),savedMetricsOptions:O().arrayOf(uo.Z),multi:O().bool,datasource:O().object,datasourceWarningMessage:O().string};function Ro({option:e,onMetricEdit:t,onRemoveMetric:a,columns:o,savedMetrics:n,savedMetricsOptions:r,datasource:i,onMoveLabel:l,onDropLabel:s,index:d,type:u,multi:c,datasourceWarningMessage:h}){let p;var f;if("string"==typeof e?(f=e,p=n.find((e=>e.metric_name===f))):e.metric_name&&(p=e),e instanceof so.Z||p){var g;const n={onMetricEdit:t,onRemoveMetric:a,columns:o,savedMetricsOptions:r,datasource:i,adhocMetric:e instanceof so.Z?e:new so.Z({}),onMoveLabel:l,onDropLabel:s,index:d,savedMetric:null!=(g=p)?g:{},type:u,multi:c,datasourceWarningMessage:h};return(0,P.tZ)(Oo,n)}return null}Ro.propTypes=Do;var Po=a(17536);const No={name:O().string.isRequired,onChange:O().func,value:O().oneOfType([O().arrayOf(O().oneOfType([O().string,Po.Z])),O().oneOfType([O().string,Po.Z])]),columns:O().arrayOf(io.Z),savedMetrics:O().arrayOf(uo.Z),isLoading:O().bool,multi:O().bool,clearable:O().bool,datasource:O().object};function Ao(e,t,a){var o;return null!=(o=null==e?void 0:e.filter((e=>Array.isArray(t)?!t.includes(e.metric_name)||e.metric_name===a:e)))?o:[]}function Io(e){return e&&!(e instanceof so.Z)&&e.expressionType}function Lo(e){return e?Array.isArray(e)?e.map((e=>Io(e)?new so.Z(e):e)):Io(e)?[new so.Z(e)]:[e]:[]}const Fo={metric_name:"",expression:""},jo=({onChange:e,multi:t,value:a,columns:n,savedMetrics:r,datasource:i,...l})=>{const[d,u]=(0,o.useState)(Lo(a)),c=(0,I.Fg)(),h=(0,A.D)(n),p=(0,A.D)(r),f=(0,o.useCallback)((a=>{if(null===a)return void e(null);const o=(0,he.Z)(a).map((e=>e.metric_name?e.metric_name:e)).filter((e=>e));e(t?o:o[0])}),[t,e]),g=(0,o.useCallback)((e=>{const t=[...d,e];u(t),f(t)}),[f,d]),m=(0,o.useCallback)(((e,t)=>{const a=d.map((a=>a!==t.metric_name&&void 0===a.optionName||a.optionName!==t.optionName?a:e));u(a),f(a)}),[f,d]),v=(0,o.useCallback)((e=>{if(!Array.isArray(d))return;const t=[...d];t.splice(e,1),u(t),f(t)}),[f,d]),b=(0,o.useCallback)(((e,t)=>{const a=[...d];[a[t],a[e]]=[a[e],a[t]],u(a)}),[d]),y=(0,o.useCallback)((()=>!t&&d.length>0),[t,d.length]),x=(0,o.useMemo)((()=>Ao(r,a,null)),[a,r]),w=(0,o.useMemo)((()=>new so.Z({})),[d]),C=(0,o.useCallback)((e=>y()?e:(0,P.tZ)(Eo,{adhocMetric:w,onMetricEdit:g,columns:n,savedMetricsOptions:x,savedMetric:Fo,datasource:i,isNew:!0},e)),[n,i,y,w,g,x]);(0,o.useEffect)((()=>{if(a&&(!at()(h,n)||!at()(p,r))){const e=((e,t,a)=>(0,he.Z)(e).filter((e=>"string"==typeof e||e.metric_name?null==a?void 0:a.some((t=>t.metric_name===e||t.metric_name===e.metric_name)):null==t?void 0:t.some((t=>!e.column||e.column.column_name===t.column_name)))))(a,n,r);at()(e,a)||f(e)}}),[n,f,r]),(0,o.useEffect)((()=>{u(Lo(a))}),[a]);const S=(0,o.useCallback)((()=>f(d)),[f,d]),Z=(0,o.useCallback)(((e,a)=>(0,P.tZ)(Ro,{key:a,index:a,option:e,onMetricEdit:m,onRemoveMetric:v,columns:n,datasource:i,savedMetrics:r,savedMetricsOptions:Ao(r,d,null==d?void 0:d[a]),onMoveLabel:b,onDropLabel:S,multi:t})),[n,i,b,t,S,m,v,r,d]);return(0,P.tZ)("div",{className:"metrics-select"},(0,P.tZ)(pa.gM,null,(0,P.tZ)(vt.Z,l),C((0,P.tZ)(pa.IG,{disabled:y(),"data-test":"add-metric-button"},(0,P.tZ)(z.Z.PlusLarge,{iconSize:"s",iconColor:c.colors.grayscale.light5})))),(0,P.tZ)(pa.yj,null,d.length>0?d.map(((e,t)=>Z(e,t))):C((0,P.tZ)(pa.SW,null,(0,P.tZ)(z.Z.PlusSmall,{iconColor:c.colors.grayscale.light1}),(0,s.t)("Add metric")))))};jo.propTypes=No,jo.defaultProps={onChange:()=>{},clearable:!0,savedMetrics:[],columns:[]};const Bo=jo;var $o=a(83734);const zo="fix",Uo="metric",Wo={onChange:O().func,value:O().object,isFloat:O().bool,datasource:O().object.isRequired,default:O().shape({type:O().oneOf(["fix","metric"]),value:O().oneOfType([O().string,O().number])})},Ho={onChange:()=>{},default:{type:zo,value:5}};class qo extends o.Component{constructor(e){super(e),this.onChange=this.onChange.bind(this),this.setType=this.setType.bind(this),this.setFixedValue=this.setFixedValue.bind(this),this.setMetric=this.setMetric.bind(this);const t=(e.value?e.value.type:e.default.type)||zo,a=(e.value?e.value.value:e.default.value)||"100";this.state={type:t,fixedValue:t===zo?a:"",metricValue:t===Uo?a:null}}onChange(){this.props.onChange({type:this.state.type,value:this.state.type===zo?this.state.fixedValue:this.state.metricValue})}setType(e){this.setState({type:e},this.onChange)}setFixedValue(e){this.setState({fixedValue:e},this.onChange)}setMetric(e){this.setState({metricValue:e},this.onChange)}render(){const e=(this.props.value||this.props.default).type||zo,t=this.props.datasource?this.props.datasource.columns:null,a=this.props.datasource?this.props.datasource.metrics:null;return(0,P.tZ)("div",null,(0,P.tZ)(vt.Z,this.props),(0,P.tZ)(Qe.Z,{ghost:!0,css:e=>(0,P.iv)("&.ant-collapse>.ant-collapse-item.ant-collapse-no-arrow>.ant-collapse-header{border:0px;padding:0px 0px ",2*e.gridUnit,"px 0px;display:inline-block;}&.ant-collapse-ghost>.ant-collapse-item>.ant-collapse-content>.ant-collapse-content-box{padding:0px;& .well{margin-bottom:0px;padding:",2*e.gridUnit,"px;}}","")},(0,P.tZ)(Qe.Z.Panel,{showArrow:!1,header:(0,P.tZ)(we.Z,{onClick:()=>{}},this.state.type===zo&&(0,P.tZ)("span",null,this.state.fixedValue),this.state.type===Uo&&(0,P.tZ)("span",null,(0,P.tZ)("span",null,(0,s.t)("metric"),": "),(0,P.tZ)("strong",null,this.state.metricValue?this.state.metricValue.label:null)))},(0,P.tZ)("div",{className:"well"},(0,P.tZ)($o.Z,{title:(0,s.t)("Fixed"),isSelected:e===zo,onSelect:()=>{this.setType(zo)}},(0,P.tZ)(ro.Z,{isFloat:!0,onChange:this.setFixedValue,onFocus:()=>{this.setType(zo)},value:this.state.fixedValue})),(0,P.tZ)($o.Z,{title:(0,s.t)("Based on a metric"),isSelected:e===Uo,onSelect:()=>{this.setType(Uo)}},(0,P.tZ)(Bo,{name:"metric",columns:t,savedMetrics:a,multi:!1,onFocus:()=>{this.setType(Uo)},onChange:this.setMetric,value:this.state.metricValue,datasource:this.props.datasource}))))))}}function Vo(e){return void 0!==e.value}qo.propTypes=Wo,qo.defaultProps=Ho;const Go=(0,le.ZP)((({addDangerToast:e,allowClear:t=!0,ariaLabel:a,dataEndpoint:n,multi:r=!0,mutator:i,onChange:l,placeholder:d,value:u,...c})=>{const[h,p]=(0,o.useState)([]);return(0,o.useEffect)((()=>{pe.Z.get({endpoint:n}).then((e=>{const t=i?i(e.json):e.json.result;p(t)})).catch((t=>(0,f.O$)(t).then((t=>{const{error:a}=t;e((0,s.t)("Error while fetching data: %s",a))}))))}),[e,n,i]),(0,P.tZ)(rt.Ph,{allowClear:t,ariaLabel:a||(0,s.t)("Select ..."),value:(()=>{const e=u||(void 0!==c.default?c.default:void 0);if(null!==e||h.find((e=>null===e.value)))return e})(),header:(0,P.tZ)(vt.Z,c),mode:r?"multiple":"single",onChange:e=>{let t=e;Array.isArray(e)&&(t=e.map((e=>Vo(e)?e.value:e))),Vo(e)&&(t=e.value),l(t)},options:h,placeholder:d})}));var Xo=a(82199),Yo=a(36155),Qo={name:"mlsake",styles:"margin-left:0;margin-right:0"};function Ko(e){return(0,P.tZ)(Yo.Z,(0,C.Z)({},e,{css:Qo}))}var Jo=a(665),en=a(42878);const tn={label:O().string,tooltip:O().string,colType:O().string,width:O().string,height:O().string,timeLag:O().oneOfType([O().string,O().number]),timeRatio:O().string,comparisonType:O().string,showYAxis:O().bool,yAxisBounds:O().array,bounds:O().array,d3format:O().string,dateFormat:O().string,onChange:O().func},an={label:(0,s.t)("Time series columns"),tooltip:"",colType:"",width:"",height:"",timeLag:"",timeRatio:"",comparisonType:"",showYAxis:!1,yAxisBounds:[null,null],bounds:[null,null],d3format:"",dateFormat:""},on=[{value:"value",label:(0,s.t)("Actual value"),key:"value"},{value:"diff",label:(0,s.t)("Difference"),key:"diff"},{value:"perc",label:(0,s.t)("Percentage"),key:"perc"},{value:"perc_change",label:(0,s.t)("Percentage change"),key:"perc_change"}],nn=[{value:"time",label:(0,s.t)("Time comparison"),key:"time"},{value:"contrib",label:(0,s.t)("Contribution"),key:"contrib"},{value:"spark",label:(0,s.t)("Sparkline"),key:"spark"},{value:"avg",label:(0,s.t)("Period average"),key:"avg"}],rn=(0,R.Z)(rt.X2)`
  margin-top: ${({theme:e})=>2*e.gridUnit}px;
  display: flex;
  align-items: center;
`,ln=(0,R.Z)(rt.JX)`
  display: flex;
  align-items: center;
`,sn=(0,R.Z)(lt.V)`
  margin-left: ${({theme:e})=>e.gridUnit}px;
  color: ${({theme:e})=>e.colors.grayscale.light1};
`,dn=R.Z.div`
  margin-top: ${({theme:e})=>5*e.gridUnit}px;
  display: flex;
  justify-content: center;
`;class un extends o.Component{constructor(e){super(e),this.onSave=this.onSave.bind(this),this.onClose=this.onClose.bind(this),this.resetState=this.resetState.bind(this),this.initialState=this.initialState.bind(this),this.onPopoverVisibleChange=this.onPopoverVisibleChange.bind(this),this.state=this.initialState()}initialState(){return{label:this.props.label,tooltip:this.props.tooltip,colType:this.props.colType,width:this.props.width,height:this.props.height,timeLag:this.props.timeLag||0,timeRatio:this.props.timeRatio,comparisonType:this.props.comparisonType,showYAxis:this.props.showYAxis,yAxisBounds:this.props.yAxisBounds,bounds:this.props.bounds,d3format:this.props.d3format,dateFormat:this.props.dateFormat,popoverVisible:!1}}resetState(){const e=this.initialState();this.setState({...e})}onSave(){this.props.onChange(this.state),this.setState({popoverVisible:!1})}onClose(){this.resetState()}onSelectChange(e,t){this.setState({[e]:t})}onTextInputChange(e,t){this.setState({[e]:t.target.value})}onCheckboxChange(e,t){this.setState({[e]:t})}onBoundsChange(e){this.setState({bounds:e})}onPopoverVisibleChange(e){e?this.setState({popoverVisible:e}):this.resetState()}onYAxisBoundsChange(e){this.setState({yAxisBounds:e})}textSummary(){return`${this.props.label}`}formRow(e,t,a,o){return(0,P.tZ)(rn,null,(0,P.tZ)(ln,{xs:24,md:11},e,(0,P.tZ)(sn,{placement:"top",tooltip:t,label:a})),(0,P.tZ)(rt.JX,{xs:24,md:13},o))}renderPopover(){return(0,P.tZ)("div",{id:"ts-col-popo",style:{width:320}},this.formRow((0,s.t)("Label"),(0,s.t)("The column header label"),"time-lag",(0,P.tZ)(mt.II,{value:this.state.label,onChange:this.onTextInputChange.bind(this,"label"),placeholder:(0,s.t)("Label")})),this.formRow((0,s.t)("Tooltip"),(0,s.t)("Column header tooltip"),"col-tooltip",(0,P.tZ)(mt.II,{value:this.state.tooltip,onChange:this.onTextInputChange.bind(this,"tooltip"),placeholder:(0,s.t)("Tooltip")})),this.formRow((0,s.t)("Type"),(0,s.t)("Type of comparison, value difference or percentage"),"col-type",(0,P.tZ)(rt.Ph,{ariaLabel:(0,s.t)("Type"),value:this.state.colType||void 0,onChange:this.onSelectChange.bind(this,"colType"),options:nn})),(0,P.tZ)("hr",null),"spark"===this.state.colType&&this.formRow((0,s.t)("Width"),(0,s.t)("Width of the sparkline"),"spark-width",(0,P.tZ)(mt.II,{value:this.state.width,onChange:this.onTextInputChange.bind(this,"width"),placeholder:(0,s.t)("Width")})),"spark"===this.state.colType&&this.formRow((0,s.t)("Height"),(0,s.t)("Height of the sparkline"),"spark-width",(0,P.tZ)(mt.II,{value:this.state.height,onChange:this.onTextInputChange.bind(this,"height"),placeholder:(0,s.t)("Height")})),["time","avg"].indexOf(this.state.colType)>=0&&this.formRow((0,s.t)("Time lag"),(0,s.t)("Number of periods to compare against. You can use negative numbers to compare from the beginning of the time range."),"time-lag",(0,P.tZ)(mt.II,{value:this.state.timeLag,onChange:this.onTextInputChange.bind(this,"timeLag"),placeholder:(0,s.t)("Time Lag")})),["spark"].indexOf(this.state.colType)>=0&&this.formRow((0,s.t)("Time ratio"),(0,s.t)("Number of periods to ratio against"),"time-ratio",(0,P.tZ)(mt.II,{value:this.state.timeRatio,onChange:this.onTextInputChange.bind(this,"timeRatio"),placeholder:(0,s.t)("Time Ratio")})),"time"===this.state.colType&&this.formRow((0,s.t)("Type"),(0,s.t)("Type of comparison, value difference or percentage"),"comp-type",(0,P.tZ)(rt.Ph,{ariaLabel:(0,s.t)("Type"),value:this.state.comparisonType||void 0,onChange:this.onSelectChange.bind(this,"comparisonType"),options:on})),"spark"===this.state.colType&&this.formRow((0,s.t)("Show Y-axis"),(0,s.t)("Show Y-axis on the sparkline. Will display the manually set min/max if set or min/max values in the data otherwise."),"show-y-axis-bounds",(0,P.tZ)(St.Z,{value:this.state.showYAxis,onChange:this.onCheckboxChange.bind(this,"showYAxis")})),"spark"===this.state.colType&&this.formRow((0,s.t)("Y-axis bounds"),(0,s.t)("Manually set min/max values for the y-axis."),"y-axis-bounds",(0,P.tZ)(Ct,{value:this.state.yAxisBounds,onChange:this.onYAxisBoundsChange.bind(this)})),"spark"!==this.state.colType&&this.formRow((0,s.t)("Color bounds"),(0,s.t)("Number bounds used for color encoding from red to blue.\n               Reverse the numbers for blue to red. To get pure red or blue,\n               you can enter either only min or max."),"bounds",(0,P.tZ)(Ct,{value:this.state.bounds,onChange:this.onBoundsChange.bind(this)})),this.formRow((0,s.t)("Number format"),(0,s.t)("Optional d3 number format string"),"d3-format",(0,P.tZ)(mt.II,{value:this.state.d3format,onChange:this.onTextInputChange.bind(this,"d3format"),placeholder:(0,s.t)("Number format string")})),"spark"===this.state.colType&&this.formRow((0,s.t)("Date format"),(0,s.t)("Optional d3 date format string"),"date-format",(0,P.tZ)(mt.II,{value:this.state.dateFormat,onChange:this.onTextInputChange.bind(this,"dateFormat"),placeholder:(0,s.t)("Date format string")})),(0,P.tZ)(dn,null,(0,P.tZ)(Te.Z,{buttonSize:"small",onClick:this.onClose,cta:!0},(0,s.t)("Close")),(0,P.tZ)(Te.Z,{buttonStyle:"primary",buttonSize:"small",onClick:this.onSave,cta:!0},(0,s.t)("Save"))))}render(){return(0,P.tZ)("span",null,this.textSummary()," ",(0,P.tZ)(ut.Z,{trigger:"click",content:this.renderPopover(),title:(0,s.t)("Column Configuration"),visible:this.state.popoverVisible,onVisibleChange:this.onPopoverVisibleChange},(0,P.tZ)(lt.V,{icon:"edit",className:"text-primary",label:"edit-ts-column"})))}}un.propTypes=tn,un.defaultProps=an;var cn=a(79512);const hn=["longitude","latitude","zoom","bearing","pitch"],pn={onChange:O().func,value:O().shape({longitude:O().number,latitude:O().number,zoom:O().number,bearing:O().number,pitch:O().number}),default:O().object,name:O().string.isRequired};class fn extends o.Component{constructor(e){super(e),this.onChange=this.onChange.bind(this)}onChange(e,t){this.props.onChange({...this.props.value,[e]:t})}renderTextControl(e){return(0,P.tZ)("div",{key:e},(0,P.tZ)(mo.lX,null,e),(0,P.tZ)(ro.Z,{value:this.props.value[e],onChange:this.onChange.bind(this,e),isFloat:!0}))}renderPopover(){return(0,P.tZ)("div",{id:`filter-popover-${this.props.name}`},hn.map((e=>this.renderTextControl(e))))}renderLabel(){return this.props.value.longitude&&this.props.value.latitude?`${(0,cn.decimal2sexagesimal)(this.props.value.longitude)} | ${(0,cn.decimal2sexagesimal)(this.props.value.latitude)}`:"N/A"}render(){return(0,P.tZ)("div",null,(0,P.tZ)(vt.Z,this.props),(0,P.tZ)(Za.Z,{container:document.body,trigger:"click",placement:"right",content:this.renderPopover(),title:(0,s.t)("Viewport")},(0,P.tZ)(we.Z,{className:"pointer"},this.renderLabel())))}}fn.propTypes=pn,fn.defaultProps={onChange:()=>{},default:{type:"fix",value:5},value:{longitude:6.85236157047845,latitude:31.222656842808707,zoom:1,bearing:0,pitch:0}};var gn=a(20292),mn=a(13284);const vn=[{name:"echarts_timeseries_line",icon:(0,P.tZ)(z.Z.LineChartTile,null)},{name:"echarts_timeseries_bar",icon:(0,P.tZ)(z.Z.BarChartTile,null)},{name:"echarts_area",icon:(0,P.tZ)(z.Z.AreaChartTile,null)},{name:"table",icon:(0,P.tZ)(z.Z.TableChartTile,null)},{name:"big_number_total",icon:(0,P.tZ)(z.Z.BigNumberChartTile,null)},{name:"pie",icon:(0,P.tZ)(z.Z.PieChartTile,null)}],bn={iconSize:"l",css:e=>P.iv`
    padding: ${e.gridUnit}px;
    & > * {
      line-height: 0;
    }
  `},yn=({isActive:e,isRendered:t,vizMeta:a,onTileClick:n})=>{var r;const{mountedPluginMetadata:i}=(0,B.gp)(),l=(0,o.useRef)(null),d=(0,I.Fg)(),u=2*d.transitionTiming,[c,h]=(0,o.useState)(!1),[p,f]=(0,o.useState)(!1),[g,m]=(0,o.useState)(!1),v=a.name?(null==(r=i[a.name])?void 0:r.name)||`${a.name}`:(0,s.t)("Select Viz Type"),b=(0,o.useCallback)((()=>{n(a.name),f(!0),h(!1),setTimeout((()=>{f(!1)}),1e3*u)}),[n,u,a.name]);(0,o.useEffect)((()=>{m(Boolean(!p&&(!e||l.current&&l.current.scrollWidth>l.current.clientWidth)))}),[e,p]);const y=(0,o.useMemo)((()=>e?{}:{role:"button",tabIndex:0,onClick:b}),[b,e]);let x=null;return g&&(x=t?(0,s.t)("Currently rendered: %s",v):v),(0,P.tZ)($.u,{title:x,onVisibleChange:e=>h(e),visible:c&&!p,placement:"top",mouseEnterDelay:.4},(0,P.tZ)("div",(0,C.Z)({},y,{css:P.iv`
          display: flex;
          align-items: center;
          text-transform: uppercase;

          color: ${d.colors.grayscale.base};
          font-weight: ${d.typography.weights.bold};
          border-radius: 6px;
          white-space: nowrap;
          overflow: hidden;
          max-width: fit-content;

          ${!e&&P.iv`
            flex-shrink: 0;
            width: ${6*d.gridUnit}px;
            background-color: transparent;
            transition: none;
            &:hover svg path {
              fill: ${d.colors.primary.base};
              transition: fill ${d.transitionTiming}s ease-out;
            }
          `}

          ${e&&P.iv`
            width: 100%;
            background-color: ${d.colors.grayscale.light4};
            transition:
              width ${u}s ease-out,
              background-color ${u}s ease-out;
            cursor: default;
            svg path {
              fill: ${d.colors.primary.base};
            }
          `}
        `}),a.icon," ",(0,P.tZ)("span",{css:P.iv`
            overflow: hidden;
            text-overflow: ellipsis;
            min-width: 0;
            padding-right: ${d.gridUnit}px;
          `,ref:l},v)))},xn=o.memo((({currentSelection:e,onChange:t})=>{const a=(0,n.v9)((e=>{var t,a,o;return null==(t=e.charts)||null==(a=t[(0,ae.Jp)(e.explore)])||null==(o=a.latestQueryFormData)?void 0:o.viz_type})),r=(0,o.useMemo)((()=>{const t=[...vn];return e&&vn.every((t=>t.name!==e))&&e!==a&&t.unshift({name:e,icon:(0,P.tZ)(z.Z.MonitorOutlined,(0,C.Z)({},bn,{"aria-label":"monitor"}))}),a&&vn.every((e=>e.name!==a))&&t.unshift({name:a,icon:(0,P.tZ)(z.Z.CheckSquareOutlined,(0,C.Z)({},bn,{"aria-label":"check-square"}))}),t}),[e,a]);return(0,P.tZ)("div",{css:e=>P.iv`
          display: flex;
          justify-content: space-between;
          column-gap: ${e.gridUnit}px;
        `,"data-test":"fast-viz-switcher"},r.map((o=>(0,P.tZ)(yn,{vizMeta:o,isActive:e===o.name,isRendered:a===o.name,onTileClick:t,key:o.name}))))})),wn=((0,gn.Z)().common.conf.VIZ_TYPE_DENYLIST||[]).concat(Object.values(p.g2)),Cn=(0,ue.Z)();function Sn({vizType:e}){return(0,B.gp)().loading||Cn.has(e)?null:(0,P.tZ)("div",{className:"text-danger",css:e=>P.iv`
        margin-top: ${e.gridUnit}px;
      `},(0,P.tZ)("i",{className:"fa fa-exclamation-circle text-danger"})," ",(0,P.tZ)("small",null,(0,s.t)("This visualization type is not supported.")))}(0,de.cr)(de.TT.DASHBOARD_NATIVE_FILTERS)&&!wn.includes("filter_box")&&wn.push("filter_box");const Zn=(0,R.Z)(Je.default)`
  .ant-modal-body {
    padding: 0;
  }
`;var kn=a(61890),_n=a(38575),En=a(81315);const Mn=(0,R.Z)(mt.Rn)`
  width: 100%;
`,Tn=R.Z.div`
  display: flex;
  justify-content: flex-end;
`,On=[{value:_n.s2.None,label:(0,s.t)("None")},{value:_n.s2.GreaterThan,label:">"},{value:_n.s2.LessThan,label:"<"},{value:_n.s2.GreaterOrEqual,label:"≥"},{value:_n.s2.LessOrEqual,label:"≤"},{value:_n.s2.Equal,label:"="},{value:_n.s2.NotEqual,label:"≠"},{value:_n.s2.Between,label:"< x <"},{value:_n.s2.BetweenOrEqual,label:"≤ x ≤"},{value:_n.s2.BetweenOrLeftEqual,label:"≤ x <"},{value:_n.s2.BetweenOrRightEqual,label:"< x ≤"}],Dn=(e,t)=>a=>(o,n)=>a&&n&&!e(Number(a),Number(n))?Promise.reject(new Error(t)):Promise.resolve(),Rn=Dn(((e,t)=>e>t),(0,s.t)("This value should be smaller than the right target value")),Pn=Dn(((e,t)=>e<t),(0,s.t)("This value should be greater than the left target value")),Nn=e=>e&&_n.i3.includes(e),An=e=>!e||e===_n.s2.None,In=[{required:!0,message:(0,s.t)("Required")}],Ln=[{required:!0,message:(0,s.t)("Required")},({getFieldValue:e})=>({validator:Rn(e("targetValueRight"))})],Fn=[{required:!0,message:(0,s.t)("Required")},({getFieldValue:e})=>({validator:Pn(e("targetValueLeft"))})],jn=["targetValueRight"],Bn=["targetValueLeft"],$n=(e,t)=>An(e.operator)!==An(t.operator)||Nn(e.operator)!==Nn(t.operator),zn=(0,P.tZ)(mo.xJ,{name:"operator",label:(0,s.t)("Operator"),rules:In,initialValue:On[0].value},(0,P.tZ)(En.Z,{ariaLabel:(0,s.t)("Operator"),options:On})),Un=({getFieldValue:e})=>An(e("operator"))?(0,P.tZ)(rt.X2,{gutter:12},(0,P.tZ)(rt.JX,{span:6},zn)):Nn(e("operator"))?(0,P.tZ)(rt.X2,{gutter:12},(0,P.tZ)(rt.JX,{span:9},(0,P.tZ)(mo.xJ,{name:"targetValueLeft",label:(0,s.t)("Left value"),rules:Ln,dependencies:jn,validateTrigger:"onBlur",trigger:"onBlur"},(0,P.tZ)(Mn,null))),(0,P.tZ)(rt.JX,{span:6},zn),(0,P.tZ)(rt.JX,{span:9},(0,P.tZ)(mo.xJ,{name:"targetValueRight",label:(0,s.t)("Right value"),rules:Fn,dependencies:Bn,validateTrigger:"onBlur",trigger:"onBlur"},(0,P.tZ)(Mn,null)))):(0,P.tZ)(rt.X2,{gutter:12},(0,P.tZ)(rt.JX,{span:6},zn),(0,P.tZ)(rt.JX,{span:18},(0,P.tZ)(mo.xJ,{name:"targetValue",label:(0,s.t)("Target value"),rules:In},(0,P.tZ)(Mn,null)))),Wn=({config:e,onChange:t,columns:a=[]})=>{var o;const n=[{value:(r=(0,I.Fg)()).colors.success.light1,label:(0,s.t)("success")},{value:r.colors.alert.light1,label:(0,s.t)("alert")},{value:r.colors.error.light1,label:(0,s.t)("error")},{value:r.colors.success.dark1,label:(0,s.t)("success dark")},{value:r.colors.alert.dark1,label:(0,s.t)("alert dark")},{value:r.colors.error.dark1,label:(0,s.t)("error dark")}];var r;return(0,P.tZ)(mo.l0,{onFinish:t,initialValues:e,requiredMark:"optional",layout:"vertical"},(0,P.tZ)(rt.X2,{gutter:12},(0,P.tZ)(rt.JX,{span:12},(0,P.tZ)(mo.xJ,{name:"column",label:(0,s.t)("Column"),rules:In,initialValue:null==(o=a[0])?void 0:o.value},(0,P.tZ)(En.Z,{ariaLabel:(0,s.t)("Select column"),options:a}))),(0,P.tZ)(rt.JX,{span:12},(0,P.tZ)(mo.xJ,{name:"colorScheme",label:(0,s.t)("Color scheme"),rules:In,initialValue:n[0].value},(0,P.tZ)(En.Z,{ariaLabel:(0,s.t)("Color scheme"),options:n})))),(0,P.tZ)(mo.xJ,{noStyle:!0,shouldUpdate:$n},Un),(0,P.tZ)(mo.xJ,null,(0,P.tZ)(Tn,null,(0,P.tZ)(Te.Z,{htmlType:"submit",buttonStyle:"primary"},(0,s.t)("Apply")))))},Hn=({title:e,columns:t,onChange:a,config:n,children:r,...i})=>{const[l,s]=(0,o.useState)(!1),d=(0,o.useCallback)((e=>{s(!1),a(e)}),[a]);return(0,P.tZ)(Za.Z,(0,C.Z)({title:e,content:(0,P.tZ)(Wn,{onChange:d,config:n,columns:t}),visible:l,onVisibleChange:s,trigger:["click"],overlayStyle:{width:"450px"}},i),r)},qn=R.Z.div`
  ${({theme:e})=>P.iv`
    padding: ${e.gridUnit}px;
    border: solid 1px ${e.colors.grayscale.light2};
    border-radius: ${e.gridUnit}px;
  `}
`,Vn=(0,R.Z)(pa.EQ)`
  &,
  & > div {
    margin-bottom: ${({theme:e})=>e.gridUnit}px;
    :last-child {
      margin-bottom: 0;
    }
  }
`,Gn=R.Z.button`
  ${({theme:e})=>P.iv`
    color: ${e.colors.grayscale.light1};
    height: 100%;
    width: ${6*e.gridUnit}px;
    border: none;
    border-right: solid 1px ${e.colors.grayscale.dark2}0C;
    padding: 0;
    outline: none;
    border-bottom-left-radius: 3px;
    border-top-left-radius: 3px;
  `}
`,Xn=({value:e,onChange:t,columnOptions:a,verboseMap:n,removeIrrelevantConditions:r,...i})=>{const l=(0,I.Fg)(),[d,u]=(0,o.useState)(null!=e?e:[]);return(0,o.useEffect)((()=>{t&&t(d)}),[d,t]),(0,o.useEffect)((()=>{if(r){const e=d.filter((e=>a.some((t=>(null==t?void 0:t.value)===(null==e?void 0:e.column)))));e.length!==d.length&&r&&u(e)}}),[d,a,r]),(0,P.tZ)("div",null,(0,P.tZ)(vt.Z,i),(0,P.tZ)(qn,null,d.map(((e,t)=>(0,P.tZ)(Vn,{key:t},(0,P.tZ)(Gn,{onClick:()=>(e=>{u((t=>t.filter(((t,a)=>a!==e))))})(t)},(0,P.tZ)(z.Z.XSmall,{iconColor:l.colors.grayscale.light1})),(0,P.tZ)(Hn,{title:(0,s.t)("Edit formatter"),config:e,columns:a,onChange:e=>((e,t)=>{const a=[...d];a.splice(t,1,e),u(a)})(e,t),destroyTooltipOnHide:!0},(0,P.tZ)(pa.EQ,{withCaret:!0},(0,P.tZ)(pa.__,null,(({column:e,operator:t,targetValue:a,targetValueLeft:o,targetValueRight:r})=>{var i;const l=null!=(i=e&&(null==n?void 0:n[e]))?i:e;switch(t){case _n.s2.None:return`${l}`;case _n.s2.Between:return`${o} ${_n.s2.LessThan} ${l} ${_n.s2.LessThan} ${r}`;case _n.s2.BetweenOrEqual:return`${o} ${_n.s2.LessOrEqual} ${l} ${_n.s2.LessOrEqual} ${r}`;case _n.s2.BetweenOrLeftEqual:return`${o} ${_n.s2.LessOrEqual} ${l} ${_n.s2.LessThan} ${r}`;case _n.s2.BetweenOrRightEqual:return`${o} ${_n.s2.LessThan} ${l} ${_n.s2.LessOrEqual} ${r}`;default:return`${l} ${t} ${a}`}})(e)),(0,P.tZ)(pa.Ne,null,(0,P.tZ)(z.Z.CaretRight,{iconColor:l.colors.grayscale.light1}))))))),(0,P.tZ)(Hn,{title:(0,s.t)("Add new formatter"),columns:a,onChange:e=>{u((t=>[...t,e]))},destroyTooltipOnHide:!0},(0,P.tZ)(pa.SW,null,(0,P.tZ)(z.Z.PlusSmall,{iconColor:l.colors.grayscale.light1}),(0,s.t)("Add new color formatter")))))};var Yn=a(22068),Qn=a(40917);const Kn=o.createContext(!1),Jn=o.createContext([{},()=>{}]),er=R.Z.div`
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0;
`,tr=(e={},t)=>{if(t.canDrop)return{...e,[t.key]:t.canDrop};if(t.key){const a={...e};return delete a[t.key],a}return e},ar=({children:e})=>{const t=(0,Qn.N)(),[a,n]=o.useState(t.getMonitor().isDragging());(0,o.useEffect)((()=>{const e=t.getMonitor(),a=e.subscribeToStateChange((()=>{if("dragIndex"in(e.getItem()||{}))return;const t=e.isDragging();n(t)}));return()=>{a()}}),[t]);const r=(0,o.useReducer)(tr,{});return(0,P.tZ)(Jn.Provider,{value:r},(0,P.tZ)(Kn.Provider,{value:a},(0,P.tZ)(er,null,e)))};function or({displayGhostButton:e=!0,accept:t,valuesRenderer:a,isLoading:n,...r}){const i=(0,I.Fg)(),l=r.canDrop,d=r.canDropValue,u=(0,o.useCallback)((e=>{var t;return l(e)&&(null==(t=null==d?void 0:d(e.value))||t)}),[l,d]),[{isOver:c,canDrop:h},p]=(0,Yn.L)({accept:n?[]:t,drop:e=>{r.onDrop(e),null==r.onDropValue||r.onDropValue(e.value)},canDrop:u,collect:e=>({isOver:e.isOver(),canDrop:e.canDrop(),type:e.getItemType()})}),f=(0,o.useContext)(Jn)[1];(0,o.useEffect)((()=>(f({key:r.name,canDrop:u}),()=>{f({key:r.name})})),[f,r.name,u]);const g=(0,o.useContext)(Kn),m=(0,o.useMemo)((()=>a()),[a]);return(0,P.tZ)("div",{ref:p},(0,P.tZ)(pa.gM,null,(0,P.tZ)(vt.Z,r)),(0,P.tZ)(pa.H$,{"data-test":"dnd-labels-container",canDrop:h,isOver:c,isDragging:g,isLoading:n},m,e&&(0,P.tZ)(pa.SW,{cancelHover:!r.onClickGhostButton,onClick:r.onClickGhostButton},(0,P.tZ)(z.Z.PlusSmall,{iconColor:i.colors.grayscale.light1}),(0,s.t)(r.ghostButtonText))))}var nr,rr=a(75294);!function(e){e.Isoline="ISOLINE",e.Isoband="ISOBAND"}(nr||(nr={}));const ir=R.Z.div`
  margin-top: ${({theme:e})=>2*e.gridUnit}px;
`,lr=(0,R.Z)(rt.X2)`
  width: 100%;
  gap: ${({theme:e})=>2*e.gridUnit}px;
`,sr=e=>e&&(e=>!(Object.keys(e).length<4)&&e.upperThreshold&&e.lowerThreshold)(e)?nr.Isoband:nr.Isoline,dr=(e,t)=>{const a={lowerThreshold:[],upperThreshold:[],strokeWidth:[],color:[]},o=(0,rr.Z)(t.lowerThreshold);if(o&&a.lowerThreshold.push(o),e===nr.Isoline){const e=(0,rr.Z)(t.strokeWidth);e&&a.strokeWidth.push(e)}if(e===nr.Isoband){const e=(0,rr.Z)(t.upperThreshold);e&&a.upperThreshold.push(e),!e&&!o&&t.upperThreshold&&t.lowerThreshold&&parseFloat(t.lowerThreshold)>=parseFloat(t.upperThreshold)&&(a.lowerThreshold.push((0,s.t)("Lower threshold must be lower than upper threshold")),a.upperThreshold.push((0,s.t)("Upper threshold must be greater than lower threshold")))}return a},ur={lowerThreshold:void 0,upperThreshold:void 0,color:void 0,strokeWidth:void 0},cr=({value:e,onSave:t,onClose:a})=>{const[n,r]=(0,o.useState)(sr(e)),[i,l]=(0,o.useState)(e||ur),[d,u]=(0,o.useState)(dr(sr(e),e||ur)),[c,h]=(0,o.useState)(!1);(0,o.useEffect)((()=>{const e=n===nr.Isoband,t=Boolean(i.lowerThreshold)||0===i.lowerThreshold,a=Boolean(i.upperThreshold)||0===i.upperThreshold,o=Boolean(i.strokeWidth)||0===i.strokeWidth,r="object"==typeof i.color&&"r"in i.color&&"number"==typeof i.color.r&&"g"in i.color&&"number"==typeof i.color.g&&"b"in i.color&&"number"==typeof i.color.b&&"a"in i.color&&"number"==typeof i.color.a,l=dr(n,i);l!==d&&u(l);const s=e?t&&a&&r:t&&r&&o;s!==c&&h(s)}),[i,n]);const p=e=>{const t={...i};t.color={...e,a:100},l(t)},f=e=>{const t={...i};t.lowerThreshold=e,l(t)};return(0,P.tZ)(o.Fragment,null,(0,P.tZ)(Ke.ZP,{id:"contour-edit-tabs",onChange:e=>{r(e)},defaultActiveKey:sr(e)},(0,P.tZ)(Ke.ZP.TabPane,{className:"adhoc-filter-edit-tab",key:nr.Isoline,tab:(0,s.t)("Isoline")},(0,P.tZ)("div",{key:nr.Isoline,className:"isoline-popover-section"},(0,P.tZ)(lr,null,(0,P.tZ)(rt.JX,{flex:"1"},(0,P.tZ)(vt.Z,{name:"isoline-threshold",label:(0,s.t)("Threshold"),description:(0,s.t)("Defines the value that determines the boundary between different regions or levels in the data "),validationErrors:d.lowerThreshold,hovered:!0}),(0,P.tZ)(ro.Z,{value:i.lowerThreshold,onChange:f}))),(0,P.tZ)(lr,null,(0,P.tZ)(rt.JX,{flex:"1"},(0,P.tZ)(vt.Z,{name:"isoline-stroke-width",label:(0,s.t)("Stroke Width"),description:(0,s.t)("The width of the Isoline in pixels"),validationErrors:d.strokeWidth,hovered:!0}),(0,P.tZ)(ro.Z,{value:i.strokeWidth||"",onChange:e=>{const t={...i};t.strokeWidth=e,l(t)}})),(0,P.tZ)(rt.JX,{flex:"1"},(0,P.tZ)(vt.Z,{name:"isoline-color",label:(0,s.t)("Color"),description:(0,s.t)("The color of the isoline"),validationErrors:d.color,hovered:!0}),(0,P.tZ)(Ta,{value:"object"==typeof i&&(null==i?void 0:i.color),onChange:p}))))),(0,P.tZ)(Ke.ZP.TabPane,{className:"adhoc-filter-edit-tab",key:nr.Isoband,tab:(0,s.t)("Isoband")},(0,P.tZ)("div",{key:nr.Isoband,className:"isoline-popover-section"},(0,P.tZ)(lr,null,(0,P.tZ)(rt.JX,{flex:"1"},(0,P.tZ)(vt.Z,{name:"isoband-threshold-lower",label:(0,s.t)("Lower Threshold"),description:(0,s.t)("The lower limit of the threshold range of the Isoband"),validationErrors:d.lowerThreshold,hovered:!0}),(0,P.tZ)(ro.Z,{value:i.lowerThreshold||"",onChange:f})),(0,P.tZ)(rt.JX,{flex:"1"},(0,P.tZ)(vt.Z,{name:"isoband-threshold-upper",label:(0,s.t)("Upper Threshold"),description:(0,s.t)("The upper limit of the threshold range of the Isoband"),validationErrors:d.upperThreshold,hovered:!0}),(0,P.tZ)(ro.Z,{value:i.upperThreshold||"",onChange:e=>{const t={...i};t.upperThreshold=e,l(t)}}))),(0,P.tZ)(lr,null,(0,P.tZ)(rt.JX,{flex:"1"},(0,P.tZ)(vt.Z,{name:"isoband-color",label:(0,s.t)("Color"),description:(0,s.t)("The color of the isoband"),validationErrors:d.color,hovered:!0}),(0,P.tZ)(Ta,{value:null==i?void 0:i.color,onChange:p})))))),(0,P.tZ)(ir,null,(0,P.tZ)(Te.Z,{buttonSize:"small",onClick:a,cta:!0},(0,s.t)("Close")),(0,P.tZ)(Te.Z,{"data-test":"adhoc-filter-edit-popover-save-button",disabled:!c||Object.keys(d).some((e=>d[e].length>0)),buttonStyle:"primary",buttonSize:"small",className:"m-r-5",onClick:()=>{if(c&&t){const e=n===nr.Isoline?(e=>({color:e.color,lowerThreshold:e.lowerThreshold,upperThreshold:void 0,strokeWidth:e.strokeWidth}))(i):(e=>({color:e.color,lowerThreshold:e.lowerThreshold,upperThreshold:e.upperThreshold,strokeWidth:void 0}))(i);t((e=>{const t={...e};return["lowerThreshold","upperThreshold","strokeWidth"].forEach((e=>{t[e]=Number(t[e])})),t})(e)),a&&a()}},cta:!0},(0,s.t)("Save"))))},hr=({value:e,saveContour:t,isControlled:a,visible:n,toggleVisibility:r,...i})=>{const[l,s]=(0,o.useState)(!1),d=a?n:l,u=a&&r?r:s,c=(0,P.tZ)(cr,{value:e,onSave:t,onClose:()=>u(!1)});return(0,P.tZ)(ut.Z,{trigger:"click",content:c,defaultVisible:d,visible:d,onVisibleChange:u,destroyTooltipOnHide:!0},i.children)};var pr=a(27034),fr=a(72813);const gr=(0,R.Z)(lt.V)`
  margin: 0 ${({theme:e})=>e.gridUnit}px;
`;function mr({children:e,index:t,clickClose:a,withCaret:n,isExtra:r,datasourceWarningMessage:i,canDelete:l=!0}){const d=(0,I.Fg)(),u=(0,o.useCallback)((e=>{e.stopPropagation(),a(t)}),[a,t]);return(0,P.tZ)(pa.EQ,{"data-test":"option-label",withCaret:n},l&&(0,P.tZ)(pa.gu,{role:"button","data-test":"remove-control-button",onClick:u},(0,P.tZ)(z.Z.XSmall,{iconColor:d.colors.grayscale.light1})),(0,P.tZ)(pa.__,{"data-test":"control-label"},e),(!!i||r)&&(0,P.tZ)(gr,{icon:"exclamation-triangle",placement:"top",bsStyle:"warning",tooltip:i||(0,s.t)("\n                This filter was inherited from the dashboard's context.\n                It won't be saved when saving the chart.\n              ")}),n&&(0,P.tZ)(pa.Ne,null,(0,P.tZ)(z.Z.CaretRight,{iconColor:d.colors.grayscale.light1})))}const vr=R.Z.div`
  width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`;function br(e){const{index:t,label:a,tooltipTitle:n,column:r,type:i,onShiftOptions:l,clickClose:s,withCaret:d,isExtra:u,datasourceWarningMessage:c,canDelete:h=!0,tooltipOverlay:p,...f}=e,g=(0,o.useRef)(null),m=(0,o.useRef)(null),[{isDragging:v},b]=(0,pr.c)({item:{type:i,dragIndex:t},collect:e=>({isDragging:e.isDragging()})}),[,y]=(0,Yn.L)({accept:i,hover:(e,a)=>{var o;if(!g.current)return;const{dragIndex:n}=e,r=t;if(n===r)return;const i=null==(o=g.current)?void 0:o.getBoundingClientRect(),s=(i.bottom-i.top)/2,d=a.getClientOffset(),u=d?d.y-i.top:0;n<r&&u<s||n>r&&u>s||(l(n,r),e.dragIndex=r)}}),x=!v&&n&&a&&n!==a||!v&&m&&m.current&&m.current.scrollWidth>m.current.clientWidth||!v&&p,w=()=>x?p?(0,P.tZ)($.u,{overlay:p},(0,P.tZ)("span",null,a)):(0,P.tZ)($.u,{title:n||a},(0,P.tZ)("span",null,a)):(0,P.tZ)("span",null,a),S=()=>{const e=r&&(0,fr.GA)(r)?{verbose_name:r.label,expression:r.sqlExpression}:r;return(0,P.tZ)(xo.l,{column:e,labelRef:m,showType:!0})};return b(y(g)),(0,P.tZ)(pa.a7,(0,C.Z)({ref:g},f),(0,P.tZ)(mr,{index:t,clickClose:s,withCaret:d,isExtra:u,datasourceWarningMessage:c,canDelete:h},(0,P.tZ)((()=>a?(0,P.tZ)(vr,{ref:m},(0,P.tZ)(w,null)):r?(0,P.tZ)(vr,null,(0,P.tZ)(S,null)):null),null)))}const yr=(0,R.Z)(br)`
  max-width: 100%;
  min-width: 100%;
`,xr=R.Z.li`
  display: flex;
  align-items: center;
`,wr=R.Z.div`
  background-color: ${({formattedColor:e})=>e};
  height: ${({theme:e})=>e.gridUnit}px;
  width: ${({theme:e})=>e.gridUnit}px;
  margin: 0 ${({theme:e})=>e.gridUnit}px;
`,Cr=({contour:e,index:t,saveContour:a,onClose:o,onShift:n})=>{const{lowerThreshold:r,upperThreshold:i,color:l,strokeWidth:d}=e,u=i,c=l?`rgba(${l.r}, ${l.g}, ${l.b}, 1)`:"undefined",h=u?(p=[r||-1,i],`${(0,s.t)("Threshold")}: [${p[0]}, ${p[1]}], color: ${c}`):((e,t)=>`${(0,s.t)("Threshold")}: ${e}, ${(0,s.t)("color")}: ${c}, ${(0,s.t)("stroke width")}: ${t}`)(r||-1,d);var p;const f=(0,P.tZ)("div",{className:"contour-tooltip-overlay"},(0,P.tZ)(xr,null,(0,s.t)("Threshold: "),u?`[${r}, ${i}]`:`${r}`),(0,P.tZ)(xr,null,(0,s.t)("Color: "),(0,P.tZ)(wr,{formattedColor:c})," ",c),!u&&(0,P.tZ)(xr,null,`${(0,s.t)("Stroke Width:")} ${d}`));return(0,P.tZ)(hr,{saveContour:a,value:e},(0,P.tZ)(yr,{index:t,label:h,type:"ContourOption",withCaret:!0,clickClose:o,onShiftOptions:n,tooltipOverlay:f}))},Sr=[{lowerThreshold:4,color:{r:255,g:0,b:255,a:100},strokeWidth:1,zIndex:0},{lowerThreshold:5,color:{r:0,g:255,b:0,a:100},strokeWidth:2,zIndex:1},{lowerThreshold:6,upperThreshold:10,color:{r:0,g:0,b:255,a:100},zIndex:2}],Zr=(0,R.Z)("div")`
  position: relative;
  width: calc(100% - ${({theme:e})=>e.gridUnit}px);
  bottom: ${({theme:e})=>4*e.gridUnit}px;
  left: 0;
`;var kr=a(41609),_r=a.n(kr);const Er=e=>(0,_n.xN)(e)?e.column_name:e;class Mr{constructor(e,t,a){this.values=void 0,this.options=void 0,this.multi=void 0,this.options=e,this.multi=t,this.values=(0,he.Z)(a).map((t=>t&&(0,fr.s9)(t)&&t in e?e[t]:(0,fr.s9)(t)?null:t)).filter(Boolean)}add(e){(0,fr.s9)(e)&&e in this.options?this.values.push(this.options[e]):(0,fr.s9)(e)||this.values.push(e)}del(e){this.values.splice(e,1)}replace(e,t){this.values[e]&&(this.values[e]=(0,fr.s9)(t)?this.options[t]:t)}swap(e,t){[this.values[e],this.values[t]]=[this.values[t],this.values[e]]}has(e){return this.values.some((t=>(0,fr.s9)(e)?t.column_name===e||t.label===e:t.column_name===e.label||t.label===e.label))}getValues(){return this.multi?this.values.map(Er):this.values.length>0?Er(this.values[0]):void 0}}var Tr=a(23493),Or=a.n(Tr);const Dr=(0,R.Z)(rt.Ph)`
  .metric-option {
    & > svg {
      min-width: ${({theme:e})=>4*e.gridUnit+"px"};
    }
    & > .option-label {
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
`,Rr=({columns:e,editedColumn:t,getCurrentTab:a,hasCustomLabel:r,isTemporal:i,label:l,onChange:d,onClose:u,setDatasetModal:c,setLabel:h})=>{const p=(0,n.v9)((e=>e.explore.datasource.type)),[f]=(0,o.useState)(l),[g,m,v]=(e=>e?(0,fr.GA)(e)?[e,void 0,void 0]:(0,_n.zy)(e)?[void 0,e,void 0]:[void 0,void 0,e]:[void 0,void 0,void 0])(t),[b,y]=(0,o.useState)(g),[x,w]=(0,o.useState)(m),[C,S]=(0,o.useState)(v),[Z,k]=(0,o.useState)(null),[_,E,M]=function(e,t){const[a,n]=(0,o.useState)(W.kc),[r,i]=(0,o.useState)(W.H7),[l,s]=(0,o.useState)(0),[d,u]=(0,o.useState)(0),[c,h]=(0,o.useState)(0),[p,f]=(0,o.useState)(0),[g,m]=(0,o.useState)(a),[v,b]=(0,o.useState)(r),[y,x]=(0,o.useState)(!1),w=(0,o.useCallback)((e=>{e.preventDefault(),s(e.clientX),u(e.clientY)}),[]),C=(0,o.useCallback)((()=>{x(!1)}),[]),S=(0,o.useCallback)((e=>{h(e.clientX),f(e.clientY),x(!0)}),[]);(0,o.useEffect)((()=>{y?document.addEventListener("mousemove",w):(m(a),b(r),document.removeEventListener("mousemove",w))}),[w,y]);const Z=(0,o.useCallback)(Or()((({dragStartX:e,dragStartY:t,dragStartWidth:a,dragStartHeight:o,clientX:r,clientY:l,minWidth:s,minHeight:d})=>{n(Math.max(a+(r-e),s)),i(Math.max(o+(l-t),d))}),50),[i,n]);return(0,o.useEffect)((()=>{y&&Z({dragStartX:c,dragStartY:p,dragStartWidth:g,dragStartHeight:v,clientX:l,clientY:d,minWidth:e,minHeight:t})}),[y,l,d,g,v,c,p]),(0,o.useEffect)((()=>(document.addEventListener("mouseup",C),()=>document.removeEventListener("mouseup",C))),[C]),[(0,P.tZ)("i",{role:"button","aria-label":"Resize",tabIndex:0,onMouseDown:S,className:"fa fa-expand edit-popover-resize text-muted"}),a,r]}(W.kc,W.H7),T=(0,o.useRef)(null),[O,D]=(0,o.useMemo)((()=>null==e?void 0:e.reduce(((e,t)=>(t.expression?e[0].push(t):e[1].push(t),e)),[[],[]])),[e]),R=(0,o.useCallback)((e=>{y({label:l,sqlExpression:e,expressionType:"SQL"}),S(void 0),w(void 0)}),[l]),N=(0,o.useCallback)((e=>{const t=O.find((t=>t.column_name===e));w(t),S(void 0),y(void 0),h((null==t?void 0:t.verbose_name)||(null==t?void 0:t.column_name)||"")}),[O,h]),A=(0,o.useCallback)((e=>{const t=D.find((t=>t.column_name===e));w(void 0),S(t),y(void 0),h((null==t?void 0:t.verbose_name)||(null==t?void 0:t.column_name)||"")}),[h,D]),I=g?"sqlExpression":v||0===O.length?"simple":"saved";(0,o.useEffect)((()=>{a(I),k(I)}),[I,a,k]),(0,o.useEffect)((()=>{if(void 0===b&&"sqlExpression"===Z&&r){const e=(null==C?void 0:C.column_name)||(null==x?void 0:x.expression)||"";y({label:l,sqlExpression:e,expressionType:"SQL"})}}),[b,I,r,a,l,x,C,Z]);const L=(0,o.useCallback)((()=>{b&&b.label!==l&&(b.label=l);const e=b||x||C;e&&(d(e),u())}),[b,l,d,u,x,C]),F=(0,o.useCallback)((()=>{w(m),S(v),y(g),u()}),[g,m,v,u]),j=(0,o.useCallback)((e=>{var t;a(e),k(e),null==(t=T.current)||t.editor.focus()}),[a]),B=(0,o.useCallback)((()=>{var e;null==(e=T.current)||e.editor.resize()}),[]),$=()=>{c&&c(!0),u()},z=b||x||C,U=f!==l||(null==x?void 0:x.column_name)!==(null==m?void 0:m.column_name)||(null==C?void 0:C.column_name)!==(null==v?void 0:v.column_name)||(null==b?void 0:b.sqlExpression)!==(null==g?void 0:g.sqlExpression),H=(0,s.t)("Saved expressions"),q=(0,s.t)("Column");return(0,P.tZ)(mo.l0,{layout:"vertical",id:"metrics-edit-popover"},(0,P.tZ)(Ke.ZP,{id:"adhoc-metric-edit-tabs",defaultActiveKey:I,onChange:j,className:"adhoc-metric-edit-tabs",allowOverflow:!0,css:P.iv`
          height: ${M}px;
          width: ${E}px;
        `},(0,P.tZ)(Ke.ZP.TabPane,{key:"saved",tab:(0,s.t)("Saved")},O.length>0?(0,P.tZ)(mo.xJ,{label:H},(0,P.tZ)(Dr,{ariaLabel:H,value:null==x?void 0:x.column_name,onChange:N,allowClear:!0,autoFocus:!x,placeholder:(0,s.t)("%s column(s)",O.length),options:O.map((e=>({value:e.column_name,label:e.verbose_name||e.column_name,customLabel:(0,P.tZ)(xo.l,{column:e,showType:!0}),key:e.column_name})))})):p===ce.i9.Table?(0,P.tZ)(go.Tc,{image:"empty.svg",title:i?(0,s.t)("No temporal columns found"):(0,s.t)("No saved expressions found"),description:i?(0,s.t)('Add calculated temporal columns to dataset in "Edit datasource" modal'):(0,s.t)('Add calculated columns to dataset in "Edit datasource" modal')}):(0,P.tZ)(go.Tc,{image:"empty.svg",title:i?(0,s.t)("No temporal columns found"):(0,s.t)("No saved expressions found"),description:i?(0,P.tZ)(o.Fragment,null,(0,P.tZ)("span",{role:"button",tabIndex:0,onClick:$},(0,s.t)("Create a dataset"))," ",(0,s.t)(" to mark a column as a time column")):(0,P.tZ)(o.Fragment,null,(0,P.tZ)("span",{role:"button",tabIndex:0,onClick:$},(0,s.t)("Create a dataset"))," ",(0,s.t)(" to add calculated columns"))})),(0,P.tZ)(Ke.ZP.TabPane,{key:"simple",tab:(0,s.t)("Simple")},i&&0===D.length?(0,P.tZ)(go.Tc,{image:"empty.svg",title:(0,s.t)("No temporal columns found"),description:p===ce.i9.Table?(0,s.t)('Mark a column as temporal in "Edit datasource" modal'):(0,P.tZ)(o.Fragment,null,(0,P.tZ)("span",{role:"button",tabIndex:0,onClick:$},(0,s.t)("Create a dataset"))," ",(0,s.t)(" to mark a column as a time column"))}):(0,P.tZ)(mo.xJ,{label:q},(0,P.tZ)(rt.Ph,{ariaLabel:q,value:null==C?void 0:C.column_name,onChange:A,allowClear:!0,autoFocus:!C,placeholder:(0,s.t)("%s column(s)",D.length),options:D.map((e=>({value:e.column_name,label:e.verbose_name||e.column_name,customLabel:(0,P.tZ)(xo.l,{column:e,showType:!0}),key:e.column_name})))}))),(0,P.tZ)(Ke.ZP.TabPane,{key:"sqlExpression",tab:(0,s.t)("Custom SQL")},(0,P.tZ)(vo.iO,{value:(null==b?void 0:b.sqlExpression)||(null==C?void 0:C.column_name)||(null==x?void 0:x.expression),onFocus:B,showLoadingForImport:!0,onChange:R,width:"100%",height:M-80+"px",showGutter:!1,editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,className:"filter-sql-editor",wrapEnabled:!0,ref:T}))),(0,P.tZ)("div",null,(0,P.tZ)(Te.Z,{buttonSize:"small",onClick:F,cta:!0},(0,s.t)("Close")),(0,P.tZ)(Te.Z,{disabled:!z||!U,buttonStyle:"primary",buttonSize:"small",onClick:L,"data-test":"ColumnEdit#save",cta:!0},(0,s.t)("Save")),_))},Pr=(0,R.Z)(mt.II)`
  border-radius: ${({theme:e})=>e.borderRadius};
  height: 26px;
  padding-left: ${({theme:e})=>2.5*e.gridUnit}px;
`,Nr=({title:e,onChange:t,isEditDisabled:a,hasCustomLabel:n})=>{const[r,i]=(0,o.useState)(!1),[l,d]=(0,o.useState)(!1),u=(0,o.useCallback)((()=>{i(!0)}),[]),c=(0,o.useCallback)((()=>{i(!1)}),[]),h=(0,o.useCallback)((()=>{d(!0)}),[]),p=(0,o.useCallback)((()=>{d(!1)}),[]),f=(0,o.useCallback)((e=>{""===e.target.value&&t(e),p()}),[p,t]),g=(0,s.t)("My column");return a?(0,P.tZ)("span",null,e||g):l?(0,P.tZ)(Pr,{type:"text",placeholder:e,value:n?e:"",autoFocus:!0,onChange:t,onBlur:f}):(0,P.tZ)($.u,{placement:"top",title:(0,s.t)("Click to edit label")},(0,P.tZ)("span",{className:"AdhocMetricEditPopoverTitle inline-editable","data-test":"AdhocMetricEditTitle#trigger",onMouseOver:u,onMouseOut:c,onClick:h,onBlur:p,role:"button",tabIndex:0},e||g," ",(0,P.tZ)("i",{className:"fa fa-pencil",style:{color:r?"black":"grey"}})))},Ar=(0,s.t)("My column"),Ir=({columns:e,editedColumn:t,onColumnEdit:a,isControlledComponent:r,children:i,isTemporal:l,...d})=>{const u=(0,n.v9)((e=>e.explore.datasource)),[c,h]=(0,o.useState)(Ar),[p,f]=(0,o.useState)(!1),[g,m]=(0,o.useState)(!0),[v,b]=(0,o.useState)(!1),[y,x]=(0,o.useState)(!1);let w=Ar;t&&(0,_n.xN)(t)?w=t.verbose_name||t.column_name:t&&(0,fr.GA)(t)&&(w=t.label||Ar),(0,o.useEffect)((()=>{h(w)}),[w,p]);const C=(0,o.useCallback)((e=>{f(e)}),[]),S=(0,o.useCallback)((()=>{f(!1)}),[]),{visible:Z,handleTogglePopover:k,handleClosePopover:_}=r?{visible:d.visible,handleTogglePopover:d.togglePopover,handleClosePopover:d.closePopover}:{visible:p,handleTogglePopover:C,handleClosePopover:S},E=(0,o.useCallback)((e=>{m("sqlExpression"!==e)}),[]),M=(0,o.useMemo)((()=>(0,P.tZ)(fo.b,null,(0,P.tZ)(Rr,{editedColumn:t,columns:e,setDatasetModal:x,onClose:_,onChange:a,hasCustomLabel:v,label:c,setLabel:h,getCurrentTab:E,isTemporal:l}))),[e,t,E,v,_,l,a,c]),T=(0,o.useCallback)((e=>{h(e.target.value),b(!0)}),[h,b]),O=(0,o.useMemo)((()=>(0,P.tZ)(Nr,{title:c,onChange:T,isEditDisabled:g,hasCustomLabel:v})),[v,g,T,c]);return(0,P.tZ)(o.Fragment,null,y&&(0,P.tZ)(me.W,{visible:y,onHide:()=>x(!1),buttonTextOnSave:(0,s.t)("Save"),buttonTextOnOverwrite:(0,s.t)("Overwrite"),modalDescription:(0,s.t)("Save this query as a virtual dataset to continue exploring"),datasource:u}),(0,P.tZ)(ut.Z,{trigger:"click",content:M,defaultVisible:Z,visible:Z,onVisibleChange:k,title:O,destroyTooltipOnHide:!0},i))};var Lr=a(96055),Fr=a(28543),jr=a(7848);function Br({adhocFilter:e,options:t,datasource:a,onFilterEdit:o,onShiftOptions:n,onClickClose:r,partitionColumn:i,index:l}){const{actualTimeRange:d,title:u}=(0,jr.w)(e);return(0,P.tZ)(Lr.Z,{key:l,adhocFilter:e,options:t,datasource:a,onFilterEdit:o,partitionColumn:i},(0,P.tZ)(br,{key:l,index:l,label:null!=d?d:e.getDefaultLabel(),tooltipTitle:null!=u?u:e.getTooltipTitle(),clickClose:r,onShiftOptions:n,type:lo.g.FilterOption,withCaret:!0,isExtra:e.isExtra,datasourceWarningMessage:e.datasourceWarning?(0,s.t)("This filter might be incompatible with current dataset"):void 0}))}var $r=a(61314),zr=a(61641);const{warning:Ur}=Je.default,Wr=[lo.g.Column,lo.g.Metric,lo.g.MetricOption,lo.g.AdhocMetricOption],Hr=e=>!(e instanceof Fr.Z)&&(null==e?void 0:e.expressionType);var qr=a(62446),Vr=a(88889);const Gr={},Xr=[lo.g.Column,lo.g.Metric],Yr=(e,t,a)=>e?(0,he.Z)(e).filter((e=>(0,qr.AG)(e)?t.some((t=>t.metric_name===e)):!(0,qr.nX)(e)||a.some((t=>t.column_name===e.column.column_name)))).map((e=>{if(!(e=>e&&!(e instanceof so.Z)&&"string"!=typeof e&&e.expressionType)(e))return e;if((0,qr.nX)(e)){const t=a.find((t=>t.column_name===e.column.column_name));if(t)return new so.Z({...e,column:t})}return new so.Z(e)})):[],Qr=(e,t,a)=>{var o;return null!=(o=null==e?void 0:e.filter((e=>{var o;return Array.isArray(t)?!t.includes(null!=(o=e.metric_name)?o:"")||e.metric_name===a:e})))?o:[]};var Kr=a(9870),Jr=a(35622),ei=a(1455),ti=a(872),ai=a(58842);const oi={allowNewOptions:!0,controlType:"Select",label:(0,s.t)("D3 format"),description:ai.YD,options:ai.F6.map((e=>({value:e[0],label:e[1]}))),defaultValue:ai.F6[0][0],creatable:!0,minWidth:"14em",debounceDelay:500},ni={controlType:"Select",label:(0,s.t)("D3 format"),description:ai.oq,options:ai.HC.map((e=>({value:e[0],label:e[1]}))),defaultValue:ai.HC[0][0],creatable:!0,minWidth:"10em",debounceDelay:500},ri={controlType:"Slider",label:(0,s.t)("Fraction digits"),description:(0,s.t)("Number of decimal digits to round numbers to"),min:0,step:1,max:100,defaultValue:100},ii={controlType:"InputNumber",label:(0,s.t)("Min Width"),description:(0,s.t)("Default minimal column width in pixels, actual width may still be larger than this if other columns don't need much space"),width:120,placeholder:(0,s.t)("auto"),debounceDelay:400,validators:[ti.Z]},li={controlType:"RadioButtonControl",label:(0,s.t)("Text align"),description:(0,s.t)("Horizontal alignment"),width:130,debounceDelay:50,defaultValue:"left",options:[["left",(0,P.tZ)(z.Z.AlignLeftOutlined,{iconSize:"m"})],["center",(0,P.tZ)(z.Z.AlignCenterOutlined,{iconSize:"m"})],["right",(0,P.tZ)(z.Z.AlignRightOutlined,{iconSize:"m"})]]},si={controlType:"Checkbox",label:(0,s.t)("Show cell bars"),description:(0,s.t)("Whether to display a bar chart background in table columns"),defaultValue:!0,debounceDelay:200},di={controlType:"Checkbox",label:(0,s.t)("Align +/-"),description:(0,s.t)("Whether to align positive and negative values in cell bar chart at 0"),defaultValue:!1,debounceDelay:200},ui={controlType:"Checkbox",label:(0,s.t)("Color +/-"),description:(0,s.t)("Whether to colorize numeric values by if they are positive or negative"),defaultValue:!1,debounceDelay:200},ci={controlType:"Checkbox",label:(0,s.t)("Truncate Cells"),description:(0,s.t)('Truncate long cells to the "min width" set above'),defaultValue:!1,debounceDelay:400},hi={controlType:"CurrencyControl",label:(0,s.t)("Currency format"),description:(0,s.t)("Customize chart metrics or columns with currency symbols as prefixes or suffixes. Choose a symbol from dropdown or type your own."),debounceDelay:200},pi={d3NumberFormat:oi,d3SmallNumberFormat:{...oi,label:(0,s.t)("Small number format"),description:(0,s.t)("D3 number format for numbers between -1.0 and 1.0, useful when you want to have different significant digits for small and large numbers")},d3TimeFormat:ni,fractionDigits:ri,columnWidth:ii,truncateLongCells:ci,horizontalAlign:li,showCellBars:si,alignPositiveNegative:di,colorPositiveNegative:ui,currencyFormat:hi},fi={[Vr.Z.String]:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"left"}}],["truncateLongCells"]],[Vr.Z.Numeric]:[{tab:(0,s.t)("Display"),children:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"right"}}],["showCellBars"],["alignPositiveNegative"],["colorPositiveNegative"]]},{tab:(0,s.t)("Number formatting"),children:[["d3NumberFormat"],["d3SmallNumberFormat"],["currencyFormat"]]}],[Vr.Z.Temporal]:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"left"}}],["d3TimeFormat"]],[Vr.Z.Boolean]:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"left"}}]]};function gi(e){return!(null==e||!e.tab)}var mi=a(68122);const vi={Slider:Ko,InputNumber:mt.Rn,Input:mt.II,Select:rt.Ph,Checkbox:St.Z,RadioButtonControl:nt.default.RadioButtonControl,CurrencyControl:Kr.Z};function bi({name:e,label:t,description:a,width:n,validators:r,onChange:i,value:l,defaultValue:s,controlType:d,...u}){const{gridUnit:c}=(0,I.Fg)(),[h,p]=(0,o.useState)(!1),[f,g]=(0,o.useState)(void 0===l?s:l),[m,v]=(0,o.useState)(),b=e=>{const t=e&&"object"==typeof e&&"target"in e?"checkbox"===e.target.type||"radio"===e.target.type?e.target.checked:e.target.value:e,a=(null==r?void 0:r.map((e=>!function(e){return null==e||""===e}(t)&&e(t))).filter((e=>!!e)))||[];v(a),g(t),0===a.length&&i&&i(t)},y=vi[d];return(0,P.tZ)("div",{css:(0,P.iv)({margin:2*c,width:n,maxWidth:"100%",flex:1},"",""),onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1)},"Checkbox"===d?(0,P.tZ)(vi.Checkbox,(0,C.Z)({value:f,onChange:b,name:e,label:t,description:a,validationErrors:m},u)):(0,P.tZ)(o.Fragment,null,t&&(0,P.tZ)(vt.Z,{name:e,label:t,description:a,validationErrors:m,hovered:h}),(0,P.tZ)(y,(0,C.Z)({},u,{value:f,onChange:b}))))}function yi({children:e}){const{gridUnit:t}=(0,I.Fg)();return(0,P.tZ)("div",{css:(0,P.iv)({display:"flex",flexWrap:"nowrap",marginBottom:t,maxWidth:"100%"},"","")},e)}function xi({onChange:e,value:t,children:a}){const n=(0,I.Fg)(),r=(0,o.useMemo)((()=>({0:e,[mi.o]:M()(e,mi.o)})),[e]),i=o.Children.map(a,(a=>{if("children"in a.props){const n=Array.isArray(a.props.children)?100/a.props.children.length+"%":void 0;return o.cloneElement(a,{children:o.Children.map(a.props.children,(a=>{const{name:i,width:l,debounceDelay:s=mi.o,onChange:d}=a.props;return o.cloneElement(a,{width:l||n,value:null==t?void 0:t[i],debounceDelay:void 0,onChange(a){d&&d(a),s in r||(r[s]=M()(e,s)),r[s]({...t,[i]:a})}})}))})}return a}));return(0,P.tZ)("div",{css:(0,P.iv)({label:{textTransform:"uppercase",color:n.colors.text.label,fontSize:n.typography.sizes.s}},"","")},i)}function wi({column:e,configFormLayout:t,onChange:a}){const o=(e,t)=>(0,P.tZ)(yi,{key:t},e.map((e=>{const t="string"==typeof e?e:e.name,a="string"==typeof e?{}:"override"in e?e.override:e.config,o={...t in pi?pi[t]:void 0,...a};return(0,P.tZ)(bi,(0,C.Z)({key:t,name:t},o))}))),n=t[void 0===e.type?Vr.Z.String:e.type];return gi(n[0])?(0,P.tZ)(Ke.ZP,{centered:!0},n.map(((t,n)=>gi(t)?(0,P.tZ)(Ke.ZP.TabPane,{tab:t.tab,key:n},(0,P.tZ)(xi,{onChange:a,value:e.config},t.children.map(((e,t)=>o(e,t))))):null))):(0,P.tZ)(xi,{onChange:a,value:e.config},n.map(((e,t)=>o(e,t))))}const Ci=o.memo((function({column:e,onChange:t,configFormLayout:a,width:o,height:n}){const{colors:r,gridUnit:i}=(0,I.Fg)(),l=6*i;return(0,P.tZ)(Za.Z,{title:e.name,content:()=>(0,P.tZ)(wi,{column:e,onChange:t,configFormLayout:a}),trigger:"click",placement:"right",overlayInnerStyle:{width:o,height:n},overlayClassName:"column-config-popover"},(0,P.tZ)("div",{css:(0,P.iv)({display:"flex",alignItems:"center",cursor:"pointer",padding:`${i}px ${2*i}px`,borderBottom:`1px solid ${r.grayscale.light2}`,position:"relative",paddingRight:l,"&:last-child":{borderBottom:"none"},"&:hover":{background:r.grayscale.light4},"> .fa":{color:r.grayscale.light2},"&:hover > .fa":{color:r.grayscale.light1}},"","")},(0,P.tZ)(ei.j,{type:e.type}),e.name,(0,P.tZ)("i",{className:"fa fa-caret-right",css:(0,P.iv)({position:"absolute",right:3*i,top:3*i},"","")})))})),Si={AnnotationLayerControl:gt,BoundsControl:Ct,CheckboxControl:St.Z,CollectionControl:wa,ColorPickerControl:Ta,ColorSchemeControl:Oa.Z,ColumnConfigControl:function({queryResponse:e,appliedColumnNames:t=[],value:a,onChange:n,configFormLayout:r=fi,width:i,height:l,...d}){const{colnames:u,coltypes:c}=e||{};let h=[],p=[];if(0===t.length)h=u||[],p=c||[];else{const e=new Set(t);null==u||u.forEach(((t,a)=>{e.has(t)&&(h.push(t),p.push(null==c?void 0:c[a]))}))}const f=(0,I.Fg)(),g=(0,o.useMemo)((()=>{var e;const t={};return null==(e=h)||e.forEach(((e,o)=>{var n;t[e]={name:Jr.DS[e]||e,type:null==(n=p)?void 0:n[o],config:(null==a?void 0:a[e])||{}}})),t}),[a,h,p]),[m,v]=(0,o.useState)(!1),b=e=>g[e]||{};if(!h||0===h.length)return null;const y=h.length>12,x=y&&!m?h.slice(0,10):h;return(0,P.tZ)(o.Fragment,null,(0,P.tZ)(vt.Z,d),(0,P.tZ)("div",{css:(0,P.iv)({border:`1px solid ${f.colors.grayscale.light2}`,borderRadius:f.gridUnit},"","")},x.map((e=>(0,P.tZ)(Ci,{key:e,column:b(e),onChange:t=>((e,t)=>{if(n){const o=h&&a?Object.fromEntries(Object.entries(a).filter((([e])=>h.includes(e)))):{...a};n({...o,[e]:t})}})(e,t),configFormLayout:r,width:i,height:l}))),y&&(0,P.tZ)("div",{role:"button",tabIndex:-1,css:(0,P.iv)({padding:2*f.gridUnit,textAlign:"center",cursor:"pointer",textTransform:"uppercase",fontSize:f.typography.sizes.xs,color:f.colors.text.label,":hover":{backgroundColor:f.colors.grayscale.light4}},"",""),onClick:()=>v(!m)},m?(0,P.tZ)(o.Fragment,null,(0,P.tZ)("i",{className:"fa fa-angle-up"}),"   ",(0,s.t)("Show less columns")):(0,P.tZ)(o.Fragment,null,(0,P.tZ)("i",{className:"fa fa-angle-down"}),"  ",(0,s.t)("Show all columns")))))},CurrencyControl:Kr.Z,DatasourceControl:oo,DateFilterControl:no.ZP,DndColumnSelectControl:or,DndColumnSelect:function(e){const{value:t,options:a,multi:n=!0,onChange:r,canDelete:i=!0,ghostButtonText:l,name:d,label:u,isTemporal:c}=e,[h,p]=(0,o.useState)(!1),f=(0,o.useMemo)((()=>{const e=Object.fromEntries(a.map((e=>[e.column_name,e])));return new Mr(e,n,t)}),[n,a,t]),g=(0,o.useCallback)((e=>{const t=e.value;f.multi||_r()(f.values)?f.add(t.column_name):f.replace(0,t.column_name),r(f.getValues())}),[r,f]),m=(0,o.useCallback)((e=>{const t=e.value.column_name;return t in f.options&&!f.has(t)}),[f]),v=(0,o.useCallback)((e=>{f.del(e),r(f.getValues())}),[r,f]),b=(0,o.useCallback)(((e,t)=>{f.swap(e,t),r(f.getValues())}),[r,f]),y=(0,o.useCallback)((()=>f.values.map(((e,t)=>{const o=(0,fr.GA)(e)&&e.datasourceWarning?(0,s.t)("This column might be incompatible with current dataset"):void 0;return(0,P.tZ)(Ir,{key:t,columns:a,onColumnEdit:e=>{(0,_n.xN)(e)?f.replace(t,e.column_name):f.replace(t,e),r(f.getValues())},editedColumn:e,isTemporal:c},(0,P.tZ)(br,{key:t,index:t,clickClose:v,onShiftOptions:b,type:`${lo.g.ColumnOption}_${d}_${u}`,canDelete:i,column:e,datasourceWarningMessage:o,withCaret:!0}))}))),[i,c,u,d,r,v,b,f,a]),x=(0,o.useCallback)((e=>{(0,_n.xN)(e)?f.add(e.column_name):f.add(e),r(f.getValues())}),[r,f]),w=(0,o.useCallback)((e=>{p(e)}),[]),S=(0,o.useCallback)((()=>{w(!1)}),[w]),Z=(0,o.useCallback)((()=>{w(!0)}),[w]),k=(0,o.useMemo)((()=>null!=l?l:(0,s.tn)("Drop a column here or click","Drop columns here or click",n?2:1)),[l,n]);return(0,P.tZ)("div",null,(0,P.tZ)(or,(0,C.Z)({onDrop:g,canDrop:m,valuesRenderer:y,accept:lo.g.Column,displayGhostButton:n||0===f.values.length,ghostButtonText:k,onClickGhostButton:Z},e)),(0,P.tZ)(Ir,{columns:a,onColumnEdit:x,isControlledComponent:!0,togglePopover:w,closePopover:S,visible:h,isTemporal:c},(0,P.tZ)("div",null)))},DndFilterSelect:e=>{var t;const{datasource:a,onChange:n=(()=>{}),name:r,canDelete:i}=e,l=(0,o.useMemo)((()=>{let e={};if(null!=a&&a.extra)try{e=JSON.parse(a.extra)}catch{}return e}),[null==a?void 0:a.extra]),d=Array.from(null!=(t=e.value)?t:[]),[u,c]=(0,o.useState)(d.map((e=>Hr(e)?new Fr.Z(e):e))),[h,p]=(0,o.useState)(void 0),[f,g]=(0,o.useState)(!1),[m,v]=(0,o.useState)({}),b=(e,t)=>[...e,...[...(null==t?void 0:t.metrics)||[],null==t?void 0:t.metric].map((e=>e&&("string"==typeof e?{saved_metric_name:e}:new so.Z(e))))].filter((e=>e)).reduce(((e,t)=>("saved_metric_name"in t&&t.saved_metric_name?e.push({...t,filterOptionName:t.saved_metric_name}):"column_name"in t&&t.column_name?e.push({...t,filterOptionName:`_col_${t.column_name}`}):t instanceof so.Z&&e.push({...t,filterOptionName:`_adhocmetric_${t.label}`}),e)),[]).sort(((e,t)=>{var a,o;return null!=(a=null==(o=e.saved_metric_name||e.column_name||e.label)?void 0:o.localeCompare(t.saved_metric_name||t.column_name||t.label||""))?a:0})),[y,x]=(0,o.useState)(b(e.columns,e.formData)),w=(0,o.useMemo)((()=>new Set(y.map((({column_name:e,filterOptionName:t})=>null!=e?e:t)))),[y]);(0,o.useEffect)((()=>{if(a&&"table"===a.type){var e;const t=null==(e=a.database)?void 0:e.id,{datasource_name:o,schema:n,is_sqllab_view:r}=a;!r&&t&&o&&n&&pe.Z.get({endpoint:`/api/v1/database/${t}/table_extra/${o}/${n}/`}).then((({json:e})=>{if(null!=e&&e.partitions){const{partitions:t}=e;null!=t&&t.cols&&1===Object.keys(t.cols).length&&p(t.cols[0])}})).catch((e=>{N.Z.error("fetch extra_table_metadata:",e.statusText)}))}}),[a]),(0,o.useEffect)((()=>{x(b(e.columns,e.formData))}),[e.columns,e.formData]),(0,o.useEffect)((()=>{c((e.value||[]).map((e=>Hr(e)?new Fr.Z(e):e)))}),[e.value]);const S=(0,o.useCallback)((e=>{const t=[...u];t.splice(e,1),c(t),n(t)}),[n,u]),Z=(0,o.useCallback)((e=>{const t=null==i?void 0:i(u[e],u);"string"!=typeof t?S(e):Ur({title:(0,s.t)("Warning"),content:t})}),[i,S,u]),k=(0,o.useCallback)(((e,t)=>{const a=[...u];[a[t],a[e]]=[a[e],a[t]],c(a)}),[u]),_=(0,o.useCallback)((t=>{var a;return null==(a=e.savedMetrics.find((e=>e.metric_name===t)))?void 0:a.expression}),[e.savedMetrics]),E=(0,o.useCallback)((e=>{if(e instanceof Fr.Z)return e;const t=e;return t.saved_metric_name?new Fr.Z({expressionType:zr.p.Sql,subject:_(t.saved_metric_name),operator:W.LT[W.d.GreaterThan].operation,operatorId:W.d.GreaterThan,comparator:0,clause:zr.N.Having}):t.label?new Fr.Z({expressionType:zr.p.Sql,subject:new so.Z(e).translateToSql(),operator:W.LT[W.d.GreaterThan].operation,operatorId:W.d.GreaterThan,comparator:0,clause:zr.N.Having}):t.column_name?new Fr.Z({expressionType:zr.p.Simple,subject:t.column_name,operator:W.LT[W.d.Equals].operation,operatorId:W.d.Equals,comparator:"",clause:zr.N.Where,isNew:!0}):null}),[a.type,_]),M=(0,o.useCallback)((e=>{n(u.map((t=>t.filterOptionName===e.filterOptionName?e:t)))}),[n,u]),T=(0,o.useCallback)((e=>{const t=E(e);if(t){const e=[...u,t];c(e),n(e)}}),[E,n,u]),O=(0,o.useCallback)((e=>{g(e)}),[]),D=(0,o.useCallback)((()=>{O(!1)}),[O]),R=(0,o.useCallback)((()=>u.map(((e,t)=>(0,P.tZ)(Br,{index:t,adhocFilter:e,options:y,datasource:a,onFilterEdit:M,partitionColumn:h,onClickClose:Z,onShiftOptions:k})))),[Z,M,k,y,h,a,u]),A=(0,o.useCallback)((()=>{v({}),O(!0)}),[O]),I=(0,$r.Ct)(),L=(0,o.useMemo)((()=>{if(null==(t=m)?void 0:t.metric_name)return new Fr.Z({expressionType:zr.p.Sql,clause:zr.N.Having,sqlExpression:null==m?void 0:m.expression});var t;if(m instanceof so.Z)return new Fr.Z({expressionType:zr.p.Sql,clause:zr.N.Having,sqlExpression:null==m?void 0:m.translateToSql()});const a={subject:null==m?void 0:m.column_name};return a.subject&&(a.operator=W.LT[W.d.In].operation,a.operatorId=W.d.In),(0,_n.xN)(m)&&(0,Xe.x)(null==m?void 0:m.column_name,e.datasource)&&(a.operator=W.d.TemporalRange,a.operatorId=W.d.TemporalRange,a.comparator=I),new Fr.Z(a)}),[m]),F=(0,o.useCallback)((e=>{if(l.disallow_adhoc_metrics&&(e.type!==lo.g.Column||!w.has(e.value.column_name)))return!1;if(e.type===lo.g.Column){const t=e.value.column_name;return w.has(t)}return!0}),[w,l]),j=(0,o.useCallback)((e=>{v(e.value),O(!0)}),[r,O]);return(0,P.tZ)(o.Fragment,null,(0,P.tZ)(or,(0,C.Z)({onDrop:j,canDrop:F,valuesRenderer:R,accept:Wr,ghostButtonText:(0,s.t)("Drop columns/metrics here or click"),onClickGhostButton:A},e)),(0,P.tZ)(Lr.Z,{adhocFilter:L,options:y,datasource:a,onFilterEdit:T,partitionColumn:h,isControlledComponent:!0,visible:f,togglePopover:O,closePopover:D,requireSave:!!m}))},DndMetricSelect:e=>{const{onChange:t,multi:a,datasource:n,savedMetrics:r}=e,i=(0,o.useMemo)((()=>{let e={};if(null!=n&&n.extra)try{e=JSON.parse(n.extra)}catch{}return e}),[null==n?void 0:n.extra]),l=(0,o.useMemo)((()=>new Set(r.map((({metric_name:e})=>e)))),[r]),d=(0,o.useCallback)((e=>{if(null===e)return void t(null);const o=(0,he.Z)(e).map((e=>e.metric_name?e.metric_name:e)).filter((e=>e));t(a?o:o[0])}),[a,t]),[u,c]=(0,o.useState)(Yr(e.value,e.savedMetrics,e.columns)),[h,p]=(0,o.useState)({}),[f,g]=(0,o.useState)(!1);(0,o.useEffect)((()=>{c(Yr(e.value,e.savedMetrics,e.columns))}),[JSON.stringify(e.value),JSON.stringify(e.savedMetrics),JSON.stringify(e.columns)]);const m=(0,o.useCallback)((e=>!(i.disallow_adhoc_metrics&&(e.type!==lo.g.Metric||!l.has(e.value.metric_name)))&&!("metric"===e.type&&u.includes(e.value.metric_name))),[u,i,l]),v=(0,o.useCallback)((t=>{const a=e.multi?[...u,t]:[t];c(a),d(a)}),[d,e.multi,u]),b=(0,o.useCallback)(((e,t)=>{if(t instanceof so.Z&&t.equals(e))return;const a=u.map((a=>("metric_name"in t&&a===t.metric_name||void 0!==a.optionName)&&a.optionName===t.optionName?e:a));c(a),d(a)}),[d,u]),y=(0,o.useCallback)((e=>{if(!Array.isArray(u))return;const t=[...u];t.splice(e,1),c(t),d(t)}),[d,u]),x=(0,o.useCallback)(((e,t)=>{const a=[...u];[a[t],a[e]]=[a[e],a[t]],c(a)}),[u]),w=(0,o.useMemo)((()=>Qr(e.savedMetrics,e.value)),[e.savedMetrics,e.value]),S=(0,o.useCallback)((t=>{var a;return Qr(e.savedMetrics,e.value,null==(a=e.value)?void 0:a[t])}),[e.savedMetrics,e.value]),Z=(0,o.useCallback)((()=>t(a?u:u[0])),[a,t,u]),k=(0,o.useCallback)(((t,o)=>(0,P.tZ)(Ro,{key:o,index:o,option:t,onMetricEdit:b,onRemoveMetric:y,columns:e.columns,savedMetrics:e.savedMetrics,savedMetricsOptions:S(o),datasource:e.datasource,onMoveLabel:x,onDropLabel:Z,type:`${lo.g.AdhocMetricOption}_${e.name}_${e.label}`,multi:a,datasourceWarningMessage:t instanceof so.Z&&t.datasourceWarning?(0,s.t)("This metric might be incompatible with current dataset"):void 0})),[S,Z,x,a,b,y,e.columns,e.datasource,e.label,e.name,e.savedMetrics]),_=(0,o.useCallback)((()=>u.map(((e,t)=>k(e,t)))),[u,k]),E=(0,o.useCallback)((e=>{g(e)}),[]),M=(0,o.useCallback)((()=>{E(!1)}),[E]),T=(0,o.useCallback)((e=>{e.type===lo.g.Metric&&v(e.value),e.type===lo.g.Column&&(p(e),E(!0))}),[v,E]),O=(0,o.useCallback)((()=>{p({}),E(!0)}),[E]),D=(0,o.useMemo)((()=>{if((null==(e=h)?void 0:e.value)&&(null==e?void 0:e.type)&&h.type===lo.g.Column){const e=h.value,t={column:e};return e.type_generic===Vr.Z.Numeric?t.aggregate=W.YY.SUM:e.type_generic!==Vr.Z.String&&e.type_generic!==Vr.Z.Boolean&&e.type_generic!==Vr.Z.Temporal||(t.aggregate=W.YY.COUNT_DISTINCT),new so.Z(t)}var e;return new so.Z({})}),[h]),R=(0,s.tn)("Drop a column/metric here or click","Drop columns/metrics here or click",a?2:1);return(0,P.tZ)("div",{className:"metrics-select"},(0,P.tZ)(or,(0,C.Z)({onDrop:T,canDrop:m,valuesRenderer:_,accept:Xr,ghostButtonText:R,displayGhostButton:a||0===u.length,onClickGhostButton:O},e)),(0,P.tZ)(Eo,{adhocMetric:D,onMetricEdit:v,columns:e.columns,savedMetricsOptions:w,savedMetric:Gr,datasource:e.datasource,isControlledComponent:!0,visible:f,togglePopover:E,closePopover:M,isNew:!0},(0,P.tZ)("div",null)))},FixedOrMetricControl:qo,HiddenControl:function(e){return(0,P.tZ)(mt.II,{type:"hidden",value:e.value})},SelectAsyncControl:Go,SelectControl:Xo.Z,SliderControl:function({default:e,name:t,label:a,description:n,renderTrigger:r,rightNode:i,leftNode:l,validationErrors:s,hovered:d,warning:u,danger:c,onClick:h,tooltipOnClick:p,onChange:f=(()=>{}),...g}){const m={name:t,label:a,description:n,renderTrigger:r,rightNode:i,leftNode:l,validationErrors:s,onClick:h,hovered:d,tooltipOnClick:p,warning:u,danger:c};return(0,P.tZ)(o.Fragment,null,(0,P.tZ)(vt.Z,m),(0,P.tZ)(Ko,(0,C.Z)({},g,{onChange:f,defaultValue:e})))},SpatialControl:Jo.Z,TextAreaControl:en.Z,TextControl:ro.Z,TimeSeriesColumnControl:un,ViewportControl:fn,VizTypeControl:({value:e,onChange:t=yo.EI,isModalOpenInit:a})=>{const[n,r]=(0,o.useState)(!!a),[i,l]=(0,o.useState)(0),[d,u]=(0,o.useState)(e),c=(0,o.useCallback)((()=>{r(!0)}),[]),h=(0,o.useCallback)((()=>{t(d),r(!1)}),[d,t]),p=(0,o.useCallback)((()=>{r(!1),l((e=>e+1)),u(e)}),[e]);return(0,P.tZ)(o.Fragment,null,(0,P.tZ)("div",{css:e=>P.iv`
          min-width: ${72*e.gridUnit}px;
          max-width: fit-content;
        `},(0,P.tZ)(xn,{onChange:t,currentSelection:e}),e&&(0,P.tZ)(Sn,{vizType:e})),(0,P.tZ)("div",{css:e=>P.iv`
          display: flex;
          justify-content: flex-end;
          margin-top: ${3*e.gridUnit}px;
          color: ${e.colors.grayscale.base};
          text-decoration: underline;
        `},(0,P.tZ)("span",{role:"button",tabIndex:0,onClick:c},(0,s.t)("View all charts"))),(0,P.tZ)(Zn,{show:n,onHide:p,title:(0,s.t)("Select a visualization type"),primaryButtonName:(0,s.t)("Select"),disablePrimaryButton:!d,onHandledPrimaryAction:h,maxWidth:`${mn.UB}px`,responsive:!0},(0,P.tZ)(mn.ZP,{key:i,selectedViz:d,onChange:u,onDoubleClick:h,denyList:wn})))},MetricsControl:Bo,AdhocFilterControl:kn.Z,ConditionalFormattingControl:Xn,XAxisSortControl:function(e){const[t,a]=(0,o.useState)(e.value);return(0,o.useEffect)((()=>{e.shouldReset&&(e.onChange(void 0),a(null))}),[e.shouldReset,e.value]),(0,P.tZ)(Xo.Z,(0,C.Z)({},e,{value:t}))},ContourControl:({onChange:e,...t})=>{const[a,n]=(0,o.useState)(!1),[r,i]=(0,o.useState)(null!=t&&t.value?null==t?void 0:t.value:Sr);(0,o.useEffect)((()=>{const t=r.map(((e,t)=>({...e,zIndex:10*(t+1)})));null==e||e(t)}),[e,r]);const l=e=>{n(e)},d=e=>{const t=[...r];t.splice(e,1),i(t)},u=(e,t)=>{const a=[...r];[a[e],a[t]]=[a[t],a[e]],i(a)},c=(0,s.t)("Click to add a contour");return(0,P.tZ)(o.Fragment,null,(0,P.tZ)(or,(0,C.Z)({onDrop:()=>{},canDrop:()=>!0,valuesRenderer:()=>r.map(((e,t)=>(0,P.tZ)(Cr,{key:t,saveContour:e=>((e,t)=>{const a=[...r];a[t]=e,i(a)})(e,t),contour:e,index:t,onClose:d,onShift:u}))),accept:[],ghostButtonText:c,onClickGhostButton:()=>{l(!0)}},t)),(0,P.tZ)(hr,{saveContour:e=>{i([...r,e]),l(!1)},isControlled:!0,visible:a,toggleVisibility:n},(0,P.tZ)(Zr,null)))},...nt.default},Zi=Si,ki=R.Z.div`
  padding-bottom: ${({theme:e})=>4*e.gridUnit}px;
`;function _i(e){const{actions:{setControlValue:t},name:a,type:n,hidden:r,isVisible:i,resetOnHide:l=!0}=e,[s,d]=(0,o.useState)(!1),u=(0,A.D)(i),c=(0,o.useCallback)(((e,o)=>t(a,e,o)),[a,t]);if((0,o.useEffect)((()=>{!0===u&&!1===i&&void 0!==e.default&&!at()(e.value,e.default)&&l&&(null==t||t(a,e.default))}),[a,u,i,t,e.value,e.default]),!n||!1===i)return null;const h="string"==typeof n?Zi[n]:n;return h?(0,P.tZ)(ki,{className:"Control","data-test":a,style:r?{display:"none"}:void 0,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1)},(0,P.tZ)(ot.Z,null,(0,P.tZ)(h,(0,C.Z)({onChange:c,hovered:s},e)))):(console.warn(`Unknown controlType: ${n}`),null)}const Ei=({loading:e,onQuery:t,onStop:a,errorMessage:o,isNewChart:n,canStopQuery:r,chartIsStale:i})=>e?(0,P.tZ)(Te.Z,{onClick:a,buttonStyle:"warning",disabled:!r},(0,P.tZ)("i",{className:"fa fa-stop"})," ",(0,s.t)("Stop")):(0,P.tZ)(Te.Z,{onClick:t,buttonStyle:i?"primary":"secondary",disabled:!!o,"data-test":"run-query-button"},n?(0,s.t)("Create chart"):(0,s.t)("Update chart"));var Mi=a(38325);const Ti=({shouldStash:e,fieldNames:t,children:a})=>{const r=(0,n.I0)(),i=(0,Mi.Z)((e=>r((0,ne.setStashFormData)(e,t))));return(0,o.useEffect)((()=>{i(e)}),[e,i]),(0,P.tZ)(o.Fragment,null,a)},{confirm:Oi}=Je.default,Di=P.iv`
  &.anticon {
    font-size: unset;
    .anticon {
      line-height: unset;
      vertical-align: unset;
    }
  }
`,Ri=e=>P.iv`
  display: flex;
  position: sticky;
  bottom: 0;
  flex-direction: column;
  align-items: center;
  padding: ${4*e.gridUnit}px;
  z-index: 999;
  background: linear-gradient(
    ${(0,Ye.rgba)(e.colors.grayscale.light5,0)},
    ${e.colors.grayscale.light5} ${e.opacity.mediumLight}
  );

  & > button {
    min-width: 156px;
  }
`,Pi=R.Z.div`
  position: relative;
  height: 100%;
  width: 100%;

  // Resizable add overflow-y: auto as a style to this div
  // To override it, we need to use !important
  overflow: visible !important;
  #controlSections {
    height: 100%;
    overflow: visible;
  }
  .nav-tabs {
    flex: 0 0 1;
  }
  .tab-content {
    overflow: auto;
    flex: 1 1 100%;
  }
  .Select__menu {
    max-width: 100%;
  }
  .type-label {
    margin-right: ${({theme:e})=>3*e.gridUnit}px;
    width: ${({theme:e})=>7*e.gridUnit}px;
    display: inline-block;
    text-align: center;
    font-weight: ${({theme:e})=>e.typography.weights.bold};
  }
`,Ni=(0,R.Z)(Ke.ZP)`
  ${({theme:e,fullWidth:t})=>P.iv`
    height: 100%;
    overflow: visible;
    .ant-tabs-nav {
      margin-bottom: 0;
    }
    .ant-tabs-nav-list {
      width: ${t?"100%":"50%"};
    }
    .ant-tabs-tabpane {
      height: 100%;
    }
    .ant-tabs-content-holder {
      padding-top: ${4*e.gridUnit}px;
    }

    .ant-collapse-ghost > .ant-collapse-item {
      &:not(:last-child) {
        border-bottom: 1px solid ${e.colors.grayscale.light3};
      }

      & > .ant-collapse-header {
        font-size: ${e.typography.sizes.s}px;
      }

      & > .ant-collapse-content > .ant-collapse-content-box {
        padding-bottom: 0;
        font-size: ${e.typography.sizes.s}px;
      }
    }
  `}
`,Ai=(e,t)=>e.reduce(((e,a)=>!a.expanded&&a.label||(e=>!!e.label&&Ge.sections.legacyTimeseriesTime.label===e.label)(a)&&!(e=>{var t;return null==e||null==(t=e.columns)?void 0:t.some((e=>e.is_dttm))})(t)?e:[...e,String(a.label)]),[]);function Ii(e,t){const a=(0,o.useRef)(e()),n=(0,o.useRef)(t);return n.current!==t&&(a.current=e(),n.current=t),a}const Li=e=>{var t,a;const{colors:r}=(0,I.Fg)(),l=(0,o.useContext)(B.Zn),d=(0,A.D)(e.exploreState),c=(0,A.D)(e.exploreState.datasource),h=(0,A.D)(e.chart.chartStatus),[p,f]=(0,o.useState)(!1),g=(0,o.useRef)(null),m=(0,n.v9)((e=>e.explore.controlsTransferred)),v=(0,n.v9)((e=>{var t,a;return null==(t=e.common)||null==(a=t.conf)?void 0:a.DEFAULT_TIME_FILTER})),{form_data:b,actions:y}=e,{setControlValue:x}=y,{x_axis:w,adhoc_filters:S}=b,Z=(0,A.D)(w);(0,o.useEffect)((()=>{w&&w!==Z&&(0,Xe.x)(w,e.exploreState.datasource)&&(null==S||!S.find((e=>"SIMPLE"===e.expressionType&&e.operator===W.d.TemporalRange&&e.subject===w)))&&Oi({title:(0,s.t)("The X-axis is not on the filters list"),content:(0,s.t)("The X-axis is not on the filters list which will prevent it from being used in\n            time range filters in dashboards. Would you like to add it to the filters list?"),onOk:()=>{x("adhoc_filters",[...S||[],{clause:zr.N.Where,subject:w,operator:W.d.TemporalRange,comparator:v||qe.vM,expressionType:"SIMPLE"}])}})}),[w,S,x,v,Z,e.exploreState.datasource]),(0,o.useEffect)((()=>{let t=!1;const a=e=>"object"==typeof e&&(0,i.Z)(e)&&"datasourceWarning"in e&&!0===e.datasourceWarning?(t=!0,{...e,datasourceWarning:!1}):e;"success"===e.chart.chartStatus&&"success"!==h&&(null==m||m.forEach((o=>{var n;if(t=!1,!(0,i.Z)(e.controls[o]))return;const r=Array.isArray(e.controls[o].value)?null==(n=(0,he.Z)(e.controls[o].value))?void 0:n.map(a):a(e.controls[o].value);t&&e.actions.setControlValue(o,r)})))}),[m,h,e.actions,e.chart.chartStatus,e.controls]),(0,o.useEffect)((()=>{var t,a,o;!c||c.type===ce.i9.Query||(null==(t=e.exploreState.datasource)?void 0:t.id)===c.id&&(null==(a=e.exploreState.datasource)?void 0:a.type)===c.type||(f(!0),null==(o=g.current)||o.scrollTo(0,0))}),[null==(t=e.exploreState.datasource)?void 0:t.id,null==(a=e.exploreState.datasource)?void 0:a.type,c]);const{expandedQuerySections:k,expandedCustomizeSections:_,querySections:E,customizeSections:M}=(0,o.useMemo)((()=>function(e,t,a){const o=[],n=[];return(0,oe.Bq)(e,a).forEach((e=>{"data"===e.tabOverride||e.controlSetRows.some((e=>e.some((e=>e&&"object"==typeof e&&"config"in e&&e.config&&(!e.config.renderTrigger||"data"===e.config.tabOverride)))))?o.push(e):e.controlSetRows.length>0&&n.push(e)})),{expandedQuerySections:Ai(o,t),expandedCustomizeSections:Ai(n,t),querySections:o,customizeSections:n}}(b.viz_type,e.exploreState.datasource,e.datasource_type)),[e.exploreState.datasource,b.viz_type,e.datasource_type]),T=(0,o.useCallback)((()=>{(0,he.Z)(e.exploreState.controlsTransferred).forEach((t=>e.actions.setControlValue(t,e.controls[t].default)))}),[e.actions,e.exploreState.controlsTransferred,e.controls]),O=(0,o.useCallback)((()=>{T(),f(!1)}),[T]),D=(0,o.useCallback)((()=>{f(!1)}),[]),R=({name:t,config:a})=>{const{controls:o,chart:n,exploreState:r}=e;return Boolean(null==a.shouldMapStateToProps?void 0:a.shouldMapStateToProps(d||r,r,o[t],n))},N=Ii((()=>({})),b.viz_type),L=t=>{const{controls:a}=e,{label:n,description:i,visibility:l}=t,d=String(n),u=!1!==(null==l?void 0:l.call(void 0,e,a)),c=t.controlSetRows.some((e=>e.some((e=>{const t="string"==typeof e?e:e&&"name"in e?e.name:null;return t&&t in a&&a[t].validationErrors&&a[t].validationErrors.length>0}))));c||(N.current[d]=!0);const h=N.current[d]?r.error.base:r.alert.base;return(0,P.tZ)(o.Fragment,null,(0,P.tZ)(Ti,{key:`sectionId-${d}`,shouldStash:!u,fieldNames:t.controlSetRows.flat().map((e=>e&&"object"==typeof e?"name"in e?e.name:"":String(e||""))).filter(Boolean)}),u&&(0,P.tZ)(Qe.Z.Panel,{css:e=>P.iv`
              margin-bottom: 0;
              box-shadow: none;

              &:last-child {
                padding-bottom: ${16*e.gridUnit}px;
                border-bottom: 0;
              }

              .panel-body {
                margin-left: ${4*e.gridUnit}px;
                padding-bottom: 0;
              }

              span.label {
                display: inline-block;
              }
              ${!t.label&&"\n            .ant-collapse-header {\n              display: none;\n            }\n          "}
            `,header:(0,P.tZ)((()=>(0,P.tZ)("span",{"data-test":"collapsible-control-panel-header"},(0,P.tZ)("span",{css:e=>P.iv`
            font-size: ${e.typography.sizes.m}px;
            line-height: 1.3;
          `},n)," ",i&&(0,P.tZ)($.u,{id:d,title:i},(0,P.tZ)(z.Z.InfoCircleOutlined,{css:Di})),c&&(0,P.tZ)($.u,{id:`${He()("validation-errors")}-tooltip`,title:(0,s.t)("This section contains validation errors")},(0,P.tZ)(z.Z.InfoCircleOutlined,{css:P.iv`
                ${Di};
                color: ${h};
              `})))),null),key:d},t.controlSetRows.map(((t,a)=>{const n=t.map((t=>t?o.isValidElement(t)?t:t.name&&t.config&&"datasource"!==t.name?(({name:t,config:a})=>{const{controls:o,chart:n,exploreState:r}=e,{visibility:i}=a,l={...a,...o[t],...R({name:t,config:a})?null==a||null==a.mapStateToProps?void 0:a.mapStateToProps(r,o[t],n):void 0,name:t},{validationErrors:d,label:u,description:c,...h}=l,p=i?i.call(a,e,l):void 0,f="function"==typeof u?u(r,o[t],n):u,g="function"==typeof c?c(r,o[t],n):c;return t.includes("adhoc_filters")&&(h.canDelete=(e,t)=>{var a;const n=e=>e.operator===W.d.TemporalRange;return!((null==o||null==(a=o.time_range)||!a.value)&&n(e)&&1===t.filter(n).length)||(0,s.t)("You cannot delete the last temporal filter as it's used for time range filters in dashboards.")}),(0,P.tZ)(Ti,{shouldStash:!1===p,fieldNames:[t],key:`control-container-${t}`},(0,P.tZ)(_i,(0,C.Z)({key:`control-${t}`,name:t,label:f,description:g,validationErrors:d,actions:e.actions,isVisible:p},h)))})(t):null:null)).filter((e=>null!==e));return 0===n.length?null:(0,P.tZ)(et,{key:`controlsetrow-${a}`,controls:n})}))))},F=(0,he.Z)(e.exploreState.controlsTransferred).length>0,j=(0,o.useCallback)((()=>F?(0,P.tZ)(Ne,{title:(0,s.t)("Keep control settings?"),bodyText:(0,s.t)("You've changed datasets. Any controls with data (columns, metrics) that match this new dataset have been retained."),primaryButtonAction:D,secondaryButtonAction:O,primaryButtonText:(0,s.t)("Continue"),secondaryButtonText:(0,s.t)("Clear form"),type:"info"}):(0,P.tZ)(Ne,{title:(0,s.t)("No form settings were maintained"),bodyText:(0,s.t)("We were unable to carry over any controls when switching to this new dataset."),primaryButtonAction:D,primaryButtonText:(0,s.t)("Continue"),type:"warning"})),[O,D,F]),U=Ii((()=>!1),b.viz_type),H=(0,o.useMemo)((()=>{e.errorMessage||(U.current=!0);const t=U.current?r.error.base:r.alert.base;return(0,P.tZ)(o.Fragment,null,(0,P.tZ)("span",null,(0,s.t)("Data")),e.errorMessage&&(0,P.tZ)("span",{css:e=>P.iv`
              margin-left: ${2*e.gridUnit}px;
            `}," ",(0,P.tZ)($.u,{id:"query-error-tooltip",placement:"right",title:e.errorMessage},(0,P.tZ)(z.Z.ExclamationCircleOutlined,{css:P.iv`
                  ${Di};
                  color: ${t};
                `}))))}),[r.error.base,r.alert.base,U,e.errorMessage]);if(!(0,Ve.Z)().has(b.viz_type)&&l.loading)return(0,P.tZ)(u.Z,null);const q=M.length>0;return(0,P.tZ)(Pi,{ref:g},(0,P.tZ)(Ni,{id:"controlSections","data-test":"control-tabs",fullWidth:q,allowOverflow:!1},(0,P.tZ)(Ke.ZP.TabPane,{key:"query",tab:H},(0,P.tZ)(Qe.Z,{defaultActiveKey:k,expandIconPosition:"right",ghost:!0},p&&(0,P.tZ)(j,null),E.map(L))),q&&(0,P.tZ)(Ke.ZP.TabPane,{key:"display",tab:(0,s.t)("Customize")},(0,P.tZ)(Qe.Z,{defaultActiveKey:_,expandIconPosition:"right",ghost:!0},M.map(L)))),(0,P.tZ)("div",{css:Ri},(0,P.tZ)(Ei,{onQuery:e.onQuery,onStop:e.onStop,errorMessage:e.errorMessage,loading:"loading"===e.chart.chartStatus,isNewChart:!e.chart.queriesResponse,canStopQuery:e.canStopQuery,chartIsStale:e.chartIsStale})))};var Fi=a(15926),ji=a.n(Fi),Bi=a(87183);const $i="save_chart_recent_dashboard",zi=(0,R.Z)(Je.default)`
  .ant-modal-body {
    overflow: visible;
  }
  i {
    position: absolute;
    top: -${({theme:e})=>5.25*e.gridUnit}px;
    left: ${({theme:e})=>26.75*e.gridUnit}px;
  }
`;class Ui extends o.Component{constructor(e){var t;super(e),this.handleDatasetNameChange=e=>{this.setState({datasetName:e.target.value})},this.handleRedirect=(e,t)=>{const a=new URLSearchParams(e);return a.set("save_action",this.state.action),"overwrite"!==this.state.action&&a.delete("form_data_key"),a.set("slice_id",t.id.toString()),a},this.loadDashboard=async e=>(await pe.Z.get({endpoint:`/api/v1/dashboard/${e}`})).json.result,this.loadDashboards=async(e,t,a)=>{const o=ji().encode({columns:["id","dashboard_title"],filters:[{col:"dashboard_title",opr:"ct",value:e},{col:"owners",opr:"rel_m_m",value:this.props.user.userId}],page:t,page_size:a,order_column:"dashboard_title"}),{json:n}=await pe.Z.get({endpoint:`/api/v1/dashboard/?q=${o}`}),{result:r,count:i}=n;return{data:r.map((e=>({value:e.id,label:e.dashboard_title}))),totalCount:i}},this.renderSaveChartModal=()=>{var e;const t=this.info();return(0,P.tZ)(mo.l0,{"data-test":"save-modal-body",layout:"vertical"},(0,P.tZ)(mo.xJ,{"data-test":"radio-group"},(0,P.tZ)(Bi.Y,{id:"overwrite-radio",disabled:!this.canOverwriteSlice(),checked:"overwrite"===this.state.action,onChange:()=>this.changeAction("overwrite"),"data-test":"save-overwrite-radio"},(0,s.t)("Save (Overwrite)")),(0,P.tZ)(Bi.Y,{id:"saveas-radio","data-test":"saveas-radio",checked:"saveas"===this.state.action,onChange:()=>this.changeAction("saveas")},(0,s.t)("Save as..."))),(0,P.tZ)("hr",null),(0,P.tZ)(mo.xJ,{label:(0,s.t)("Chart name"),required:!0},(0,P.tZ)(mt.II,{name:"new_slice_name",type:"text",placeholder:"Name",value:this.state.newSliceName,onChange:this.onSliceNameChange,"data-test":"new-chart-name"})),"query"===(null==(e=this.props.datasource)?void 0:e.type)&&(0,P.tZ)(mo.xJ,{label:(0,s.t)("Dataset Name"),required:!0},(0,P.tZ)(lt.V,{tooltip:(0,s.t)("A reusable dataset will be saved with your chart."),placement:"right"}),(0,P.tZ)(mt.II,{name:"dataset_name",type:"text",placeholder:"Dataset Name",value:this.state.datasetName,onChange:this.handleDatasetNameChange,"data-test":"new-dataset-name"})),(0,P.tZ)(mo.xJ,{label:(0,s.t)("Add to dashboard"),"data-test":"save-chart-modal-select-dashboard-form"},(0,P.tZ)(rt.qb,{allowClear:!0,allowNewOptions:!0,ariaLabel:(0,s.t)("Select a dashboard"),options:this.loadDashboards,onChange:this.onDashboardChange,value:this.state.dashboard,placeholder:(0,P.tZ)("div",null,(0,P.tZ)("b",null,(0,s.t)("Select")),(0,s.t)(" a dashboard OR "),(0,P.tZ)("b",null,(0,s.t)("create")),(0,s.t)(" a new one"))})),t&&(0,P.tZ)(ge.Z,{type:"info",message:t,closable:!1}),this.props.alert&&(0,P.tZ)(ge.Z,{css:(0,P.iv)({marginTop:t?16:void 0},"",""),type:"warning",message:this.props.alert,closable:!1}))},this.info=()=>{const e=this.isNewDashboard();let t=!1;return!this.props.slice||"overwrite"===this.state.action&&this.canOverwriteSlice()||(t=!0),t&&e?(0,s.t)("A new chart and dashboard will be created."):t?(0,s.t)("A new chart will be created."):e?(0,s.t)("A new dashboard will be created."):null},this.renderFooter=()=>{var e,t;return(0,P.tZ)("div",{"data-test":"save-modal-footer"},(0,P.tZ)(Te.Z,{id:"btn_cancel",buttonSize:"small",onClick:this.onHide},(0,s.t)("Cancel")),(0,P.tZ)(Te.Z,{id:"btn_modal_save_goto_dash",buttonSize:"small",disabled:!this.state.newSliceName||!this.state.dashboard||(null==(e=this.props.datasource)?void 0:e.type)!==ce.i9.Table&&!this.state.datasetName,onClick:()=>this.saveOrOverwrite(!0)},(0,s.t)("Save & go to dashboard")),(0,P.tZ)(Te.Z,{id:"btn_modal_save",buttonSize:"small",buttonStyle:"primary",onClick:()=>this.saveOrOverwrite(!1),disabled:this.state.isLoading||!this.state.newSliceName||(null==(t=this.props.datasource)?void 0:t.type)!==ce.i9.Table&&!this.state.datasetName,"data-test":"btn-modal-save"},(0,s.t)("Save")))},this.state={newSliceName:e.sliceName,datasetName:null==(t=e.datasource)?void 0:t.name,action:this.canOverwriteSlice()?"overwrite":"saveas",isLoading:!1,dashboard:void 0},this.onDashboardChange=this.onDashboardChange.bind(this),this.onSliceNameChange=this.onSliceNameChange.bind(this),this.changeAction=this.changeAction.bind(this),this.saveOrOverwrite=this.saveOrOverwrite.bind(this),this.isNewDashboard=this.isNewDashboard.bind(this),this.onHide=this.onHide.bind(this)}isNewDashboard(){const{dashboard:e}=this.state;return"string"==typeof(null==e?void 0:e.value)}canOverwriteSlice(){var e,t,a;return(null==(e=this.props.slice)||null==(t=e.owners)?void 0:t.includes(this.props.user.userId))&&!(null!=(a=this.props.slice)&&a.is_managed_externally)}async componentDidMount(){let{dashboardId:e}=this.props;if(!e){let t=null;try{t=sessionStorage.getItem($i)}catch(e){}e=t&&parseInt(t,10)}if(e)try{const t=await this.loadDashboard(e);(0,La.Ms)(t,this.props.user)&&this.setState({dashboard:{label:t.dashboard_title,value:t.id}})}catch(e){this.props.actions.addDangerToast((0,s.t)("An error occurred while loading dashboard information."))}}onSliceNameChange(e){this.setState({newSliceName:e.target.value})}onDashboardChange(e){this.setState({dashboard:e})}changeAction(e){this.setState({action:e})}onHide(){this.props.dispatch((0,re.setSaveChartModalVisibility)(!1))}async saveOrOverwrite(e){this.setState({isLoading:!0});try{var t;if((null==(t=this.props.datasource)?void 0:t.type)===ce.i9.Query){const{schema:e,sql:t,database:a}=this.props.datasource,{templateParams:o}=this.props.datasource;await this.props.actions.saveDataset({schema:e,sql:t,database:a,templateParams:o,datasourceName:this.state.datasetName})}let o=[];this.props.slice&&"overwrite"===this.state.action&&(o=await this.props.actions.getSliceDashboards(this.props.slice));const n=this.props.form_data||{};delete n.url_params;let r,l=null;if(this.state.dashboard){var a;let e=this.state.dashboard.value;this.isNewDashboard()&&(e=(await this.props.actions.createDashboard(this.state.dashboard.label)).id);try{l=await this.loadDashboard(e)}catch(e){return void this.props.actions.saveSliceFailed()}(0,i.Z)(l)&&(0,i.Z)(null==(a=l)?void 0:a.id)&&(o=o.includes(l.id)?o:[...o,l.id],n.dashboards=o)}this.props.actions.setFormData({...n}),r="overwrite"===this.state.action?await this.props.actions.updateSlice(this.props.slice,this.state.newSliceName,o,l?{title:l.dashboard_title,new:this.isNewDashboard()}:null):await this.props.actions.createSlice(this.state.newSliceName,o,l?{title:l.dashboard_title,new:this.isNewDashboard()}:null);try{l?sessionStorage.setItem($i,`${l.id}`):sessionStorage.removeItem($i)}catch(e){}if(e&&l)return void this.props.history.push(l.url);const s=this.handleRedirect(window.location.search,r);this.props.history.replace(`/explore/?${s.toString()}`),this.setState({isLoading:!1}),this.onHide()}finally{this.setState({isLoading:!1})}}render(){return(0,P.tZ)(zi,{show:this.props.isVisible,onHide:this.onHide,title:(0,s.t)("Save chart"),footer:this.renderFooter()},this.state.isLoading?(0,P.tZ)("div",{css:P.iv`
              display: flex;
              justify-content: center;
            `},(0,P.tZ)(u.Z,{position:"normal"})):this.renderSaveChartModal())}}const Wi=(0,r.EN)((0,n.$j)((function({explore:e,saveModal:t,user:a}){return{datasource:e.datasource,slice:e.slice,user:a,dashboards:t.dashboards,alert:t.saveModalAlert,isVisible:t.isVisible}}))(Ui));var Hi=a(1469),qi=a.n(Hi),Vi=a(11728),Gi=a(74061),Xi=a(90233),Yi=a(74004);const Qi=R.Z.div`
  ${({theme:e})=>P.iv`
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    height: ${6*e.gridUnit}px;
    padding: 0 ${e.gridUnit}px;

    // hack to make the drag preview image corners rounded
    transform: translate(0, 0);
    background-color: inherit;
    border-radius: 4px;

    > div {
      min-width: 0;
      margin-right: ${2*e.gridUnit}px;
    }
  `}
`;function Ki(e){const{labelRef:t,showTooltip:a,type:o,value:n}=e,[{isDragging:r},i]=(0,pr.c)({item:{value:e.value,type:e.type},collect:e=>({isDragging:e.isDragging()})}),l={labelRef:t,showTooltip:!r&&a,showType:!0};return(0,P.tZ)(Qi,{"data-test":"DatasourcePanelDragOption",ref:i},o===lo.g.Column?(0,P.tZ)(xo.l,(0,C.Z)({column:n},l)):(0,P.tZ)(xo.B,(0,C.Z)({metric:n},l)),(0,P.tZ)(z.Z.Drag,null))}const Ji=50,el=50,tl=30,al=R.Z.button`
  background: none;
  border: none;
  text-decoration: underline;
  color: ${({theme:e})=>e.colors.primary.dark1};
`,ol=R.Z.div`
  text-align: center;
  padding-top: 2px;
`,nl=R.Z.div`
  ${({theme:e})=>P.iv`
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: ${e.typography.sizes.s}px;
    background-color: ${e.colors.grayscale.light4};
    margin: ${2*e.gridUnit}px 0;
    border-radius: 4px;
    padding: 0 ${e.gridUnit}px;

    &:first-of-type {
      margin-top: 0;
    }
    &:last-of-type {
      margin-bottom: 0;
    }

    padding: 0;
    cursor: pointer;
    &:hover {
      background-color: ${e.colors.grayscale.light3};
    }

    & > span {
      white-space: nowrap;
    }

    .option-label {
      display: inline;
    }

    .metric-option {
      & > svg {
        min-width: ${4*e.gridUnit}px;
      }
      & > .option-label {
        overflow: hidden;
        text-overflow: ellipsis;
      }
    }
  `}
`,rl=R.Z.button`
  display: flex;
  justify-content: space-between;
  align-items: center;
  border: none;
  background: transparent;
  width: 100%;
  padding-inline: 0px;
`,il=R.Z.span`
  ${({theme:e})=>`\n    font-size: ${e.typography.sizes.m}px;\n    line-height: 1.3;\n  `}
`,ll=R.Z.div`
  ${({theme:e})=>`\n    border: 1px ${e.colors.grayscale.light4} solid;\n    border-radius: ${e.gridUnit}px;\n    font-size: ${e.typography.sizes.s}px;\n    padding: ${e.gridUnit}px;\n    color: ${e.colors.grayscale.light1};\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n  `}
`,sl=({index:e,style:t,data:a})=>{const{metricSlice:o,columnSlice:n,totalMetrics:r,totalColumns:i,width:l,showAllMetrics:d,onShowAllMetricsChange:u,showAllColumns:c,onShowAllColumnsChange:h,collapseMetrics:p,onCollapseMetricsChange:f,collapseColumns:g,onCollapseColumnsChange:m,hiddenMetricCount:v,hiddenColumnCount:b}=a,y=p?[]:o,x=p?1:2,w=p?e>=1:e>y.length+x,C=w?y.length+x+1:0,S=C+1,Z=(w?n.length:y.length)+(p?C:S)+1,k=w?g:p,_=w?m:f,E=w?c:d,M=w?h:u,T=(0,I.Fg)(),O=w?b:v;return(0,P.tZ)("div",{style:t,css:P.iv`
        padding: 0 ${4*T.gridUnit}px;
      `},e===C&&(0,P.tZ)(rl,{onClick:()=>_(!k)},(0,P.tZ)(il,null,w?(0,s.t)("Columns"):(0,s.t)("Metrics")),k?(0,P.tZ)(z.Z.DownOutlined,{iconSize:"s"}):(0,P.tZ)(z.Z.UpOutlined,{iconSize:"s"})),e===S&&!k&&(0,P.tZ)("div",{css:P.iv`
            display: flex;
            gap: ${2*T.gridUnit}px;
            justify-content: space-between;
            align-items: baseline;
          `},(0,P.tZ)("div",{className:"field-length",css:P.iv`
              flex-shrink: 0;
            `},w?(0,s.t)("Showing %s of %s",null==n?void 0:n.length,i):(0,s.t)("Showing %s of %s",null==y?void 0:y.length,r)),O>0&&(0,P.tZ)(ll,null,(0,s.t)("%s ineligible item(s) are hidden",O))),e>S&&e<Z&&(0,P.tZ)(nl,{key:(w?n[e-S-1].column_name:y[e-S-1].metric_name)+String(l),className:"column"},(0,P.tZ)(Ki,{value:w?n[e-S-1]:y[e-S-1],type:w?lo.g.Column:lo.g.Metric})),e===Z&&!k&&(w?i>Ji:r>el)&&(0,P.tZ)(ol,null,(0,P.tZ)(al,{onClick:()=>M(!E)},E?(0,s.t)("Show less..."):(0,s.t)("Show all..."))))},dl=R.Z.div`
  ${({theme:e})=>P.iv`
    background-color: ${e.colors.grayscale.light5};
    position: relative;
    height: 100%;
    display: flex;
    flex-direction: column;
    max-height: 100%;
    .ant-collapse {
      height: auto;
    }
    .field-selections {
      padding: 0 0 ${e.gridUnit}px;
      overflow: auto;
      height: 100%;
    }
    .field-length {
      margin-bottom: ${2*e.gridUnit}px;
      font-size: ${e.typography.sizes.s}px;
      color: ${e.colors.grayscale.light1};
    }
    .form-control.input-md {
      width: calc(100% - ${8*e.gridUnit}px);
      height: ${8*e.gridUnit}px;
      margin: ${2*e.gridUnit}px auto;
    }
    .type-label {
      font-size: ${e.typography.sizes.s}px;
      color: ${e.colors.grayscale.base};
    }
    .Control {
      padding-bottom: 0;
    }
  `};
`,ul=R.Z.div`
  ${({theme:e})=>P.iv`
    margin: 0 ${2.5*e.gridUnit}px;

    span {
      text-decoration: underline;
    }
  `}
`,cl=2,hl=e=>e.sort(((e,t)=>{var a,o;return(null!=(a=null==t?void 0:t.is_certified)?a:0)-(null!=(o=null==e?void 0:e.is_certified)?o:0)}));function pl({datasource:e,formData:t,controls:{datasource:a},actions:n,width:r}){const[i]=(0,o.useContext)(Jn),{columns:l,metrics:d}=e,u=(0,o.useMemo)((()=>{const e=Object.values(i);return qi()(l)?l.filter((t=>e.some((e=>e({value:t,type:lo.g.Column}))))):[]}),[i,l]),c=(0,o.useMemo)((()=>[...u].sort(((e,t)=>null==e||!e.is_dttm||null!=t&&t.is_dttm?null==t||!t.is_dttm||null!=e&&e.is_dttm?0:1:-1))),[u]),h=(0,o.useMemo)((()=>{const e=Object.values(i);return d.filter((t=>e.some((e=>e({value:t,type:lo.g.Metric})))))}),[i,d]),f=l.length-u.length,g=d.length-h.length,[m,v]=(0,o.useState)(!1),[b,y]=(0,o.useState)(""),[x,w]=(0,o.useState)(!1),[S,Z]=(0,o.useState)(!1),[k,_]=(0,o.useState)(!1),[E,M]=(0,o.useState)(!1),T=(0,Yi.n)(b,p.oP),O=(0,o.useMemo)((()=>T?(0,Xi.Lu)(c,T,{keys:[{key:"verbose_name",threshold:Xi.tL.CONTAINS},{key:"column_name",threshold:Xi.tL.CONTAINS},{key:e=>{var t,a;return[null!=(t=null==e?void 0:e.description)?t:"",null!=(a=null==e?void 0:e.expression)?a:""].map((e=>(null==e?void 0:e.replace(/[_\n\s]+/g," "))||""))},threshold:Xi.tL.CONTAINS,maxRanking:Xi.tL.CONTAINS}],keepDiacritics:!0}):null!=c?c:[]),[c,T]),D=(0,o.useMemo)((()=>T?(0,Xi.Lu)(h,T,{keys:[{key:"verbose_name",threshold:Xi.tL.CONTAINS},{key:"metric_name",threshold:Xi.tL.CONTAINS},{key:e=>{var t,a;return[null!=(t=null==e?void 0:e.description)?t:"",null!=(a=null==e?void 0:e.expression)?a:""].map((e=>(null==e?void 0:e.replace(/[_\n\s]+/g," "))||""))},threshold:Xi.tL.CONTAINS,maxRanking:Xi.tL.CONTAINS}],keepDiacritics:!0,baseSort:(e,t)=>{var a,o,n,r,i,l;return Number(null!=(a=null==t||null==(o=t.item)?void 0:o.is_certified)?a:0)-Number(null!=(n=null==e||null==(r=e.item)?void 0:r.is_certified)?n:0)||String(null!=(i=null==e?void 0:e.rankedValue)?i:"").localeCompare(null!=(l=null==t?void 0:t.rankedValue)?l:"")}}):null!=h?h:[]),[h,T]),R=(0,o.useMemo)((()=>x?D:null==D||null==D.slice?void 0:D.slice(0,el)),[D,x]),N=(0,o.useMemo)((()=>hl(S?O:null==O||null==O.slice?void 0:O.slice(0,Ji))),[O,S]),A={query:ce.i9.Query,saved_query:ce.i9.SavedQuery},I=e.type&&A[e.type],L=(0,o.useMemo)((()=>(0,P.tZ)(o.Fragment,null,(0,P.tZ)(mt.II,{allowClear:!0,onChange:e=>{y(e.target.value)},value:b,className:"form-control input-md",placeholder:(0,s.t)("Search Metrics & Columns")}),(0,P.tZ)("div",{className:"field-selections","data-test":"fieldSelections"},I&&(()=>{try{if("false"===sessionStorage.getItem("showInfobox"))return!1}catch(e){}return!0})()&&(0,P.tZ)(ul,null,(0,P.tZ)(ge.Z,{closable:!0,onClose:()=>{try{sessionStorage.setItem("showInfobox","false")}catch(e){}},type:"info",message:"",description:(0,P.tZ)(o.Fragment,null,(0,P.tZ)("span",{role:"button",tabIndex:0,onClick:()=>v(!0),className:"add-dataset-alert-description"},(0,s.t)("Create a dataset")),(0,s.t)(" to edit or add columns and metrics."))})),(0,P.tZ)(Vi.Z,null,(({height:e})=>(0,P.tZ)(Gi.t7,{width:r-cl,height:e,itemSize:tl,itemCount:(k?0:null==R?void 0:R.length)+(E?0:N.length)+2+(k?0:2)+(E?0:2),itemData:{metricSlice:R,columnSlice:N,width:r,totalMetrics:D.length,totalColumns:O.length,showAllMetrics:x,onShowAllMetricsChange:w,showAllColumns:S,onShowAllColumnsChange:Z,collapseMetrics:k,onCollapseMetricsChange:_,collapseColumns:E,onCollapseColumnsChange:M,hiddenMetricCount:g,hiddenColumnCount:f},overscanCount:5},sl)))))),[N,b,O.length,D.length,R,S,x,k,E,I,r]);return(0,P.tZ)(dl,null,I&&m&&(0,P.tZ)(me.W,{visible:m,onHide:()=>v(!1),buttonTextOnSave:(0,s.t)("Save"),buttonTextOnOverwrite:(0,s.t)("Overwrite"),datasource:(0,ve.z)(e),openWindow:!1,formData:t}),(0,P.tZ)(_i,(0,C.Z)({},a,{name:"datasource",actions:n})),null!=e.id&&L)}var fl=a(28062),gl=a(30845),ml=a(92252);const vl=(0,gl.Z)(((e,t)=>{const a={};return((null==t?void 0:t.controlPanelSections)||[]).filter(_n.D_).forEach((e=>{e.controlSetRows.forEach((e=>{e.forEach((e=>{e&&("string"==typeof e?a[e]=ml.ai[e]:e.name&&e.config&&(a[e.name]=e.config))}))}))})),a}));var bl=a(76962);const yl=R.Z.span`
  ${({theme:e})=>`\n    font-size: ${e.typography.sizes.s}px;\n    color: ${e.colors.grayscale.dark1};\n    background-color: ${e.colors.alert.base};\n\n    &:hover {\n      background-color: ${e.colors.alert.dark1};\n    }\n  `}
`;function xl(e){return null==e||""===e||Array.isArray(e)&&0===e.length||"object"==typeof e&&0===Object.keys(e).length?null:e}class wl extends o.Component{constructor(e){super(e);const t=this.getDiffs(e),a=(e=>{const t=(0,Ve.Z)().get(e);return vl(e,t)})(e.origFormData.viz_type),o=this.getRowsFromDiffs(t,a);this.state={rows:o,hasDiffs:!_r()(t),controlsMap:a}}UNSAFE_componentWillReceiveProps(e){if(at()(this.props,e))return;const t=this.getDiffs(e);this.setState((e=>({rows:this.getRowsFromDiffs(t,e.controlsMap),hasDiffs:!_r()(t)})))}getRowsFromDiffs(e,t){return Object.entries(e).map((([e,a])=>{var o;return{control:(null==(o=t[e])?void 0:o.label)||e,before:this.formatValue(a.before,e,t),after:this.formatValue(a.after,e,t)}}))}getDiffs(e){const t=(0,ee.BR)(e.origFormData),a=(0,ee.BR)(e.currentFormData),o=Object.keys(a),n={};return o.forEach((e=>{(t[e]||a[e])&&(["filters","having","where"].includes(e)||this.isEqualish(t[e],a[e])||(n[e]={before:t[e],after:a[e]}))})),n}isEqualish(e,t){return at()(xl(e),xl(t))}formatValue(e,t,a){var o,n,r,i;if(void 0===e)return"N/A";if(null===e)return"null";if("AdhocFilterControl"===(null==(o=a[t])?void 0:o.type)&&Array.isArray(e))return e.length?e.map((e=>{const t=e.comparator&&e.comparator.constructor===Array?`[${e.comparator.join(", ")}]`:e.comparator;return`${e.subject} ${e.operator} ${t}`})).join(", "):"[]";if("BoundsControl"===(null==(n=a[t])?void 0:n.type))return`Min: ${e[0]}, Max: ${e[1]}`;if("CollectionControl"===(null==(r=a[t])?void 0:r.type)&&Array.isArray(e))return e.map((e=>(0,qa.o)(e))).join(", ");if("MetricsControl"===(null==(i=a[t])?void 0:i.type)&&Array.isArray(e)){const t=e.map((e=>{var t;return null!=(t=null==e?void 0:e.label)?t:e}));return t.length?t.join(", "):"[]"}if("boolean"==typeof e)return e?"true":"false";if(Array.isArray(e)){const t=e.map((e=>{var t;return null!=(t=null==e?void 0:e.label)?t:e}));return t.length?t.join(", "):"[]"}return"string"==typeof e||"number"==typeof e?e:(0,qa.o)(e)}renderModalBody(){const e=[{accessor:"control",Header:(0,s.t)("Control")},{accessor:"before",Header:(0,s.t)("Before")},{accessor:"after",Header:(0,s.t)("After")}];return(0,P.tZ)(bl.Z,{columns:e,data:this.state.rows,pageSize:50,className:"table-condensed",columnsForWrapText:["Control","Before","After"]})}renderTriggerNode(){return(0,P.tZ)($.u,{id:"difference-tooltip",title:(0,s.t)("Click to see difference")},(0,P.tZ)(yl,{className:"label"},(0,s.t)("Altered")))}render(){return this.state.hasDiffs?(0,P.tZ)(Fa.Z,{triggerNode:this.renderTriggerNode(),modalTitle:(0,s.t)("Chart changes"),modalBody:this.renderModalBody(),responsive:!0}):null}}const Cl=wl;var Sl=a(83673),Zl=a(45306),kl=a(67697),_l=a(96022);const El={actions:O().object.isRequired,canOverwrite:O().bool.isRequired,canDownload:O().bool.isRequired,dashboardId:O().number,isStarred:O().bool.isRequired,slice:O().object,sliceName:O().string,table_name:O().string,formData:O().object,ownState:O().object,timeout:O().number,chart:K.$6,saveDisabled:O().bool},Ml=e=>P.iv`
  color: ${e.colors.primary.dark2};
  & > span[role='img'] {
    margin-right: 0;
  }
`,Tl=e=>P.iv`
  display: flex;
  align-items: center;
  margin-left: ${e.gridUnit}px;
  & > span {
    margin-right: ${3*e.gridUnit}px;
  }
`,Ol=({dashboardId:e,slice:t,actions:a,formData:i,ownState:l,chart:d,user:u,canOverwrite:c,canDownload:h,isStarred:p,sliceName:f,saveDisabled:g,metadata:m})=>{const v=(0,n.I0)(),{latestQueryFormData:b,sliceFormData:y}=d,[x,w]=(0,o.useState)(!1);(0,o.useEffect)((()=>{e&&(async()=>{const{dashboards:t}=m||{},a=e&&t&&t.find((t=>t.id===e));if(a)try{var o;const e=await pe.Z.get({endpoint:`/api/v1/dashboard/${a.id}`}),t=null==e||null==(o=e.json)?void 0:o.result,n=JSON.parse(t.json_metadata),r=n.shared_label_colors||{},i=n.label_colors||{},l={...r,...i},s=fl.getNamespace();Object.keys(l).forEach((e=>{s.setColor(e,l[e],n.color_scheme)}))}catch(e){N.Z.info((0,s.t)("Unable to retrieve dashboard colors"))}})()}),[]);const C=(0,o.useCallback)((()=>{v((0,re.setSaveChartModalVisibility)(!0))}),[v]),S=(0,o.useCallback)((e=>{v((0,ne.sliceUpdated)(e))}),[v]),Z=(0,r.k6)(),{redirectSQLLab:k}=a,_=(0,o.useCallback)(((e,t=!1)=>{k(e,!t&&Z)}),[k,Z]),[E,M,T]=(0,_l.gT)(b,h,t,_,(()=>{w(!0)}),l,null==m?void 0:m.dashboards),O=(0,o.useMemo)((()=>{if(!m)return null;const e=[];return e.push({type:kl.pG.Dashboards,title:m.dashboards.length>0?(0,s.tn)("Added to 1 dashboard","Added to %s dashboards",m.dashboards.length,m.dashboards.length):(0,s.t)("Not added to any dashboard"),description:m.dashboards.length>0?(0,s.t)("You can preview the list of dashboards in the chart settings dropdown."):void 0}),e.push({type:kl.pG.LastModified,value:m.changed_on_humanized,modifiedBy:m.changed_by||(0,s.t)("Not available")}),e.push({type:kl.pG.Owner,createdBy:m.created_by||(0,s.t)("Not available"),owners:m.owners.length>0?m.owners:(0,s.t)("None"),createdOn:m.created_on_humanized}),null!=t&&t.description&&e.push({type:kl.pG.Description,value:null==t?void 0:t.description}),(0,P.tZ)(kl.ZP,{items:e,tooltipPlacement:"bottom"})}),[m,null==t?void 0:t.description]),D=null==t?void 0:t.slice_name;return(0,P.tZ)(o.Fragment,null,(0,P.tZ)(Zl.u,{editableTitleProps:{title:f,canEdit:!t||c||((null==t?void 0:t.owners)||[]).includes(null==u?void 0:u.userId),onSave:a.updateChartTitle,placeholder:(0,s.t)("Add the name of the chart"),label:(0,s.t)("Chart title")},showTitlePanelItems:!!t,certificatiedBadgeProps:{certifiedBy:null==t?void 0:t.certified_by,details:null==t?void 0:t.certification_details},showFaveStar:!(null==u||!u.userId),faveStarProps:{itemId:null==t?void 0:t.slice_id,fetchFaveStar:a.fetchFaveStar,saveFaveStar:a.saveFaveStar,isStarred:p,showTooltip:!0},titlePanelAdditionalItems:(0,P.tZ)("div",{css:Tl},y?(0,P.tZ)(Cl,{className:"altered",origFormData:{...y,chartTitle:D},currentFormData:{...i,chartTitle:f}}):null,O),rightPanelAdditionalItems:(0,P.tZ)($.u,{title:g?(0,s.t)("Add required control values to save chart"):null},(0,P.tZ)("div",null,(0,P.tZ)(Te.Z,{buttonStyle:"secondary",onClick:C,disabled:g,"data-test":"query-save-button",css:Ml},(0,P.tZ)(z.Z.SaveOutlined,{iconSize:"l"}),(0,s.t)("Save")))),additionalActionsMenu:E,menuDropdownProps:{visible:M,onVisibleChange:T}}),x&&(0,P.tZ)(Sl.Z,{show:x,onHide:()=>{w(!1)},onSave:S,slice:t}))};Ol.propTypes=El;const Dl=Ol,Rl={...Ue.propTypes,actions:O().object.isRequired,datasource_type:O().string.isRequired,dashboardId:O().number,isDatasourceMetaLoading:O().bool.isRequired,chart:K.$6.isRequired,slice:O().object,sliceName:O().string,controls:O().object.isRequired,forcedHeight:O().string,form_data:O().object.isRequired,standalone:O().bool.isRequired,force:O().bool,timeout:O().number,impressionId:O().string,vizType:O().string,saveAction:O().string,isSaveModalVisible:O().bool},Pl=R.Z.div`
  ${({theme:e})=>P.iv`
    background: ${e.colors.grayscale.light5};
    text-align: left;
    position: relative;
    width: 100%;
    max-height: 100%;
    min-height: 0;
    display: flex;
    flex: 1;
    flex-wrap: nowrap;
    border-top: 1px solid ${e.colors.grayscale.light2};
    .explore-column {
      display: flex;
      flex-direction: column;
      padding: ${2*e.gridUnit}px 0;
      max-height: 100%;
    }
    .data-source-selection {
      background-color: ${e.colors.grayscale.light5};
      padding: ${2*e.gridUnit}px 0;
      border-right: 1px solid ${e.colors.grayscale.light2};
    }
    .main-explore-content {
      flex: 1;
      min-width: ${128*e.gridUnit}px;
      border-left: 1px solid ${e.colors.grayscale.light2};
      padding: 0 ${4*e.gridUnit}px;
      .panel {
        margin-bottom: 0;
      }
    }
    .controls-column {
      align-self: flex-start;
      padding: 0;
    }
    .title-container {
      position: relative;
      display: flex;
      flex-direction: row;
      padding: 0 ${2*e.gridUnit}px 0 ${4*e.gridUnit}px;
      justify-content: space-between;
      .horizontal-text {
        font-size: ${e.typography.sizes.m}px;
      }
    }
    .no-show {
      display: none;
    }
    .vertical-text {
      writing-mode: vertical-rl;
      text-orientation: mixed;
    }
    .sidebar {
      height: 100%;
      background-color: ${e.colors.grayscale.light4};
      padding: ${2*e.gridUnit}px;
      width: ${8*e.gridUnit}px;
    }
    .collapse-icon > svg {
      color: ${e.colors.primary.base};
    }
  `};
`,Nl=M()((async(e,t,a,o,n,r,i,l)=>{const s={...e},d=e.slice_id,u=new URLSearchParams(window.location.search),c=Object.fromEntries(u);d?c[p.KD.sliceId.name]=d:(c[p.KD.datasourceId.name]=t,c[p.KD.datasourceType.name]=a);const f=(null==s?void 0:s.url_params)||{};Object.entries(f).forEach((([e,t])=>{p.$O.includes(e)||(c[e]=t)}));try{let u,f;if(o?(u=await(0,ee.nv)(t,a,e,d,l),f="replaceState"):(u=(0,h.eY)(p.KD.formDataKey),await(0,ee.LW)(t,a,u,e,d,l),f="pushState"),window.location.pathname.startsWith("/explore")){const e=(0,ae.y8)(n?p.KD.standalone.name:null,{[p.KD.formDataKey.name]:u,...c},r);window.history[f](s,i,e)}}catch(e){N.Z.warn("Failed at altering browser history",e)}}),1e3),Al={controls_width:320,datasource_width:300};function Il(e){return(0,U.rV)(e,Al[e])}function Ll(e,t){const a=Number(Il(e))+t.width;(0,U.LS)(e,a)}function Fl(e){const t=(0,B.gp)().dynamicPlugins[e.vizType],a=t&&t.mounting,n=(0,A.D)(a),r=(0,A.D)(e.controls),[i,l]=(0,o.useState)(e.controls),[d,u]=(0,o.useState)(!1),[c,h]=(0,o.useState)(Il(U.dR.DatasourceWidth)),p=(0,ie.z)(),f=(0,I.Fg)(),g=(0,o.useCallback)((async({isReplace:t=!1,title:a}={})=>{const o=e.dashboardId?{...e.form_data,dashboardId:e.dashboardId}:e.form_data,{id:n,type:r}=e.datasource;Nl(o,n,r,t,e.standalone,e.force,a,p)}),[e.dashboardId,e.form_data,e.datasource.id,e.datasource.type,e.standalone,e.force,p]),m=(0,o.useCallback)((()=>{const t=window.history.state;t&&Object.keys(t).length&&(e.actions.setExploreControls(t),e.actions.postChartFormData(t,e.force,e.timeout,e.chart.id))}),[e.actions,e.chart.id,e.timeout]),v=(0,o.useCallback)((()=>{e.actions.setForceQuery(!1),e.actions.triggerQuery(!0,e.chart.id),g(),l(e.controls)}),[e.controls,g,e.actions,e.chart.id]),b=(0,o.useCallback)((t=>{if(t.ctrlKey||t.metaKey){const a="Enter"===t.key||13===t.keyCode,o="s"===t.key||83===t.keyCode;a?v():o&&e.slice&&e.actions.saveSlice(e.form_data,{action:"overwrite",slice_id:e.slice.slice_id,slice_name:e.slice.slice_name,add_to_dash:"noSave",goto_dash:!1}).then((({data:e})=>{window.location=e.slice.slice_url}))}}),[v,e.actions,e.form_data,e.slice]);function y(){u(!d)}(0,L.J)((()=>{e.actions.logEvent(V.$b)})),(0,F.S)(p,((e,t)=>{t&&g({isReplace:!0})}));const x=(0,A.D)(m);(0,o.useEffect)((()=>(x&&window.removeEventListener("popstate",x),window.addEventListener("popstate",m),()=>{window.removeEventListener("popstate",m)})),[m,x]);const w=(0,A.D)(b);(0,o.useEffect)((()=>(w&&window.removeEventListener("keydown",w),document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)})),[b,w]),(0,o.useEffect)((()=>{n&&!a&&e.actions.dynamicPluginControlsReady()}),[a]),(0,o.useEffect)((()=>{Object.values(e.controls).some((e=>e.validationErrors&&e.validationErrors.length>0))||e.actions.triggerQuery(!0,e.chart.id)}),[]);const S=(0,o.useCallback)((t=>{const a=t?{...e.chart.latestQueryFormData,...(0,oe.Hu)(Z()(e.controls,t))}:(0,oe.Hu)(e.controls);e.actions.updateQueryFormData(a,e.chart.id),e.actions.renderTriggered((new Date).getTime(),e.chart.id),g()}),[g,e.actions,e.chart.id,e.chart.latestQueryFormData,e.controls]);(0,o.useEffect)((()=>{if(r&&e.chart.latestQueryFormData.viz_type===e.controls.viz_type.value){!e.controls.datasource||null!=r.datasource&&e.controls.datasource.value===r.datasource.value||(0,Q.QR)(e.form_data.datasource,!0);const t=Object.keys(e.controls).filter((t=>void 0!==r[t]&&!(0,H.JB)(e.controls[t].value,r[t].value))).filter((t=>e.controls[t].renderTrigger));t.length>0&&S(t)}}),[e.controls,e.ownState]);const k=(0,o.useMemo)((()=>!!i&&Object.keys(e.controls).filter((t=>void 0!==i[t]&&!(0,H.JB)(e.controls[t].value,i[t].value,{ignoreFields:["datasourceWarning"]}))).some((t=>!e.controls[t].renderTrigger&&!e.controls[t].dontRefreshOnChange))),[i,e.controls]);(0,F.S)(e.saveAction,(()=>{["saveas","overwrite"].includes(e.saveAction)&&(v(),g({isReplace:!0}),e.actions.setSaveAction(null))})),(0,o.useEffect)((()=>{void 0!==e.ownState&&(v(),S())}),[e.ownState]),k&&e.actions.logEvent(V.Ep);const _=(0,o.useMemo)((()=>{const t=Object.values(e.controls).filter((e=>e.validationErrors&&e.validationErrors.length>0));if(0===t.length)return null;const a=t.map((e=>e.validationErrors)),o=[...new Set(a.flat())].map((e=>[t.filter((t=>{var a;return null==(a=t.validationErrors)?void 0:a.includes(e)})).map((e=>e.label)),e])).map((([e,t])=>(0,P.tZ)("div",{key:t},e.length>1?(0,s.t)("Controls labeled "):(0,s.t)("Control labeled "),(0,P.tZ)("strong",null,` ${e.join(", ")}`),(0,P.tZ)("span",null,": ",t))));let n;return o.length>0&&(n=(0,P.tZ)("div",{style:{textAlign:"left"}},o)),n}),[e.controls]);function E(){return(0,P.tZ)(Ue,(0,C.Z)({},e,{errorMessage:_,chartIsStale:k,onQuery:v}))}return e.standalone?E():(0,P.tZ)(ar,null,(0,P.tZ)(Dl,{actions:e.actions,canOverwrite:e.can_overwrite,canDownload:e.can_download,dashboardId:e.dashboardId,isStarred:e.isStarred,slice:e.slice,sliceName:e.sliceName,table_name:e.table_name,formData:e.form_data,chart:e.chart,ownState:e.ownState,user:e.user,reports:e.reports,saveDisabled:_||"loading"===e.chart.chartStatus,metadata:e.metadata}),(0,P.tZ)(Pl,{id:"explore-container"},(0,P.tZ)(P.xB,{styles:P.iv`
            .navbar {
              margin-bottom: 0;
            }
            body {
              height: 100vh;
              max-height: 100vh;
              overflow: hidden;
            }
            #app-menu,
            #app {
              flex: 1 1 auto;
            }
            #app {
              flex-basis: 100%;
              overflow: hidden;
              height: 100%;
            }
            #app-menu {
              flex-shrink: 0;
            }
          `}),(0,P.tZ)(j.e,{onResizeStop:(e,t,a,o)=>{h(a.getBoundingClientRect().width),Ll(U.dR.DatasourceWidth,o)},defaultSize:{width:Il(U.dR.DatasourceWidth),height:"100%"},minWidth:Al[U.dR.DatasourceWidth],maxWidth:"33%",enable:{right:!0},className:d?"no-show":"explore-column data-source-selection"},(0,P.tZ)("div",{className:"title-container"},(0,P.tZ)("span",{className:"horizontal-text"},(0,s.t)("Chart Source")),(0,P.tZ)("span",{role:"button",tabIndex:0,className:"action-button",onClick:y},(0,P.tZ)(z.Z.Expand,{className:"collapse-icon",iconColor:f.colors.primary.base,iconSize:"l"}))),(0,P.tZ)(pl,{formData:e.form_data,datasource:e.datasource,controls:e.controls,actions:e.actions,width:c,user:e.user})),d?(0,P.tZ)("div",{className:"sidebar",onClick:y,"data-test":"open-datasource-tab",role:"button",tabIndex:0},(0,P.tZ)("span",{role:"button",tabIndex:0,className:"action-button"},(0,P.tZ)($.u,{title:(0,s.t)("Open Datasource tab")},(0,P.tZ)(z.Z.Collapse,{className:"collapse-icon",iconColor:f.colors.primary.base,iconSize:"l"})))):null,(0,P.tZ)(j.e,{onResizeStop:(e,t,a,o)=>Ll(U.dR.ControlsWidth,o),defaultSize:{width:Il(U.dR.ControlsWidth),height:"100%"},minWidth:Al[U.dR.ControlsWidth],maxWidth:"33%",enable:{right:!0},className:"col-sm-3 explore-column controls-column"},(0,P.tZ)(Li,{exploreState:e.exploreState,actions:e.actions,form_data:e.form_data,controls:e.controls,chart:e.chart,datasource_type:e.datasource_type,isDatasourceMetaLoading:e.isDatasourceMetaLoading,onQuery:v,onStop:function(){e.chart&&e.chart.queryController&&e.chart.queryController.abort()},canStopQuery:e.can_add||e.can_overwrite,errorMessage:_,chartIsStale:k})),(0,P.tZ)("div",{className:X()("main-explore-content",d?"col-sm-9":"col-sm-7")},E())),e.isSaveModalVisible&&(0,P.tZ)(Wi,{addDangerToast:e.addDangerToast,actions:e.actions,form_data:e.form_data,sliceName:e.sliceName,dashboardId:e.dashboardId}))}Fl.propTypes=Rl;const jl=(0,n.$j)((function(e){var t,a,o,n,r,i,l,s,d;const{explore:u,charts:c,common:h,impressionId:p,dataMask:f,reports:g,user:m,saveModal:v}=e,{controls:b,slice:y,datasource:x,metadata:w,hiddenFormData:C}=u,S=null!=(t=b.query_mode)&&t.value?(e=>Object.keys(null!=e?e:{}).filter((e=>!W.Yl.has(e))))(C):Object.keys(null!=C?C:{}),Z=_()((0,oe.Hu)(b),S),k=null!=(a=null!=(o=Z.slice_id)?o:null==y?void 0:y.slice_id)?a:0;Z.extra_form_data=(0,J.on)({...Z.extra_form_data},{...null==(n=f[k])?void 0:n.ownState});const E=c[k];let M=Number(null==(r=u.form_data)?void 0:r.dashboardId);return Number.isNaN(M)&&(M=void 0),{isDatasourceMetaLoading:u.isDatasourceMetaLoading,datasource:x,datasource_type:x.type,datasourceId:x.datasource_id,dashboardId:M,controls:u.controls,can_add:!!u.can_add,can_download:!!u.can_download,can_overwrite:!!u.can_overwrite,column_formats:null!=(i=null==x?void 0:x.column_formats)?i:null,containerId:y?`slice-container-${y.slice_id}`:"slice-container",isStarred:u.isStarred,slice:y,sliceName:null!=(l=null!=(s=u.sliceName)?s:null==y?void 0:y.slice_name)?l:null,triggerRender:u.triggerRender,form_data:Z,table_name:x.table_name,vizType:Z.viz_type,standalone:!!u.standalone,force:!!u.force,chart:E,timeout:h.conf.SUPERSET_WEBSERVER_TIMEOUT,ownState:null==(d=f[k])?void 0:d.ownState,impressionId:p,user:m,exploreState:u,reports:g,metadata:w,saveAction:u.saveAction,isSaveModalVisible:v.isVisible}}),(function(e){const t={...ne,...te.yn,...re,...Y,...q};return{actions:(0,D.DE)(t,e)}}))((0,le.ZP)(o.memo(Fl)));a(65634);(0,s.t)("Chart Options"),(0,s.t)("Use Area Proportions"),(0,s.t)("Check if the Rose Chart should use segment area instead of segment radius for proportioning"),(0,s.t)("Stacked Style"),(0,s.t)("stack"),(0,s.t)("stream"),(0,s.t)("expand"),(0,s.t)("Chart Options"),(0,s.t)("Chart Options"),(0,s.t)("Columns"),(0,s.t)("Columns to display"),ce.i9.Table;const Bl={form_data:{datasource:"0__table",viz_type:"table"},dataset:{id:0,type:ce.i9.Table,columns:[],metrics:[],column_formats:{},currency_formats:{},verbose_map:{},main_dttm_col:"",owners:[],datasource_name:"missing_datasource",name:"missing_datasource",description:null},slice:null};var $l=a(46306),zl=a(99232);const Ul=e=>e.reduce(((e,t)=>{var a;return a=t,e.some((e=>(0,$l.jz)(e)&&(0,$l.jz)(a)&&e.clause===a.clause&&e.sqlExpression===a.sqlExpression||(0,$l.Ki)(e)&&(0,$l.Ki)(a)&&e.operator===a.operator&&e.subject===a.subject&&(!("comparator"in e)&&!("comparator"in a)||"comparator"in e&&"comparator"in a&&at()(e.comparator,a.comparator))))||e.push(t),e}),[]),Wl=(e,t)=>{const a=e.extra_form_data||{};return"time_range"in a?t.map((e=>"TEMPORAL_RANGE"===e.operator?{...e,comparator:a.time_range,isExtra:!0}:e)):t},Hl=(e,t)=>{const a=((e,t)=>{const a={__time_range:"time_range",__time_col:"granularity_sqla",__time_grain:"time_grain_sqla",__granularity:"granularity"},o={},n={};return(0,he.Z)(t.extra_filters).forEach((e=>{if(a[e.col])e.val!==qe.vM&&(n[a[e.col]]=e.val,o[e.col]=e.val);else{const t=(0,zl.f)({...e,isExtra:!0});n.adhoc_filters=[...(0,he.Z)(n.adhoc_filters),t]}})),n.applied_time_extras=o,n})(0,t),o=((e,t)=>{const a={},o=t.extra_form_data||{};Object.entries(qe.gn).forEach((([e,t])=>{const n=o[e];(0,i.Z)(n)&&(a[t]=n)})),"time_grain_sqla"in o&&(a.time_grain_sqla=o.time_grain_sqla),"granularity_sqla"in o&&(a.granularity_sqla=o.granularity_sqla);const n=t.extras||{};qe.fn.forEach((e=>{const t=o[e];(0,i.Z)(t)&&(n[e]=t)})),Object.keys(n).length&&(a.extras=n),a.adhoc_filters=(0,he.Z)(o.adhoc_filters).map((e=>({...e,isExtra:!0})));const r=(0,he.Z)(o.filters).map((e=>(0,zl.f)({...e,isExtra:!0})));return Object.keys(e).forEach((e=>{e.match(/adhoc_filter.*/)&&(a[e]=[...(0,he.Z)(a[e]),...r])})),a})(e,t),n=[...Object.keys(e),...Object.keys(a),...Object.keys(o)].filter((e=>e.match(/adhoc_filter.*/))).reduce(((n,r)=>{return{...n,[r]:(i=Wl(t,Ul([...(0,he.Z)(e[r]),...(0,he.Z)(a[r]),...(0,he.Z)(o[r])])),l=0===e.slice_id,i.map((e=>e.isExtra?{...e,isExtra:!l}:e)))};var i,l}),{});return{...e,...t,...a,...o,...n}},ql=async e=>{try{var t;const a=await(0,l.Z)({method:"GET",endpoint:"api/v1/explore/"})(e);if((e=>{var t,a,o;return(null==e||null==(t=e.result)?void 0:t.form_data)&&(0,i.Z)(null==e||null==(a=e.result)||null==(o=a.dataset)?void 0:o.id)})(a))return a;let o=(0,s.t)("Failed to load chart data");const n=null==a||null==(t=a.result)?void 0:t.message;throw n&&(o=`${o}:\n${n}`),new Error(o)}catch(e){const t=await(0,f.O$)(e);throw new Error(t.message||t.error||(0,s.t)("Failed to load chart data."))}},Vl=()=>{const e=(t=(0,h.eY)(p.KD.dashboardPageId))&&(0,U.rV)(U.dR.DashboardExploreContext,{})[t]||null;var t;if(e){const t=(0,h.eY)(p.KD.sliceId)||0,{labelColors:a,sharedLabelColors:o,colorScheme:n,chartConfiguration:r,nativeFilters:i,filterBoxFilters:l,dataMask:s,dashboardId:d}=e,u=(0,g.Z)({chart:{id:t},filters:(0,m._f)(t,l),nativeFilters:i,chartConfiguration:r,colorScheme:n,dataMask:s,labelColors:a,sharedLabelColors:o,sliceId:t,allSliceIds:[t],extraControls:{}});return Object.assign(u,{dashboardId:d}),u}return null};function Gl(){const[e,t]=(0,o.useState)(!1),a=(0,o.useRef)(!1),i=(0,n.I0)(),l=(0,r.TH)();return(0,o.useEffect)((()=>{const e=x(l),o=(0,h.eY)(p.KD.saveAction),n=Vl();a.current&&!o||ql(e).then((({result:e})=>{const t=!a.current&&n?Hl(e.form_data,n):e.form_data;i((0,w.u)({...e,form_data:t,saveAction:o}))})).catch((e=>{i((0,w.u)(Bl)),i((0,c.Gb)(e.message))})).finally((()=>{t(!0),a.current=!0})),(0,d.ZP)().source=d.Ag.Explore}),[i,l]),e?(0,P.tZ)(jl,null):(0,P.tZ)(u.Z,null)}},94334:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var o=a(4942);function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach((function(t){(0,o.Z)(e,t,a[t])}))}return e}}}]);
//# sourceMappingURL=f61923622c109ac7d5eb.chunk.js.map