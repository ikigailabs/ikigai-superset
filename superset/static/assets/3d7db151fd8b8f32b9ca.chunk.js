/*! For license information please see 3d7db151fd8b8f32b9ca.chunk.js.LICENSE.txt */
(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[6161],{20748:(e,t,n)=>{"use strict";var o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=(o=n(96540))&&o.__esModule?o:{default:o};t.A=function(e){var t=e.fill,n=void 0===t?"currentColor":t,o=e.width,i=void 0===o?24:o,l=e.height,s=void 0===l?24:l,c=e.style,d=void 0===c?{}:c,u=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["fill","width","height","style"]);return r.default.createElement("svg",a({viewBox:"0 0 24 24",style:a({fill:n,width:i,height:s},d)},u),r.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},54657:(e,t,n)=>{"use strict";var o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=(o=n(96540))&&o.__esModule?o:{default:o};t.A=function(e){var t=e.fill,n=void 0===t?"currentColor":t,o=e.width,i=void 0===o?24:o,l=e.height,s=void 0===l?24:l,c=e.style,d=void 0===c?{}:c,u=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(e,["fill","width","height","style"]);return r.default.createElement("svg",a({viewBox:"0 0 24 24",style:a({fill:n,width:i,height:s},d)},u),r.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},19858:(e,t,n)=>{"use strict";var o=n(6305),a=n(24994);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(94634)),i=o(n(96540)),l=n(57320),s=a(n(140)),c=a(n(78298)),d=i.forwardRef((function(e,t){var n=e.visible,o=(0,i.useRef)(null),a=(0,i.useRef)(null);function d(){s.default.cancel(a.current),a.current=null}function u(){a.current=(0,s.default)((function(){var e;null===(e=o.current)||void 0===e||e.forcePopupAlign(),a.current=null,u()}))}return i.useEffect((function(){return n?u():d(),d}),[n]),i.createElement(c.default,(0,r.default)({ref:(0,l.composeRef)(o,t)},e))}));t.default=d},78554:(e,t,n)=>{"use strict";var o=n(6305),a=n(24994);t.A=void 0;var r=a(n(73738)),i=a(n(43693)),l=a(n(94634)),s=a(n(85715)),c=o(n(96540)),d=o(n(67354)),u=a(n(46942)),h=a(n(19858)),p=n(76421),f=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},g=c.forwardRef((function(e,t){var n,o=c.useContext(p.ConfigContext),a=o.getPrefixCls,g=o.direction,m=o.getPopupContainer,v=c.useState({}),b=(0,s.default)(v,2),y=b[0],x=b[1],w=function(e,t){x((function(n){return(0,l.default)((0,l.default)({},n),(0,i.default)({},e,t))}))},C=function(e,t){return e||(t?"rtl"===g?"left":"right":"top")},S=function(t){var n=t.tooltipPrefixCls,o=t.prefixCls,a=t.info,r=a.value,i=a.dragging,s=a.index,u=f(a,["value","dragging","index"]),p=e.tipFormatter,g=e.tooltipVisible,v=e.tooltipPlacement,b=e.getTooltipPopupContainer,x=e.vertical,S=!!p&&(y[s]||i),A=g||void 0===g&&S;return c.createElement(h.default,{prefixCls:n,title:p?p(r):"",visible:A,placement:C(v,x),transitionName:"zoom-down",key:s,overlayClassName:"".concat(o,"-tooltip"),getPopupContainer:b||m},c.createElement(d.Handle,(0,l.default)({},u,{value:r,onMouseEnter:function(){return w(s,!0)},onMouseLeave:function(){return w(s,!1)}})))},A=e.prefixCls,k=e.tooltipPrefixCls,E=e.range,_=e.className,Y=f(e,["prefixCls","tooltipPrefixCls","range","className"]),T=a("slider",A),M=a("tooltip",k),O=(0,u.default)(_,(0,i.default)({},"".concat(T,"-rtl"),"rtl"===g));return"rtl"!==g||Y.vertical||(Y.reverse=!Y.reverse),"object"===(0,r.default)(E)&&(n=E.draggableTrack),E?c.createElement(d.Range,(0,l.default)({},Y,{step:Y.step,draggableTrack:n,className:O,ref:t,handle:function(e){return S({tooltipPrefixCls:M,prefixCls:T,info:e})},prefixCls:T})):c.createElement(d.default,(0,l.default)({},Y,{step:Y.step,className:O,ref:t,handle:function(e){return S({tooltipPrefixCls:M,prefixCls:T,info:e})},prefixCls:T}))}));g.displayName="Slider",g.defaultProps={tipFormatter:function(e){return"number"==typeof e?e.toString():""}};var m=g;t.A=m},9066:(e,t,n)=>{"use strict";n.d(t,{l:()=>o});const o=e=>{var t;return{columns:e.columns,name:(null==e?void 0:e.datasource_name)||(null==e?void 0:e.name)||"Untitled",dbId:(null==e||null==(t=e.database)?void 0:t.id)||(null==e?void 0:e.dbId),sql:(null==e?void 0:e.sql)||"",schema:null==e?void 0:e.schema}}},3800:function(e,t){var n;!function(o,a){"use strict";function r(){}r.TO_RAD=Math.PI/180,r.TO_DEG=180/Math.PI,r.PI_X2=2*Math.PI,r.PI_DIV4=Math.PI/4;var i=Object.create(r.prototype,{version:{value:"2.0.23"},radius:{value:6378137},minLat:{value:-90},maxLat:{value:90},minLon:{value:-180},maxLon:{value:180},sexagesimalPattern:{value:/^([0-9]{1,3})Â°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,2}))?)'\s*(([0-9]{1,3}(\.([0-9]{1,4}))?)"\s*)?([NEOSW]?)$/},measures:{value:Object.create(Object.prototype,{m:{value:1},km:{value:.001},cm:{value:100},mm:{value:1e3},mi:{value:1/1609.344},sm:{value:1/1852.216},ft:{value:100/30.48},in:{value:100/2.54},yd:{value:1/.9144}})},prototype:{value:r.prototype},extend:{value:function(e,t){for(var n in e)void 0!==i.prototype[n]&&!0!==t||("function"==typeof e[n]&&"function"==typeof e[n].bind?i.prototype[n]=e[n].bind(i):i.prototype[n]=e[n])}}});void 0===Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*r.TO_RAD}),void 0===Number.prototype.toDeg&&(Number.prototype.toDeg=function(){return this*r.TO_DEG}),i.extend({decimal:{},sexagesimal:{},distance:null,getKeys:function(e){if("[object Array]"==Object.prototype.toString.call(e))return{longitude:e.length>=1?0:a,latitude:e.length>=2?1:a,elevation:e.length>=3?2:a};var t=function(t){var n;return t.every((function(t){return"object"!=typeof e||!e.hasOwnProperty(t)||(n=t,!1)})),n},n=t(["lng","lon","longitude"]),o=t(["lat","latitude"]),r=t(["alt","altitude","elevation","elev"]);return void 0===o&&void 0===n&&void 0===r?a:{latitude:o,longitude:n,elevation:r}},getLat:function(e,t){return!0===t?e[this.getKeys(e).latitude]:this.useDecimal(e[this.getKeys(e).latitude])},latitude:function(e){return this.getLat.call(this,e)},getLon:function(e,t){return!0===t?e[this.getKeys(e).longitude]:this.useDecimal(e[this.getKeys(e).longitude])},longitude:function(e){return this.getLon.call(this,e)},getElev:function(e){return e[this.getKeys(e).elevation]},elevation:function(e){return this.getElev.call(this,e)},coords:function(e,t){var n={latitude:!0===t?e[this.getKeys(e).latitude]:this.useDecimal(e[this.getKeys(e).latitude]),longitude:!0===t?e[this.getKeys(e).longitude]:this.useDecimal(e[this.getKeys(e).longitude])},o=e[this.getKeys(e).elevation];return void 0!==o&&(n.elevation=o),n},ll:function(e,t){return this.coords.call(this,e,t)},validate:function(e){var t=this.getKeys(e);if(void 0===t||void 0===t.latitude||"undefined"===t.longitude)return!1;var n=e[t.latitude],o=e[t.longitude];return!(void 0===n||!this.isDecimal(n)&&!this.isSexagesimal(n)||void 0===o||!this.isDecimal(o)&&!this.isSexagesimal(o)||(n=this.useDecimal(n),o=this.useDecimal(o),n<this.minLat||n>this.maxLat||o<this.minLon||o>this.maxLon))},getDistance:function(e,t,n,o){n=Math.floor(n)||1,o=Math.floor(o)||0;var a,r,l,s,c,d,u,h=this.coords(e),p=this.coords(t),f=6378137,g=6356752.314245,m=1/298.257223563,v=(p.longitude-h.longitude).toRad(),b=Math.atan((1-m)*Math.tan(parseFloat(h.latitude).toRad())),y=Math.atan((1-m)*Math.tan(parseFloat(p.latitude).toRad())),x=Math.sin(b),w=Math.cos(b),C=Math.sin(y),S=Math.cos(y),A=v,k=100;do{var E=Math.sin(A),_=Math.cos(A);if(0===(d=Math.sqrt(S*E*(S*E)+(w*C-x*S*_)*(w*C-x*S*_))))return i.distance=0;a=x*C+w*S*_,r=Math.atan2(d,a),c=a-2*x*C/(s=1-(l=w*S*E/d)*l),isNaN(c)&&(c=0);var Y=m/16*s*(4+m*(4-3*s));u=A,A=v+(1-Y)*m*l*(r+Y*d*(c+Y*a*(2*c*c-1)))}while(Math.abs(A-u)>1e-12&&--k>0);if(0===k)return NaN;var T=s*(f*f-g*g)/(g*g),M=T/1024*(256+T*(T*(74-47*T)-128)),O=g*(1+T/16384*(4096+T*(T*(320-175*T)-768)))*(r-M*d*(c+M/4*(a*(2*c*c-1)-M/6*c*(4*d*d-3)*(4*c*c-3))));if(O=O.toFixed(o),void 0!==this.elevation(e)&&void 0!==this.elevation(t)){var D=Math.abs(this.elevation(e)-this.elevation(t));O=Math.sqrt(O*O+D*D)}return this.distance=Math.round(O*Math.pow(10,o)/n)*n/Math.pow(10,o)},getDistanceSimple:function(e,t,n){n=Math.floor(n)||1;var o=Math.round(Math.acos(Math.sin(this.latitude(t).toRad())*Math.sin(this.latitude(e).toRad())+Math.cos(this.latitude(t).toRad())*Math.cos(this.latitude(e).toRad())*Math.cos(this.longitude(e).toRad()-this.longitude(t).toRad()))*this.radius);return i.distance=Math.floor(Math.round(o/n)*n)},getCenter:function(e){var t=e;if("object"==typeof e&&!(e instanceof Array))for(var n in t=[],e)t.push(this.coords(e[n]));if(!t.length)return!1;var o,a,i,l=0,s=0,c=0;t.forEach((function(e){o=this.latitude(e).toRad(),a=this.longitude(e).toRad(),l+=Math.cos(o)*Math.cos(a),s+=Math.cos(o)*Math.sin(a),c+=Math.sin(o)}),this);var d=t.length;return l/=d,s/=d,c/=d,a=Math.atan2(s,l),i=Math.sqrt(l*l+s*s),{latitude:((o=Math.atan2(c,i))*r.TO_DEG).toFixed(6),longitude:(a*r.TO_DEG).toFixed(6)}},getBounds:function(e){if(!e.length)return!1;var t=this.elevation(e[0]),n={maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0};void 0!==t&&(n.maxElev=0,n.minElev=1/0);for(var o=0,a=e.length;o<a;++o)n.maxLat=Math.max(this.latitude(e[o]),n.maxLat),n.minLat=Math.min(this.latitude(e[o]),n.minLat),n.maxLng=Math.max(this.longitude(e[o]),n.maxLng),n.minLng=Math.min(this.longitude(e[o]),n.minLng),t&&(n.maxElev=Math.max(this.elevation(e[o]),n.maxElev),n.minElev=Math.min(this.elevation(e[o]),n.minElev));return n},getCenterOfBounds:function(e){var t=this.getBounds(e),n=t.minLat+(t.maxLat-t.minLat)/2,o=t.minLng+(t.maxLng-t.minLng)/2;return{latitude:parseFloat(n.toFixed(6)),longitude:parseFloat(o.toFixed(6))}},getBoundsOfDistance:function(e,t){var n,o,a=this.latitude(e),i=this.longitude(e),l=a.toRad(),s=i.toRad(),c=t/this.radius,d=l-c,u=l+c,h=this.maxLat.toRad(),p=this.minLat.toRad(),f=this.maxLon.toRad(),g=this.minLon.toRad();if(d>p&&u<h){var m=Math.asin(Math.sin(c)/Math.cos(l));(n=s-m)<g&&(n+=r.PI_X2),(o=s+m)>f&&(o-=r.PI_X2)}else d=Math.max(d,p),u=Math.min(u,h),n=g,o=f;return[{latitude:d.toDeg(),longitude:n.toDeg()},{latitude:u.toDeg(),longitude:o.toDeg()}]},isPointInside:function(e,t){for(var n=!1,o=-1,a=t.length,r=a-1;++o<a;r=o)(this.longitude(t[o])<=this.longitude(e)&&this.longitude(e)<this.longitude(t[r])||this.longitude(t[r])<=this.longitude(e)&&this.longitude(e)<this.longitude(t[o]))&&this.latitude(e)<(this.latitude(t[r])-this.latitude(t[o]))*(this.longitude(e)-this.longitude(t[o]))/(this.longitude(t[r])-this.longitude(t[o]))+this.latitude(t[o])&&(n=!n);return n},preparePolygonForIsPointInsideOptimized:function(e){for(var t=0,n=e.length-1;t<e.length;t++)this.longitude(e[n])===this.longitude(e[t])?(e[t].constant=this.latitude(e[t]),e[t].multiple=0):(e[t].constant=this.latitude(e[t])-this.longitude(e[t])*this.latitude(e[n])/(this.longitude(e[n])-this.longitude(e[t]))+this.longitude(e[t])*this.latitude(e[t])/(this.longitude(e[n])-this.longitude(e[t])),e[t].multiple=(this.latitude(e[n])-this.latitude(e[t]))/(this.longitude(e[n])-this.longitude(e[t]))),n=t},isPointInsideWithPreparedPolygon:function(e,t){for(var n=!1,o=this.longitude(e),a=this.latitude(e),r=0,i=t.length-1;r<t.length;r++)(this.longitude(t[r])<o&&this.longitude(t[i])>=o||this.longitude(t[i])<o&&this.longitude(t[r])>=o)&&(n^=o*t[r].multiple+t[r].constant<a),i=r;return n},isInside:function(){return this.isPointInside.apply(this,arguments)},isPointInCircle:function(e,t,n){return this.getDistance(e,t)<n},withinRadius:function(){return this.isPointInCircle.apply(this,arguments)},getRhumbLineBearing:function(e,t){var n=this.longitude(t).toRad()-this.longitude(e).toRad(),o=Math.log(Math.tan(this.latitude(t).toRad()/2+r.PI_DIV4)/Math.tan(this.latitude(e).toRad()/2+r.PI_DIV4));return Math.abs(n)>Math.PI&&(n=n>0?-1*(r.PI_X2-n):r.PI_X2+n),(Math.atan2(n,o).toDeg()+360)%360},getBearing:function(e,t){return t.latitude=this.latitude(t),t.longitude=this.longitude(t),e.latitude=this.latitude(e),e.longitude=this.longitude(e),(Math.atan2(Math.sin(t.longitude.toRad()-e.longitude.toRad())*Math.cos(t.latitude.toRad()),Math.cos(e.latitude.toRad())*Math.sin(t.latitude.toRad())-Math.sin(e.latitude.toRad())*Math.cos(t.latitude.toRad())*Math.cos(t.longitude.toRad()-e.longitude.toRad())).toDeg()+360)%360},getCompassDirection:function(e,t,n){var o,a;switch(a="circle"==n?this.getBearing(e,t):this.getRhumbLineBearing(e,t),Math.round(a/22.5)){case 1:o={exact:"NNE",rough:"N"};break;case 2:o={exact:"NE",rough:"N"};break;case 3:o={exact:"ENE",rough:"E"};break;case 4:o={exact:"E",rough:"E"};break;case 5:o={exact:"ESE",rough:"E"};break;case 6:o={exact:"SE",rough:"E"};break;case 7:o={exact:"SSE",rough:"S"};break;case 8:o={exact:"S",rough:"S"};break;case 9:o={exact:"SSW",rough:"S"};break;case 10:o={exact:"SW",rough:"S"};break;case 11:o={exact:"WSW",rough:"W"};break;case 12:o={exact:"W",rough:"W"};break;case 13:o={exact:"WNW",rough:"W"};break;case 14:o={exact:"NW",rough:"W"};break;case 15:o={exact:"NNW",rough:"N"};break;default:o={exact:"N",rough:"N"}}return o.bearing=a,o},getDirection:function(e,t,n){return this.getCompassDirection.apply(this,arguments)},orderByDistance:function(e,t){return Object.keys(t).map((function(n){var o=this.getDistance(e,t[n]),a=Object.create(t[n]);return a.distance=o,a.key=n,a}),this).sort((function(e,t){return e.distance-t.distance}))},isPointInLine:function(e,t,n){return(this.getDistance(t,e,1,3)+this.getDistance(e,n,1,3)).toFixed(3)==this.getDistance(t,n,1,3)},isPointNearLine:function(e,t,n,o){return this.getDistanceFromLine(e,t,n)<o},getDistanceFromLine:function(e,t,n){var o=this.getDistance(t,e,1,3),a=this.getDistance(e,n,1,3),r=this.getDistance(t,n,1,3),i=Math.acos((o*o+r*r-a*a)/(2*o*r)),l=Math.acos((a*a+r*r-o*o)/(2*a*r));return i>Math.PI/2?o:l>Math.PI/2?a:Math.sin(i)*o},findNearest:function(e,t,n,o){n=n||0,o=o||1;var a=this.orderByDistance(e,t);return 1===o?a[n]:a.splice(n,o)},getPathLength:function(e){for(var t,n=0,o=0,a=e.length;o<a;++o)t&&(n+=this.getDistance(this.coords(e[o]),t)),t=this.coords(e[o]);return n},getSpeed:function(e,t,n){var o=n&&n.unit||"km";"mph"==o?o="mi":"kmh"==o&&(o="km");var a=i.getDistance(e,t)/(1*t.time/1e3-1*e.time/1e3)*3600;return Math.round(a*this.measures[o]*1e4)/1e4},computeDestinationPoint:function(e,t,n,o){var a=this.latitude(e),r=this.longitude(e);o=void 0===o?this.radius:Number(o);var i=Number(t)/o,l=Number(n).toRad(),s=Number(a).toRad(),c=Number(r).toRad(),d=Math.asin(Math.sin(s)*Math.cos(i)+Math.cos(s)*Math.sin(i)*Math.cos(l)),u=c+Math.atan2(Math.sin(l)*Math.sin(i)*Math.cos(s),Math.cos(i)-Math.sin(s)*Math.sin(d));return u=(u+3*Math.PI)%(2*Math.PI)-Math.PI,{latitude:d.toDeg(),longitude:u.toDeg()}},convertUnit:function(e,t,n){if(0===t)return 0;if(void 0===t){if(null===this.distance)throw new Error("No distance was given");if(0===this.distance)return 0;t=this.distance}if(e=e||"m",n=null==n?4:n,void 0!==this.measures[e])return this.round(t*this.measures[e],n);throw new Error("Unknown unit for conversion.")},useDecimal:function(e){if("[object Array]"===Object.prototype.toString.call(e)){var t=this;return e=e.map((function(e){if(t.isDecimal(e))return t.useDecimal(e);if("object"==typeof e){if(t.validate(e))return t.coords(e);for(var n in e)e[n]=t.useDecimal(e[n]);return e}return t.isSexagesimal(e)?t.sexagesimal2decimal(e):e})),e}if("object"==typeof e&&this.validate(e))return this.coords(e);if("object"==typeof e){for(var n in e)e[n]=this.useDecimal(e[n]);return e}if(this.isDecimal(e))return parseFloat(e);if(!0===this.isSexagesimal(e))return parseFloat(this.sexagesimal2decimal(e));throw new Error("Unknown format.")},decimal2sexagesimal:function(e){if(e in this.sexagesimal)return this.sexagesimal[e];var t=e.toString().split("."),n=Math.abs(t[0]),o=60*("0."+(t[1]||0)),a=o.toString().split(".");return o=Math.floor(o),a=(60*("0."+(a[1]||0))).toFixed(2),this.sexagesimal[e]=n+"Â° "+o+"' "+a+'"',this.sexagesimal[e]},sexagesimal2decimal:function(e){if(e in this.decimal)return this.decimal[e];var t=new RegExp(this.sexagesimalPattern).exec(e),n=0,o=0;t&&(n=parseFloat(t[2]/60),o=parseFloat(t[4]/3600)||0);var a=(parseFloat(t[1])+n+o).toFixed(8);return a="S"==t[7]||"W"==t[7]?parseFloat(-a):parseFloat(a),this.decimal[e]=a,a},isDecimal:function(e){return e=e.toString().replace(/\s*/,""),!isNaN(parseFloat(e))&&parseFloat(e)==e},isSexagesimal:function(e){return e=e.toString().replace(/\s*/,""),this.sexagesimalPattern.test(e)},round:function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}}),void 0!==e.exports?(e.exports=i,"object"==typeof o&&(o.geolib=i)):(n=function(){return i}.apply(t,[]))===a||(e.exports=n)}(this)},20311:e=>{"use strict";e.exports=function(e,t,n,o,a,r,i,l){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,a,r,i,l],d=0;(s=new Error(t.replace(/%s/g,(function(){return c[d++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},24066:(e,t,n)=>{var o=n(83488);e.exports=function(e){return"function"==typeof e?e:o}},33215:(e,t,n)=>{var o=n(30641),a=n(24066);e.exports=function(e,t){return e&&o(e,a(t))}},51545:(e,t,n)=>{"use strict";n.d(t,{Ht:()=>l,cG:()=>r});var o=n(70731),a=n.n(o);const r={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0},i=(e,t)=>String(e.rankedValue).localeCompare(String(t.rankedValue));function l(e,t,n){void 0===n&&(n={});const{keys:o,threshold:a=r.MATCHES,baseSort:l=i,sorter:d=(e=>e.sort(((e,t)=>c(e,t,l))))}=n,h=e.reduce((function(e,i,l){const c=function(e,t,n,o){if(!t)return{rankedValue:e,rank:s(e,n,o),keyIndex:-1,keyThreshold:o.threshold};const a=function(e,t){const n=[];for(let o=0,a=t.length;o<a;o++){const a=t[o],r=p(a),i=u(e,a);for(let e=0,t=i.length;e<t;e++)n.push({itemValue:i[e],attributes:r})}return n}(e,t);return a.reduce(((e,t,a)=>{let{rank:i,rankedValue:l,keyIndex:c,keyThreshold:d}=e,{itemValue:u,attributes:h}=t,p=s(u,n,o),f=l;const{minRanking:g,maxRanking:m,threshold:v}=h;return p<g&&p>=r.MATCHES?p=g:p>m&&(p=m),p>i&&(i=p,c=a,d=v,f=u),{rankedValue:f,rank:i,keyIndex:c,keyThreshold:d}}),{rankedValue:e,rank:r.NO_MATCH,keyIndex:-1,keyThreshold:o.threshold})}(i,o,t,n),{rank:d,keyThreshold:h=a}=c;return d>=h&&e.push({...c,item:i,index:l}),e}),[]);return d(h).map((e=>{let{item:t}=e;return t}))}function s(e,t,n){return e=d(e,n),(t=d(t,n)).length>e.length?r.NO_MATCH:e===t?r.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase())===(t=t.toLowerCase())?r.EQUAL:e.startsWith(t)?r.STARTS_WITH:e.includes(` ${t}`)?r.WORD_STARTS_WITH:e.includes(t)?r.CONTAINS:1===t.length?r.NO_MATCH:function(e){let t="";return e.split(" ").forEach((e=>{e.split("-").forEach((e=>{t+=e.substr(0,1)}))})),t}(e).includes(t)?r.ACRONYM:function(e,t){let n=0,o=0;function a(e,t,o){for(let a=o,r=t.length;a<r;a++)if(t[a]===e)return n+=1,a+1;return-1}const i=a(t[0],e,0);if(i<0)return r.NO_MATCH;o=i;for(let n=1,i=t.length;n<i;n++)if(o=a(t[n],e,o),!(o>-1))return r.NO_MATCH;return function(e){const o=1/e,a=n/t.length;return r.MATCHES+a*o}(o-i)}(e,t)}function c(e,t,n){const{rank:o,keyIndex:a}=e,{rank:r,keyIndex:i}=t;return o===r?a===i?n(e,t):a<i?-1:1:o>r?-1:1}function d(e,t){let{keepDiacritics:n}=t;return e=`${e}`,n||(e=a()(e)),e}function u(e,t){let n;if("object"==typeof t&&(t=t.key),"function"==typeof t)n=t(e);else if(null==e)n=null;else if(Object.hasOwn(e,t))n=e[t];else{if(t.includes("."))return function(e,t){const n=e.split(".");let o=[t];for(let e=0,t=n.length;e<t;e++){const t=n[e];let a=[];for(let e=0,n=o.length;e<n;e++){const n=o[e];if(null!=n)if(Object.hasOwn(n,t)){const e=n[t];null!=e&&a.push(e)}else"*"===t&&(a=a.concat(n))}o=a}return Array.isArray(o[0])?[].concat(...o):o}(t,e);n=null}return null==n?[]:Array.isArray(n)?n:[String(n)]}l.rankings=r;const h={maxRanking:1/0,minRanking:-1/0};function p(e){return"string"==typeof e?h:{...h,...e}}},91945:(e,t,n)=>{"use strict";n.d(t,{WU:()=>fr,Xq:()=>Dr});var o=n(96540),a=n(58527),r={},i=function(e,t,n,o){var a=e+"-"+t+"-"+n+(o?"-server":"");if(r[a])return r[a];var i=function(e,t,n,o){if("undefined"==typeof document&&!o)return null;var a=o?new o:document.createElement("canvas");a.width=2*n,a.height=2*n;var r=a.getContext("2d");return r?(r.fillStyle=e,r.fillRect(0,0,a.width,a.height),r.fillStyle=t,r.fillRect(0,0,n,n),r.translate(n,n),r.fillRect(0,0,n,n),a.toDataURL()):null}(e,t,n,o);return r[a]=i,i},l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=function(e){var t=e.white,n=e.grey,r=e.size,s=e.renderers,c=e.borderRadius,d=e.boxShadow,u=e.children,h=(0,a.Ay)({default:{grid:{borderRadius:c,boxShadow:d,absolute:"0px 0px 0px 0px",background:"url("+i(t,n,r,s.canvas)+") center left"}}});return(0,o.isValidElement)(u)?o.cloneElement(u,l({},u.props,{style:l({},u.props.style,h.grid)})):o.createElement("div",{style:h.grid})};s.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};const c=s;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}const p=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,r=Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=o=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),o.handleChange=function(e){var t=function(e,t,n,o,a){var r=a.clientWidth,i=a.clientHeight,l="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=l-(a.getBoundingClientRect().left+window.pageXOffset),d=s-(a.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var u;if(u=d<0?0:d>i?1:Math.round(100*d/i)/100,t.a!==u)return{h:t.h,s:t.s,l:t.l,a:u,source:"rgb"}}else{var h;if(o!==(h=c<0?0:c>r?1:Math.round(100*c/r)/100))return{h:t.h,s:t.s,l:t.l,a:h,source:"rgb"}}return null}(e,o.props.hsl,o.props.direction,o.props.a,o.container);t&&"function"==typeof o.props.onChange&&o.props.onChange(t,e)},o.handleMouseDown=function(e){o.handleChange(e),window.addEventListener("mousemove",o.handleChange),window.addEventListener("mouseup",o.handleMouseUp)},o.handleMouseUp=function(){o.unbindEventListeners()},o.unbindEventListeners=function(){window.removeEventListener("mousemove",o.handleChange),window.removeEventListener("mouseup",o.handleMouseUp)},h(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=(0,a.Ay)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:d({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return o.createElement("div",{style:n.alpha},o.createElement("div",{style:n.checkboard},o.createElement(c,{renderers:this.props.renderers})),o.createElement("div",{style:n.gradient}),o.createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.createElement("div",{style:n.pointer},this.props.pointer?o.createElement(this.props.pointer,this.props):o.createElement("div",{style:n.slider}))))}}]),t}(o.PureComponent||o.Component);var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),g=[38,40],m=1;const v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.setUpdatedValue(e.target.value,e)},n.handleKeyDown=function(e){var t,o=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(o)&&(t=e.keyCode,g.indexOf(t)>-1)){var a=n.getArrowOffset(),r=38===e.keyCode?o+a:o-a;n.setUpdatedValue(r,e)}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n.inputId="rc-editable-input-"+m++,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),f(t,[{key:"componentDidUpdate",value:function(e,t){this.props.value===this.state.value||e.value===this.props.value&&t.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var n=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=(0,a.Ay)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return o.createElement("div",{style:t.wrap},o.createElement("input",{id:this.inputId,style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?o.createElement("label",{htmlFor:this.inputId,style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(o.PureComponent||o.Component);var b=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}const x=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,r=Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=o=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),o.handleChange=function(e){var t=function(e,t,n,o){var a=o.clientWidth,r=o.clientHeight,i="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,s=i-(o.getBoundingClientRect().left+window.pageXOffset),c=l-(o.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var d;if(d=c<0?359:c>r?0:360*(-100*c/r+100)/100,n.h!==d)return{h:d,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var u;if(u=s<0?0:s>a?359:100*s/a*360/100,n.h!==u)return{h:u,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null}(e,o.props.direction,o.props.hsl,o.container);t&&"function"==typeof o.props.onChange&&o.props.onChange(t,e)},o.handleMouseDown=function(e){o.handleChange(e),window.addEventListener("mousemove",o.handleChange),window.addEventListener("mouseup",o.handleMouseUp)},o.handleMouseUp=function(){o.unbindEventListeners()},y(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),b(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=(0,a.Ay)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return o.createElement("div",{style:r.hue},o.createElement("div",{className:"hue-"+n,style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),o.createElement("div",{style:r.pointer},this.props.pointer?o.createElement(this.props.pointer,this.props):o.createElement("div",{style:r.slider}))))}}]),t}(o.PureComponent||o.Component);var w=n(5556),C=n.n(w);const S=function(e,t){return e===t||e!=e&&t!=t},A=function(e,t){for(var n=e.length;n--;)if(S(e[n][0],t))return n;return-1};var k=Array.prototype.splice;function E(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}E.prototype.clear=function(){this.__data__=[],this.size=0},E.prototype.delete=function(e){var t=this.__data__,n=A(t,e);return!(n<0||(n==t.length-1?t.pop():k.call(t,n,1),--this.size,0))},E.prototype.get=function(e){var t=this.__data__,n=A(t,e);return n<0?void 0:t[n][1]},E.prototype.has=function(e){return A(this.__data__,e)>-1},E.prototype.set=function(e,t){var n=this.__data__,o=A(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this};const _=E,Y="object"==typeof global&&global&&global.Object===Object&&global;var T="object"==typeof self&&self&&self.Object===Object&&self;const M=Y||T||Function("return this")(),O=M.Symbol;var D=Object.prototype,R=D.hasOwnProperty,N=D.toString,I=O?O.toStringTag:void 0;var L=Object.prototype.toString;var j=O?O.toStringTag:void 0;const $=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":j&&j in Object(e)?function(e){var t=R.call(e,I),n=e[I];try{e[I]=void 0;var o=!0}catch(e){}var a=N.call(e);return o&&(t?e[I]=n:delete e[I]),a}(e):function(e){return L.call(e)}(e)},P=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},F=function(e){if(!P(e))return!1;var t=$(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},B=M["__core-js_shared__"];var H,z=(H=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||""))?"Symbol(src)_1."+H:"";var U=Function.prototype.toString;const W=function(e){if(null!=e){try{return U.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var q=/^\[object .+?Constructor\]$/,V=Function.prototype,G=Object.prototype,X=V.toString,Q=G.hasOwnProperty,K=RegExp("^"+X.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const Z=function(e){return!(!P(e)||(t=e,z&&z in t))&&(F(e)?K:q).test(W(e));var t},J=function(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Z(n)?n:void 0},ee=J(M,"Map"),te=J(Object,"create");var ne=Object.prototype.hasOwnProperty;var oe=Object.prototype.hasOwnProperty;function ae(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}ae.prototype.clear=function(){this.__data__=te?te(null):{},this.size=0},ae.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ae.prototype.get=function(e){var t=this.__data__;if(te){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ne.call(t,e)?t[e]:void 0},ae.prototype.has=function(e){var t=this.__data__;return te?void 0!==t[e]:oe.call(t,e)},ae.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=te&&void 0===t?"__lodash_hash_undefined__":t,this};const re=ae,ie=function(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map};function le(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}le.prototype.clear=function(){this.size=0,this.__data__={hash:new re,map:new(ee||_),string:new re}},le.prototype.delete=function(e){var t=ie(this,e).delete(e);return this.size-=t?1:0,t},le.prototype.get=function(e){return ie(this,e).get(e)},le.prototype.has=function(e){return ie(this,e).has(e)},le.prototype.set=function(e,t){var n=ie(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};const se=le;function ce(e){var t=this.__data__=new _(e);this.size=t.size}ce.prototype.clear=function(){this.__data__=new _,this.size=0},ce.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ce.prototype.get=function(e){return this.__data__.get(e)},ce.prototype.has=function(e){return this.__data__.has(e)},ce.prototype.set=function(e,t){var n=this.__data__;if(n instanceof _){var o=n.__data__;if(!ee||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new se(o)}return n.set(e,t),this.size=n.size,this};const de=ce,ue=function(){try{var e=J(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),he=function(e,t,n){"__proto__"==t&&ue?ue(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},pe=function(e,t,n){(void 0!==n&&!S(e[t],n)||void 0===n&&!(t in e))&&he(e,t,n)},fe=function(e,t,n){for(var o=-1,a=Object(e),r=n(e),i=r.length;i--;){var l=r[++o];if(!1===t(a[l],l,a))break}return e};var ge="object"==typeof exports&&exports&&!exports.nodeType&&exports,me=ge&&"object"==typeof module&&module&&!module.nodeType&&module,ve=me&&me.exports===ge?M.Buffer:void 0,be=ve?ve.allocUnsafe:void 0;const ye=M.Uint8Array,xe=function(e,t){var n,o,a=t?(n=e.buffer,o=new n.constructor(n.byteLength),new ye(o).set(new ye(n)),o):e.buffer;return new e.constructor(a,e.byteOffset,e.length)};var we=Object.create;const Ce=function(){function e(){}return function(t){if(!P(t))return{};if(we)return we(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Se=function(e,t){return function(n){return e(t(n))}},Ae=Se(Object.getPrototypeOf,Object);var ke=Object.prototype;const Ee=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ke)},_e=function(e){return null!=e&&"object"==typeof e},Ye=function(e){return _e(e)&&"[object Arguments]"==$(e)};var Te=Object.prototype,Me=Te.hasOwnProperty,Oe=Te.propertyIsEnumerable;const De=Ye(function(){return arguments}())?Ye:function(e){return _e(e)&&Me.call(e,"callee")&&!Oe.call(e,"callee")},Re=Array.isArray,Ne=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Ie=function(e){return null!=e&&Ne(e.length)&&!F(e)};var Le="object"==typeof exports&&exports&&!exports.nodeType&&exports,je=Le&&"object"==typeof module&&module&&!module.nodeType&&module,$e=je&&je.exports===Le?M.Buffer:void 0;const Pe=($e?$e.isBuffer:void 0)||function(){return!1};var Fe=Function.prototype,Be=Object.prototype,He=Fe.toString,ze=Be.hasOwnProperty,Ue=He.call(Object);var We={};We["[object Float32Array]"]=We["[object Float64Array]"]=We["[object Int8Array]"]=We["[object Int16Array]"]=We["[object Int32Array]"]=We["[object Uint8Array]"]=We["[object Uint8ClampedArray]"]=We["[object Uint16Array]"]=We["[object Uint32Array]"]=!0,We["[object Arguments]"]=We["[object Array]"]=We["[object ArrayBuffer]"]=We["[object Boolean]"]=We["[object DataView]"]=We["[object Date]"]=We["[object Error]"]=We["[object Function]"]=We["[object Map]"]=We["[object Number]"]=We["[object Object]"]=We["[object RegExp]"]=We["[object Set]"]=We["[object String]"]=We["[object WeakMap]"]=!1;var qe="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ve=qe&&"object"==typeof module&&module&&!module.nodeType&&module,Ge=Ve&&Ve.exports===qe&&Y.process,Xe=function(){try{return Ve&&Ve.require&&Ve.require("util").types||Ge&&Ge.binding&&Ge.binding("util")}catch(e){}}(),Qe=Xe&&Xe.isTypedArray;const Ke=Qe?(Ze=Qe,function(e){return Ze(e)}):function(e){return _e(e)&&Ne(e.length)&&!!We[$(e)]};var Ze;const Je=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var et=Object.prototype.hasOwnProperty;const tt=function(e,t,n){var o=e[t];et.call(e,t)&&S(o,n)&&(void 0!==n||t in e)||he(e,t,n)};var nt=/^(?:0|[1-9]\d*)$/;const ot=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&nt.test(e))&&e>-1&&e%1==0&&e<t};var at=Object.prototype.hasOwnProperty;const rt=function(e,t){var n=Re(e),o=!n&&De(e),a=!n&&!o&&Pe(e),r=!n&&!o&&!a&&Ke(e),i=n||o||a||r,l=i?function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}(e.length,String):[],s=l.length;for(var c in e)!t&&!at.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ot(c,s))||l.push(c);return l};var it=Object.prototype.hasOwnProperty;const lt=function(e){if(!P(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Ee(e),n=[];for(var o in e)("constructor"!=o||!t&&it.call(e,o))&&n.push(o);return n},st=function(e){return Ie(e)?rt(e,!0):lt(e)},ct=function(e){return function(e,t,n,o){var a=!n;n||(n={});for(var r=-1,i=t.length;++r<i;){var l=t[r],s=o?o(n[l],e[l],l,n,e):void 0;void 0===s&&(s=e[l]),a?he(n,l,s):tt(n,l,s)}return n}(e,st(e))},dt=function(e,t,n,o,a,r,i){var l=Je(e,n),s=Je(t,n),c=i.get(s);if(c)pe(e,n,c);else{var d=r?r(l,s,n+"",e,t,i):void 0,u=void 0===d;if(u){var h=Re(s),p=!h&&Pe(s),f=!h&&!p&&Ke(s);d=s,h||p||f?Re(l)?d=l:function(e){return _e(e)&&Ie(e)}(l)?d=function(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t}(l):p?(u=!1,d=function(e,t){if(t)return e.slice();var n=e.length,o=be?be(n):new e.constructor(n);return e.copy(o),o}(s,!0)):f?(u=!1,d=xe(s,!0)):d=[]:function(e){if(!_e(e)||"[object Object]"!=$(e))return!1;var t=Ae(e);if(null===t)return!0;var n=ze.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&He.call(n)==Ue}(s)||De(s)?(d=l,De(l)?d=ct(l):P(l)&&!F(l)||(d=function(e){return"function"!=typeof e.constructor||Ee(e)?{}:Ce(Ae(e))}(s))):u=!1}u&&(i.set(s,d),a(d,s,o,r,i),i.delete(s)),pe(e,n,d)}},ut=function e(t,n,o,a,r){t!==n&&fe(n,(function(i,l){if(r||(r=new de),P(i))dt(t,n,l,o,e,a,r);else{var s=a?a(Je(t,l),i,l+"",t,n,r):void 0;void 0===s&&(s=i),pe(t,l,s)}}),st)},ht=function(e){return e};var pt=Math.max;const ft=function(e){return function(){return e}},gt=ue?function(e,t){return ue(e,"toString",{configurable:!0,enumerable:!1,value:ft(t),writable:!0})}:ht;var mt=Date.now;const vt=function(e){var t=0,n=0;return function(){var o=mt(),a=16-(o-n);if(n=o,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(gt),bt=function(e,t){return vt(function(e,t,n){return t=pt(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,r=pt(o.length-t,0),i=Array(r);++a<r;)i[a]=o[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=o[a];return l[t]=n(i),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,l)}}(e,t,ht),e+"")},yt=(xt=function(e,t,n){ut(e,t,n)},bt((function(e,t){var n=-1,o=t.length,a=o>1?t[o-1]:void 0,r=o>2?t[2]:void 0;for(a=xt.length>3&&"function"==typeof a?(o--,a):void 0,r&&function(e,t,n){if(!P(n))return!1;var o=typeof t;return!!("number"==o?Ie(n)&&ot(t,n.length):"string"==o&&t in n)&&S(n[t],e)}(t[0],t[1],r)&&(a=o<3?void 0:a,o=1),e=Object(e);++n<o;){var i=t[n];i&&xt(e,i,n)}return e})));var xt,wt=function(e){var t=e.zDepth,n=e.radius,r=e.background,i=e.children,l=e.styles,s=void 0===l?{}:l,c=(0,a.Ay)(yt({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},s),{"zDepth-1":1===t});return o.createElement("div",{style:c.wrap},o.createElement("div",{style:c.bg}),o.createElement("div",{style:c.content},i))};wt.propTypes={background:C().string,zDepth:C().oneOf([0,1,2,3,4,5]),radius:C().number,styles:C().object},wt.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};const Ct=wt,St=function(){return M.Date.now()};var At=/\s/;var kt=/^\s+/;const Et=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&At.test(e.charAt(t)););return t}(e)+1).replace(kt,""):e},_t=function(e){return"symbol"==typeof e||_e(e)&&"[object Symbol]"==$(e)};var Yt=/^[-+]0x[0-9a-f]+$/i,Tt=/^0b[01]+$/i,Mt=/^0o[0-7]+$/i,Ot=parseInt;const Dt=function(e){if("number"==typeof e)return e;if(_t(e))return NaN;if(P(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=P(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Et(e);var n=Tt.test(e);return n||Mt.test(e)?Ot(e.slice(2),n?2:8):Yt.test(e)?NaN:+e};var Rt=Math.max,Nt=Math.min;const It=function(e,t,n){var o,a,r,i,l,s,c=0,d=!1,u=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=o,r=a;return o=a=void 0,c=t,i=e.apply(r,n)}function f(e){var n=e-s;return void 0===s||n>=t||n<0||u&&e-c>=r}function g(){var e=St();if(f(e))return m(e);l=setTimeout(g,function(e){var n=t-(e-s);return u?Nt(n,r-(e-c)):n}(e))}function m(e){return l=void 0,h&&o?p(e):(o=a=void 0,i)}function v(){var e=St(),n=f(e);if(o=arguments,a=this,s=e,n){if(void 0===l)return function(e){return c=e,l=setTimeout(g,t),d?p(e):i}(s);if(u)return clearTimeout(l),l=setTimeout(g,t),p(s)}return void 0===l&&(l=setTimeout(g,t)),i}return t=Dt(t)||0,P(n)&&(d=!!n.leading,r=(u="maxWait"in n)?Rt(Dt(n.maxWait)||0,t):r,h="trailing"in n?!!n.trailing:h),v.cancel=function(){void 0!==l&&clearTimeout(l),c=0,o=s=a=l=void 0},v.flush=function(){return void 0===l?i:m(St())},v};var Lt=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),jt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){"function"==typeof n.props.onChange&&n.throttle(n.props.onChange,function(e,t,n){var o=n.getBoundingClientRect(),a=o.width,r=o.height,i="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,s=i-(n.getBoundingClientRect().left+window.pageXOffset),c=l-(n.getBoundingClientRect().top+window.pageYOffset);s<0?s=0:s>a&&(s=a),c<0?c=0:c>r&&(c=r);var d=s/a,u=1-c/r;return{h:t.h,s:d,v:u,a:t.a,source:"hsv"}}(e,n.props.hsl,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e);var t=n.getContainerRenderWindow();t.addEventListener("mousemove",n.handleChange),t.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=function(e,t,n){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return P(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),It(e,t,{leading:o,maxWait:t,trailing:a})}((function(e,t,n){e(t,n)}),50),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Lt(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,i=t.black,l=t.pointer,s=t.circle,c=(0,a.Ay)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:i,pointer:l,circle:s}},{custom:!!this.props.style});return o.createElement("div",{style:c.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),o.createElement("div",{style:c.white,className:"saturation-white"},o.createElement("div",{style:c.black,className:"saturation-black"}),o.createElement("div",{style:c.pointer},this.props.pointer?o.createElement(this.props.pointer,this.props):o.createElement("div",{style:c.circle}))))}}]),t}(o.PureComponent||o.Component);const $t=jt,Pt=function(e,t){for(var n=-1,o=null==e?0:e.length;++n<o&&!1!==t(e[n],n,e););return e},Ft=Se(Object.keys,Object);var Bt=Object.prototype.hasOwnProperty;const Ht=function(e){return Ie(e)?rt(e):function(e){if(!Ee(e))return Ft(e);var t=[];for(var n in Object(e))Bt.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)},zt=function(e,t){if(null==e)return e;if(!Ie(e))return function(e,t){return e&&fe(e,t,Ht)}(e,t);for(var n=e.length,o=-1,a=Object(e);++o<n&&!1!==t(a[o],o,a););return e},Ut=function(e,t){return(Re(e)?Pt:zt)(e,function(e){return"function"==typeof e?e:ht}(t))};var Wt=n(87021),qt=n.n(Wt),Vt=function(e){var t=0,n=0;return Ut(["r","g","b","a","h","s","l","v"],(function(o){e[o]&&(t+=1,isNaN(e[o])||(n+=1),"s"===o||"l"===o)&&/^\d+%$/.test(e[o])&&(n+=1)})),t===n&&e},Gt=function(e,t){var n=e.hex?qt()(e.hex):qt()(e),o=n.toHsl(),a=n.toHsv(),r=n.toRgb(),i=n.toHex();return 0===o.s&&(o.h=t||0,a.h=t||0),{hsl:o,hex:"000000"===i&&0===r.a?"transparent":"#"+i,rgb:r,hsv:a,oldHue:e.h||t||o.h,source:e.source}},Xt=function(e){if("transparent"===e)return!0;var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&qt()(e).isValid()},Qt=function(e){if(!e)return"#fff";var t=Gt(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},Kt=function(e,t){var n=e.replace("Â°","");return qt()(t+" ("+n+")")._ok},Zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Jt=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();const en=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(Vt(e)){var o=Gt(e,e.h||t.state.oldHue);t.setState(o),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,o,n),t.props.onChange&&t.props.onChange(o,n)}},t.handleSwatchHover=function(e,n){if(Vt(e)){var o=Gt(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(o,n)}},t.state=Zt({},Gt(e.color,0)),t.debounce=It((function(e,t,n){e(t,n)}),100),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),Jt(n,[{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),o.createElement(e,Zt({},this.props,this.state,{onChange:this.handleChange},t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return Zt({},Gt(e.color,t.oldHue))}}]),n}(o.PureComponent||o.Component);return t.propTypes=Zt({},e.propTypes),t.defaultProps=Zt({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t};var tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},nn=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function on(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var an=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};const rn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function a(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var o=arguments.length,r=Array(o),i=0;i<o;i++)r[i]=arguments[i];return t=n=on(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(r))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},on(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,n),nn(a,[{key:"render",value:function(){return o.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},o.createElement(e,tn({},this.props,this.state)))}}]),a}(o.Component)}((function(e){var t=e.color,n=e.style,r=e.onClick,i=void 0===r?function(){}:r,l=e.onHover,s=e.title,d=void 0===s?t:s,u=e.children,h=e.focus,p=e.focusStyle,f=void 0===p?{}:p,g="transparent"===t,m=(0,a.Ay)({default:{swatch:an({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,h?f:{})}}),v={};return l&&(v.onMouseOver=function(e){return l(t,e)}),o.createElement("div",an({style:m.swatch,onClick:function(e){return i(t,e)},title:d,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&i(t,e)}},v),u,g&&o.createElement(c,{borderRadius:m.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))}));var ln=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},sn=function(e){var t=e.rgb,n=e.hsl,r=e.width,i=e.height,l=e.onChange,s=e.direction,c=e.style,d=e.renderers,u=e.pointer,h=e.className,f=void 0===h?"":h,g=(0,a.Ay)({default:{picker:{position:"relative",width:r,height:i},alpha:{radius:"2px",style:c}}});return o.createElement("div",{style:g.picker,className:"alpha-picker "+f},o.createElement(p,ln({},g.alpha,{rgb:t,hsl:n,pointer:u,renderers:d,onChange:l,direction:s})))};sn.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,n=(0,a.Ay)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return o.createElement("div",{style:n.picker})}},en(sn);const cn=function(e,t){for(var n=-1,o=null==e?0:e.length,a=Array(o);++n<o;)a[n]=t(e[n],n,e);return a};function dn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new se;++t<n;)this.add(e[t])}dn.prototype.add=dn.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},dn.prototype.has=function(e){return this.__data__.has(e)};const un=dn,hn=function(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1},pn=function(e,t,n,o,a,r){var i=1&n,l=e.length,s=t.length;if(l!=s&&!(i&&s>l))return!1;var c=r.get(e),d=r.get(t);if(c&&d)return c==t&&d==e;var u=-1,h=!0,p=2&n?new un:void 0;for(r.set(e,t),r.set(t,e);++u<l;){var f=e[u],g=t[u];if(o)var m=i?o(g,f,u,t,e,r):o(f,g,u,e,t,r);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!hn(t,(function(e,t){if(i=t,!p.has(i)&&(f===e||a(f,e,n,o,r)))return p.push(t);var i}))){h=!1;break}}else if(f!==g&&!a(f,g,n,o,r)){h=!1;break}}return r.delete(e),r.delete(t),h},fn=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,o){n[++t]=[o,e]})),n},gn=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n};var mn=O?O.prototype:void 0,vn=mn?mn.valueOf:void 0;var bn=Object.prototype.propertyIsEnumerable,yn=Object.getOwnPropertySymbols;const xn=yn?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,o=null==e?0:e.length,a=0,r=[];++n<o;){var i=e[n];t(i,n,e)&&(r[a++]=i)}return r}(yn(e),(function(t){return bn.call(e,t)})))}:function(){return[]},wn=function(e){return function(e,t,n){var o=t(e);return Re(e)?o:function(e,t){for(var n=-1,o=t.length,a=e.length;++n<o;)e[a+n]=t[n];return e}(o,n(e))}(e,Ht,xn)};var Cn=Object.prototype.hasOwnProperty;const Sn=J(M,"DataView"),An=J(M,"Promise"),kn=J(M,"Set"),En=J(M,"WeakMap");var _n="[object Map]",Yn="[object Promise]",Tn="[object Set]",Mn="[object WeakMap]",On="[object DataView]",Dn=W(Sn),Rn=W(ee),Nn=W(An),In=W(kn),Ln=W(En),jn=$;(Sn&&jn(new Sn(new ArrayBuffer(1)))!=On||ee&&jn(new ee)!=_n||An&&jn(An.resolve())!=Yn||kn&&jn(new kn)!=Tn||En&&jn(new En)!=Mn)&&(jn=function(e){var t=$(e),n="[object Object]"==t?e.constructor:void 0,o=n?W(n):"";if(o)switch(o){case Dn:return On;case Rn:return _n;case Nn:return Yn;case In:return Tn;case Ln:return Mn}return t});const $n=jn;var Pn="[object Arguments]",Fn="[object Array]",Bn="[object Object]",Hn=Object.prototype.hasOwnProperty;const zn=function(e,t,n,o,a,r){var i=Re(e),l=Re(t),s=i?Fn:$n(e),c=l?Fn:$n(t),d=(s=s==Pn?Bn:s)==Bn,u=(c=c==Pn?Bn:c)==Bn,h=s==c;if(h&&Pe(e)){if(!Pe(t))return!1;i=!0,d=!1}if(h&&!d)return r||(r=new de),i||Ke(e)?pn(e,t,n,o,a,r):function(e,t,n,o,a,r,i){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!r(new ye(e),new ye(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return S(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var l=fn;case"[object Set]":var s=1&o;if(l||(l=gn),e.size!=t.size&&!s)return!1;var c=i.get(e);if(c)return c==t;o|=2,i.set(e,t);var d=pn(l(e),l(t),o,a,r,i);return i.delete(e),d;case"[object Symbol]":if(vn)return vn.call(e)==vn.call(t)}return!1}(e,t,s,n,o,a,r);if(!(1&n)){var p=d&&Hn.call(e,"__wrapped__"),f=u&&Hn.call(t,"__wrapped__");if(p||f){var g=p?e.value():e,m=f?t.value():t;return r||(r=new de),a(g,m,n,o,r)}}return!!h&&(r||(r=new de),function(e,t,n,o,a,r){var i=1&n,l=wn(e),s=l.length;if(s!=wn(t).length&&!i)return!1;for(var c=s;c--;){var d=l[c];if(!(i?d in t:Cn.call(t,d)))return!1}var u=r.get(e),h=r.get(t);if(u&&h)return u==t&&h==e;var p=!0;r.set(e,t),r.set(t,e);for(var f=i;++c<s;){var g=e[d=l[c]],m=t[d];if(o)var v=i?o(m,g,d,t,e,r):o(g,m,d,e,t,r);if(!(void 0===v?g===m||a(g,m,n,o,r):v)){p=!1;break}f||(f="constructor"==d)}if(p&&!f){var b=e.constructor,y=t.constructor;b==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(p=!1)}return r.delete(e),r.delete(t),p}(e,t,n,o,a,r))},Un=function e(t,n,o,a,r){return t===n||(null==t||null==n||!_e(t)&&!_e(n)?t!=t&&n!=n:zn(t,n,o,a,e,r))},Wn=function(e){return e==e&&!P(e)},qn=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},Vn=function(e){var t=function(e){for(var t=Ht(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,Wn(a)]}return t}(e);return 1==t.length&&t[0][2]?qn(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,o){var a=n.length,r=a,i=!o;if(null==e)return!r;for(e=Object(e);a--;){var l=n[a];if(i&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<r;){var s=(l=n[a])[0],c=e[s],d=l[1];if(i&&l[2]){if(void 0===c&&!(s in e))return!1}else{var u=new de;if(o)var h=o(c,d,s,e,t,u);if(!(void 0===h?Un(d,c,3,o,u):h))return!1}}return!0}(n,e,t)}};var Gn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xn=/^\w*$/;const Qn=function(e,t){if(Re(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!_t(e))||Xn.test(e)||!Gn.test(e)||null!=t&&e in Object(t)};function Kn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var o=arguments,a=t?t.apply(this,o):o[0],r=n.cache;if(r.has(a))return r.get(a);var i=e.apply(this,o);return n.cache=r.set(a,i)||r,i};return n.cache=new(Kn.Cache||se),n}Kn.Cache=se;var Zn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jn=/\\(\\)?/g;const eo=(to=Kn((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Zn,(function(e,n,o,a){t.push(o?a.replace(Jn,"$1"):n||e)})),t}),(function(e){return 500===no.size&&no.clear(),e})),no=to.cache,to);var to,no,oo=O?O.prototype:void 0,ao=oo?oo.toString:void 0;const ro=function e(t){if("string"==typeof t)return t;if(Re(t))return cn(t,e)+"";if(_t(t))return ao?ao.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},io=function(e){return null==e?"":ro(e)},lo=function(e,t){return Re(e)?e:Qn(e,t)?[e]:eo(io(e))},so=function(e){if("string"==typeof e||_t(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},co=function(e,t){for(var n=0,o=(t=lo(t,e)).length;null!=e&&n<o;)e=e[so(t[n++])];return n&&n==o?e:void 0},uo=function(e,t){return null!=e&&t in Object(e)},ho=function(e,t){return null!=e&&function(e,t,n){for(var o=-1,a=(t=lo(t,e)).length,r=!1;++o<a;){var i=so(t[o]);if(!(r=null!=e&&n(e,i)))break;e=e[i]}return r||++o!=a?r:!!(a=null==e?0:e.length)&&Ne(a)&&ot(i,a)&&(Re(e)||De(e))}(e,t,uo)},po=function(e,t){return Qn(e)&&Wn(t)?qn(so(e),t):function(n){var o=function(e,t,n){var o=null==e?void 0:co(e,t);return void 0===o?n:o}(n,e);return void 0===o&&o===t?ho(n,e):Un(t,o,3)}},fo=function(e){return Qn(e)?(t=so(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return co(t,e)}}(e);var t},go=function(e,t){var n=-1,o=Ie(e)?Array(e.length):[];return zt(e,(function(e,a,r){o[++n]=t(e,a,r)})),o},mo=function(e,t){return(Re(e)?cn:go)(e,function(e){return"function"==typeof e?e:null==e?ht:"object"==typeof e?Re(e)?po(e[0],e[1]):Vn(e):fo(e)}(t))},vo=function(e){var t=e.colors,n=e.onClick,r=e.onSwatchHover,i=(0,a.Ay)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return o.createElement("div",{style:i.swatches},mo(t,(function(e){return o.createElement(rn,{key:e,color:e,style:i.swatch,onClick:n,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})})),o.createElement("div",{style:i.clear}))};var bo=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,i=e.colors,l=e.width,s=e.triangle,d=e.styles,u=void 0===d?{}:d,h=e.className,p=void 0===h?"":h,f="transparent"===r,g=function(e,n){Xt(e)&&t({hex:e,source:"hex"},n)},m=(0,a.Ay)(yt({default:{card:{width:l,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:Qt(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},u),{"hide-triangle":"hide"===s});return o.createElement("div",{style:m.card,className:"block-picker "+p},o.createElement("div",{style:m.triangle}),o.createElement("div",{style:m.head},f&&o.createElement(c,{borderRadius:"6px 6px 0 0"}),o.createElement("div",{style:m.label},r)),o.createElement("div",{style:m.body},o.createElement(vo,{colors:i,onClick:g,onSwatchHover:n}),o.createElement(v,{style:{input:m.input},value:r,onChange:g})))};bo.propTypes={width:C().oneOfType([C().string,C().number]),colors:C().arrayOf(C().string),triangle:C().oneOf(["top","hide"]),styles:C().object},bo.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},en(bo);var yo="#ffcdd2",xo="#e57373",wo="#f44336",Co="#d32f2f",So="#b71c1c",Ao="#f8bbd0",ko="#f06292",Eo="#e91e63",_o="#c2185b",Yo="#880e4f",To="#e1bee7",Mo="#ba68c8",Oo="#9c27b0",Do="#7b1fa2",Ro="#4a148c",No="#d1c4e9",Io="#9575cd",Lo="#673ab7",jo="#512da8",$o="#311b92",Po="#c5cae9",Fo="#7986cb",Bo="#3f51b5",Ho="#303f9f",zo="#1a237e",Uo="#bbdefb",Wo="#64b5f6",qo="#2196f3",Vo="#1976d2",Go="#0d47a1",Xo="#b3e5fc",Qo="#4fc3f7",Ko="#03a9f4",Zo="#0288d1",Jo="#01579b",ea="#b2ebf2",ta="#4dd0e1",na="#00bcd4",oa="#0097a7",aa="#006064",ra="#b2dfdb",ia="#4db6ac",la="#009688",sa="#00796b",ca="#004d40",da="#c8e6c9",ua="#81c784",ha="#4caf50",pa="#388e3c",fa="#dcedc8",ga="#aed581",ma="#8bc34a",va="#689f38",ba="#33691e",ya="#f0f4c3",xa="#dce775",wa="#cddc39",Ca="#afb42b",Sa="#827717",Aa="#fff9c4",ka="#fff176",Ea="#ffeb3b",_a="#fbc02d",Ya="#f57f17",Ta="#ffecb3",Ma="#ffd54f",Oa="#ffc107",Da="#ffa000",Ra="#ff6f00",Na="#ffe0b2",Ia="#ffb74d",La="#ff9800",ja="#f57c00",$a="#e65100",Pa="#ffccbc",Fa="#ff8a65",Ba="#ff5722",Ha="#e64a19",za="#bf360c",Ua="#d7ccc8",Wa="#a1887f",qa="#795548",Va="#5d4037",Ga="#3e2723",Xa="#cfd8dc",Qa="#90a4ae",Ka="#607d8b",Za="#455a64",Ja="#263238",er=function(e){var t=e.color,n=e.onClick,r=e.onSwatchHover,i=e.hover,l=e.active,s=e.circleSize,c=e.circleSpacing,d=(0,a.Ay)({default:{swatch:{width:s,height:s,marginRight:c,marginBottom:c,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(s/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:i,active:l});return o.createElement("div",{style:d.swatch},o.createElement(rn,{style:d.Swatch,color:t,onClick:n,onHover:r,focusStyle:{boxShadow:d.Swatch.boxShadow+", 0 0 5px "+t}}))};er.defaultProps={circleSize:28,circleSpacing:14};const tr=(0,a.H8)(er);var nr=function(e){var t=e.width,n=e.onChange,r=e.onSwatchHover,i=e.colors,l=e.hex,s=e.circleSize,c=e.styles,d=void 0===c?{}:c,u=e.circleSpacing,h=e.className,p=void 0===h?"":h,f=(0,a.Ay)(yt({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-u,marginBottom:-u}}},d)),g=function(e,t){return n({hex:e,source:"hex"},t)};return o.createElement("div",{style:f.card,className:"circle-picker "+p},mo(i,(function(e){return o.createElement(tr,{key:e,color:e,onClick:g,onSwatchHover:r,active:l===e.toLowerCase(),circleSize:s,circleSpacing:u})})))};nr.propTypes={width:C().oneOfType([C().string,C().number]),circleSize:C().number,circleSpacing:C().number,styles:C().object},nr.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[wo,Eo,Oo,Lo,Bo,qo,Ko,na,la,ha,ma,wa,Ea,Oa,La,Ba,qa,Ka],styles:{}},en(nr);const or=function(e){return void 0===e};var ar=n(54657),rr=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ir=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(e,t){e.hex?Xt(e.hex)&&n.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?n.props.onChange({r:e.r||n.props.rgb.r,g:e.g||n.props.rgb.g,b:e.b||n.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&("string"==typeof e.s&&e.s.includes("%")&&(e.s=e.s.replace("%","")),"string"==typeof e.l&&e.l.includes("%")&&(e.l=e.l.replace("%","")),1==e.s?e.s=.01:1==e.l&&(e.l=.01),n.props.onChange({h:e.h||n.props.hsl.h,s:Number(or(e.s)?n.props.hsl.s:e.s),l:Number(or(e.l)?n.props.hsl.l:e.l),source:"hsl"},t))},n.showHighlight=function(e){e.currentTarget.style.background="#eee"},n.hideHighlight=function(e){e.currentTarget.style.background="transparent"},1!==e.hsl.a&&"hex"===e.view?n.state={view:"rgb"}:n.state={view:e.view},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),rr(t,[{key:"render",value:function(){var e=this,t=(0,a.Ay)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=o.createElement("div",{style:t.fields,className:"flexbox-fix"},o.createElement("div",{style:t.field},o.createElement(v,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=o.createElement("div",{style:t.fields,className:"flexbox-fix"},o.createElement("div",{style:t.field},o.createElement(v,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),o.createElement("div",{style:t.field},o.createElement(v,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),o.createElement("div",{style:t.field},o.createElement(v,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),o.createElement("div",{style:t.alpha},o.createElement(v,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=o.createElement("div",{style:t.fields,className:"flexbox-fix"},o.createElement("div",{style:t.field},o.createElement(v,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),o.createElement("div",{style:t.field},o.createElement(v,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),o.createElement("div",{style:t.field},o.createElement(v,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),o.createElement("div",{style:t.alpha},o.createElement(v,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),o.createElement("div",{style:t.wrap,className:"flexbox-fix"},n,o.createElement("div",{style:t.toggle},o.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},o.createElement(ar.A,{style:t.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 1!==e.hsl.a&&"hex"===t.view?{view:"rgb"}:null}}]),t}(o.Component);ir.defaultProps={view:"hex"};const lr=ir,sr=function(){var e=(0,a.Ay)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return o.createElement("div",{style:e.picker})},cr=function(){var e=(0,a.Ay)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return o.createElement("div",{style:e.picker})};var dr=function(e){var t=e.width,n=e.onChange,r=e.disableAlpha,i=e.rgb,l=e.hsl,s=e.hsv,d=e.hex,u=e.renderers,h=e.styles,f=void 0===h?{}:h,g=e.className,m=void 0===g?"":g,v=e.defaultView,b=(0,a.Ay)(yt({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},f),{disableAlpha:r});return o.createElement("div",{style:b.picker,className:"chrome-picker "+m},o.createElement("div",{style:b.saturation},o.createElement($t,{style:b.Saturation,hsl:l,hsv:s,pointer:cr,onChange:n})),o.createElement("div",{style:b.body},o.createElement("div",{style:b.controls,className:"flexbox-fix"},o.createElement("div",{style:b.color},o.createElement("div",{style:b.swatch},o.createElement("div",{style:b.active}),o.createElement(c,{renderers:u}))),o.createElement("div",{style:b.toggles},o.createElement("div",{style:b.hue},o.createElement(x,{style:b.Hue,hsl:l,pointer:sr,onChange:n})),o.createElement("div",{style:b.alpha},o.createElement(p,{style:b.Alpha,rgb:i,hsl:l,pointer:sr,renderers:u,onChange:n})))),o.createElement(lr,{rgb:i,hsl:l,hex:d,view:v,onChange:n,disableAlpha:r})))};dr.propTypes={width:C().oneOfType([C().string,C().number]),disableAlpha:C().bool,styles:C().object,defaultView:C().oneOf(["hex","rgb","hsl"])},dr.defaultProps={width:225,disableAlpha:!1,styles:{}},en(dr);const ur=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,l=e.active,s=(0,a.Ay)({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:Qt(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:l,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return o.createElement(rn,{style:s.color,color:t,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},o.createElement("div",{style:s.dot}))},hr=function(e){var t=e.hex,n=e.rgb,r=e.onChange,i=(0,a.Ay)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),l=function(e,t){e.r||e.g||e.b?r({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},t):r({hex:e.hex,source:"hex"},t)};return o.createElement("div",{style:i.fields,className:"flexbox-fix"},o.createElement("div",{style:i.active}),o.createElement(v,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"hex",value:t,onChange:l}),o.createElement(v,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:n.r,onChange:l}),o.createElement(v,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:n.g,onChange:l}),o.createElement(v,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:n.b,onChange:l}))};var pr=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.colors,i=e.hex,l=e.rgb,s=e.styles,c=void 0===s?{}:s,d=e.className,u=void 0===d?"":d,h=(0,a.Ay)(yt({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},c)),p=function(e,n){e.hex?Xt(e.hex)&&t({hex:e.hex,source:"hex"},n):t(e,n)};return o.createElement(Ct,{style:h.Compact,styles:c},o.createElement("div",{style:h.compact,className:"compact-picker "+u},o.createElement("div",null,mo(r,(function(e){return o.createElement(ur,{key:e,color:e,active:e.toLowerCase()===i,onClick:p,onSwatchHover:n})})),o.createElement("div",{style:h.clear})),o.createElement(hr,{hex:i,rgb:l,onChange:p})))};pr.propTypes={colors:C().arrayOf(C().string),styles:C().object},pr.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};const fr=en(pr),gr=(0,a.H8)((function(e){var t=e.hover,n=e.color,r=e.onClick,i=e.onSwatchHover,l={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},s=(0,a.Ay)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:l}},{hover:t});return o.createElement("div",{style:s.swatch},o.createElement(rn,{color:n,onClick:r,onHover:i,focusStyle:l}))}));var mr=function(e){var t=e.width,n=e.colors,r=e.onChange,i=e.onSwatchHover,l=e.triangle,s=e.styles,c=void 0===s?{}:s,d=e.className,u=void 0===d?"":d,h=(0,a.Ay)(yt({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},c),{"hide-triangle":"hide"===l,"top-left-triangle":"top-left"===l,"top-right-triangle":"top-right"===l,"bottom-left-triangle":"bottom-left"===l,"bottom-right-triangle":"bottom-right"===l}),p=function(e,t){return r({hex:e,source:"hex"},t)};return o.createElement("div",{style:h.card,className:"github-picker "+u},o.createElement("div",{style:h.triangleShadow}),o.createElement("div",{style:h.triangle}),mo(n,(function(e){return o.createElement(gr,{color:e,key:e,onClick:p,onSwatchHover:i})})))};mr.propTypes={width:C().oneOfType([C().string,C().number]),colors:C().arrayOf(C().string),triangle:C().oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:C().object},mr.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},en(mr);var vr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},br=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.hsl,l=e.direction,s=e.pointer,c=e.styles,d=void 0===c?{}:c,u=e.className,h=void 0===u?"":u,p=(0,a.Ay)(yt({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}},d));return o.createElement("div",{style:p.picker,className:"hue-picker "+h},o.createElement(x,vr({},p.hue,{hsl:i,pointer:s,onChange:function(e){return r({a:1,h:e.h,l:.5,s:1})},direction:l})))};br.propTypes={styles:C().object},br.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,n=(0,a.Ay)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return o.createElement("div",{style:n.picker})},styles:{}},en(br),en((function(e){var t=e.onChange,n=e.hex,r=e.rgb,i=e.styles,l=void 0===i?{}:i,s=e.className,c=void 0===s?"":s,d=(0,a.Ay)(yt({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},l)),u=function(e,n){e.hex?Xt(e.hex)&&t({hex:e.hex,source:"hex"},n):(e.r||e.g||e.b)&&t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},n)};return o.createElement(Ct,{styles:l},o.createElement("div",{style:d.material,className:"material-picker "+c},o.createElement(v,{style:{wrap:d.HEXwrap,input:d.HEXinput,label:d.HEXlabel},label:"hex",value:n,onChange:u}),o.createElement("div",{style:d.split,className:"flexbox-fix"},o.createElement("div",{style:d.third},o.createElement(v,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"r",value:r.r,onChange:u})),o.createElement("div",{style:d.third},o.createElement(v,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"g",value:r.g,onChange:u})),o.createElement("div",{style:d.third},o.createElement(v,{style:{wrap:d.RGBwrap,input:d.RGBinput,label:d.RGBlabel},label:"b",value:r.b,onChange:u})))))}));const yr=function(e){var t=e.onChange,n=e.rgb,r=e.hsv,i=e.hex,l=(0,a.Ay)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),s=function(e,o){e["#"]?Xt(e["#"])&&t({hex:e["#"],source:"hex"},o):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},o):(e.h||e.s||e.v)&&t({h:e.h||r.h,s:e.s||r.s,v:e.v||r.v,source:"hsv"},o)};return o.createElement("div",{style:l.fields},o.createElement(v,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"h",value:Math.round(r.h),onChange:s}),o.createElement(v,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"s",value:Math.round(100*r.s),onChange:s}),o.createElement(v,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"v",value:Math.round(100*r.v),onChange:s}),o.createElement("div",{style:l.divider}),o.createElement(v,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:n.r,onChange:s}),o.createElement(v,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:n.g,onChange:s}),o.createElement(v,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:n.b,onChange:s}),o.createElement("div",{style:l.divider}),o.createElement(v,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"#",value:i.replace("#",""),onChange:s}),o.createElement("div",{style:l.fieldSymbols},o.createElement("div",{style:l.symbol},"Â°"),o.createElement("div",{style:l.symbol},"%"),o.createElement("div",{style:l.symbol},"%")))},xr=function(e){var t=e.hsl,n=(0,a.Ay)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return o.createElement("div",{style:n.picker})},wr=function(){var e=(0,a.Ay)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return o.createElement("div",{style:e.pointer},o.createElement("div",{style:e.left},o.createElement("div",{style:e.leftInside})),o.createElement("div",{style:e.right},o.createElement("div",{style:e.rightInside})))},Cr=function(e){var t=e.onClick,n=e.label,r=e.children,i=e.active,l=(0,a.Ay)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return o.createElement("div",{style:l.button,onClick:t},n||r)},Sr=function(e){var t=e.rgb,n=e.currentColor,r=(0,a.Ay)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return o.createElement("div",null,o.createElement("div",{style:r.label},"new"),o.createElement("div",{style:r.swatches},o.createElement("div",{style:r.new}),o.createElement("div",{style:r.current})),o.createElement("div",{style:r.label},"current"))};var Ar=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),kr=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:e.hex},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ar(t,[{key:"render",value:function(){var e=this.props,t=e.styles,n=void 0===t?{}:t,r=e.className,i=void 0===r?"":r,l=(0,a.Ay)(yt({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},n));return o.createElement("div",{style:l.picker,className:"photoshop-picker "+i},o.createElement("div",{style:l.head},this.props.header),o.createElement("div",{style:l.body,className:"flexbox-fix"},o.createElement("div",{style:l.saturation},o.createElement($t,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:xr,onChange:this.props.onChange})),o.createElement("div",{style:l.hue},o.createElement(x,{direction:"vertical",hsl:this.props.hsl,pointer:wr,onChange:this.props.onChange})),o.createElement("div",{style:l.controls},o.createElement("div",{style:l.top,className:"flexbox-fix"},o.createElement("div",{style:l.previews},o.createElement(Sr,{rgb:this.props.rgb,currentColor:this.state.currentColor})),o.createElement("div",{style:l.actions},o.createElement(Cr,{label:"OK",onClick:this.props.onAccept,active:!0}),o.createElement(Cr,{label:"Cancel",onClick:this.props.onCancel}),o.createElement(yr,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(o.Component);kr.propTypes={header:C().string,styles:C().object},kr.defaultProps={header:"Color Picker",styles:{}},en(kr);const Er=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,i=e.hex,l=e.disableAlpha,s=(0,a.Ay)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:l}),c=function(e,o){e.hex?Xt(e.hex)&&t({hex:e.hex,source:"hex"},o):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},o):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:r.h,s:r.s,l:r.l,a:e.a,source:"rgb"},o))};return o.createElement("div",{style:s.fields,className:"flexbox-fix"},o.createElement("div",{style:s.double},o.createElement(v,{style:{input:s.input,label:s.label},label:"hex",value:i.replace("#",""),onChange:c})),o.createElement("div",{style:s.single},o.createElement(v,{style:{input:s.input,label:s.label},label:"r",value:n.r,onChange:c,dragLabel:"true",dragMax:"255"})),o.createElement("div",{style:s.single},o.createElement(v,{style:{input:s.input,label:s.label},label:"g",value:n.g,onChange:c,dragLabel:"true",dragMax:"255"})),o.createElement("div",{style:s.single},o.createElement(v,{style:{input:s.input,label:s.label},label:"b",value:n.b,onChange:c,dragLabel:"true",dragMax:"255"})),o.createElement("div",{style:s.alpha},o.createElement(v,{style:{input:s.input,label:s.label},label:"a",value:Math.round(100*n.a),onChange:c,dragLabel:"true",dragMax:"100"})))};var _r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Yr=function(e){var t=e.colors,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,l=(0,a.Ay)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),s=function(e,t){r({hex:e,source:"hex"},t)};return o.createElement("div",{style:l.colors,className:"flexbox-fix"},t.map((function(e){var t="string"==typeof e?{color:e}:e,n=""+t.color+(t.title||"");return o.createElement("div",{key:n,style:l.swatchWrap},o.createElement(rn,_r({},t,{style:l.swatch,onClick:s,onHover:i,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};Yr.propTypes={colors:C().arrayOf(C().oneOfType([C().string,C().shape({color:C().string,title:C().string})])).isRequired};const Tr=Yr;var Mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Or=function(e){var t=e.width,n=e.rgb,r=e.hex,i=e.hsv,l=e.hsl,s=e.onChange,d=e.onSwatchHover,u=e.disableAlpha,h=e.presetColors,f=e.renderers,g=e.styles,m=void 0===g?{}:g,v=e.className,b=void 0===v?"":v,y=(0,a.Ay)(yt({default:Mr({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},m),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},m),{disableAlpha:u});return o.createElement("div",{style:y.picker,className:"sketch-picker "+b},o.createElement("div",{style:y.saturation},o.createElement($t,{style:y.Saturation,hsl:l,hsv:i,onChange:s})),o.createElement("div",{style:y.controls,className:"flexbox-fix"},o.createElement("div",{style:y.sliders},o.createElement("div",{style:y.hue},o.createElement(x,{style:y.Hue,hsl:l,onChange:s})),o.createElement("div",{style:y.alpha},o.createElement(p,{style:y.Alpha,rgb:n,hsl:l,renderers:f,onChange:s}))),o.createElement("div",{style:y.color},o.createElement(c,null),o.createElement("div",{style:y.activeColor}))),o.createElement(Er,{rgb:n,hsl:l,hex:r,onChange:s,disableAlpha:u}),o.createElement(Tr,{colors:h,onClick:s,onSwatchHover:d}))};Or.propTypes={disableAlpha:C().bool,width:C().oneOfType([C().string,C().number]),styles:C().object},Or.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const Dr=en(Or),Rr=function(e){var t=e.hsl,n=e.offset,r=e.onClick,i=void 0===r?function(){}:r,l=e.active,s=e.first,c=e.last,d=(0,a.Ay)({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:l,first:s,last:c});return o.createElement("div",{style:d.swatch,onClick:function(e){return i({h:t.h,s:.5,l:n,source:"hsl"},e)}})},Nr=function(e){var t=e.onClick,n=e.hsl,r=(0,a.Ay)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),i=.1;return o.createElement("div",{style:r.swatches},o.createElement("div",{style:r.swatch},o.createElement(Rr,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<i&&Math.abs(n.s-.5)<i,onClick:t,first:!0})),o.createElement("div",{style:r.swatch},o.createElement(Rr,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<i&&Math.abs(n.s-.5)<i,onClick:t})),o.createElement("div",{style:r.swatch},o.createElement(Rr,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<i&&Math.abs(n.s-.5)<i,onClick:t})),o.createElement("div",{style:r.swatch},o.createElement(Rr,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<i&&Math.abs(n.s-.5)<i,onClick:t})),o.createElement("div",{style:r.swatch},o.createElement(Rr,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<i&&Math.abs(n.s-.5)<i,onClick:t,last:!0})),o.createElement("div",{style:r.clear}))};var Ir=function(e){var t=e.hsl,n=e.onChange,r=e.pointer,i=e.styles,l=void 0===i?{}:i,s=e.className,c=void 0===s?"":s,d=(0,a.Ay)(yt({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},l));return o.createElement("div",{style:d.wrap||{},className:"slider-picker "+c},o.createElement("div",{style:d.hue},o.createElement(x,{style:d.Hue,hsl:t,pointer:r,onChange:n})),o.createElement("div",{style:d.swatches},o.createElement(Nr,{hsl:t,onClick:n})))};Ir.propTypes={styles:C().object},Ir.defaultProps={pointer:function(){var e=(0,a.Ay)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return o.createElement("div",{style:e.picker})},styles:{}},en(Ir);var Lr=n(20748);const jr=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,l=e.first,s=e.last,c=e.active,d=(0,a.Ay)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:Qt(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:l,last:s,active:c,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return o.createElement(rn,{color:t,style:d.color,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},o.createElement("div",{style:d.check},o.createElement(Lr.A,null)))},$r=function(e){var t=e.onClick,n=e.onSwatchHover,r=e.group,i=e.active,l=(0,a.Ay)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return o.createElement("div",{style:l.group},mo(r,(function(e,a){return o.createElement(jr,{key:e,color:e,active:e.toLowerCase()===i,first:0===a,last:a===r.length-1,onClick:t,onSwatchHover:n})})))};var Pr=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.onSwatchHover,l=e.colors,s=e.hex,c=e.styles,d=void 0===c?{}:c,u=e.className,h=void 0===u?"":u,p=(0,a.Ay)(yt({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},d)),f=function(e,t){return r({hex:e,source:"hex"},t)};return o.createElement("div",{style:p.picker,className:"swatches-picker "+h},o.createElement(Ct,null,o.createElement("div",{style:p.overflow},o.createElement("div",{style:p.body},mo(l,(function(e){return o.createElement($r,{key:e.toString(),group:e,active:s,onClick:f,onSwatchHover:i})})),o.createElement("div",{style:p.clear})))))};Pr.propTypes={width:C().oneOfType([C().string,C().number]),height:C().oneOfType([C().string,C().number]),colors:C().arrayOf(C().arrayOf(C().string)),styles:C().object},Pr.defaultProps={width:320,height:240,colors:[[So,Co,wo,xo,yo],[Yo,_o,Eo,ko,Ao],[Ro,Do,Oo,Mo,To],[$o,jo,Lo,Io,No],[zo,Ho,Bo,Fo,Po],[Go,Vo,qo,Wo,Uo],[Jo,Zo,Ko,Qo,Xo],[aa,oa,na,ta,ea],[ca,sa,la,ia,ra],["#194D33",pa,ha,ua,da],[ba,va,ma,ga,fa],[Sa,Ca,wa,xa,ya],[Ya,_a,Ea,ka,Aa],[Ra,Da,Oa,Ma,Ta],[$a,ja,La,Ia,Na],[za,Ha,Ba,Fa,Pa],[Ga,Va,qa,Wa,Ua],[Ja,Za,Ka,Qa,Xa],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},en(Pr);var Fr=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,i=e.colors,l=e.width,s=e.triangle,c=e.styles,d=void 0===c?{}:c,u=e.className,h=void 0===u?"":u,p=(0,a.Ay)(yt({default:{card:{width:l,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},d),{"hide-triangle":"hide"===s,"top-left-triangle":"top-left"===s,"top-right-triangle":"top-right"===s}),f=function(e,n){Xt(e)&&t({hex:e,source:"hex"},n)};return o.createElement("div",{style:p.card,className:"twitter-picker "+h},o.createElement("div",{style:p.triangleShadow}),o.createElement("div",{style:p.triangle}),o.createElement("div",{style:p.body},mo(i,(function(e,t){return o.createElement(rn,{key:t,color:e,hex:e,style:p.swatch,onClick:f,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})})),o.createElement("div",{style:p.hash},"#"),o.createElement(v,{label:null,style:{input:p.input},value:r.replace("#",""),onChange:f}),o.createElement("div",{style:p.clear})))};Fr.propTypes={width:C().oneOfType([C().string,C().number]),triangle:C().oneOf(["hide","top-left","top-right"]),colors:C().arrayOf(C().string),styles:C().object},Fr.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},en(Fr);var Br=function(e){var t=(0,a.Ay)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(100*e.hsl.s)+"%, "+Math.round(100*e.hsl.l)+"%)"}}});return o.createElement("div",{style:t.picker})};Br.propTypes={hsl:C().shape({h:C().number,s:C().number,l:C().number,a:C().number})},Br.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};const Hr=Br;var zr=function(e){var t=(0,a.Ay)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return o.createElement("div",{style:t.picker})};zr.propTypes={hsl:C().shape({h:C().number,s:C().number,l:C().number,a:C().number})},zr.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};const Ur=zr,Wr=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,i=e.hex,l=e.hsv,s=function(e,n){if(e.hex)Xt(e.hex)&&t({hex:e.hex,source:"hex"},n);else if(e.rgb){var o=e.rgb.split(",");Kt(e.rgb,"rgb")&&t({r:o[0],g:o[1],b:o[2],a:1,source:"rgb"},n)}else if(e.hsv){var a=e.hsv.split(",");Kt(e.hsv,"hsv")&&(a[2]=a[2].replace("%",""),a[1]=a[1].replace("%",""),a[0]=a[0].replace("Â°",""),1==a[1]?a[1]=.01:1==a[2]&&(a[2]=.01),t({h:Number(a[0]),s:Number(a[1]),v:Number(a[2]),source:"hsv"},n))}else if(e.hsl){var r=e.hsl.split(",");Kt(e.hsl,"hsl")&&(r[2]=r[2].replace("%",""),r[1]=r[1].replace("%",""),r[0]=r[0].replace("Â°",""),1==h[1]?h[1]=.01:1==h[2]&&(h[2]=.01),t({h:Number(r[0]),s:Number(r[1]),v:Number(r[2]),source:"hsl"},n))}},c=(0,a.Ay)({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),d=n.r+", "+n.g+", "+n.b,u=Math.round(r.h)+"Â°, "+Math.round(100*r.s)+"%, "+Math.round(100*r.l)+"%",h=Math.round(l.h)+"Â°, "+Math.round(100*l.s)+"%, "+Math.round(100*l.v)+"%";return o.createElement("div",{style:c.wrap,className:"flexbox-fix"},o.createElement("div",{style:c.fields},o.createElement("div",{style:c.double},o.createElement(v,{style:{input:c.input,label:c.label},label:"hex",value:i,onChange:s})),o.createElement("div",{style:c.column},o.createElement("div",{style:c.single},o.createElement(v,{style:{input:c.input2,label:c.label2},label:"rgb",value:d,onChange:s})),o.createElement("div",{style:c.single},o.createElement(v,{style:{input:c.input2,label:c.label2},label:"hsv",value:h,onChange:s})),o.createElement("div",{style:c.single},o.createElement(v,{style:{input:c.input2,label:c.label2},label:"hsl",value:u,onChange:s})))))};var qr=function(e){var t=e.width,n=e.onChange,r=e.rgb,i=e.hsl,l=e.hsv,s=e.hex,c=e.header,d=e.styles,u=void 0===d?{}:d,h=e.className,p=void 0===h?"":h,f=(0,a.Ay)(yt({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},u));return o.createElement("div",{style:f.picker,className:"google-picker "+p},o.createElement("div",{style:f.head},c),o.createElement("div",{style:f.swatch}),o.createElement("div",{style:f.saturation},o.createElement($t,{hsl:i,hsv:l,pointer:Hr,onChange:n})),o.createElement("div",{style:f.body},o.createElement("div",{style:f.controls,className:"flexbox-fix"},o.createElement("div",{style:f.hue},o.createElement(x,{style:f.Hue,hsl:i,radius:"4px",pointer:Ur,onChange:n}))),o.createElement(Wr,{rgb:r,hsl:i,hex:s,hsv:l,onChange:n})))};qr.propTypes={width:C().oneOfType([C().string,C().number]),styles:C().object,header:C().string},qr.defaultProps={width:652,styles:{},header:"Color picker"},en(qr)},26892:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var o,a=(o=n(33215))&&o.__esModule?o:{default:o},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){return t[e]||{extend:e}}},l=t.autoprefix=function(e){var t={};return(0,a.default)(e,(function(e,n){var o={};(0,a.default)(e,(function(e,t){var n=i[t];n?o=r({},o,n(e)):o[t]=e})),t[n]=o})),t};t.default=l},75268:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=(o=n(96540))&&o.__esModule?o:{default:o};function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=t.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function o(){var n,l,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var c=arguments.length,d=Array(c),u=0;u<c;u++)d[u]=arguments[u];return l=s=i(this,(n=o.__proto__||Object.getPrototypeOf(o)).call.apply(n,[this].concat(d))),s.state={active:!1},s.handleMouseDown=function(){return s.setState({active:!0})},s.handleMouseUp=function(){return s.setState({active:!1})},s.render=function(){return r.default.createElement(t,{onMouseDown:s.handleMouseDown,onMouseUp:s.handleMouseUp},r.default.createElement(e,a({},s.props,s.state)))},i(s,l)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),o}(r.default.Component)};t.default=l},16686:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=(o=n(96540))&&o.__esModule?o:{default:o};function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function o(){var n,l,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var c=arguments.length,d=Array(c),u=0;u<c;u++)d[u]=arguments[u];return l=s=i(this,(n=o.__proto__||Object.getPrototypeOf(o)).call.apply(n,[this].concat(d))),s.state={hover:!1},s.handleMouseOver=function(){return s.setState({hover:!0})},s.handleMouseOut=function(){return s.setState({hover:!1})},s.render=function(){return r.default.createElement(t,{onMouseOver:s.handleMouseOver,onMouseOut:s.handleMouseOut},r.default.createElement(e,a({},s.props,s.state)))},i(s,l)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),o}(r.default.Component)};t.default=l},99265:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var o=l(n(85015)),a=l(n(33215)),r=l(n(11331)),i=l(n(55378));function l(e){return e&&e.__esModule?e:{default:e}}var s=t.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,i.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return n.push(e)})):(0,r.default)(t)?(0,a.default)(t,(function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)})):(0,o.default)(t)&&n.push(t)})),n};t.default=s},58527:(e,t,n)=>{"use strict";t.H8=void 0;var o=c(n(99265)),a=c(n(76203)),r=c(n(26892)),i=c(n(16686)),l=c(n(75268)),s=c(n(62693));function c(e){return e&&e.__esModule?e:{default:e}}i.default,t.H8=i.default,l.default,s.default;t.Ay=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var l=(0,o.default)(n),s=(0,a.default)(e,l);return(0,r.default)(s)}},62693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n={},o=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&o("first-child"),e===t-1&&o("last-child"),(0===e||e%2==0)&&o("even"),1===Math.abs(e%2)&&o("odd"),o("nth-child",e),n}},76203:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var o=i(n(33215)),a=i(n(88055)),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function i(e){return e&&e.__esModule?e:{default:e}}var l=t.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,a.default)(e.default)||{};return t.map((function(t){var a=e[t];return a&&(0,o.default)(a,(function(e,t){n[t]||(n[t]={}),n[t]=r({},n[t],a[t])})),t})),n};t.default=l},70731:e=>{var t={Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",áº¤:"A",áº®:"A",áº²:"A",áº´:"A",áº¶:"A",Ã:"AE",áº¦:"A",áº°:"A",È:"A",áº¢:"A",áº :"A",áº¨:"A",áºª:"A",áº¬:"A",Ã:"C",á¸:"C",Ã:"E",Ã:"E",Ã:"E",Ã:"E",áº¾:"E",á¸:"E",á»:"E",á¸:"E",á¸:"E",È:"E",áºº:"E",áº¼:"E",áº¸:"E",á»:"E",á»:"E",á»:"E",Ã:"I",Ã:"I",Ã:"I",Ã:"I",á¸®:"I",È:"I",á»:"I",á»:"I",Ã:"D",Ã:"N",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",á»:"O",á¹:"O",á¹:"O",È:"O",á»:"O",á»:"O",á»:"O",á»:"O",á»:"O",á»:"O",á»:"O",á» :"O",á»:"O",á»¢:"O",Ã:"U",Ã:"U",Ã:"U",Ã:"U",á»¦:"U",á»¤:"U",á»¬:"U",á»®:"U",á»°:"U",Ã:"Y",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",áº¥:"a",áº¯:"a",áº³:"a",áºµ:"a",áº·:"a",Ã¦:"ae",áº§:"a",áº±:"a",È:"a",áº£:"a",áº¡:"a",áº©:"a",áº«:"a",áº­:"a",Ã§:"c",á¸:"c",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",áº¿:"e",á¸:"e",á»:"e",á¸:"e",á¸:"e",È:"e",áº»:"e",áº½:"e",áº¹:"e",á»:"e",á»:"e",á»:"e",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",á¸¯:"i",È:"i",á»:"i",á»:"i",Ã°:"d",Ã±:"n",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",á»:"o",á¹:"o",á¹:"o",È:"o",á»:"o",á»:"o",á»:"o",á»:"o",á»:"o",á»:"o",á»:"o",á»¡:"o",á»:"o",á»£:"o",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",á»§:"u",á»¥:"u",á»­:"u",á»¯:"u",á»±:"u",Ã½:"y",Ã¿:"y",Ä:"A",Ä:"a",Ä:"A",Ä:"a",Ä:"A",Ä:"a",Ä:"C",Ä:"c",Ä:"C",Ä:"c",Ä:"C",Ä:"c",Ä:"C",Ä:"c",CÌ:"C",cÌ:"c",Ä:"D",Ä:"d",Ä:"D",Ä:"d",Ä:"E",Ä:"e",Ä:"E",Ä:"e",Ä:"E",Ä:"e",Ä:"E",Ä:"e",Ä:"E",Ä:"e",Ä:"G",Ç´:"G",Ä:"g",Çµ:"g",Ä:"G",Ä:"g",Ä :"G",Ä¡:"g",Ä¢:"G",Ä£:"g",Ä¤:"H",Ä¥:"h",Ä¦:"H",Ä§:"h",á¸ª:"H",á¸«:"h",Ä¨:"I",Ä©:"i",Äª:"I",Ä«:"i",Ä¬:"I",Ä­:"i",Ä®:"I",Ä¯:"i",Ä°:"I",Ä±:"i",Ä²:"IJ",Ä³:"ij",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",á¸°:"K",á¸±:"k",KÌ:"K",kÌ:"k",Ä¹:"L",Äº:"l",Ä»:"L",Ä¼:"l",Ä½:"L",Ä¾:"l",Ä¿:"L",Å:"l",Å:"l",Å:"l",á¸¾:"M",á¸¿:"m",MÌ:"M",mÌ:"m",Å:"N",Å:"n",Å:"N",Å:"n",Å:"N",Å:"n",Å:"n",NÌ:"N",nÌ:"n",Å:"O",Å:"o",Å:"O",Å:"o",Å:"O",Å:"o",Å:"OE",Å:"oe",PÌ:"P",pÌ:"p",Å:"R",Å:"r",Å:"R",Å:"r",Å:"R",Å:"r",RÌ:"R",rÌ:"r",È:"R",È:"r",Å:"S",Å:"s",Å:"S",Å:"s",Å:"S",È:"S",È:"s",Å:"s",Å :"S",Å¡:"s",Å¢:"T",Å£:"t",È:"t",È:"T",Å¤:"T",Å¥:"t",Å¦:"T",Å§:"t",TÌ:"T",tÌ:"t",Å¨:"U",Å©:"u",Åª:"U",Å«:"u",Å¬:"U",Å­:"u",Å®:"U",Å¯:"u",Å°:"U",Å±:"u",Å²:"U",Å³:"u",È:"U",È:"u",VÌ:"V",vÌ:"v",Å´:"W",Åµ:"w",áº:"W",áº:"w",XÌ:"X",xÌ:"x",Å¶:"Y",Å·:"y",Å¸:"Y",YÌ:"Y",yÌ:"y",Å¹:"Z",Åº:"z",Å»:"Z",Å¼:"z",Å½:"Z",Å¾:"z",Å¿:"s",Æ:"f",Æ :"O",Æ¡:"o",Æ¯:"U",Æ°:"u",Ç:"A",Ç:"a",Ç:"I",Ç:"i",Ç:"O",Ç:"o",Ç:"U",Ç:"u",Ç:"U",Ç:"u",Ç:"U",Ç:"u",Ç:"U",Ç:"u",Ç:"U",Ç:"u",á»¨:"U",á»©:"u",á¹¸:"U",á¹¹:"u",Çº:"A",Ç»:"a",Ç¼:"AE",Ç½:"ae",Ç¾:"O",Ç¿:"o",Ã:"TH",Ã¾:"th",á¹:"P",á¹:"p",á¹¤:"S",á¹¥:"s",XÌ:"X",xÌ:"x",Ð:"Ð",Ñ:"Ð³",Ð:"Ð",Ñ:"Ðº",AÌ:"A",aÌ:"a",EÌ:"E",eÌ:"e",IÌ:"I",iÌ:"i",Ç¸:"N",Ç¹:"n",á»:"O",á»:"o",á¹:"O",á¹:"o",á»ª:"U",á»«:"u",áº:"W",áº:"w",á»²:"Y",á»³:"y",È:"A",È:"a",È:"E",È:"e",È:"I",È:"i",È:"O",È:"o",È:"R",È:"r",È:"U",È:"u",BÌ:"B",bÌ:"b",ÄÌ£:"C",ÄÌ£:"c",ÃÌ:"E",ÃªÌ:"e",FÌ:"F",fÌ:"f",Ç¦:"G",Ç§:"g",È:"H",È:"h",JÌ:"J",Ç°:"j",Ç¨:"K",Ç©:"k",MÌ:"M",mÌ:"m",PÌ:"P",pÌ:"p",QÌ:"Q",qÌ:"q",ÅÌ©:"R",ÅÌ©:"r",á¹¦:"S",á¹§:"s",VÌ:"V",vÌ:"v",WÌ:"W",wÌ:"w",XÌ:"X",xÌ:"x",YÌ:"Y",yÌ:"y",AÌ§:"A",aÌ§:"a",BÌ§:"B",bÌ§:"b",á¸:"D",á¸:"d",È¨:"E",È©:"e",ÆÌ§:"E",ÉÌ§:"e",á¸¨:"H",á¸©:"h",IÌ§:"I",iÌ§:"i",ÆÌ§:"I",É¨Ì§:"i",MÌ§:"M",mÌ§:"m",OÌ§:"O",oÌ§:"o",QÌ§:"Q",qÌ§:"q",UÌ§:"U",uÌ§:"u",XÌ§:"X",xÌ§:"x",ZÌ§:"Z",zÌ§:"z",Ð¹:"Ð¸",Ð:"Ð",Ñ:"Ðµ",Ð:"Ð"},n=Object.keys(t).join("|"),o=new RegExp(n,"g"),a=new RegExp(n,"");function r(e){return t[e]}var i=function(e){return e.replace(o,r)};e.exports=i,e.exports.has=function(e){return!!e.match(a)},e.exports.remove=i},4454:(e,t,n)=>{"use strict";n.d(t,{D:()=>O});var o=n(85015),a=n.n(o),r=n(62193),i=n.n(r),l=n(96540),s=n(78697),c=n(15595),d=n(90868),u=n(85861),h=n(46920),p=n(90017),f=n(35742),g=n(95579),m=n(61225),v=n(95093),b=n.n(v),y=n(58561),x=n.n(y),w=n(74680),C=n(95272),S=n(39829),A=n(85183),k=n(60237),E=n(27023),_=n(17437);const Y=p.A.div`
  .sdm-body {
    margin: 0 8px;
  }
  .sdm-input {
    margin-left: 45px;
    width: 401px;
  }
  .sdm-autocomplete {
    width: 401px;
    align-self: center;
  }
  .sdm-radio {
    display: block;
    height: 30px;
    margin: 10px 0px;
    line-height: 30px;
  }
  .sdm-overwrite-msg {
    margin: 7px;
  }
  .sdm-overwrite-container {
    flex: 1 1 auto;
    display: flex;
  }
`,T=async(e,t,n,o,a,r)=>{const i=`api/v1/dataset/${t}?override_columns=${r}`,l=JSON.stringify({sql:n,columns:o,owners:a,database_id:e});return(await f.A.put({endpoint:i,headers:{"Content-Type":"application/json"},body:l})).json.result},M=(0,g.t)("Untitled Dataset"),O=({visible:e,onHide:t,buttonTextOnSave:n,buttonTextOnOverwrite:o,modalDescription:r,datasource:p,openWindow:v=!0,formData:y={}})=>{const O=(0,m.d4)((e=>{var t,n;return(null==(t=e.common)||null==(n=t.conf)?void 0:n.DEFAULT_VIZ_TYPE)||"table"})),D=()=>`${(null==p?void 0:p.name)||M} ${b()().format("L HH:mm:ss")}`,[R,N]=(0,l.useState)(D()),[I,L]=(0,l.useState)(S.lr.SaveNew),[j,$]=(0,l.useState)(!1),[P,F]=(0,l.useState)({}),[B,H]=(0,l.useState)(void 0),[z,U]=(0,l.useState)(!1),W=(0,m.d4)((e=>e.user)),q=(0,m.wA)(),V=e=>{v?window.open(e,"_blank","noreferrer"):window.location.href=e},G={...S.V0,...y||{}},X=(0,l.useCallback)((async(e="")=>{const{userId:t}=W,n=x().encode({filters:[{col:"table_name",opr:"ct",value:e},{col:"owners",opr:"rel_m_m",value:t}],order_column:"changed_on_delta_humanized",order_direction:"desc"});return f.A.get({endpoint:`/api/v1/dataset/?q=${n}`}).then((e=>({data:e.json.result.map((e=>({value:e.table_name,label:e.table_name,datasetid:e.id,owners:e.owners}))),totalCount:e.json.count})))}),[W]),Q=I===S.lr.SaveNew&&0===R.length||I===S.lr.OverwriteDataset&&i()(B);return(0,_.Y)(u.A,{show:e,title:(0,g.t)("Save or Overwrite Dataset"),onHide:t,footer:(0,_.Y)(l.Fragment,null,I===S.lr.SaveNew&&(0,_.Y)(h.A,{disabled:Q,buttonStyle:"primary",onClick:()=>{var e,n;U(!0);const o=null!=(e=null==p?void 0:p.columns)?e:[];let r;if(a()(null==p?void 0:p.templateParams)){const e=JSON.parse(p.templateParams);e._filters&&(delete e._filters,r=JSON.stringify(e))}q((0,w.createDatasource)({sql:p.sql,dbId:p.dbId||(null==p||null==(n=p.database)?void 0:n.id),schema:null==p?void 0:p.schema,templateParams:r,datasourceName:R})).then((e=>(0,k.T3)(e.id,"table",{...G,datasource:`${e.id}__table`,..."table"===O&&{all_columns:o.map((e=>e.column_name))}}))).then((e=>{U(!1);const n=(0,A.eX)(null,{[E.vX.formDataKey.name]:e});V(n),N(D()),t()})).catch((()=>{U(!1),(0,C.iB)((0,g.t)("An error occurred saving dataset"))}))},loading:z},n),I===S.lr.OverwriteDataset&&(0,_.Y)(l.Fragment,null,j&&(0,_.Y)(h.A,{onClick:()=>{$(!1),F({})}},(0,g.t)("Back")),(0,_.Y)(h.A,{className:"md",buttonStyle:"primary",onClick:async()=>{var e,n,o;if(!j)return void $(!0);U(!0);const[,a]=await Promise.all([T(null==p?void 0:p.dbId,null==P?void 0:P.datasetid,null==p?void 0:p.sql,null==p||null==(e=p.columns)?void 0:e.map((e=>({column_name:e.column_name,type:e.type,is_dttm:e.is_dttm}))),null==P||null==(n=P.owners)?void 0:n.map((e=>e.id)),!0),(0,k.T3)(P.datasetid,"table",{...G,datasource:`${P.datasetid}__table`,..."table"===O&&{all_columns:null==p||null==(o=p.columns)?void 0:o.map((e=>e.column_name))}})]);U(!1);const r=(0,A.eX)(null,{[E.vX.formDataKey.name]:a});V(r),$(!1),N(D()),t()},disabled:Q,loading:z},o)))},(0,_.Y)(Y,null,!j&&(0,_.Y)("div",{className:"sdm-body"},r&&(0,_.Y)("div",{className:"sdm-prompt"},r),(0,_.Y)(s.s.Group,{onChange:e=>{L(Number(e.target.value))},value:I},(0,_.Y)(s.s,{className:"sdm-radio",value:1},(0,g.t)("Save as new"),(0,_.Y)(d.pd,{className:"sdm-input",value:R,onChange:e=>{N(e.target.value)},disabled:1!==I})),(0,_.Y)("div",{className:"sdm-overwrite-container"},(0,_.Y)(s.s,{className:"sdm-radio",value:2},(0,g.t)("Overwrite existing")),(0,_.Y)("div",{className:"sdm-autocomplete"},(0,_.Y)(c.DW,{allowClear:!0,showSearch:!0,placeholder:(0,g.t)("Select or type dataset name"),ariaLabel:(0,g.t)("Existing dataset"),onChange:(e,t)=>{F(t),H(e)},options:e=>X(e),value:B,filterOption:(e,t)=>t.value.toLowerCase().includes(e.toLowerCase()),disabled:2!==I,getPopupContainer:()=>document.body}))))),j&&(0,_.Y)("div",{className:"sdm-overwrite-msg"},(0,g.t)("Are you sure you want to overwrite this dataset?"))))}},64527:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var o=n(96540),a=n(90017),r=n(2738),i=n(49501),l=n(17437);const s=(0,a.A)(r.A)`
  text-align: left;
  font-family: ${({theme:e})=>e.typography.families.monospace};
`;function c({endTime:e,isRunning:t,startTime:n,status:a="success"}){const[r,c]=(0,o.useState)("00:00:00.00"),d=(0,o.useRef)();return(0,o.useEffect)((()=>{const o=()=>{d.current&&(clearInterval(d.current),d.current=void 0)};return t&&(d.current=setInterval((()=>{if(n){const a=e||(0,i.tB)();n<a&&c((0,i.RW)(n,a)),t||o()}}),30)),o}),[e,t,n]),(0,l.Y)(s,{type:a,role:"timer"},r)}},8692:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>nc});var o=n(96540),a=n(61225),r=n(56347),i=n(13270),l=n(93505),s=n(95579),c=n(44140),d=n(17444),u=n(95272),h=n(32132),p=n(27023),f=n(94146),g=n(76295),m=n(68921);const v={form_data:{name:"form_data",parser:e=>{const t=JSON.parse(e);if(t.datasource){const[e,n]=t.datasource.split("__");t.datasource_id=e,t.datasource_type=n,delete t.datasource}return t}},slice_id:{name:"slice_id"},datasource_id:{name:"datasource_id"},datasource_type:{name:"datasource_type"},datasource:{name:"datasource",parser:e=>{const[t,n]=e.split("__");return{datasource_id:t,datasource_type:n}}},form_data_key:{name:"form_data_key"},permalink_key:{name:"permalink_key"},viz_type:{name:"viz_type"},dashboard_id:{name:"dashboard_id"}},b={p:"permalink_key",table:"datasource_id"},y=e=>{const t=new URLSearchParams(e);return Array.from(t.keys()).reduce(((e,n)=>{var o;const a=t.get(n);if(null===a)return e;let r;try{var i,l,s;r=null!=(i=null==(l=(s=v[n]).parser)?void 0:l.call(s,a))?i:a}catch{r=a}if("object"==typeof r)return{...e,...r};const c=(null==(o=v[n])?void 0:o.name)||n;return{...e,[c]:r}}),{})},x=(e=window.location)=>{return new URLSearchParams(Object.entries({...y(e.search),...(t=e.pathname,Object.keys(b).reduce(((e,n)=>{const o=new RegExp(`/(${n})/(\\w+)`),a=t.match(o);return null!=a&&a[2]?{...e,[b[n]]:a[2]}:e}),{}))}).map((e=>e.join("="))).join("&"));var t};var w=n(91522),C=n(97032),S=n(44383),A=n.n(S),k=n(90179),E=n.n(k),_=n(38221),Y=n.n(_),T=n(5556),M=n.n(T),O=n(82960),D=n(90017),R=n(17437),N=n(5362),I=n(83505),L=n(96453),j=n(93211),$=n(45905),P=n(33149),F=n(36053),B=n(19129),H=n(12249),z=n(62221),U=n(95483),W=n(35839),q=n(7735),V=n(35700),G=n(46942),X=n.n(G),Q=n(2514),K=n(34975),Z=n(4881),J=n(25062),ee=n(60237),te=n(64349),ne=n(85183),oe=n(17596),ae=n(60130),re=n(84933),ie=n(48422),le=n(5261),se=n(114),ce=n(27366),de=n(80145),ue=n(5795),he=n(62952),pe=n(35742),fe=n(62703),ge=n(25946),me=n(4454),ve=n(9066),be=n(21357),ye=n(8786),xe=n(26761),we=n(2738),Ce=n(95093),Se=n.n(Ce);const Ae=({cachedTimestamp:e})=>{const t=e?(0,R.Y)("span",null,(0,s.t)("Loaded data cached"),(0,R.Y)("b",null," ",Se().utc(e).fromNow())):(0,s.t)("Loaded from cache");return(0,R.Y)("span",{"data-test":"tooltip-content"},t,". ",(0,s.t)("Click to force-refresh"))},ke=({className:e,onClick:t,cachedTimestamp:n})=>{const[a,r]=(0,o.useState)(!1),i=a?"primary":"default";return(0,R.Y)(B.m,{title:(0,R.Y)(Ae,{cachedTimestamp:n}),id:"cache-desc-tooltip"},(0,R.Y)(we.A,{className:`${e}`,type:i,onClick:t,onMouseOver:()=>r(!0),onMouseOut:()=>r(!1)},(0,s.t)("Cached")," ",(0,R.Y)("i",{className:"fa fa-refresh"})))};var Ee=n(64527);const _e={failed:"danger",loading:"warning",success:"success"},Ye=(0,o.forwardRef)((({queriesResponse:e,chartStatus:t,chartUpdateStartTime:n,chartUpdateEndTime:o,refreshCachedQuery:a,rowLimit:r},i)=>{const l="loading"===t,s=null==e?void 0:e[0];return(0,R.Y)("div",{ref:i},(0,R.Y)("div",{css:e=>R.AH`
            display: flex;
            justify-content: flex-end;
            padding-bottom: ${4*e.gridUnit}px;
            & .ant-tag:last-of-type {
              margin: 0;
            }
          `},!l&&s&&(0,R.Y)(xe.A,{rowcount:Number(s.sql_rowcount)||0,limit:Number(r)||0}),!l&&(null==s?void 0:s.is_cached)&&(0,R.Y)(ke,{onClick:a,cachedTimestamp:s.cached_dttm}),(0,R.Y)(Ee.A,{startTime:n,endTime:o,isRunning:l,status:_e[t]})))}));var Te=n(46920);const Me=D.A.div`
  ${({theme:e})=>R.AH`
    margin: ${4*e.gridUnit}px;
    padding: ${4*e.gridUnit}px;

    border: 1px solid ${e.colors.info.base};
    background-color: ${e.colors.info.light2};
    border-radius: 2px;

    color: ${e.colors.info.dark2};
    font-size: ${e.typography.sizes.m}px;

    p {
      margin-bottom: ${e.gridUnit}px;
    }

    & a,
    & span[role='button'] {
      color: inherit;
      text-decoration: underline;
      &:hover {
        color: ${e.colors.info.dark1};
      }
    }

    &.alert-type-warning {
      border-color: ${e.colors.alert.base};
      background-color: ${e.colors.alert.light2};

      p {
        color: ${e.colors.alert.dark2};
      }

      & a:hover,
      & span[role='button']:hover {
        color: ${e.colors.alert.dark1};
      }
    }
  `}
`,Oe=D.A.div`
  display: flex;
  justify-content: flex-end;
  button {
    line-height: 1;
  }
`,De=D.A.p`
  font-weight: ${({theme:e})=>e.typography.weights.bold};
`,Re={warning:"warning",danger:"danger"},Ne=(0,o.forwardRef)((({title:e,bodyText:t,primaryButtonAction:n,secondaryButtonAction:o,primaryButtonText:a,secondaryButtonText:r,type:i="info",className:l=""},s)=>(0,R.Y)(Me,{className:`alert-type-${i} ${l}`,ref:s},(0,R.Y)(De,null,e),(0,R.Y)("p",null,t),a&&n&&(0,R.Y)(Oe,null,o&&r&&(0,R.Y)(Te.A,{buttonStyle:"link",buttonSize:"small",onClick:o},r),(0,R.Y)(Te.A,{buttonStyle:i in Re?Re[i]:"primary",buttonSize:"small",onClick:n},a)))));var Ie=n(98250);const Le={actions:M().object.isRequired,onQuery:M().func,can_overwrite:M().bool.isRequired,can_download:M().bool.isRequired,datasource:M().object,dashboardId:M().number,column_formats:M().object,containerId:M().string.isRequired,isStarred:M().bool.isRequired,slice:M().object,sliceName:M().string,table_name:M().string,vizType:M().string.isRequired,form_data:M().object,ownState:M().object,standalone:M().bool,force:M().bool,timeout:M().number,chartIsStale:M().bool,chart:Z.tb,errorMessage:M().node,triggerRender:M().bool},je=1.25,$e=[100,0],Pe=[300,65],Fe=D.A.div`
  display: flex;
  flex-direction: column;
  align-items: stretch;
  align-content: stretch;
  overflow: auto;
  box-shadow: none;
  height: 100%;

  & > div {
    height: 100%;
  }

  .gutter {
    border-top: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    border-bottom: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    width: ${({theme:e})=>9*e.gridUnit}px;
    margin: ${({theme:e})=>e.gridUnit*je}px auto;
  }

  .gutter.gutter-vertical {
    display: ${({showSplite:e})=>e?"block":"none"};
    cursor: row-resize;
  }

  .ant-collapse {
    .ant-tabs {
      height: 100%;
      .ant-tabs-nav {
        padding-left: ${({theme:e})=>5*e.gridUnit}px;
        margin: 0;
      }
      .ant-tabs-content-holder {
        overflow: hidden;
        .ant-tabs-content {
          height: 100%;
        }
      }
    }
  }
`;var Be={name:"1wbll7q",styles:"text-decoration:underline"};const He=({chart:e,slice:t,vizType:n,ownState:a,triggerRender:r,force:i,datasource:l,errorMessage:c,form_data:d,onQuery:u,actions:h,timeout:p,standalone:f,chartIsStale:g,chartAlert:m})=>{var v;const b=(0,L.DP)(),y=b.gridUnit*je,x=b.gridUnit*je,{ref:w,observerRef:C,width:S,height:A}=function(){const e=(0,o.useRef)(),[{width:t,height:n},a]=(0,o.useState)({}),r=(0,o.useCallback)((()=>{if(e.current){const{width:t,height:n}=(null==e.current.getBoundingClientRect?void 0:e.current.getBoundingClientRect())||{};a({width:t,height:n})}}),[]),{ref:i}=(0,Ie.uZ)({refreshMode:"debounce",refreshRate:300,onResize:r});return{ref:e,observerRef:i,width:t,height:n}}(),[k,E]=(0,o.useState)((0,ce.G7)(ce.TO.DatapanelClosedByDefault)?$e:(0,z.Gq)(z.Hh.ChartSplitSizes,$e)),[_,Y]=(0,o.useState)(!(0,ce.G7)(ce.TO.DatapanelClosedByDefault)&&(0,z.Gq)(z.Hh.IsDatapanelOpen,!1)),[T,M]=(0,o.useState)(!1),O=(0,de.A)(),{useLegacyApi:D}=null!=(v=O.get(n))?v:{},N=D&&l.type!==ue.cT.Table,I=!m&&g&&!N&&"failed"!==e.chartStatus&&(0,he.A)(e.queriesResponse).length>0,j=(0,o.useCallback)((async function(){if(t&&null===t.query_context){const e=(0,ne.sx)({formData:t.form_data,force:i,resultFormat:"json",resultType:"full",setDataMask:null,ownState:null});await pe.A.put({endpoint:`/api/v1/chart/${t.slice_id}`,headers:{"Content-Type":"application/json"},body:JSON.stringify({query_context:JSON.stringify(e),query_context_generation:!0})})}}),[t]);(0,o.useEffect)((()=>{j()}),[j]),(0,o.useEffect)((()=>{(0,z.SO)(z.Hh.ChartSplitSizes,k)}),[k]);const $=(0,o.useCallback)((e=>{E(e)}),[]),P=(0,o.useCallback)((()=>{h.setForceQuery(!0),h.postChartFormData(d,!0,p,e.id,void 0,a),h.updateQueryFormData(d,e.id)}),[h,e.id,d,a,p]),F=(0,o.useCallback)((e=>{let t;t=e?[60,40]:$e,E(t),Y(e)}),[]),B=(0,o.useCallback)((()=>(0,R.Y)("div",{css:R.AH`
          min-height: 0;
          flex: 1;
          overflow: visible;
        `,ref:w},S&&A&&(0,R.Y)(fe.A,{width:Math.floor(S),height:A,ownState:a,annotationData:e.annotationData,chartAlert:e.chartAlert,chartStackTrace:e.chartStackTrace,chartId:e.id,chartStatus:e.chartStatus,triggerRender:r,force:i,datasource:l,errorMessage:c,formData:d,latestQueryFormData:e.latestQueryFormData,onQuery:u,queriesResponse:e.queriesResponse,chartIsStale:g,setControlValue:h.setControlValue,timeout:p,triggerQuery:e.triggerQuery,vizType:n}))),[h.setControlValue,e.annotationData,e.chartAlert,e.chartStackTrace,e.chartStatus,e.id,e.latestQueryFormData,e.queriesResponse,e.triggerQuery,g,A,w,S,l,c,i,d,u,a,p,r,n]),H=(0,o.useMemo)((()=>(0,R.Y)("div",{className:"panel-body",css:R.AH`
          display: flex;
          flex-direction: column;
        `,ref:C},N&&(0,R.Y)(ge.A,{message:(0,s.t)("Chart type requires a dataset"),type:"error",css:e=>R.AH`
              margin: 0 0 ${4*e.gridUnit}px 0;
            `,description:(0,R.Y)(o.Fragment,null,(0,s.t)("This chart type is not supported when using an unsaved query as a chart source. "),(0,R.Y)("span",{role:"button",tabIndex:0,onClick:()=>M(!0),css:Be},(0,s.t)("Create a dataset")),(0,s.t)(" to visualize your data."))}),I&&(0,R.Y)(Ne,{title:c?(0,s.t)("Required control values have been removed"):(0,s.t)("Your chart is not up to date"),bodyText:c?(0,be.w)(!1):(0,R.Y)("span",null,(0,s.t)('You updated the values in the control panel, but the chart was not updated automatically. Run the query by clicking on the "Update chart" button or')," ",(0,R.Y)("span",{role:"button",tabIndex:0,onClick:u},(0,s.t)("click here")),"."),type:"warning",css:e=>R.AH`
              margin: 0 0 ${4*e.gridUnit}px 0;
            `}),(0,R.Y)(Ye,{queriesResponse:e.queriesResponse,chartStatus:e.chartStatus,chartUpdateStartTime:e.chartUpdateStartTime,chartUpdateEndTime:e.chartUpdateEndTime,refreshCachedQuery:P,rowLimit:null==d?void 0:d.row_limit}),B())),[C,I,c,u,e.queriesResponse,e.chartStatus,e.chartUpdateStartTime,e.chartUpdateEndTime,P,null==d?void 0:d.row_limit,B]),U=(0,o.useMemo)((()=>B()),[B]),[W,q]=(0,o.useState)(e.latestQueryFormData);(0,o.useEffect)((()=>{r||q(e.latestQueryFormData)}),[e.latestQueryFormData]);const V=(0,o.useCallback)(((e,t,n)=>({[e]:`calc(${t}% - ${n+y}px)`})),[y]);if(f){const e="background-transparent";return document.body.className.split(" ").includes(e)||(document.body.className+=` ${e}`),(0,R.Y)("div",{id:"app","data-test":"standalone-app",ref:C},U)}return(0,R.Y)(Fe,{className:"panel panel-default chart-container",showSplite:_},(0,R.Y)(se.A,{sizes:k,minSize:Pe,direction:"vertical",gutterSize:x,onDragEnd:$,elementStyle:V,expandToMin:!0},H,(0,R.Y)(ye._h,{ownState:a,queryFormData:W,datasource:l,queryForce:i,onCollapseChange:F,chartStatus:e.chartStatus,errorMessage:c,actions:h})),T&&(0,R.Y)(me.D,{visible:T,onHide:()=>M(!1),buttonTextOnSave:(0,s.t)("Save"),buttonTextOnOverwrite:(0,s.t)("Overwrite"),datasource:(0,ve.l)(l),openWindow:!1,formData:d}))};He.propTypes=Le;const ze=He;var Ue=n(20249),We=n.n(Ue),qe=n(96627),Ve=n(18253),Ge=n(68514),Xe=n(67984),Qe=n(52720),Ke=n(84074),Ze=n(48327),Je=n(85861);function et({controls:e}){const t=(0,o.useCallback)((e=>{const t=e&&"shouldStash"in e.props?e.props.children.props:null==e?void 0:e.props;return"HiddenControl"===(null==t?void 0:t.type)||!1===(null==t?void 0:t.isVisible)}),[]),n=e.filter((e=>!t(e))),a=n.length?12/n.length:12;return(0,R.Y)("div",{className:"row"},e.map(((e,n)=>(0,R.Y)("div",{"data-test":"control-item",className:`col-lg-${a} col-xs-12`,style:{display:t(e)?"none":"block"},key:n},e))))}var tt=n(2404),nt=n.n(tt),ot=n(49544),at=n(81163),rt=n(15595),it=n(28176),lt=n(66537),st=n(26881);function ct(e){const{selectable:t,children:n,...o}=e,a=(0,L.DP)(),r={"&.ant-list-item":{padding:`${a.gridUnit+2}px ${3*a.gridUnit}px`,":first-of-type":{borderTopLeftRadius:a.gridUnit,borderTopRightRadius:a.gridUnit},":last-of-type":{borderBottomLeftRadius:a.gridUnit,borderBottomRightRadius:a.gridUnit}}};return t&&(r["&:hover"]={cursor:"pointer",backgroundColor:a.colors.grayscale.light4}),(0,R.Y)(rt.B8.Item,(0,C.A)({},o,{css:r}),n)}var dt=n(22533);const ut=(0,st.A)((()=>n.e(5373).then(n.bind(n,65373))),(()=>(0,R.Y)("div",{style:{width:450,height:368}}))),ht={colorScheme:M().string.isRequired,annotationError:M().object,annotationQuery:M().object,vizType:M().string,validationErrors:M().array,name:M().string.isRequired,actions:M().object,value:M().arrayOf(M().object),onChange:M().func,refreshAnnotationData:M().func};class pt extends o.PureComponent{constructor(e){super(e),this.state={popoverVisible:{},addedAnnotationIndex:null},this.addAnnotationLayer=this.addAnnotationLayer.bind(this),this.removeAnnotationLayer=this.removeAnnotationLayer.bind(this),this.handleVisibleChange=this.handleVisibleChange.bind(this)}componentDidMount(){ut.preload()}UNSAFE_componentWillReceiveProps(e){const{name:t,annotationError:n,validationErrors:o,value:a}=e;Object.keys(n).length&&!o.length&&this.props.actions.setControlValue(t,a,Object.keys(n)),!Object.keys(n).length&&o.length&&this.props.actions.setControlValue(t,a,[])}addAnnotationLayer(e,t){let n=this.props.value;n.includes(e)?n=n.map((n=>n===e?t:n)):(n=[...n,t],this.setState({addedAnnotationIndex:n.length-1})),this.props.refreshAnnotationData({annotation:t,force:!0}),this.props.onChange(n)}handleVisibleChange(e,t){this.setState((n=>({popoverVisible:{...n.popoverVisible,[t]:e}})))}removeAnnotationLayer(e){const t=this.props.value.filter((t=>t!==e)),n=(0,dt.v)();n&&n.style.setProperty("overflow-y","auto","important"),this.props.onChange(t)}renderPopover(e,t,n){const o=(null==t?void 0:t.name)||"_new";return(0,R.Y)("div",{id:`annotation-pop-${o}`,"data-test":"popover-content"},(0,R.Y)(ut,(0,C.A)({},t,{error:n,colorScheme:this.props.colorScheme,vizType:this.props.vizType,addAnnotationLayer:e=>this.addAnnotationLayer(t,e),removeAnnotationLayer:()=>this.removeAnnotationLayer(t),close:()=>{this.handleVisibleChange(!1,e),this.setState({addedAnnotationIndex:null})}})))}renderInfo(e){const{annotationError:t,annotationQuery:n,theme:o}=this.props;return n[e.name]?(0,R.Y)("i",{className:"fa fa-refresh",style:{color:o.colors.primary.base},"aria-hidden":!0}):t[e.name]?(0,R.Y)(lt.W,{label:"validation-errors",bsStyle:"danger",tooltip:t[e.name]}):e.show?"":(0,R.Y)("span",{style:{color:o.colors.error.base}}," Hidden ")}render(){const{addedAnnotationIndex:e}=this.state,t=this.props.value[e],n=this.props.value.map(((e,t)=>(0,R.Y)(dt.A,{key:t,trigger:"click",title:(0,s.t)("Edit annotation layer"),css:e=>({"&:hover":{cursor:"pointer",backgroundColor:e.colors.grayscale.light4}}),content:this.renderPopover(t,e,this.props.annotationError[e.name]),visible:this.state.popoverVisible[t],onVisibleChange:e=>this.handleVisibleChange(e,t)},(0,R.Y)(ct,{selectable:!0},(0,R.Y)("span",null,e.name),(0,R.Y)("span",{style:{float:"right"}},this.renderInfo(e)))))),o="add";return(0,R.Y)("div",null,(0,R.Y)(rt.B8,{bordered:!0,css:e=>({borderRadius:e.gridUnit})},n,(0,R.Y)(dt.A,{trigger:"click",content:this.renderPopover(o,t),title:(0,s.t)("Add annotation layer"),visible:this.state.popoverVisible[o],destroyTooltipOnHide:!0,onVisibleChange:e=>this.handleVisibleChange(e,o)},(0,R.Y)(ct,{selectable:!0},(0,R.Y)("i",{"data-test":"add-annotation-layer-button",className:"fa fa-plus"})," ","Â  ",(0,s.t)("Add annotation layer")))))}}pt.propTypes=ht,pt.defaultProps={vizType:"",value:[],annotationError:{},annotationQuery:{},onChange:()=>{}};const ft=(0,it.b)(pt),gt=(0,a.Ng)((function({charts:e,explore:t}){var n,o;const a=e[(0,ne.kD)(t)]||e[0]||{};return{colorScheme:null==(n=t.controls)||null==(o=n.color_scheme)?void 0:o.value,annotationError:a.annotationError,annotationQuery:a.annotationQuery,vizType:t.controls.viz_type.value}}),(function(e){return{refreshAnnotationData:t=>e((0,Q.runAnnotationQuery)(t))}}))(ft);var mt=n(90868),vt=n(50317);const bt=D.A.div`
  display: flex;
`,yt=(0,D.A)(mt.YI)`
  flex: 1;
  margin-right: ${({theme:e})=>e.gridUnit}px;
`,xt=(0,D.A)(mt.YI)`
  flex: 1;
  margin-left: ${({theme:e})=>e.gridUnit}px;
`,wt=e=>null===e||Number.isNaN(Number(e))?null:Number(e);function Ct({onChange:e=(()=>{}),value:t=[null,null],...n}){const[a,r]=(0,o.useState)([wt(t[0]),wt(t[1])]),i=t[0],l=t[1],c=(0,o.useRef)(Y()(e,300)).current,d=e=>{r(e),c([void 0===e[0]?null:e[0],void 0===e[1]?null:e[1]])};return(0,o.useEffect)((()=>{r([wt(i),wt(l)])}),[i,l]),(0,R.Y)("div",null,(0,R.Y)(vt.A,n),(0,R.Y)(bt,null,(0,R.Y)(yt,{"data-test":"min-bound",placeholder:(0,s.t)("Min"),onChange:e=>{d([wt(e),a[1]])},value:null===a[0]?void 0:a[0]}),(0,R.Y)(xt,{"data-test":"max-bound",placeholder:(0,s.t)("Max"),onChange:e=>{d([a[0],wt(e)])},value:null===a[1]?void 0:a[1]})))}var St=n(37648),At=n(65824),kt=n.n(At),Et=n(58168),_t=n(5544),Yt=n(30201),Tt=n(23029),Mt=n(92901),Ot=n(56822),Dt=n(53954),Rt=n(85501),Nt=n(9417),It=n(64467),Lt=n(40961),jt=n(20311),$t=n.n(jt),Pt=n(60436),Ft=function(){function e(){(0,Tt.A)(this,e),(0,It.A)(this,"refs",{})}return(0,Mt.A)(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var n=this.getIndex(e,t);-1!==n&&this.refs[e].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find((function(t){return t.node.sortableInfo.index==e.active.index}))}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(Bt)}}]),e}();function Bt(e,t){return e.node.sortableInfo.index-t.node.sortableInfo.index}function Ht(e,t){return Object.keys(e).reduce((function(n,o){return-1===t.indexOf(o)&&(n[o]=e[o]),n}),{})}var zt={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},Ut=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return"ms"===t?"ms":t&&t.length?t[0].toUpperCase()+t.substr(1):""}();function Wt(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}function qt(e,t){e.style["".concat(Ut,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function Vt(e,t){e.style["".concat(Ut,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function Gt(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function Xt(e,t,n){return Math.max(e,Math.min(n,t))}function Qt(e){return"px"===e.substr(-2)?parseFloat(e):0}function Kt(e,t){var n=t.displayName||t.name;return n?"".concat(e,"(").concat(n,")"):e}function Zt(e,t){var n=e.getBoundingClientRect();return{top:n.top+t.top,left:n.left+t.left}}function Jt(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function en(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(e){var o={left:n.left+e.offsetLeft,top:n.top+e.offsetTop};return e.parentNode===t?o:en(e.parentNode,t,o)}}function tn(e){var t=e.lockOffset,n=e.width,o=e.height,a=t,r=t,i="px";if("string"==typeof t){var l=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);$t()(null!==l,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),a=parseFloat(t),r=parseFloat(t),i=l[1]}return $t()(isFinite(a)&&isFinite(r),"lockOffset value should be a finite. Given %s",t),"%"===i&&(a=a*n/100,r=r*o/100),{x:a,y:r}}function nn(e){return e instanceof HTMLElement?function(e){var t=window.getComputedStyle(e),n=/(auto|scroll)/;return["overflow","overflowX","overflowY"].find((function(e){return n.test(t[e])}))}(e)?e:nn(e.parentNode):null}var on={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function an(e){return null!=e.sortableHandle}var rn=function(){function e(t,n){(0,Tt.A)(this,e),this.container=t,this.onScrollCallback=n}return(0,Mt.A)(e,[{key:"clear",value:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(e){var t=this,n=e.translate,o=e.minTranslate,a=e.maxTranslate,r=e.width,i=e.height,l={x:0,y:0},s={x:1,y:1},c=this.container,d=c.scrollTop,u=c.scrollLeft,h=c.scrollHeight,p=c.scrollWidth,f=0===d,g=h-d-c.clientHeight==0,m=0===u,v=p-u-c.clientWidth==0;n.y>=a.y-i/2&&!g?(l.y=1,s.y=10*Math.abs((a.y-i/2-n.y)/i)):n.x>=a.x-r/2&&!v?(l.x=1,s.x=10*Math.abs((a.x-r/2-n.x)/r)):n.y<=o.y+i/2&&!f?(l.y=-1,s.y=10*Math.abs((n.y-i/2-o.y)/i)):n.x<=o.x+r/2&&!m&&(l.x=-1,s.x=10*Math.abs((n.x-r/2-o.x)/r)),this.interval&&(this.clear(),this.isAutoScrolling=!1),0===l.x&&0===l.y||(this.interval=setInterval((function(){t.isAutoScrolling=!0;var e={left:s.x*l.x,top:s.y*l.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)}),5))}}]),e}(),ln={axis:M().oneOf(["x","y","xy"]),contentWindow:M().any,disableAutoscroll:M().bool,distance:M().number,getContainer:M().func,getHelperDimensions:M().func,helperClass:M().string,helperContainer:M().oneOfType([M().func,"undefined"==typeof HTMLElement?M().any:M().instanceOf(HTMLElement)]),hideSortableGhost:M().bool,keyboardSortingTransitionDuration:M().number,lockAxis:M().string,lockOffset:M().oneOfType([M().number,M().string,M().arrayOf(M().oneOfType([M().number,M().string]))]),lockToContainerEdges:M().bool,onSortEnd:M().func,onSortMove:M().func,onSortOver:M().func,onSortStart:M().func,pressDelay:M().number,pressThreshold:M().number,keyCodes:M().shape({lift:M().arrayOf(M().number),drop:M().arrayOf(M().number),cancel:M().arrayOf(M().number),up:M().arrayOf(M().number),down:M().arrayOf(M().number)}),shouldCancelStart:M().func,transitionDuration:M().number,updateBeforeSortStart:M().func,useDragHandle:M().bool,useWindowAsScrollContainer:M().bool},sn={lift:[32],drop:[32],cancel:[27],up:[38,37],down:[40,39]},cn={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:sn,shouldCancelStart:function(e){return-1!==[on.Input,on.Textarea,on.Select,on.Option,on.Button].indexOf(e.target.tagName)||!!Gt(e.target,(function(e){return"true"===e.contentEditable}))},transitionDuration:300,useWindowAsScrollContainer:!1},dn=Object.keys(ln),un=(0,o.createContext)({manager:{}}),hn={index:M().number.isRequired,collection:M().oneOfType([M().number,M().string]),disabled:M().bool},pn=Object.keys(hn),fn=n(72652);const gn={name:M().string.isRequired,label:M().string,description:M().string,placeholder:M().string,addTooltip:M().string,itemGenerator:M().func,keyAccessor:M().func,onChange:M().func,value:M().oneOfType([M().array]),isFloat:M().bool,isInt:M().bool,controlName:M().string.isRequired},mn={label:null,description:null,onChange:()=>{},placeholder:(0,s.t)("Empty collection"),itemGenerator:()=>({key:kt().generate()}),keyAccessor:e=>e.key,value:[],addTooltip:(0,s.t)("Add an item")},vn=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){var e,t;(0,Tt.A)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=(0,Ot.A)(this,(e=(0,Dt.A)(n)).call.apply(e,[this].concat(r))),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"wrappedInstance",(0,o.createRef)()),t}return(0,Rt.A)(n,t),(0,Mt.A)(n,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e=this.props,t=e.collection,n=e.disabled,o=e.index,a=(0,Lt.findDOMNode)(this);a.sortableInfo={collection:t,disabled:n,index:o,manager:this.context.manager},this.node=a,this.ref={node:a},this.context.manager.add(t,this.ref)}},{key:"unregister",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return $t()(a.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.wrappedInstance.current}},{key:"render",value:function(){var t=a.withRef?this.wrappedInstance:null;return(0,o.createElement)(e,(0,Et.A)({ref:t},Ht(this.props,pn)))}}]),n}(o.Component),(0,It.A)(t,"displayName",Kt("sortableElement",e)),(0,It.A)(t,"contextType",un),(0,It.A)(t,"propTypes",hn),(0,It.A)(t,"defaultProps",{collection:0}),n}(ct),bn=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(e){var t;(0,Tt.A)(this,n),t=(0,Ot.A)(this,(0,Dt.A)(n).call(this,e)),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"state",{}),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"handleStart",(function(e){var n=t.props,o=n.distance,a=n.shouldCancelStart;if(2!==e.button&&!a(e)){t.touched=!0,t.position=Jt(e);var r=Gt(e.target,(function(e){return null!=e.sortableInfo}));if(r&&r.sortableInfo&&t.nodeIsChild(r)&&!t.state.sorting){var i=t.props.useDragHandle,l=r.sortableInfo,s=l.index,c=l.collection;if(l.disabled)return;if(i&&!Gt(e.target,an))return;t.manager.active={collection:c,index:s},function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}(e)||e.target.tagName!==on.Anchor||e.preventDefault(),o||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout((function(){return t.handlePress(e)}),t.props.pressDelay))}}})),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"nodeIsChild",(function(e){return e.sortableInfo.manager===t.manager})),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"handleMove",(function(e){var n=t.props,o=n.distance,a=n.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var r=Jt(e),i={x:t.position.x-r.x,y:t.position.y-r.y},l=Math.abs(i.x)+Math.abs(i.y);t.delta=i,o||a&&!(l>=a)?o&&l>=o&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}})),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"handleEnd",(function(){t.touched=!1,t.cancel()})),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"cancel",(function(){var e=t.props.distance;t.state.sorting||(e||clearTimeout(t.pressTimer),t.manager.active=null)})),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"handlePress",(function(e){try{var n=t.manager.getActive(),o=function(){if(n){var o=function(){var n,o,a,c,g,m,v=h.sortableInfo.index,b=(n=h,{bottom:Qt((o=window.getComputedStyle(n)).marginBottom),left:Qt(o.marginLeft),right:Qt(o.marginRight),top:Qt(o.marginTop)}),y=function(e){var t=window.getComputedStyle(e);return"grid"===t.display?{x:Qt(t.gridColumnGap),y:Qt(t.gridRowGap)}:{x:0,y:0}}(t.container),x=t.scrollContainer.getBoundingClientRect(),w=i({index:v,node:h,collection:p});if(t.node=h,t.margin=b,t.gridGap=y,t.width=w.width,t.height=w.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=h.getBoundingClientRect(),t.containerBoundingRect=x,t.index=v,t.newIndex=v,t.axis={x:r.indexOf("x")>=0,y:r.indexOf("y")>=0},t.offsetEdge=en(h,t.container),t.initialOffset=Jt(f?(0,Yt.A)({},e,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):e),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild((c="input, textarea, select, canvas, [contenteditable]",g=(a=h).querySelectorAll(c),m=a.cloneNode(!0),(0,Pt.A)(m.querySelectorAll(c)).forEach((function(e,t){"file"!==e.type&&(e.value=g[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),e.tagName===on.Canvas&&g[t].width>0&&g[t].height>0&&e.getContext("2d").drawImage(g[t],0,0)})),m)),Wt(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-b.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-b.top,"px"),width:"".concat(t.width,"px")}),f&&t.helper.focus(),s&&(t.sortableGhost=h,Wt(h,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},f){var C=u?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,S=C.top,A=C.left,k=C.width,E=S+C.height,_=A+k;t.axis.x&&(t.minTranslate.x=A-t.boundingClientRect.left,t.maxTranslate.x=_-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=S-t.boundingClientRect.top,t.maxTranslate.y=E-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(u?0:x.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(u?t.contentWindow.innerWidth:x.left+x.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(u?0:x.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(u?t.contentWindow.innerHeight:x.top+x.height)-t.boundingClientRect.top-t.height/2);l&&l.split(" ").forEach((function(e){return t.helper.classList.add(e)})),t.listenerNode=e.touches?e.target:t.contentWindow,f?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(zt.move.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)})),zt.end.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)}))),t.setState({sorting:!0,sortingIndex:v}),d&&d({node:h,index:v,collection:p,isKeySorting:f,nodes:t.manager.getOrderedRefs(),helper:t.helper},e),f&&t.keyMove(0)},a=t.props,r=a.axis,i=a.getHelperDimensions,l=a.helperClass,s=a.hideSortableGhost,c=a.updateBeforeSortStart,d=a.onSortStart,u=a.useWindowAsScrollContainer,h=n.node,p=n.collection,f=t.manager.isKeySorting,g=function(){if("function"==typeof c){t._awaitingUpdateBeforeSortStart=!0;var n=function(t,n){try{var o=(a=h.sortableInfo.index,Promise.resolve(c({collection:p,index:a,node:h,isKeySorting:f},e)).then((function(){})))}catch(e){return n(!0,e)}var a;return o&&o.then?o.then(n.bind(null,!1),n.bind(null,!0)):n(!1,value)}(0,(function(e,n){if(t._awaitingUpdateBeforeSortStart=!1,e)throw n;return n}));if(n&&n.then)return n.then((function(){}))}}();return g&&g.then?g.then(o):o()}}();return Promise.resolve(o&&o.then?o.then((function(){})):void 0)}catch(e){return Promise.reject(e)}})),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"handleSortMove",(function(e){var n=t.props.onSortMove;"function"==typeof e.preventDefault&&e.cancelable&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),n&&n(e)})),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"handleSortEnd",(function(e){var n=t.props,o=n.hideSortableGhost,a=n.onSortEnd,r=t.manager,i=r.active.collection,l=r.isKeySorting,s=t.manager.getOrderedRefs();t.listenerNode&&(l?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(zt.move.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)})),zt.end.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)})))),t.helper.parentNode.removeChild(t.helper),o&&t.sortableGhost&&Wt(t.sortableGhost,{opacity:"",visibility:""});for(var c=0,d=s.length;c<d;c++){var u=s[c],h=u.node;u.edgeOffset=null,u.boundingClientRect=null,qt(h,null),Vt(h,null),u.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"==typeof a&&a({collection:i,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:l,nodes:s},e),t.touched=!1})),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"autoscroll",(function(){var e=t.props.disableAutoscroll,n=t.manager.isKeySorting;if(e)t.autoScroller.clear();else{if(n){var o=(0,Yt.A)({},t.translate),a=0,r=0;return t.axis.x&&(o.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),a=t.translate.x-o.x),t.axis.y&&(o.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),r=t.translate.y-o.y),t.translate=o,qt(t.helper,t.translate),t.scrollContainer.scrollLeft+=a,void(t.scrollContainer.scrollTop+=r)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}})),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"onAutoScroll",(function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()})),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"handleKeyDown",(function(e){var n=e.keyCode,o=t.props,a=o.shouldCancelStart,r=o.keyCodes,i=void 0===r?{}:r,l=(0,Yt.A)({},sn,i);t.manager.active&&!t.manager.isKeySorting||!(t.manager.active||l.lift.includes(n)&&!a(e)&&t.isValidSortingTarget(e))||(e.stopPropagation(),e.preventDefault(),l.lift.includes(n)&&!t.manager.active?t.keyLift(e):l.drop.includes(n)&&t.manager.active?t.keyDrop(e):l.cancel.includes(n)?(t.newIndex=t.manager.active.index,t.keyDrop(e)):l.up.includes(n)?t.keyMove(-1):l.down.includes(n)&&t.keyMove(1))})),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"keyLift",(function(e){var n=e.target,o=Gt(n,(function(e){return null!=e.sortableInfo})).sortableInfo,a=o.index,r=o.collection;t.initialFocusedNode=n,t.manager.isKeySorting=!0,t.manager.active={index:a,collection:r},t.handlePress(e)})),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"keyMove",(function(e){var n=t.manager.getOrderedRefs(),o=n[n.length-1].node.sortableInfo.index,a=t.newIndex+e,r=t.newIndex;if(!(a<0||a>o)){t.prevIndex=r,t.newIndex=a;var i=function(e,t,n){return e<n&&e>t?e-1:e>n&&e<t?e+1:e}(t.newIndex,t.prevIndex,t.index),l=n.find((function(e){return e.node.sortableInfo.index===i})),s=l.node,c=t.containerScrollDelta,d=l.boundingClientRect||Zt(s,c),u=l.translate||{x:0,y:0},h=d.top+u.y-c.top,p=d.left+u.x-c.left,f=r<a,g=f&&t.axis.x?s.offsetWidth-t.width:0,m=f&&t.axis.y?s.offsetHeight-t.height:0;t.handleSortMove({pageX:p+g,pageY:h+m,ignoreTransition:0===e})}})),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"keyDrop",(function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()})),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"handleKeyEnd",(function(e){t.manager.active&&t.keyDrop(e)})),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"isValidSortingTarget",(function(e){var n=t.props.useDragHandle,o=e.target,a=Gt(o,(function(e){return null!=e.sortableInfo}));return a&&a.sortableInfo&&!a.sortableInfo.disabled&&(n?an(o):o.sortableInfo)}));var a=new Ft;return function(e){$t()(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}(e),t.manager=a,t.wrappedInstance=(0,o.createRef)(),t.sortableContextValue={manager:a},t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return(0,Rt.A)(n,t),(0,Mt.A)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,n=this.getContainer();Promise.resolve(n).then((function(n){e.container=n,e.document=e.container.ownerDocument||document;var o=e.props.contentWindow||e.document.defaultView||window;e.contentWindow="function"==typeof o?o():o,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:nn(e.container)||e.container,e.autoScroller=new rn(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach((function(t){return zt[t].forEach((function(n){return e.container.addEventListener(n,e.events[t],!1)}))})),e.container.addEventListener("keydown",e.handleKeyDown)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach((function(t){return zt[t].forEach((function(n){return e.container.removeEventListener(n,e.events[t])}))})),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t=this.props,n=t.lockAxis,o=t.lockOffset,a=t.lockToContainerEdges,r=t.transitionDuration,i=t.keyboardSortingTransitionDuration,l=void 0===i?r:i,s=this.manager.isKeySorting,c=e.ignoreTransition,d=Jt(e),u={x:d.x-this.initialOffset.x,y:d.y-this.initialOffset.y};if(u.y-=window.pageYOffset-this.initialWindowScroll.top,u.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=u,a){var h=function(e){var t=e.height,n=e.width,o=e.lockOffset,a=Array.isArray(o)?o:[o,o];$t()(2===a.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",o);var r=(0,_t.A)(a,2),i=r[0],l=r[1];return[tn({height:t,lockOffset:i,width:n}),tn({height:t,lockOffset:l,width:n})]}({height:this.height,lockOffset:o,width:this.width}),p=(0,_t.A)(h,2),f=p[0],g=p[1],m={x:this.width/2-f.x,y:this.height/2-f.y},v={x:this.width/2-g.x,y:this.height/2-g.y};u.x=Xt(this.minTranslate.x+m.x,this.maxTranslate.x-v.x,u.x),u.y=Xt(this.minTranslate.y+m.y,this.maxTranslate.y-v.y,u.y)}"x"===n?u.y=0:"y"===n&&(u.x=0),s&&l&&!c&&Vt(this.helper,l),qt(this.helper,u)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,n=e.hideSortableGhost,o=e.onSortOver,a=this.containerScrollDelta,r=this.windowScrollDelta,i=this.manager.getOrderedRefs(),l=this.offsetEdge.left+this.translate.x+a.left,s=this.offsetEdge.top+this.translate.y+a.top,c=this.manager.isKeySorting,d=this.newIndex;this.newIndex=null;for(var u=0,h=i.length;u<h;u++){var p=i[u].node,f=p.sortableInfo.index,g=p.offsetWidth,m=p.offsetHeight,v={height:this.height>m?m/2:this.height/2,width:this.width>g?g/2:this.width/2},b=c&&f>this.index&&f<=d,y=c&&f<this.index&&f>=d,x={x:0,y:0},w=i[u].edgeOffset;w||(w=en(p,this.container),i[u].edgeOffset=w,c&&(i[u].boundingClientRect=Zt(p,a)));var C=u<i.length-1&&i[u+1],S=u>0&&i[u-1];C&&!C.edgeOffset&&(C.edgeOffset=en(C.node,this.container),c&&(C.boundingClientRect=Zt(C.node,a))),f!==this.index?(t&&Vt(p,t),this.axis.x?this.axis.y?y||f<this.index&&(l+r.left-v.width<=w.left&&s+r.top<=w.top+v.height||s+r.top+v.height<=w.top)?(x.x=this.width+this.marginOffset.x,w.left+x.x>this.containerBoundingRect.width-v.width&&C&&(x.x=C.edgeOffset.left-w.left,x.y=C.edgeOffset.top-w.top),null===this.newIndex&&(this.newIndex=f)):(b||f>this.index&&(l+r.left+v.width>=w.left&&s+r.top+v.height>=w.top||s+r.top+v.height>=w.top+m))&&(x.x=-(this.width+this.marginOffset.x),w.left+x.x<this.containerBoundingRect.left+v.width&&S&&(x.x=S.edgeOffset.left-w.left,x.y=S.edgeOffset.top-w.top),this.newIndex=f):b||f>this.index&&l+r.left+v.width>=w.left?(x.x=-(this.width+this.marginOffset.x),this.newIndex=f):(y||f<this.index&&l+r.left<=w.left+v.width)&&(x.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=f)):this.axis.y&&(b||f>this.index&&s+r.top+v.height>=w.top?(x.y=-(this.height+this.marginOffset.y),this.newIndex=f):(y||f<this.index&&s+r.top<=w.top+v.height)&&(x.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=f))),qt(p,x),i[u].translate=x):n&&(this.sortableGhost=p,Wt(p,{opacity:0,visibility:"hidden"}))}null==this.newIndex&&(this.newIndex=this.index),c&&(this.newIndex=d);var A=c?this.prevIndex:d;o&&this.newIndex!==A&&o({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:A,isKeySorting:c,nodes:i,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return $t()(a.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.wrappedInstance.current}},{key:"getContainer",value:function(){var e=this.props.getContainer;return"function"!=typeof e?(0,Lt.findDOMNode)(this):e(a.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=a.withRef?this.wrappedInstance:null;return(0,o.createElement)(un.Provider,{value:this.sortableContextValue},(0,o.createElement)(e,(0,Et.A)({ref:t},Ht(this.props,dn))))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"==typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){return this.props.useWindowAsScrollContainer?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),n}(o.Component),(0,It.A)(t,"displayName",Kt("sortableList",e)),(0,It.A)(t,"defaultProps",cn),(0,It.A)(t,"propTypes",ln),n}(rt.B8),yn=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){var e,t;(0,Tt.A)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=(0,Ot.A)(this,(e=(0,Dt.A)(n)).call.apply(e,[this].concat(r))),(0,It.A)((0,Nt.A)((0,Nt.A)(t)),"wrappedInstance",(0,o.createRef)()),t}return(0,Rt.A)(n,t),(0,Mt.A)(n,[{key:"componentDidMount",value:function(){(0,Lt.findDOMNode)(this).sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return $t()(a.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.wrappedInstance.current}},{key:"render",value:function(){var t=a.withRef?this.wrappedInstance:null;return(0,o.createElement)(e,(0,Et.A)({ref:t},this.props))}}]),n}(o.Component),(0,It.A)(t,"displayName",Kt("sortableHandle",e)),n}((()=>(0,R.Y)("i",{role:"img","aria-label":"drag",className:"fa fa-bars text-primary",style:{cursor:"ns-resize"}})));var xn={name:"11g6mpt",styles:"justify-content:flex-start"};class wn extends o.Component{constructor(e){super(e),this.onAdd=this.onAdd.bind(this)}onChange(e,t){const n=[...this.props.value];n[e]={...this.props.value[e],...t},this.props.onChange(n)}onAdd(){this.props.onChange(this.props.value.concat([this.props.itemGenerator()]))}onSortEnd({oldIndex:e,newIndex:t}){var n,o,a;this.props.onChange((o=e,a=t,(n=(n=this.props.value).slice()).splice(a<0?n.length+a:a,0,n.splice(o,1)[0]),n))}removeItem(e){this.props.onChange(this.props.value.filter(((t,n)=>e!==n)))}renderList(){if(0===this.props.value.length)return(0,R.Y)("div",{className:"text-muted"},this.props.placeholder);const e=Ai[this.props.controlName];return(0,R.Y)(bn,{useDragHandle:!0,lockAxis:"y",onSortEnd:this.onSortEnd.bind(this),bordered:!0,css:e=>({borderRadius:e.gridUnit})},this.props.value.map(((t,n)=>{const{label:o,...a}=this.props;return(0,R.Y)(vn,{className:"clearfix",css:xn,key:this.props.keyAccessor(t),index:n},(0,R.Y)(yn,null),(0,R.Y)("div",{css:e=>({flex:1,marginLeft:2*e.gridUnit,marginRight:2*e.gridUnit})},(0,R.Y)(e,(0,C.A)({},a,t,{onChange:this.onChange.bind(this,n)}))),(0,R.Y)(lt.W,{icon:"times",label:"remove-item",tooltip:(0,s.t)("Remove item"),bsStyle:"primary",onClick:this.removeItem.bind(this,n)}))})))}render(){const{theme:e}=this.props;return(0,R.Y)("div",{"data-test":"CollectionControl",className:"CollectionControl"},(0,R.Y)(fn.B3,null,(0,R.Y)(vt.A,this.props),(0,R.Y)(fn.XB,{onClick:this.onAdd},(0,R.Y)(H.A.PlusLarge,{iconSize:"s",iconColor:e.colors.grayscale.light5}))),this.renderList())}}wn.propTypes=gn,wn.defaultProps=mn;const Cn=(0,it.b)(wn);var Sn=n(91945),An=n(76968),kn=n(50127);const En={onChange:M().func,value:M().object},_n={position:"absolute",width:"50px",height:"20px",top:"0px",left:"0px",right:"0px",bottom:"0px"},Yn=D.A.div`
  ${({theme:e})=>`\n      width: 50px;\n      height: 20px;\n      position: relative;\n      padding: ${e.gridUnit}px;\n      borderRadius: ${e.borderRadius}px;\n      display: inline-block;\n      cursor: pointer;\n    `}
`,Tn={color:{..._n,borderRadius:"2px"},checkerboard:{..._n,background:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==") left center'}};class Mn extends o.Component{constructor(e){super(e),this.onChange=this.onChange.bind(this)}onChange(e){this.props.onChange(e.rgb)}renderPopover(){const e=(0,An.A)().get().colors.filter(((e,t)=>t<7));return(0,R.Y)("div",{id:"filter-popover",className:"color-popover"},(0,R.Y)(Sn.Xq,{css:R.AH`
            // We need to use important here as these are element level styles
            padding: 0 !important;
            box-shadow: none !important;
          `,color:this.props.value,onChange:this.onChange,presetColors:e}))}render(){const e=this.props.value||{r:0,g:0,b:0,a:0},t={...Tn.color,background:`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`};return(0,R.Y)("div",null,(0,R.Y)(vt.A,this.props),(0,R.Y)(kn.A,{trigger:"click",placement:"right",content:this.renderPopover()},(0,R.Y)(Yn,null,(0,R.Y)("div",{style:Tn.checkerboard}),(0,R.Y)("div",{style:t}))))}}Mn.propTypes=En,Mn.defaultProps={onChange:()=>{}};var On=n(76125),Dn=n(85015),Rn=n.n(Dn),Nn=n(6749),In=n(67940),Ln=n(58999),jn=n(78704),$n=n(65256),Pn=n(18301),Fn=n(23805),Bn=n.n(Fn);const Hn=(0,s.t)("Close"),zn=(0,s.t)("Save as Dataset"),Un=(0,s.t)("Open in SQL Lab"),Wn=e=>{const t=(0,r.W6)();return(0,R.Y)("div",null,(0,R.Y)(Te.A,{onClick:()=>{null==e||null==e.closeModal||e.closeModal(),null==e||null==e.changeDatasource||e.changeDatasource()}},zn),(0,R.Y)(Te.A,{onClick:({metaKey:n})=>(n=>{const{datasource:o}=e;if(Bn()(o)){const{id:e,type:a,sql:r}=o;((e,n,o,a)=>{const r={datasourceKey:`${n}__${o}`,sql:a};e?pe.A.postForm("/sqllab/",r):t.push({pathname:"/sqllab",state:{requestedQuery:r}})})(n,e,a,r)}})(Boolean(n))},Un),(0,R.Y)(Te.A,{buttonStyle:"primary",onClick:()=>{null==e||null==e.closeModal||e.closeModal()}},Hn))};var qn=n(91643),Vn=n(12066),Gn=n(54625);const Xn={actions:M().object.isRequired,onChange:M().func,value:M().string,datasource:M().object.isRequired,form_data:M().object.isRequired,isEditable:M().bool,onDatasourceSave:M().func},Qn=D.A.div`
  .data-container {
    display: none;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    padding: ${({theme:e})=>4*e.gridUnit}px;
    padding-right: ${({theme:e})=>2*e.gridUnit}px;
  }
  .error-alert {
    margin: ${({theme:e})=>2*e.gridUnit}px;
  }
  .ant-dropdown-trigger {
    margin-left: ${({theme:e})=>2*e.gridUnit}px;
    box-shadow: none;
    &:active {
      box-shadow: none;
    }
  }
  .btn-group .open .dropdown-toggle {
    box-shadow: none;
    &.button-default {
      background: none;
    }
  }
  i.angle {
    color: ${({theme:e})=>e.colors.primary.base};
  }
  svg.datasource-modal-trigger {
    color: ${({theme:e})=>e.colors.primary.base};
    cursor: pointer;
  }
  .title-select {
    flex: 1 1 100%;
    display: inline-block;
    background-color: ${({theme:e})=>e.colors.grayscale.light3};
    padding: ${({theme:e})=>2*e.gridUnit}px;
    border-radius: ${({theme:e})=>e.borderRadius}px;
    text-align: center;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
  }
  .datasource-svg {
    margin-right: ${({theme:e})=>2*e.gridUnit}px;
    flex: none;
  }
  span[aria-label='dataset-physical'] {
    color: ${({theme:e})=>e.colors.grayscale.base};
  }
  span[aria-label='more-vert'] {
    color: ${({theme:e})=>e.colors.primary.base};
  }
`,Kn="change_dataset",Zn="view_in_sql_lab",Jn="edit_dataset",eo="save_as_dataset",to={[ue.cT.Query]:(0,R.Y)(H.A.ConsoleSqlOutlined,{className:"datasource-svg"}),[ue.cT.Table]:(0,R.Y)(H.A.DatasetPhysical,{className:"datasource-svg"})},no=e=>{e.metaKey?e.preventDefault():e.stopPropagation()};class oo extends o.PureComponent{constructor(e){super(e),this.onDatasourceSave=e=>{var t,n,o;this.props.actions.changeDatasource(e);const{temporalColumns:a,defaultTemporalColumn:r}=(0,Xe.W)(e),{columns:i}=e,l=null==(t=this.props.form_data)?void 0:t.granularity_sqla,s=null==(n=i.find((({column_name:e})=>e===l)))?void 0:n.is_dttm,c=null==(o=i.find((({column_name:e})=>e===r)))?void 0:o.is_dttm;if("table"===e.type&&!s){const e=c?r:null==a?void 0:a[0];this.props.actions.setControlValue("granularity_sqla",e||null)}this.props.onDatasourceSave&&this.props.onDatasourceSave(e)},this.toggleShowDatasource=()=>{this.setState((({showDatasource:e})=>({showDatasource:!e})))},this.toggleChangeDatasourceModal=()=>{this.setState((({showChangeDatasourceModal:e})=>({showChangeDatasourceModal:!e})))},this.toggleEditDatasourceModal=()=>{this.setState((({showEditDatasourceModal:e})=>({showEditDatasourceModal:!e})))},this.toggleSaveDatasetModal=()=>{this.setState((({showSaveDatasetModal:e})=>({showSaveDatasetModal:!e})))},this.handleMenuItemClick=({key:e})=>{switch(e){case Kn:this.toggleChangeDatasourceModal();break;case Jn:this.toggleEditDatasourceModal();break;case Zn:{const{datasource:e}=this.props,t={datasourceKey:`${e.id}__${e.type}`,sql:e.sql};pe.A.postForm("/sqllab/",{form_data:(0,Vn.J)(t)})}break;case eo:this.toggleSaveDatasetModal()}},this.state={showEditDatasourceModal:!1,showChangeDatasourceModal:!1,showSaveDatasetModal:!1}}render(){var e,t;const{showChangeDatasourceModal:n,showEditDatasourceModal:a,showSaveDatasetModal:r}=this.state,{datasource:i,onChange:l,theme:c}=this.props,d=!(null!=i&&i.id);let u=!1;if(d){const e=(0,h.P3)(p.vX.datasourceId),t=(0,h.P3)(p.vX.sliceId);e||t||(u=!0)}const{user:f}=this.props,g=(null==(e=i.owners)?void 0:e.map((e=>e.id||e.value)).includes(f.userId))||(0,$n.N6)(f),m=(0,$n.ZU)(f,"SQL Lab","menu_access"),v=(0,s.t)("Edit dataset"),b={datasourceKey:`${i.id}__${i.type}`,sql:i.sql},y=(0,R.Y)(Nn.W,{onClick:this.handleMenuItemClick},this.props.isEditable&&!d&&(0,R.Y)(Nn.W.Item,{key:Jn,"data-test":"edit-dataset",disabled:!g},g?v:(0,R.Y)(B.m,{title:(0,s.t)("You must be a dataset owner in order to edit. Please reach out to a dataset owner to request modifications or edit access.")},v)),(0,R.Y)(Nn.W.Item,{key:Kn},(0,s.t)("Swap dataset")),!d&&m&&(0,R.Y)(Nn.W.Item,{key:Zn},(0,R.Y)(Gn.N_,{to:{pathname:"/sqllab",state:{requestedQuery:b}},onClick:no},(0,s.t)("View in SQL Lab")))),x=(0,R.Y)(Nn.W,{onClick:this.handleMenuItemClick},(0,R.Y)(Nn.W.Item,{key:"query_preview"},(0,R.Y)(Pn.A,{triggerNode:(0,R.Y)("span",{"data-test":"view-query-menu-item"},(0,s.t)("Query preview")),modalTitle:(0,s.t)("Query preview"),modalBody:(0,R.Y)(qn.A,{sql:(null==i?void 0:i.sql)||(null==i?void 0:i.select_star)||""}),modalFooter:(0,R.Y)(Wn,{changeDatasource:this.toggleSaveDatasetModal,datasource:i}),draggable:!1,resizable:!1,responsive:!0})),m&&(0,R.Y)(Nn.W.Item,{key:Zn},(0,R.Y)(Gn.N_,{to:{pathname:"/sqllab",state:{requestedQuery:b}},onClick:no},(0,s.t)("View in SQL Lab"))),(0,R.Y)(Nn.W.Item,{key:eo},(0,s.t)("Save as dataset"))),{health_check_message:w}=i;let C;if(null!=i&&i.extra)if(Rn()(i.extra))try{C=JSON.parse(i.extra)}catch{}else C=i.extra;const S=d?(0,s.t)("Missing dataset"):(e=>"query"===(null==e?void 0:e.type)?null==e?void 0:e.sql:(null==e?void 0:e.name)||"")(i),A=S;return(0,R.Y)(Qn,{"data-test":"datasource-control",className:"DatasourceControl"},(0,R.Y)("div",{className:"data-container"},to[null==i?void 0:i.type],((e,t)=>(null==e?void 0:e.length)>25?(0,R.Y)(B.m,{title:t},(0,R.Y)("span",{className:"title-select"},e)):(0,R.Y)("span",{title:t,className:"title-select"},e))(S,A),w&&(0,R.Y)(B.m,{title:w},(0,R.Y)(H.A.AlertSolid,{iconColor:c.colors.warning.base})),(null==(t=C)?void 0:t.warning_markdown)&&(0,R.Y)(jn.A,{warningMarkdown:C.warning_markdown}),(0,R.Y)(rt.rM,{overlay:i.type===ue.cT.Query?x:y,trigger:["click"],"data-test":"datasource-menu"},(0,R.Y)(H.A.MoreVert,{className:"datasource-modal-trigger","data-test":"datasource-menu-trigger"}))),d&&u&&(0,R.Y)("div",{className:"error-alert"},(0,R.Y)(Ln.A,{level:"warning",title:(0,s.t)("Missing URL parameters"),source:"explore",subtitle:(0,R.Y)(o.Fragment,null,(0,R.Y)("p",null,(0,s.t)("The URL is missing the dataset_id or slice_id parameters.")))})),d&&!u&&(0,R.Y)("div",{className:"error-alert"},(0,R.Y)(Ln.A,{level:"warning",title:(0,s.t)("Missing dataset"),source:"explore",subtitle:(0,R.Y)(o.Fragment,null,(0,R.Y)("p",null,(0,s.t)("The dataset linked to this chart may have been deleted.")),(0,R.Y)("p",null,(0,R.Y)(Te.A,{buttonStyle:"primary",onClick:()=>this.handleMenuItemClick({key:Kn})},(0,s.t)("Swap dataset"))))})),a&&(0,R.Y)(In.X,{datasource:i,show:a,onDatasourceSave:this.onDatasourceSave,onHide:this.toggleEditDatasourceModal}),n&&(0,R.Y)(In.D,{onDatasourceSave:this.onDatasourceSave,onHide:this.toggleChangeDatasourceModal,show:n,onChange:l}),r&&(0,R.Y)(me.D,{visible:r,onHide:this.toggleSaveDatasetModal,buttonTextOnSave:(0,s.t)("Save"),buttonTextOnOverwrite:(0,s.t)("Overwrite"),modalDescription:(0,s.t)("Save this query as a virtual dataset to continue exploring"),datasource:(0,ve.l)(i),openWindow:!1,formData:this.props.form_data}))}}oo.propTypes=Xn,oo.defaultProps={onChange:()=>{},onDatasourceSave:null,value:null,isEditable:!0};const ao=(0,it.b)(oo);var ro=n(39074),io=n(4783),lo=n(74792),so=n(28254),co=n(17093),uo=n(32291);const ho=D.A.span`
  display: inline-block;
  padding: 2px 0;
`,po=(0,D.A)(mt.pd)`
  border-radius: ${({theme:e})=>e.borderRadius};
  height: 26px;
  padding-left: ${({theme:e})=>2.5*e.gridUnit}px;
`,fo=({title:e,isEditDisabled:t,onChange:n})=>{const[a,r]=(0,o.useState)(!1),[i,l]=(0,o.useState)(!1),c=(0,s.t)("My metric"),d=(0,o.useCallback)((()=>r(!0)),[]),u=(0,o.useCallback)((()=>r(!1)),[]),h=(0,o.useCallback)((()=>l(!0)),[]),p=(0,o.useCallback)((()=>l(!1)),[]),f=(0,o.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),p())}),[p]),g=(0,o.useCallback)((e=>{""===e.target.value&&n(e),p()}),[n,p]);return t?(0,R.Y)("span",{"data-test":"AdhocMetricTitle"},(null==e?void 0:e.label)||c):i?(0,R.Y)(po,{type:"text",placeholder:null==e?void 0:e.label,value:null!=e&&e.hasCustomLabel?e.label:"",autoFocus:!0,onChange:n,onBlur:g,onKeyPress:f,"data-test":"AdhocMetricEditTitle#input"}):(0,R.Y)(B.m,{placement:"top",title:(0,s.t)("Click to edit label")},(0,R.Y)("span",{className:"AdhocMetricEditPopoverTitle inline-editable","data-test":"AdhocMetricEditTitle#trigger",onMouseOver:d,onMouseOut:u,onClick:h,onBlur:p,role:"button",tabIndex:0},(0,R.Y)(ho,null,(null==e?void 0:e.label)||c),"Â ",(0,R.Y)("i",{className:"fa fa-pencil",style:{color:a?"black":"grey"}})))};var go=n(16238),mo=n(87196),vo=n(40563),bo=n(41154),yo=n(28274),xo=n(15151),wo=n(84080);const Co={onChange:M().func.isRequired,onClose:M().func.isRequired,onResize:M().func.isRequired,getCurrentTab:M().func,getCurrentLabel:M().func,adhocMetric:M().instanceOf(co.A).isRequired,columns:M().arrayOf(lo.A),savedMetricsOptions:M().arrayOf(uo.A),savedMetric:uo.A,datasource:M().object,isNewMetric:M().bool,isLabelModified:M().bool},So={columns:[],getCurrentTab:xo.fZ,isNewMetric:!1},Ao=(0,D.A)(rt.l6)`
  .metric-option {
    & > svg {
      min-width: ${({theme:e})=>4*e.gridUnit+"px"};
    }
    & > .option-label {
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
`,ko="SAVED";class Eo extends o.PureComponent{constructor(e){super(e),this.defaultActiveTabKey=this.getDefaultTab(),this.onSave=this.onSave.bind(this),this.onResetStateAndClose=this.onResetStateAndClose.bind(this),this.onColumnChange=this.onColumnChange.bind(this),this.onAggregateChange=this.onAggregateChange.bind(this),this.onSavedMetricChange=this.onSavedMetricChange.bind(this),this.onSqlExpressionChange=this.onSqlExpressionChange.bind(this),this.onDragDown=this.onDragDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTabChange=this.onTabChange.bind(this),this.handleAceEditorRef=this.handleAceEditorRef.bind(this),this.refreshAceEditor=this.refreshAceEditor.bind(this),this.getDefaultTab=this.getDefaultTab.bind(this),this.state={adhocMetric:this.props.adhocMetric,savedMetric:this.props.savedMetric,width:U._R,height:U.Z_},document.addEventListener("mouseup",this.onMouseUp)}componentDidMount(){this.props.getCurrentTab(this.defaultActiveTabKey)}componentDidUpdate(e,t){var n,o,a,r,i,l,s,c,d,u,h,p,f;(null==(n=t.adhocMetric)?void 0:n.sqlExpression)===(null==(o=this.state.adhocMetric)?void 0:o.sqlExpression)&&(null==(a=t.adhocMetric)?void 0:a.aggregate)===(null==(r=this.state.adhocMetric)?void 0:r.aggregate)&&(null==(i=t.adhocMetric)||null==(l=i.column)?void 0:l.column_name)===(null==(s=this.state.adhocMetric)||null==(c=s.column)?void 0:c.column_name)&&(null==(d=t.savedMetric)?void 0:d.metric_name)===(null==(u=this.state.savedMetric)?void 0:u.metric_name)||this.props.getCurrentLabel({savedMetricLabel:(null==(h=this.state.savedMetric)?void 0:h.verbose_name)||(null==(p=this.state.savedMetric)?void 0:p.metric_name),adhocMetricLabel:null==(f=this.state.adhocMetric)?void 0:f.getDefaultLabel()})}componentWillUnmount(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove)}getDefaultTab(){const{adhocMetric:e,savedMetric:t,savedMetricsOptions:n,isNewMetric:o}=this.props;return(0,i.A)(e.column)||(0,i.A)(e.sqlExpression)?e.expressionType:(o||t.metric_name)&&Array.isArray(n)&&n.length>0?ko:e.expressionType}onSave(){var e;const{adhocMetric:t,savedMetric:n}=this.state,o=null!=n&&n.metric_name?n:t,a=null!=(e=this.props.savedMetric)&&e.metric_name?this.props.savedMetric:this.props.adhocMetric;this.props.onChange({...o},a),this.props.onClose()}onResetStateAndClose(){this.setState({adhocMetric:this.props.adhocMetric,savedMetric:this.props.savedMetric},this.props.onClose)}onColumnChange(e){const t=this.props.columns.find((t=>t.column_name===e));this.setState((e=>({adhocMetric:e.adhocMetric.duplicateWith({column:t,expressionType:co.t.SIMPLE}),savedMetric:void 0})))}onAggregateChange(e){this.setState((t=>({adhocMetric:t.adhocMetric.duplicateWith({aggregate:e,expressionType:co.t.SIMPLE}),savedMetric:void 0})))}onSavedMetricChange(e){const t=this.props.savedMetricsOptions.find((t=>t.metric_name===e));this.setState((e=>({savedMetric:t,adhocMetric:e.adhocMetric.duplicateWith({column:void 0,aggregate:void 0,sqlExpression:void 0,expressionType:co.t.SIMPLE})})))}onSqlExpressionChange(e){this.setState((t=>({adhocMetric:t.adhocMetric.duplicateWith({sqlExpression:e,expressionType:co.t.SQL}),savedMetric:void 0})))}onDragDown(e){this.dragStartX=e.clientX,this.dragStartY=e.clientY,this.dragStartWidth=this.state.width,this.dragStartHeight=this.state.height,document.addEventListener("mousemove",this.onMouseMove)}onMouseMove(e){this.props.onResize(),this.setState({width:Math.max(this.dragStartWidth+(e.clientX-this.dragStartX),U._R),height:Math.max(this.dragStartHeight+(e.clientY-this.dragStartY),U.Z_)})}onMouseUp(){document.removeEventListener("mousemove",this.onMouseMove)}onTabChange(e){this.refreshAceEditor(),this.props.getCurrentTab(e)}handleAceEditorRef(e){e&&(this.aceEditorRef=e)}refreshAceEditor(){setTimeout((()=>{this.aceEditorRef&&this.aceEditorRef.editor.resize()}),0)}renderColumnOption(e){const t={...e};return t.metric_name&&!t.verbose_name&&(t.verbose_name=t.metric_name),(0,R.Y)(wo.V,{column:t,showType:!0})}renderMetricOption(e){return(0,R.Y)(wo.b,{metric:e,showType:!0})}render(){var e;const{adhocMetric:t,savedMetric:n,columns:a,savedMetricsOptions:r,onChange:i,onClose:l,onResize:c,datasource:d,isNewMetric:u,isLabelModified:h,...p}=this.props,{adhocMetric:f,savedMetric:g}=this.state,m=yo.A.concat(a.map((e=>({name:e.column_name,value:e.column_name,score:50,meta:"column"})))),v=f.column&&f.column.column_name||f.inferSqlExpressionColumn(),b={ariaLabel:(0,s.t)("Select column"),placeholder:(0,s.t)("%s column(s)",a.length),value:v,onChange:this.onColumnChange,allowClear:!0,autoFocus:!v},y={ariaLabel:(0,s.t)("Select aggregate options"),placeholder:(0,s.t)("%s aggregates(s)",U.K8.length),value:f.aggregate||f.inferSqlExpressionAggregate(),onChange:this.onAggregateChange,allowClear:!0,autoFocus:!!v},x={ariaLabel:(0,s.t)("Select saved metrics"),placeholder:(0,s.t)("%s saved metric(s)",null!=(e=null==r?void 0:r.length)?e:0),value:null==g?void 0:g.metric_name,onChange:this.onSavedMetricChange,allowClear:!0,autoFocus:!0},w=f.isValid()||(null==g?void 0:g.metric_name),S=h||u||!f.equals(t)||!(void 0===(null==g?void 0:g.metric_name)&&void 0===(null==n?void 0:n.metric_name))&&(null==g?void 0:g.metric_name)!==(null==n?void 0:n.metric_name);let A={};if(null!=d&&d.extra)try{A=JSON.parse(d.extra)}catch{}return(0,R.Y)(vo.lV,(0,C.A)({layout:"vertical",id:"metrics-edit-popover","data-test":"metrics-edit-popover"},p),(0,R.Y)(Ze.Ay,{id:"adhoc-metric-edit-tabs","data-test":"adhoc-metric-edit-tabs",defaultActiveKey:this.defaultActiveTabKey,className:"adhoc-metric-edit-tabs",style:{height:this.state.height,width:this.state.width},onChange:this.onTabChange,allowOverflow:!0},(0,R.Y)(Ze.Ay.TabPane,{key:ko,tab:(0,s.t)("Saved")},(0,he.A)(r).length>0?(0,R.Y)(vo.eI,{label:(0,s.t)("Saved metric")},(0,R.Y)(Ao,(0,C.A)({options:(0,he.A)(r).map((e=>({value:e.metric_name,label:e.metric_name,customLabel:this.renderMetricOption(e),key:e.id})))},x))):d.type===ue.cT.Table?(0,R.Y)(mo.u7,{image:"empty.svg",title:(0,s.t)("No saved metrics found"),description:(0,s.t)('Add metrics to dataset in "Edit datasource" modal')}):(0,R.Y)(mo.u7,{image:"empty.svg",title:(0,s.t)("No saved metrics found"),description:(0,R.Y)(o.Fragment,null,(0,R.Y)("span",{tabIndex:0,role:"button",onClick:()=>{this.props.handleDatasetModal(!0),this.props.onClose()}},(0,s.t)("Create a dataset")),(0,s.t)(" to add metrics"))})),(0,R.Y)(Ze.Ay.TabPane,{key:co.t.SIMPLE,tab:A.disallow_adhoc_metrics?(0,R.Y)(B.m,{title:(0,s.t)("Simple ad-hoc metrics are not enabled for this dataset")},(0,s.t)("Simple")):(0,s.t)("Simple"),disabled:A.disallow_adhoc_metrics},(0,R.Y)(vo.eI,{label:(0,s.t)("column")},(0,R.Y)(rt.l6,(0,C.A)({options:a.map((e=>({value:e.column_name,label:e.verbose_name||e.column_name,key:e.id,customLabel:this.renderColumnOption(e)})))},b))),(0,R.Y)(vo.eI,{label:(0,s.t)("aggregate")},(0,R.Y)(rt.l6,(0,C.A)({options:U.K8.map((e=>({value:e,label:e,key:e})))},y)))),(0,R.Y)(Ze.Ay.TabPane,{key:co.t.SQL,tab:A.disallow_adhoc_metrics?(0,R.Y)(B.m,{title:(0,s.t)("Custom SQL ad-hoc metrics are not enabled for this dataset")},(0,s.t)("Custom SQL")):(0,s.t)("Custom SQL"),"data-test":"adhoc-metric-edit-tab#custom",disabled:A.disallow_adhoc_metrics},(0,R.Y)(bo.YU,{"data-test":"sql-editor",showLoadingForImport:!0,ref:this.handleAceEditorRef,keywords:m,height:this.state.height-80+"px",onChange:this.onSqlExpressionChange,width:"100%",showGutter:!1,value:f.sqlExpression||f.translateToSql({transformCountDistinct:!0}),editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,className:"filter-sql-editor",wrapEnabled:!0}))),(0,R.Y)("div",null,(0,R.Y)(Te.A,{buttonSize:"small",onClick:this.onResetStateAndClose,"data-test":"AdhocMetricEdit#cancel",cta:!0},(0,s.t)("Close")),(0,R.Y)(Te.A,{disabled:!w||!S,buttonStyle:"primary",buttonSize:"small","data-test":"AdhocMetricEdit#save",onClick:this.onSave,cta:!0},(0,s.t)("Save")),(0,R.Y)("i",{role:"button","aria-label":"Resize",tabIndex:0,onMouseDown:this.onDragDown,className:"fa fa-expand edit-popover-resize text-muted"})))}}Eo.propTypes=Co,Eo.defaultProps=So;class _o extends o.PureComponent{constructor(e){super(e),this.onPopoverResize=this.onPopoverResize.bind(this),this.onLabelChange=this.onLabelChange.bind(this),this.closePopover=this.closePopover.bind(this),this.togglePopover=this.togglePopover.bind(this),this.getCurrentTab=this.getCurrentTab.bind(this),this.getCurrentLabel=this.getCurrentLabel.bind(this),this.onChange=this.onChange.bind(this),this.handleDatasetModal=this.handleDatasetModal.bind(this),this.state={adhocMetric:e.adhocMetric,popoverVisible:!1,title:{label:e.adhocMetric.label,hasCustomLabel:e.adhocMetric.hasCustomLabel},currentLabel:"",labelModified:!1,isTitleEditDisabled:!1,showSaveDatasetModal:!1}}static getDerivedStateFromProps(e,t){return t.adhocMetric.optionName!==e.adhocMetric.optionName?{adhocMetric:e.adhocMetric,title:{label:e.adhocMetric.label,hasCustomLabel:e.adhocMetric.hasCustomLabel},currentLabel:"",labelModified:!1}:{adhocMetric:e.adhocMetric}}onLabelChange(e){var t;const{verbose_name:n,metric_name:o}=this.props.savedMetric,a=null==(t=this.props.adhocMetric)?void 0:t.getDefaultLabel(),r=e.target.value;this.setState((e=>({title:{label:r||e.currentLabel||n||o||a,hasCustomLabel:!!r},labelModified:!0})))}onPopoverResize(){this.forceUpdate()}handleDatasetModal(e){this.setState({showSaveDatasetModal:e})}closePopover(){this.togglePopover(!1),this.setState({labelModified:!1})}togglePopover(e){this.setState({popoverVisible:e})}getCurrentTab(e){this.setState({isTitleEditDisabled:e===ko})}getCurrentLabel({savedMetricLabel:e,adhocMetricLabel:t}){const n=e||t;this.setState({currentLabel:n,labelModified:!0}),!e&&this.state.title.hasCustomLabel||this.setState({title:{label:n,hasCustomLabel:!1}})}onChange(e,t){this.props.onMetricEdit({...e,...this.state.title},t)}render(){const{adhocMetric:e,savedMetric:t,columns:n,savedMetricsOptions:a,datasource:r,isControlledComponent:i}=this.props,{verbose_name:l,metric_name:c}=t,{hasCustomLabel:d,label:u}=e,h=d?u:e.getDefaultLabel(),p=this.state.labelModified?this.state.title:{label:l||c||h,hasCustomLabel:d},{visible:f,togglePopover:g,closePopover:m}=i?{visible:this.props.visible,togglePopover:this.props.togglePopover,closePopover:this.props.closePopover}:{visible:this.state.popoverVisible,togglePopover:this.togglePopover,closePopover:this.closePopover},v=(0,R.Y)(go.y,null,(0,R.Y)(Eo,{adhocMetric:e,columns:n,savedMetricsOptions:a,savedMetric:t,datasource:r,handleDatasetModal:this.handleDatasetModal,onResize:this.onPopoverResize,onClose:m,onChange:this.onChange,getCurrentTab:this.getCurrentTab,getCurrentLabel:this.getCurrentLabel,isNewMetric:this.props.isNew,isLabelModified:this.state.labelModified&&h!==this.state.title.label})),b=(0,R.Y)(fo,{title:p,onChange:this.onLabelChange,isEditDisabled:this.state.isTitleEditDisabled});return(0,R.Y)(o.Fragment,null,this.state.showSaveDatasetModal&&(0,R.Y)(me.D,{visible:this.state.showSaveDatasetModal,onHide:()=>this.handleDatasetModal(!1),buttonTextOnSave:(0,s.t)("Save"),buttonTextOnOverwrite:(0,s.t)("Overwrite"),modalDescription:(0,s.t)("Save this query as a virtual dataset to continue exploring"),datasource:r}),(0,R.Y)(dt.A,{placement:"right",trigger:"click",content:v,defaultVisible:f,visible:f,onVisibleChange:g,title:b,destroyTooltipOnHide:!0},this.props.children))}}const Yo=_o,To={adhocMetric:M().instanceOf(co.A),onMetricEdit:M().func.isRequired,onRemoveMetric:M().func,columns:M().arrayOf(lo.A),savedMetricsOptions:M().arrayOf(uo.A),savedMetric:uo.A,datasource:M().object,onMoveLabel:M().func,onDropLabel:M().func,index:M().number,type:M().string,multi:M().bool,datasourceWarningMessage:M().string};class Mo extends o.PureComponent{constructor(e){super(e),this.onRemoveMetric=this.onRemoveMetric.bind(this)}onRemoveMetric(e){null==e||e.stopPropagation(),this.props.onRemoveMetric(this.props.index)}render(){const{adhocMetric:e,onMetricEdit:t,columns:n,savedMetricsOptions:o,savedMetric:a,datasource:r,onMoveLabel:i,onDropLabel:l,index:s,type:c,multi:d,datasourceWarningMessage:u}=this.props;return(0,R.Y)(Yo,{adhocMetric:e,onMetricEdit:t,columns:n,savedMetricsOptions:o,savedMetric:a,datasource:r},(0,R.Y)(fn.Px,{savedMetric:a,adhocMetric:e,label:e.label,onRemove:this.onRemoveMetric,onMoveLabel:i,onDropLabel:l,index:s,type:null!=c?c:so.S.AdhocMetricOption,withCaret:!0,isFunction:!0,multi:d,datasourceWarningMessage:u}))}}const Oo=Mo;Mo.propTypes=To;const Do={option:M().oneOfType([M().object,M().string]).isRequired,index:M().number.isRequired,onMetricEdit:M().func,onRemoveMetric:M().func,onMoveLabel:M().func,onDropLabel:M().func,columns:M().arrayOf(lo.A),savedMetrics:M().arrayOf(uo.A),savedMetricsOptions:M().arrayOf(uo.A),multi:M().bool,datasource:M().object,datasourceWarningMessage:M().string};function Ro({option:e,onMetricEdit:t,onRemoveMetric:n,columns:o,savedMetrics:a,savedMetricsOptions:r,datasource:i,onMoveLabel:l,onDropLabel:s,index:c,type:d,multi:u,datasourceWarningMessage:h}){let p;var f;if("string"==typeof e?(f=e,p=a.find((e=>e.metric_name===f))):e.metric_name&&(p=e),e instanceof co.A||p){var g;const a={onMetricEdit:t,onRemoveMetric:n,columns:o,savedMetricsOptions:r,datasource:i,adhocMetric:e instanceof co.A?e:new co.A({}),onMoveLabel:l,onDropLabel:s,index:c,savedMetric:null!=(g=p)?g:{},type:d,multi:u,datasourceWarningMessage:h};return(0,R.Y)(Oo,a)}return null}Ro.propTypes=Do;var No=n(8901);const Io={name:M().string.isRequired,onChange:M().func,value:M().oneOfType([M().arrayOf(M().oneOfType([M().string,No.A])),M().oneOfType([M().string,No.A])]),columns:M().arrayOf(lo.A),savedMetrics:M().arrayOf(uo.A),isLoading:M().bool,multi:M().bool,clearable:M().bool,datasource:M().object};function Lo(e,t,n){var o;return null!=(o=null==e?void 0:e.filter((e=>Array.isArray(t)?!t.includes(e.metric_name)||e.metric_name===n:e)))?o:[]}function jo(e){return e&&!(e instanceof co.A)&&e.expressionType}function $o(e){return e?Array.isArray(e)?e.map((e=>jo(e)?new co.A(e):e)):jo(e)?[new co.A(e)]:[e]:[]}const Po={metric_name:"",expression:""},Fo=({onChange:e,multi:t,value:n,columns:a,savedMetrics:r,datasource:i,...l})=>{const[c,d]=(0,o.useState)($o(n)),u=(0,L.DP)(),h=(0,I.Z)(a),p=(0,I.Z)(r),f=(0,o.useCallback)((n=>{if(null===n)return void e(null);const o=(0,he.A)(n).map((e=>e.metric_name?e.metric_name:e)).filter((e=>e));e(t?o:o[0])}),[t,e]),g=(0,o.useCallback)((e=>{const t=[...c,e];d(t),f(t)}),[f,c]),m=(0,o.useCallback)(((e,t)=>{const n=c.map((n=>n!==t.metric_name&&void 0===n.optionName||n.optionName!==t.optionName?n:e));d(n),f(n)}),[f,c]),v=(0,o.useCallback)((e=>{if(!Array.isArray(c))return;const t=[...c];t.splice(e,1),d(t),f(t)}),[f,c]),b=(0,o.useCallback)(((e,t)=>{const n=[...c];[n[t],n[e]]=[n[e],n[t]],d(n)}),[c]),y=(0,o.useCallback)((()=>!t&&c.length>0),[t,c.length]),x=(0,o.useMemo)((()=>Lo(r,n,null)),[n,r]),w=(0,o.useMemo)((()=>new co.A({})),[c]),C=(0,o.useCallback)((e=>y()?e:(0,R.Y)(Yo,{adhocMetric:w,onMetricEdit:g,columns:a,savedMetricsOptions:x,savedMetric:Po,datasource:i,isNew:!0},e)),[a,i,y,w,g,x]);(0,o.useEffect)((()=>{if(n&&(!nt()(h,a)||!nt()(p,r))){const e=((e,t,n)=>(0,he.A)(e).filter((e=>"string"==typeof e||e.metric_name?null==n?void 0:n.some((t=>t.metric_name===e||t.metric_name===e.metric_name)):null==t?void 0:t.some((t=>!e.column||e.column.column_name===t.column_name)))))(n,a,r);nt()(e,n)||f(e)}}),[a,f,r]),(0,o.useEffect)((()=>{d($o(n))}),[n]);const S=(0,o.useCallback)((()=>f(c)),[f,c]),A=(0,o.useCallback)(((e,n)=>(0,R.Y)(Ro,{key:n,index:n,option:e,onMetricEdit:m,onRemoveMetric:v,columns:a,datasource:i,savedMetrics:r,savedMetricsOptions:Lo(r,c,null==c?void 0:c[n]),onMoveLabel:b,onDropLabel:S,multi:t})),[a,i,b,t,S,m,v,r,c]);return(0,R.Y)("div",{className:"metrics-select"},(0,R.Y)(fn.B3,null,(0,R.Y)(vt.A,l),C((0,R.Y)(fn.XB,{disabled:y(),"data-test":"add-metric-button"},(0,R.Y)(H.A.PlusLarge,{iconSize:"s",iconColor:u.colors.grayscale.light5})))),(0,R.Y)(fn.p6,null,c.length>0?c.map(((e,t)=>A(e,t))):C((0,R.Y)(fn.JG,null,(0,R.Y)(H.A.PlusSmall,{iconColor:u.colors.grayscale.light1}),(0,s.t)("Add metric")))))};Fo.propTypes=Io,Fo.defaultProps={onChange:()=>{},clearable:!0,savedMetrics:[],columns:[]};const Bo=Fo;var Ho=n(83780);const zo="fix",Uo="metric",Wo={onChange:M().func,value:M().object,isFloat:M().bool,datasource:M().object.isRequired,default:M().shape({type:M().oneOf(["fix","metric"]),value:M().oneOfType([M().string,M().number])})},qo={onChange:()=>{},default:{type:zo,value:5}};class Vo extends o.Component{constructor(e){super(e),this.onChange=this.onChange.bind(this),this.setType=this.setType.bind(this),this.setFixedValue=this.setFixedValue.bind(this),this.setMetric=this.setMetric.bind(this);const t=(e.value?e.value.type:e.default.type)||zo,n=(e.value?e.value.value:e.default.value)||"100";this.state={type:t,fixedValue:t===zo?n:"",metricValue:t===Uo?n:null}}onChange(){this.props.onChange({type:this.state.type,value:this.state.type===zo?this.state.fixedValue:this.state.metricValue})}setType(e){this.setState({type:e},this.onChange)}setFixedValue(e){this.setState({fixedValue:e},this.onChange)}setMetric(e){this.setState({metricValue:e},this.onChange)}render(){const e=(this.props.value||this.props.default).type||zo,t=this.props.datasource?this.props.datasource.columns:null,n=this.props.datasource?this.props.datasource.metrics:null;return(0,R.Y)("div",null,(0,R.Y)(vt.A,this.props),(0,R.Y)(Ke.A,{ghost:!0,css:e=>(0,R.AH)("&.ant-collapse>.ant-collapse-item.ant-collapse-no-arrow>.ant-collapse-header{border:0px;padding:0px 0px ",2*e.gridUnit,"px 0px;display:inline-block;}&.ant-collapse-ghost>.ant-collapse-item>.ant-collapse-content>.ant-collapse-content-box{padding:0px;& .well{margin-bottom:0px;padding:",2*e.gridUnit,"px;}}","")},(0,R.Y)(Ke.A.Panel,{showArrow:!1,header:(0,R.Y)(we.A,{onClick:()=>{}},this.state.type===zo&&(0,R.Y)("span",null,this.state.fixedValue),this.state.type===Uo&&(0,R.Y)("span",null,(0,R.Y)("span",null,(0,s.t)("metric"),": "),(0,R.Y)("strong",null,this.state.metricValue?this.state.metricValue.label:null)))},(0,R.Y)("div",{className:"well"},(0,R.Y)(Ho.A,{title:(0,s.t)("Fixed"),isSelected:e===zo,onSelect:()=>{this.setType(zo)}},(0,R.Y)(io.A,{isFloat:!0,onChange:this.setFixedValue,onFocus:()=>{this.setType(zo)},value:this.state.fixedValue})),(0,R.Y)(Ho.A,{title:(0,s.t)("Based on a metric"),isSelected:e===Uo,onSelect:()=>{this.setType(Uo)}},(0,R.Y)(Bo,{name:"metric",columns:t,savedMetrics:n,multi:!1,onFocus:()=>{this.setType(Uo)},onChange:this.setMetric,value:this.state.metricValue,datasource:this.props.datasource}))))))}}function Go(e){return void 0!==e.value}Vo.propTypes=Wo,Vo.defaultProps=qo;const Xo=(0,le.Ay)((({addDangerToast:e,allowClear:t=!0,ariaLabel:n,dataEndpoint:a,multi:r=!0,mutator:i,onChange:l,placeholder:c,value:d,...u})=>{const[h,p]=(0,o.useState)([]);return(0,o.useEffect)((()=>{pe.A.get({endpoint:a}).then((e=>{const t=i?i(e.json):e.json.result;p(t)})).catch((t=>(0,f.h4)(t).then((t=>{const{error:n}=t;e((0,s.t)("Error while fetching data: %s",n))}))))}),[e,a,i]),(0,R.Y)(rt.l6,{allowClear:t,ariaLabel:n||(0,s.t)("Select ..."),value:(()=>{const e=d||(void 0!==u.default?u.default:void 0);if(null!==e||h.find((e=>null===e.value)))return e})(),header:(0,R.Y)(vt.A,u),mode:r?"multiple":"single",onChange:e=>{let t=e;Array.isArray(e)&&(t=e.map((e=>Go(e)?e.value:e))),Go(e)&&(t=e.value),l(t)},options:h,placeholder:c})}));var Qo=n(57701),Ko=n(78554),Zo={name:"mlsake",styles:"margin-left:0;margin-right:0"};function Jo(e){return(0,R.Y)(Ko.A,(0,C.A)({},e,{css:Zo}))}var ea=n(9379),ta=n(19855);const na={label:M().string,tooltip:M().string,colType:M().string,width:M().string,height:M().string,timeLag:M().oneOfType([M().string,M().number]),timeRatio:M().string,comparisonType:M().string,showYAxis:M().bool,yAxisBounds:M().array,bounds:M().array,d3format:M().string,dateFormat:M().string,onChange:M().func},oa={label:(0,s.t)("Time series columns"),tooltip:"",colType:"",width:"",height:"",timeLag:"",timeRatio:"",comparisonType:"",showYAxis:!1,yAxisBounds:[null,null],bounds:[null,null],d3format:"",dateFormat:""},aa=[{value:"value",label:(0,s.t)("Actual value"),key:"value"},{value:"diff",label:(0,s.t)("Difference"),key:"diff"},{value:"perc",label:(0,s.t)("Percentage"),key:"perc"},{value:"perc_change",label:(0,s.t)("Percentage change"),key:"perc_change"}],ra=[{value:"time",label:(0,s.t)("Time comparison"),key:"time"},{value:"contrib",label:(0,s.t)("Contribution"),key:"contrib"},{value:"spark",label:(0,s.t)("Sparkline"),key:"spark"},{value:"avg",label:(0,s.t)("Period average"),key:"avg"}],ia=(0,D.A)(rt.fI)`
  margin-top: ${({theme:e})=>2*e.gridUnit}px;
  display: flex;
  align-items: center;
`,la=(0,D.A)(rt.fv)`
  display: flex;
  align-items: center;
`,sa=(0,D.A)(lt.W)`
  margin-left: ${({theme:e})=>e.gridUnit}px;
  color: ${({theme:e})=>e.colors.grayscale.light1};
`,ca=D.A.div`
  margin-top: ${({theme:e})=>5*e.gridUnit}px;
  display: flex;
  justify-content: center;
`;class da extends o.Component{constructor(e){super(e),this.onSave=this.onSave.bind(this),this.onClose=this.onClose.bind(this),this.resetState=this.resetState.bind(this),this.initialState=this.initialState.bind(this),this.onPopoverVisibleChange=this.onPopoverVisibleChange.bind(this),this.state=this.initialState()}initialState(){return{label:this.props.label,tooltip:this.props.tooltip,colType:this.props.colType,width:this.props.width,height:this.props.height,timeLag:this.props.timeLag||0,timeRatio:this.props.timeRatio,comparisonType:this.props.comparisonType,showYAxis:this.props.showYAxis,yAxisBounds:this.props.yAxisBounds,bounds:this.props.bounds,d3format:this.props.d3format,dateFormat:this.props.dateFormat,popoverVisible:!1}}resetState(){const e=this.initialState();this.setState({...e})}onSave(){this.props.onChange(this.state),this.setState({popoverVisible:!1})}onClose(){this.resetState()}onSelectChange(e,t){this.setState({[e]:t})}onTextInputChange(e,t){this.setState({[e]:t.target.value})}onCheckboxChange(e,t){this.setState({[e]:t})}onBoundsChange(e){this.setState({bounds:e})}onPopoverVisibleChange(e){e?this.setState({popoverVisible:e}):this.resetState()}onYAxisBoundsChange(e){this.setState({yAxisBounds:e})}textSummary(){return`${this.props.label}`}formRow(e,t,n,o){return(0,R.Y)(ia,null,(0,R.Y)(la,{xs:24,md:11},e,(0,R.Y)(sa,{placement:"top",tooltip:t,label:n})),(0,R.Y)(rt.fv,{xs:24,md:13},o))}renderPopover(){return(0,R.Y)("div",{id:"ts-col-popo",style:{width:320}},this.formRow((0,s.t)("Label"),(0,s.t)("The column header label"),"time-lag",(0,R.Y)(mt.pd,{value:this.state.label,onChange:this.onTextInputChange.bind(this,"label"),placeholder:(0,s.t)("Label")})),this.formRow((0,s.t)("Tooltip"),(0,s.t)("Column header tooltip"),"col-tooltip",(0,R.Y)(mt.pd,{value:this.state.tooltip,onChange:this.onTextInputChange.bind(this,"tooltip"),placeholder:(0,s.t)("Tooltip")})),this.formRow((0,s.t)("Type"),(0,s.t)("Type of comparison, value difference or percentage"),"col-type",(0,R.Y)(rt.l6,{ariaLabel:(0,s.t)("Type"),value:this.state.colType||void 0,onChange:this.onSelectChange.bind(this,"colType"),options:ra})),(0,R.Y)("hr",null),"spark"===this.state.colType&&this.formRow((0,s.t)("Width"),(0,s.t)("Width of the sparkline"),"spark-width",(0,R.Y)(mt.pd,{value:this.state.width,onChange:this.onTextInputChange.bind(this,"width"),placeholder:(0,s.t)("Width")})),"spark"===this.state.colType&&this.formRow((0,s.t)("Height"),(0,s.t)("Height of the sparkline"),"spark-width",(0,R.Y)(mt.pd,{value:this.state.height,onChange:this.onTextInputChange.bind(this,"height"),placeholder:(0,s.t)("Height")})),["time","avg"].indexOf(this.state.colType)>=0&&this.formRow((0,s.t)("Time lag"),(0,s.t)("Number of periods to compare against. You can use negative numbers to compare from the beginning of the time range."),"time-lag",(0,R.Y)(mt.pd,{value:this.state.timeLag,onChange:this.onTextInputChange.bind(this,"timeLag"),placeholder:(0,s.t)("Time Lag")})),["spark"].indexOf(this.state.colType)>=0&&this.formRow((0,s.t)("Time ratio"),(0,s.t)("Number of periods to ratio against"),"time-ratio",(0,R.Y)(mt.pd,{value:this.state.timeRatio,onChange:this.onTextInputChange.bind(this,"timeRatio"),placeholder:(0,s.t)("Time Ratio")})),"time"===this.state.colType&&this.formRow((0,s.t)("Type"),(0,s.t)("Type of comparison, value difference or percentage"),"comp-type",(0,R.Y)(rt.l6,{ariaLabel:(0,s.t)("Type"),value:this.state.comparisonType||void 0,onChange:this.onSelectChange.bind(this,"comparisonType"),options:aa})),"spark"===this.state.colType&&this.formRow((0,s.t)("Show Y-axis"),(0,s.t)("Show Y-axis on the sparkline. Will display the manually set min/max if set or min/max values in the data otherwise."),"show-y-axis-bounds",(0,R.Y)(St.A,{value:this.state.showYAxis,onChange:this.onCheckboxChange.bind(this,"showYAxis")})),"spark"===this.state.colType&&this.formRow((0,s.t)("Y-axis bounds"),(0,s.t)("Manually set min/max values for the y-axis."),"y-axis-bounds",(0,R.Y)(Ct,{value:this.state.yAxisBounds,onChange:this.onYAxisBoundsChange.bind(this)})),"spark"!==this.state.colType&&this.formRow((0,s.t)("Color bounds"),(0,s.t)("Number bounds used for color encoding from red to blue.\n               Reverse the numbers for blue to red. To get pure red or blue,\n               you can enter either only min or max."),"bounds",(0,R.Y)(Ct,{value:this.state.bounds,onChange:this.onBoundsChange.bind(this)})),this.formRow((0,s.t)("Number format"),(0,s.t)("Optional d3 number format string"),"d3-format",(0,R.Y)(mt.pd,{value:this.state.d3format,onChange:this.onTextInputChange.bind(this,"d3format"),placeholder:(0,s.t)("Number format string")})),"spark"===this.state.colType&&this.formRow((0,s.t)("Date format"),(0,s.t)("Optional d3 date format string"),"date-format",(0,R.Y)(mt.pd,{value:this.state.dateFormat,onChange:this.onTextInputChange.bind(this,"dateFormat"),placeholder:(0,s.t)("Date format string")})),(0,R.Y)(ca,null,(0,R.Y)(Te.A,{buttonSize:"small",onClick:this.onClose,cta:!0},(0,s.t)("Close")),(0,R.Y)(Te.A,{buttonStyle:"primary",buttonSize:"small",onClick:this.onSave,cta:!0},(0,s.t)("Save"))))}render(){return(0,R.Y)("span",null,this.textSummary()," ",(0,R.Y)(dt.A,{trigger:"click",content:this.renderPopover(),title:(0,s.t)("Column Configuration"),visible:this.state.popoverVisible,onVisibleChange:this.onPopoverVisibleChange},(0,R.Y)(lt.W,{icon:"edit",className:"text-primary",label:"edit-ts-column"})))}}da.propTypes=na,da.defaultProps=oa;var ua=n(3800);const ha=["longitude","latitude","zoom","bearing","pitch"],pa={onChange:M().func,value:M().shape({longitude:M().number,latitude:M().number,zoom:M().number,bearing:M().number,pitch:M().number}),default:M().object,name:M().string.isRequired};class fa extends o.Component{constructor(e){super(e),this.onChange=this.onChange.bind(this)}onChange(e,t){this.props.onChange({...this.props.value,[e]:t})}renderTextControl(e){return(0,R.Y)("div",{key:e},(0,R.Y)(vo.lR,null,e),(0,R.Y)(io.A,{value:this.props.value[e],onChange:this.onChange.bind(this,e),isFloat:!0}))}renderPopover(){return(0,R.Y)("div",{id:`filter-popover-${this.props.name}`},ha.map((e=>this.renderTextControl(e))))}renderLabel(){return this.props.value.longitude&&this.props.value.latitude?`${(0,ua.decimal2sexagesimal)(this.props.value.longitude)} | ${(0,ua.decimal2sexagesimal)(this.props.value.latitude)}`:"N/A"}render(){return(0,R.Y)("div",null,(0,R.Y)(vt.A,this.props),(0,R.Y)(kn.A,{container:document.body,trigger:"click",placement:"right",content:this.renderPopover(),title:(0,s.t)("Viewport")},(0,R.Y)(we.A,{className:"pointer"},this.renderLabel())))}}fa.propTypes=pa,fa.defaultProps={onChange:()=>{},default:{type:"fix",value:5},value:{longitude:6.85236157047845,latitude:31.222656842808707,zoom:1,bearing:0,pitch:0}};var ga=n(38708),ma=n(32416);const va=[{name:"echarts_timeseries_line",icon:(0,R.Y)(H.A.LineChartTile,null)},{name:"echarts_timeseries_bar",icon:(0,R.Y)(H.A.BarChartTile,null)},{name:"echarts_area",icon:(0,R.Y)(H.A.AreaChartTile,null)},{name:"table",icon:(0,R.Y)(H.A.TableChartTile,null)},{name:"big_number_total",icon:(0,R.Y)(H.A.BigNumberChartTile,null)},{name:"pie",icon:(0,R.Y)(H.A.PieChartTile,null)}],ba={iconSize:"l",css:e=>R.AH`
    padding: ${e.gridUnit}px;
    & > * {
      line-height: 0;
    }
  `},ya=({isActive:e,isRendered:t,vizMeta:n,onTileClick:a})=>{var r;const{mountedPluginMetadata:i}=(0,F.Q)(),l=(0,o.useRef)(null),c=(0,L.DP)(),d=2*c.transitionTiming,[u,h]=(0,o.useState)(!1),[p,f]=(0,o.useState)(!1),[g,m]=(0,o.useState)(!1),v=n.name?(null==(r=i[n.name])?void 0:r.name)||`${n.name}`:(0,s.t)("Select Viz Type"),b=(0,o.useCallback)((()=>{a(n.name),f(!0),h(!1),setTimeout((()=>{f(!1)}),1e3*d)}),[a,d,n.name]);(0,o.useEffect)((()=>{m(Boolean(!p&&(!e||l.current&&l.current.scrollWidth>l.current.clientWidth)))}),[e,p]);const y=(0,o.useMemo)((()=>e?{}:{role:"button",tabIndex:0,onClick:b}),[b,e]);let x=null;return g&&(x=t?(0,s.t)("Currently rendered: %s",v):v),(0,R.Y)(B.m,{title:x,onVisibleChange:e=>h(e),visible:u&&!p,placement:"top",mouseEnterDelay:.4},(0,R.Y)("div",(0,C.A)({},y,{css:R.AH`
          display: flex;
          align-items: center;
          text-transform: uppercase;

          color: ${c.colors.grayscale.base};
          font-weight: ${c.typography.weights.bold};
          border-radius: 6px;
          white-space: nowrap;
          overflow: hidden;
          max-width: fit-content;

          ${!e&&R.AH`
            flex-shrink: 0;
            width: ${6*c.gridUnit}px;
            background-color: transparent;
            transition: none;
            &:hover svg path {
              fill: ${c.colors.primary.base};
              transition: fill ${c.transitionTiming}s ease-out;
            }
          `}

          ${e&&R.AH`
            width: 100%;
            background-color: ${c.colors.grayscale.light4};
            transition:
              width ${d}s ease-out,
              background-color ${d}s ease-out;
            cursor: default;
            svg path {
              fill: ${c.colors.primary.base};
            }
          `}
        `}),n.icon," ",(0,R.Y)("span",{css:R.AH`
            overflow: hidden;
            text-overflow: ellipsis;
            min-width: 0;
            padding-right: ${c.gridUnit}px;
          `,ref:l},v)))},xa=o.memo((({currentSelection:e,onChange:t})=>{const n=(0,a.d4)((e=>{var t,n,o;return null==(t=e.charts)||null==(n=t[(0,ne.kD)(e.explore)])||null==(o=n.latestQueryFormData)?void 0:o.viz_type})),r=(0,o.useMemo)((()=>{const t=[...va];return e&&va.every((t=>t.name!==e))&&e!==n&&t.unshift({name:e,icon:(0,R.Y)(H.A.MonitorOutlined,(0,C.A)({},ba,{"aria-label":"monitor"}))}),n&&va.every((e=>e.name!==n))&&t.unshift({name:n,icon:(0,R.Y)(H.A.CheckSquareOutlined,(0,C.A)({},ba,{"aria-label":"check-square"}))}),t}),[e,n]);return(0,R.Y)("div",{css:e=>R.AH`
          display: flex;
          justify-content: space-between;
          column-gap: ${e.gridUnit}px;
        `,"data-test":"fast-viz-switcher"},r.map((o=>(0,R.Y)(ya,{vizMeta:o,isActive:e===o.name,isRendered:n===o.name,onTileClick:t,key:o.name}))))})),wa=((0,ga.A)().common.conf.VIZ_TYPE_DENYLIST||[]).concat(Object.values(p.fJ)),Ca=(0,de.A)();function Sa({vizType:e}){return(0,F.Q)().loading||Ca.has(e)?null:(0,R.Y)("div",{className:"text-danger",css:e=>R.AH`
        margin-top: ${e.gridUnit}px;
      `},(0,R.Y)("i",{className:"fa fa-exclamation-circle text-danger"})," ",(0,R.Y)("small",null,(0,s.t)("This visualization type is not supported.")))}(0,ce.G7)(ce.TO.DASHBOARD_NATIVE_FILTERS)&&!wa.includes("filter_box")&&wa.push("filter_box");const Aa=(0,D.A)(Je.A)`
  .ant-modal-body {
    padding: 0;
  }
`;var ka=n(25671),Ea=n(36818),_a=n(28990);const Ya=(0,D.A)(mt.YI)`
  width: 100%;
`,Ta=D.A.div`
  display: flex;
  justify-content: flex-end;
`,Ma=[{value:Ea.fH.None,label:(0,s.t)("None")},{value:Ea.fH.GreaterThan,label:">"},{value:Ea.fH.LessThan,label:"<"},{value:Ea.fH.GreaterOrEqual,label:"â¥"},{value:Ea.fH.LessOrEqual,label:"â¤"},{value:Ea.fH.Equal,label:"="},{value:Ea.fH.NotEqual,label:"â "},{value:Ea.fH.Between,label:"< x <"},{value:Ea.fH.BetweenOrEqual,label:"â¤ x â¤"},{value:Ea.fH.BetweenOrLeftEqual,label:"â¤ x <"},{value:Ea.fH.BetweenOrRightEqual,label:"< x â¤"}],Oa=(e,t)=>n=>(o,a)=>n&&a&&!e(Number(n),Number(a))?Promise.reject(new Error(t)):Promise.resolve(),Da=Oa(((e,t)=>e>t),(0,s.t)("This value should be smaller than the right target value")),Ra=Oa(((e,t)=>e<t),(0,s.t)("This value should be greater than the left target value")),Na=e=>e&&Ea.ro.includes(e),Ia=e=>!e||e===Ea.fH.None,La=[{required:!0,message:(0,s.t)("Required")}],ja=[{required:!0,message:(0,s.t)("Required")},({getFieldValue:e})=>({validator:Da(e("targetValueRight"))})],$a=[{required:!0,message:(0,s.t)("Required")},({getFieldValue:e})=>({validator:Ra(e("targetValueLeft"))})],Pa=["targetValueRight"],Fa=["targetValueLeft"],Ba=(e,t)=>Ia(e.operator)!==Ia(t.operator)||Na(e.operator)!==Na(t.operator),Ha=(0,R.Y)(vo.eI,{name:"operator",label:(0,s.t)("Operator"),rules:La,initialValue:Ma[0].value},(0,R.Y)(_a.A,{ariaLabel:(0,s.t)("Operator"),options:Ma})),za=({getFieldValue:e})=>Ia(e("operator"))?(0,R.Y)(rt.fI,{gutter:12},(0,R.Y)(rt.fv,{span:6},Ha)):Na(e("operator"))?(0,R.Y)(rt.fI,{gutter:12},(0,R.Y)(rt.fv,{span:9},(0,R.Y)(vo.eI,{name:"targetValueLeft",label:(0,s.t)("Left value"),rules:ja,dependencies:Pa,validateTrigger:"onBlur",trigger:"onBlur"},(0,R.Y)(Ya,null))),(0,R.Y)(rt.fv,{span:6},Ha),(0,R.Y)(rt.fv,{span:9},(0,R.Y)(vo.eI,{name:"targetValueRight",label:(0,s.t)("Right value"),rules:$a,dependencies:Fa,validateTrigger:"onBlur",trigger:"onBlur"},(0,R.Y)(Ya,null)))):(0,R.Y)(rt.fI,{gutter:12},(0,R.Y)(rt.fv,{span:6},Ha),(0,R.Y)(rt.fv,{span:18},(0,R.Y)(vo.eI,{name:"targetValue",label:(0,s.t)("Target value"),rules:La},(0,R.Y)(Ya,null)))),Ua=({config:e,onChange:t,columns:n=[]})=>{var o;const a=[{value:(r=(0,L.DP)()).colors.success.light1,label:(0,s.t)("success")},{value:r.colors.alert.light1,label:(0,s.t)("alert")},{value:r.colors.error.light1,label:(0,s.t)("error")},{value:r.colors.success.dark1,label:(0,s.t)("success dark")},{value:r.colors.alert.dark1,label:(0,s.t)("alert dark")},{value:r.colors.error.dark1,label:(0,s.t)("error dark")}];var r;return(0,R.Y)(vo.lV,{onFinish:t,initialValues:e,requiredMark:"optional",layout:"vertical"},(0,R.Y)(rt.fI,{gutter:12},(0,R.Y)(rt.fv,{span:12},(0,R.Y)(vo.eI,{name:"column",label:(0,s.t)("Column"),rules:La,initialValue:null==(o=n[0])?void 0:o.value},(0,R.Y)(_a.A,{ariaLabel:(0,s.t)("Select column"),options:n}))),(0,R.Y)(rt.fv,{span:12},(0,R.Y)(vo.eI,{name:"colorScheme",label:(0,s.t)("Color scheme"),rules:La,initialValue:a[0].value},(0,R.Y)(_a.A,{ariaLabel:(0,s.t)("Color scheme"),options:a})))),(0,R.Y)(vo.eI,{noStyle:!0,shouldUpdate:Ba},za),(0,R.Y)(vo.eI,null,(0,R.Y)(Ta,null,(0,R.Y)(Te.A,{htmlType:"submit",buttonStyle:"primary"},(0,s.t)("Apply")))))},Wa=({title:e,columns:t,onChange:n,config:a,children:r,...i})=>{const[l,s]=(0,o.useState)(!1),c=(0,o.useCallback)((e=>{s(!1),n(e)}),[n]);return(0,R.Y)(kn.A,(0,C.A)({title:e,content:(0,R.Y)(Ua,{onChange:c,config:a,columns:t}),visible:l,onVisibleChange:s,trigger:["click"],overlayStyle:{width:"450px"}},i),r)},qa=D.A.div`
  ${({theme:e})=>R.AH`
    padding: ${e.gridUnit}px;
    border: solid 1px ${e.colors.grayscale.light2};
    border-radius: ${e.gridUnit}px;
  `}
`,Va=(0,D.A)(fn.a2)`
  &,
  & > div {
    margin-bottom: ${({theme:e})=>e.gridUnit}px;
    :last-child {
      margin-bottom: 0;
    }
  }
`,Ga=D.A.button`
  ${({theme:e})=>R.AH`
    color: ${e.colors.grayscale.light1};
    height: 100%;
    width: ${6*e.gridUnit}px;
    border: none;
    border-right: solid 1px ${e.colors.grayscale.dark2}0C;
    padding: 0;
    outline: none;
    border-bottom-left-radius: 3px;
    border-top-left-radius: 3px;
  `}
`,Xa=({value:e,onChange:t,columnOptions:n,verboseMap:a,removeIrrelevantConditions:r,...i})=>{const l=(0,L.DP)(),[c,d]=(0,o.useState)(null!=e?e:[]);return(0,o.useEffect)((()=>{t&&t(c)}),[c,t]),(0,o.useEffect)((()=>{if(r){const e=c.filter((e=>n.some((t=>(null==t?void 0:t.value)===(null==e?void 0:e.column)))));e.length!==c.length&&r&&d(e)}}),[c,n,r]),(0,R.Y)("div",null,(0,R.Y)(vt.A,i),(0,R.Y)(qa,null,c.map(((e,t)=>(0,R.Y)(Va,{key:t},(0,R.Y)(Ga,{onClick:()=>(e=>{d((t=>t.filter(((t,n)=>n!==e))))})(t)},(0,R.Y)(H.A.XSmall,{iconColor:l.colors.grayscale.light1})),(0,R.Y)(Wa,{title:(0,s.t)("Edit formatter"),config:e,columns:n,onChange:e=>((e,t)=>{const n=[...c];n.splice(t,1,e),d(n)})(e,t),destroyTooltipOnHide:!0},(0,R.Y)(fn.a2,{withCaret:!0},(0,R.Y)(fn.JU,null,(({column:e,operator:t,targetValue:n,targetValueLeft:o,targetValueRight:r})=>{var i;const l=null!=(i=e&&(null==a?void 0:a[e]))?i:e;switch(t){case Ea.fH.None:return`${l}`;case Ea.fH.Between:return`${o} ${Ea.fH.LessThan} ${l} ${Ea.fH.LessThan} ${r}`;case Ea.fH.BetweenOrEqual:return`${o} ${Ea.fH.LessOrEqual} ${l} ${Ea.fH.LessOrEqual} ${r}`;case Ea.fH.BetweenOrLeftEqual:return`${o} ${Ea.fH.LessOrEqual} ${l} ${Ea.fH.LessThan} ${r}`;case Ea.fH.BetweenOrRightEqual:return`${o} ${Ea.fH.LessThan} ${l} ${Ea.fH.LessOrEqual} ${r}`;default:return`${l} ${t} ${n}`}})(e)),(0,R.Y)(fn.Bt,null,(0,R.Y)(H.A.CaretRight,{iconColor:l.colors.grayscale.light1}))))))),(0,R.Y)(Wa,{title:(0,s.t)("Add new formatter"),columns:n,onChange:e=>{d((t=>[...t,e]))},destroyTooltipOnHide:!0},(0,R.Y)(fn.JG,null,(0,R.Y)(H.A.PlusSmall,{iconColor:l.colors.grayscale.light1}),(0,s.t)("Add new color formatter")))))};var Qa=n(26206),Ka=n(43716);const Za=o.createContext(!1),Ja=o.createContext([{},()=>{}]),er=D.A.div`
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 0;
`,tr=(e={},t)=>{if(t.canDrop)return{...e,[t.key]:t.canDrop};if(t.key){const n={...e};return delete n[t.key],n}return e},nr=({children:e})=>{const t=(0,Ka.u)(),[n,a]=o.useState(t.getMonitor().isDragging());(0,o.useEffect)((()=>{const e=t.getMonitor(),n=e.subscribeToStateChange((()=>{if("dragIndex"in(e.getItem()||{}))return;const t=e.isDragging();a(t)}));return()=>{n()}}),[t]);const r=(0,o.useReducer)(tr,{});return(0,R.Y)(Ja.Provider,{value:r},(0,R.Y)(Za.Provider,{value:n},(0,R.Y)(er,null,e)))};function or({displayGhostButton:e=!0,accept:t,valuesRenderer:n,isLoading:a,...r}){const i=(0,L.DP)(),l=r.canDrop,c=r.canDropValue,d=(0,o.useCallback)((e=>{var t;return l(e)&&(null==(t=null==c?void 0:c(e.value))||t)}),[l,c]),[{isOver:u,canDrop:h},p]=(0,Qa.H)({accept:a?[]:t,drop:e=>{r.onDrop(e),null==r.onDropValue||r.onDropValue(e.value)},canDrop:d,collect:e=>({isOver:e.isOver(),canDrop:e.canDrop(),type:e.getItemType()})}),f=(0,o.useContext)(Ja)[1];(0,o.useEffect)((()=>(f({key:r.name,canDrop:d}),()=>{f({key:r.name})})),[f,r.name,d]);const g=(0,o.useContext)(Za),m=(0,o.useMemo)((()=>n()),[n]);return(0,R.Y)("div",{ref:p},(0,R.Y)(fn.B3,null,(0,R.Y)(vt.A,r)),(0,R.Y)(fn.f$,{"data-test":"dnd-labels-container",canDrop:h,isOver:u,isDragging:g,isLoading:a},m,e&&(0,R.Y)(fn.JG,{cancelHover:!r.onClickGhostButton,onClick:r.onClickGhostButton},(0,R.Y)(H.A.PlusSmall,{iconColor:i.colors.grayscale.light1}),(0,s.t)(r.ghostButtonText))))}var ar,rr=n(49953);!function(e){e.Isoline="ISOLINE",e.Isoband="ISOBAND"}(ar||(ar={}));const ir=D.A.div`
  margin-top: ${({theme:e})=>2*e.gridUnit}px;
`,lr=(0,D.A)(rt.fI)`
  width: 100%;
  gap: ${({theme:e})=>2*e.gridUnit}px;
`,sr=e=>e&&(e=>!(Object.keys(e).length<4)&&e.upperThreshold&&e.lowerThreshold)(e)?ar.Isoband:ar.Isoline,cr=(e,t)=>{const n={lowerThreshold:[],upperThreshold:[],strokeWidth:[],color:[]},o=(0,rr.A)(t.lowerThreshold);if(o&&n.lowerThreshold.push(o),e===ar.Isoline){const e=(0,rr.A)(t.strokeWidth);e&&n.strokeWidth.push(e)}if(e===ar.Isoband){const e=(0,rr.A)(t.upperThreshold);e&&n.upperThreshold.push(e),!e&&!o&&t.upperThreshold&&t.lowerThreshold&&parseFloat(t.lowerThreshold)>=parseFloat(t.upperThreshold)&&(n.lowerThreshold.push((0,s.t)("Lower threshold must be lower than upper threshold")),n.upperThreshold.push((0,s.t)("Upper threshold must be greater than lower threshold")))}return n},dr={lowerThreshold:void 0,upperThreshold:void 0,color:void 0,strokeWidth:void 0},ur=({value:e,onSave:t,onClose:n})=>{const[a,r]=(0,o.useState)(sr(e)),[i,l]=(0,o.useState)(e||dr),[c,d]=(0,o.useState)(cr(sr(e),e||dr)),[u,h]=(0,o.useState)(!1);(0,o.useEffect)((()=>{const e=a===ar.Isoband,t=Boolean(i.lowerThreshold)||0===i.lowerThreshold,n=Boolean(i.upperThreshold)||0===i.upperThreshold,o=Boolean(i.strokeWidth)||0===i.strokeWidth,r="object"==typeof i.color&&"r"in i.color&&"number"==typeof i.color.r&&"g"in i.color&&"number"==typeof i.color.g&&"b"in i.color&&"number"==typeof i.color.b&&"a"in i.color&&"number"==typeof i.color.a,l=cr(a,i);l!==c&&d(l);const s=e?t&&n&&r:t&&r&&o;s!==u&&h(s)}),[i,a]);const p=e=>{const t={...i};t.color={...e,a:100},l(t)},f=e=>{const t={...i};t.lowerThreshold=e,l(t)};return(0,R.Y)(o.Fragment,null,(0,R.Y)(Ze.Ay,{id:"contour-edit-tabs",onChange:e=>{r(e)},defaultActiveKey:sr(e)},(0,R.Y)(Ze.Ay.TabPane,{className:"adhoc-filter-edit-tab",key:ar.Isoline,tab:(0,s.t)("Isoline")},(0,R.Y)("div",{key:ar.Isoline,className:"isoline-popover-section"},(0,R.Y)(lr,null,(0,R.Y)(rt.fv,{flex:"1"},(0,R.Y)(vt.A,{name:"isoline-threshold",label:(0,s.t)("Threshold"),description:(0,s.t)("Defines the value that determines the boundary between different regions or levels in the data "),validationErrors:c.lowerThreshold,hovered:!0}),(0,R.Y)(io.A,{value:i.lowerThreshold,onChange:f}))),(0,R.Y)(lr,null,(0,R.Y)(rt.fv,{flex:"1"},(0,R.Y)(vt.A,{name:"isoline-stroke-width",label:(0,s.t)("Stroke Width"),description:(0,s.t)("The width of the Isoline in pixels"),validationErrors:c.strokeWidth,hovered:!0}),(0,R.Y)(io.A,{value:i.strokeWidth||"",onChange:e=>{const t={...i};t.strokeWidth=e,l(t)}})),(0,R.Y)(rt.fv,{flex:"1"},(0,R.Y)(vt.A,{name:"isoline-color",label:(0,s.t)("Color"),description:(0,s.t)("The color of the isoline"),validationErrors:c.color,hovered:!0}),(0,R.Y)(Mn,{value:"object"==typeof i&&(null==i?void 0:i.color),onChange:p}))))),(0,R.Y)(Ze.Ay.TabPane,{className:"adhoc-filter-edit-tab",key:ar.Isoband,tab:(0,s.t)("Isoband")},(0,R.Y)("div",{key:ar.Isoband,className:"isoline-popover-section"},(0,R.Y)(lr,null,(0,R.Y)(rt.fv,{flex:"1"},(0,R.Y)(vt.A,{name:"isoband-threshold-lower",label:(0,s.t)("Lower Threshold"),description:(0,s.t)("The lower limit of the threshold range of the Isoband"),validationErrors:c.lowerThreshold,hovered:!0}),(0,R.Y)(io.A,{value:i.lowerThreshold||"",onChange:f})),(0,R.Y)(rt.fv,{flex:"1"},(0,R.Y)(vt.A,{name:"isoband-threshold-upper",label:(0,s.t)("Upper Threshold"),description:(0,s.t)("The upper limit of the threshold range of the Isoband"),validationErrors:c.upperThreshold,hovered:!0}),(0,R.Y)(io.A,{value:i.upperThreshold||"",onChange:e=>{const t={...i};t.upperThreshold=e,l(t)}}))),(0,R.Y)(lr,null,(0,R.Y)(rt.fv,{flex:"1"},(0,R.Y)(vt.A,{name:"isoband-color",label:(0,s.t)("Color"),description:(0,s.t)("The color of the isoband"),validationErrors:c.color,hovered:!0}),(0,R.Y)(Mn,{value:null==i?void 0:i.color,onChange:p})))))),(0,R.Y)(ir,null,(0,R.Y)(Te.A,{buttonSize:"small",onClick:n,cta:!0},(0,s.t)("Close")),(0,R.Y)(Te.A,{"data-test":"adhoc-filter-edit-popover-save-button",disabled:!u||Object.keys(c).some((e=>c[e].length>0)),buttonStyle:"primary",buttonSize:"small",className:"m-r-5",onClick:()=>{if(u&&t){const e=a===ar.Isoline?(e=>({color:e.color,lowerThreshold:e.lowerThreshold,upperThreshold:void 0,strokeWidth:e.strokeWidth}))(i):(e=>({color:e.color,lowerThreshold:e.lowerThreshold,upperThreshold:e.upperThreshold,strokeWidth:void 0}))(i);t((e=>{const t={...e};return["lowerThreshold","upperThreshold","strokeWidth"].forEach((e=>{t[e]=Number(t[e])})),t})(e)),n&&n()}},cta:!0},(0,s.t)("Save"))))},hr=({value:e,saveContour:t,isControlled:n,visible:a,toggleVisibility:r,...i})=>{const[l,s]=(0,o.useState)(!1),c=n?a:l,d=n&&r?r:s,u=(0,R.Y)(ur,{value:e,onSave:t,onClose:()=>d(!1)});return(0,R.Y)(dt.A,{trigger:"click",content:u,defaultVisible:c,visible:c,onVisibleChange:d,destroyTooltipOnHide:!0},i.children)};var pr=n(52916),fr=n(70700);const gr=(0,D.A)(lt.W)`
  margin: 0 ${({theme:e})=>e.gridUnit}px;
`;function mr({children:e,index:t,clickClose:n,withCaret:a,isExtra:r,datasourceWarningMessage:i,canDelete:l=!0}){const c=(0,L.DP)(),d=(0,o.useCallback)((e=>{e.stopPropagation(),n(t)}),[n,t]);return(0,R.Y)(fn.a2,{"data-test":"option-label",withCaret:a},l&&(0,R.Y)(fn.Gh,{role:"button","data-test":"remove-control-button",onClick:d},(0,R.Y)(H.A.XSmall,{iconColor:c.colors.grayscale.light1})),(0,R.Y)(fn.JU,{"data-test":"control-label"},e),(!!i||r)&&(0,R.Y)(gr,{icon:"exclamation-triangle",placement:"top",bsStyle:"warning",tooltip:i||(0,s.t)("\n                This filter was inherited from the dashboard's context.\n                It won't be saved when saving the chart.\n              ")}),a&&(0,R.Y)(fn.Bt,null,(0,R.Y)(H.A.CaretRight,{iconColor:c.colors.grayscale.light1})))}const vr=D.A.div`
  width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`;function br(e){const{index:t,label:n,tooltipTitle:a,column:r,type:i,onShiftOptions:l,clickClose:s,withCaret:c,isExtra:d,datasourceWarningMessage:u,canDelete:h=!0,tooltipOverlay:p,...f}=e,g=(0,o.useRef)(null),m=(0,o.useRef)(null),[{isDragging:v},b]=(0,pr.i)({item:{type:i,dragIndex:t},collect:e=>({isDragging:e.isDragging()})}),[,y]=(0,Qa.H)({accept:i,hover:(e,n)=>{var o;if(!g.current)return;const{dragIndex:a}=e,r=t;if(a===r)return;const i=null==(o=g.current)?void 0:o.getBoundingClientRect(),s=(i.bottom-i.top)/2,c=n.getClientOffset(),d=c?c.y-i.top:0;a<r&&d<s||a>r&&d>s||(l(a,r),e.dragIndex=r)}}),x=!v&&a&&n&&a!==n||!v&&m&&m.current&&m.current.scrollWidth>m.current.clientWidth||!v&&p,w=()=>x?p?(0,R.Y)(B.m,{overlay:p},(0,R.Y)("span",null,n)):(0,R.Y)(B.m,{title:a||n},(0,R.Y)("span",null,n)):(0,R.Y)("span",null,n),S=()=>{const e=r&&(0,fr.q0)(r)?{verbose_name:r.label,expression:r.sqlExpression}:r;return(0,R.Y)(wo.V,{column:e,labelRef:m,showType:!0})};return b(y(g)),(0,R.Y)(fn.yJ,(0,C.A)({ref:g},f),(0,R.Y)(mr,{index:t,clickClose:s,withCaret:c,isExtra:d,datasourceWarningMessage:u,canDelete:h},(0,R.Y)((()=>n?(0,R.Y)(vr,{ref:m},(0,R.Y)(w,null)):r?(0,R.Y)(vr,null,(0,R.Y)(S,null)):null),null)))}const yr=(0,D.A)(br)`
  max-width: 100%;
  min-width: 100%;
`,xr=D.A.li`
  display: flex;
  align-items: center;
`,wr=D.A.div`
  background-color: ${({formattedColor:e})=>e};
  height: ${({theme:e})=>e.gridUnit}px;
  width: ${({theme:e})=>e.gridUnit}px;
  margin: 0 ${({theme:e})=>e.gridUnit}px;
`,Cr=({contour:e,index:t,saveContour:n,onClose:o,onShift:a})=>{const{lowerThreshold:r,upperThreshold:i,color:l,strokeWidth:c}=e,d=i,u=l?`rgba(${l.r}, ${l.g}, ${l.b}, 1)`:"undefined",h=d?(p=[r||-1,i],`${(0,s.t)("Threshold")}: [${p[0]}, ${p[1]}], color: ${u}`):((e,t)=>`${(0,s.t)("Threshold")}: ${e}, ${(0,s.t)("color")}: ${u}, ${(0,s.t)("stroke width")}: ${t}`)(r||-1,c);var p;const f=(0,R.Y)("div",{className:"contour-tooltip-overlay"},(0,R.Y)(xr,null,(0,s.t)("Threshold: "),d?`[${r}, ${i}]`:`${r}`),(0,R.Y)(xr,null,(0,s.t)("Color: "),(0,R.Y)(wr,{formattedColor:u})," ",u),!d&&(0,R.Y)(xr,null,`${(0,s.t)("Stroke Width:")} ${c}`));return(0,R.Y)(hr,{saveContour:n,value:e},(0,R.Y)(yr,{index:t,label:h,type:"ContourOption",withCaret:!0,clickClose:o,onShiftOptions:a,tooltipOverlay:f}))},Sr=[{lowerThreshold:4,color:{r:255,g:0,b:255,a:100},strokeWidth:1,zIndex:0},{lowerThreshold:5,color:{r:0,g:255,b:0,a:100},strokeWidth:2,zIndex:1},{lowerThreshold:6,upperThreshold:10,color:{r:0,g:0,b:255,a:100},zIndex:2}],Ar=(0,D.A)("div")`
  position: relative;
  width: calc(100% - ${({theme:e})=>e.gridUnit}px);
  bottom: ${({theme:e})=>4*e.gridUnit}px;
  left: 0;
`;var kr=n(62193),Er=n.n(kr);const _r=e=>(0,Ea.wS)(e)?e.column_name:e;class Yr{constructor(e,t,n){this.values=void 0,this.options=void 0,this.multi=void 0,this.options=e,this.multi=t,this.values=(0,he.A)(n).map((t=>t&&(0,fr.eh)(t)&&t in e?e[t]:(0,fr.eh)(t)?null:t)).filter(Boolean)}add(e){(0,fr.eh)(e)&&e in this.options?this.values.push(this.options[e]):(0,fr.eh)(e)||this.values.push(e)}del(e){this.values.splice(e,1)}replace(e,t){this.values[e]&&(this.values[e]=(0,fr.eh)(t)?this.options[t]:t)}swap(e,t){[this.values[e],this.values[t]]=[this.values[t],this.values[e]]}has(e){return this.values.some((t=>(0,fr.eh)(e)?t.column_name===e||t.label===e:t.column_name===e.label||t.label===e.label))}getValues(){return this.multi?this.values.map(_r):this.values.length>0?_r(this.values[0]):void 0}}var Tr=n(7350),Mr=n.n(Tr);const Or=(0,D.A)(rt.l6)`
  .metric-option {
    & > svg {
      min-width: ${({theme:e})=>4*e.gridUnit+"px"};
    }
    & > .option-label {
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
`,Dr=({columns:e,editedColumn:t,getCurrentTab:n,hasCustomLabel:r,isTemporal:i,label:l,onChange:c,onClose:d,setDatasetModal:u,setLabel:h})=>{const p=(0,a.d4)((e=>e.explore.datasource.type)),[f]=(0,o.useState)(l),[g,m,v]=(e=>e?(0,fr.q0)(e)?[e,void 0,void 0]:(0,Ea.oU)(e)?[void 0,e,void 0]:[void 0,void 0,e]:[void 0,void 0,void 0])(t),[b,y]=(0,o.useState)(g),[x,w]=(0,o.useState)(m),[C,S]=(0,o.useState)(v),[A,k]=(0,o.useState)(null),[E,_,Y]=function(e,t){const[n,a]=(0,o.useState)(U._R),[r,i]=(0,o.useState)(U.Z_),[l,s]=(0,o.useState)(0),[c,d]=(0,o.useState)(0),[u,h]=(0,o.useState)(0),[p,f]=(0,o.useState)(0),[g,m]=(0,o.useState)(n),[v,b]=(0,o.useState)(r),[y,x]=(0,o.useState)(!1),w=(0,o.useCallback)((e=>{e.preventDefault(),s(e.clientX),d(e.clientY)}),[]),C=(0,o.useCallback)((()=>{x(!1)}),[]),S=(0,o.useCallback)((e=>{h(e.clientX),f(e.clientY),x(!0)}),[]);(0,o.useEffect)((()=>{y?document.addEventListener("mousemove",w):(m(n),b(r),document.removeEventListener("mousemove",w))}),[w,y]);const A=(0,o.useCallback)(Mr()((({dragStartX:e,dragStartY:t,dragStartWidth:n,dragStartHeight:o,clientX:r,clientY:l,minWidth:s,minHeight:c})=>{a(Math.max(n+(r-e),s)),i(Math.max(o+(l-t),c))}),50),[i,a]);return(0,o.useEffect)((()=>{y&&A({dragStartX:u,dragStartY:p,dragStartWidth:g,dragStartHeight:v,clientX:l,clientY:c,minWidth:e,minHeight:t})}),[y,l,c,g,v,u,p]),(0,o.useEffect)((()=>(document.addEventListener("mouseup",C),()=>document.removeEventListener("mouseup",C))),[C]),[(0,R.Y)("i",{role:"button","aria-label":"Resize",tabIndex:0,onMouseDown:S,className:"fa fa-expand edit-popover-resize text-muted"}),n,r]}(U._R,U.Z_),T=(0,o.useRef)(null),[M,O]=(0,o.useMemo)((()=>null==e?void 0:e.reduce(((e,t)=>(t.expression?e[0].push(t):e[1].push(t),e)),[[],[]])),[e]),D=(0,o.useCallback)((e=>{y({label:l,sqlExpression:e,expressionType:"SQL"}),S(void 0),w(void 0)}),[l]),N=(0,o.useCallback)((e=>{const t=M.find((t=>t.column_name===e));w(t),S(void 0),y(void 0),h((null==t?void 0:t.verbose_name)||(null==t?void 0:t.column_name)||"")}),[M,h]),I=(0,o.useCallback)((e=>{const t=O.find((t=>t.column_name===e));w(void 0),S(t),y(void 0),h((null==t?void 0:t.verbose_name)||(null==t?void 0:t.column_name)||"")}),[h,O]),L=g?"sqlExpression":v||0===M.length?"simple":"saved";(0,o.useEffect)((()=>{n(L),k(L)}),[L,n,k]),(0,o.useEffect)((()=>{if(void 0===b&&"sqlExpression"===A&&r){const e=(null==C?void 0:C.column_name)||(null==x?void 0:x.expression)||"";y({label:l,sqlExpression:e,expressionType:"SQL"})}}),[b,L,r,n,l,x,C,A]);const j=(0,o.useCallback)((()=>{b&&b.label!==l&&(b.label=l);const e=b||x||C;e&&(c(e),d())}),[b,l,c,d,x,C]),$=(0,o.useCallback)((()=>{w(m),S(v),y(g),d()}),[g,m,v,d]),P=(0,o.useCallback)((e=>{var t;n(e),k(e),null==(t=T.current)||t.editor.focus()}),[n]),F=(0,o.useCallback)((()=>{var e;null==(e=T.current)||e.editor.resize()}),[]),B=()=>{u&&u(!0),d()},H=b||x||C,z=f!==l||(null==x?void 0:x.column_name)!==(null==m?void 0:m.column_name)||(null==C?void 0:C.column_name)!==(null==v?void 0:v.column_name)||(null==b?void 0:b.sqlExpression)!==(null==g?void 0:g.sqlExpression),W=(0,s.t)("Saved expressions"),q=(0,s.t)("Column");return(0,R.Y)(vo.lV,{layout:"vertical",id:"metrics-edit-popover"},(0,R.Y)(Ze.Ay,{id:"adhoc-metric-edit-tabs",defaultActiveKey:L,onChange:P,className:"adhoc-metric-edit-tabs",allowOverflow:!0,css:R.AH`
          height: ${Y}px;
          width: ${_}px;
        `},(0,R.Y)(Ze.Ay.TabPane,{key:"saved",tab:(0,s.t)("Saved")},M.length>0?(0,R.Y)(vo.eI,{label:W},(0,R.Y)(Or,{ariaLabel:W,value:null==x?void 0:x.column_name,onChange:N,allowClear:!0,autoFocus:!x,placeholder:(0,s.t)("%s column(s)",M.length),options:M.map((e=>({value:e.column_name,label:e.verbose_name||e.column_name,customLabel:(0,R.Y)(wo.V,{column:e,showType:!0}),key:e.column_name})))})):p===ue.cT.Table?(0,R.Y)(mo.u7,{image:"empty.svg",title:i?(0,s.t)("No temporal columns found"):(0,s.t)("No saved expressions found"),description:i?(0,s.t)('Add calculated temporal columns to dataset in "Edit datasource" modal'):(0,s.t)('Add calculated columns to dataset in "Edit datasource" modal')}):(0,R.Y)(mo.u7,{image:"empty.svg",title:i?(0,s.t)("No temporal columns found"):(0,s.t)("No saved expressions found"),description:i?(0,R.Y)(o.Fragment,null,(0,R.Y)("span",{role:"button",tabIndex:0,onClick:B},(0,s.t)("Create a dataset"))," ",(0,s.t)(" to mark a column as a time column")):(0,R.Y)(o.Fragment,null,(0,R.Y)("span",{role:"button",tabIndex:0,onClick:B},(0,s.t)("Create a dataset"))," ",(0,s.t)(" to add calculated columns"))})),(0,R.Y)(Ze.Ay.TabPane,{key:"simple",tab:(0,s.t)("Simple")},i&&0===O.length?(0,R.Y)(mo.u7,{image:"empty.svg",title:(0,s.t)("No temporal columns found"),description:p===ue.cT.Table?(0,s.t)('Mark a column as temporal in "Edit datasource" modal'):(0,R.Y)(o.Fragment,null,(0,R.Y)("span",{role:"button",tabIndex:0,onClick:B},(0,s.t)("Create a dataset"))," ",(0,s.t)(" to mark a column as a time column"))}):(0,R.Y)(vo.eI,{label:q},(0,R.Y)(rt.l6,{ariaLabel:q,value:null==C?void 0:C.column_name,onChange:I,allowClear:!0,autoFocus:!C,placeholder:(0,s.t)("%s column(s)",O.length),options:O.map((e=>({value:e.column_name,label:e.verbose_name||e.column_name,customLabel:(0,R.Y)(wo.V,{column:e,showType:!0}),key:e.column_name})))}))),(0,R.Y)(Ze.Ay.TabPane,{key:"sqlExpression",tab:(0,s.t)("Custom SQL")},(0,R.Y)(bo.YU,{value:(null==b?void 0:b.sqlExpression)||(null==C?void 0:C.column_name)||(null==x?void 0:x.expression),onFocus:F,showLoadingForImport:!0,onChange:D,width:"100%",height:Y-80+"px",showGutter:!1,editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,className:"filter-sql-editor",wrapEnabled:!0,ref:T}))),(0,R.Y)("div",null,(0,R.Y)(Te.A,{buttonSize:"small",onClick:$,cta:!0},(0,s.t)("Close")),(0,R.Y)(Te.A,{disabled:!H||!z,buttonStyle:"primary",buttonSize:"small",onClick:j,"data-test":"ColumnEdit#save",cta:!0},(0,s.t)("Save")),E))},Rr=(0,D.A)(mt.pd)`
  border-radius: ${({theme:e})=>e.borderRadius};
  height: 26px;
  padding-left: ${({theme:e})=>2.5*e.gridUnit}px;
`,Nr=({title:e,onChange:t,isEditDisabled:n,hasCustomLabel:a})=>{const[r,i]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1),d=(0,o.useCallback)((()=>{i(!0)}),[]),u=(0,o.useCallback)((()=>{i(!1)}),[]),h=(0,o.useCallback)((()=>{c(!0)}),[]),p=(0,o.useCallback)((()=>{c(!1)}),[]),f=(0,o.useCallback)((e=>{""===e.target.value&&t(e),p()}),[p,t]),g=(0,s.t)("My column");return n?(0,R.Y)("span",null,e||g):l?(0,R.Y)(Rr,{type:"text",placeholder:e,value:a?e:"",autoFocus:!0,onChange:t,onBlur:f}):(0,R.Y)(B.m,{placement:"top",title:(0,s.t)("Click to edit label")},(0,R.Y)("span",{className:"AdhocMetricEditPopoverTitle inline-editable","data-test":"AdhocMetricEditTitle#trigger",onMouseOver:d,onMouseOut:u,onClick:h,onBlur:p,role:"button",tabIndex:0},e||g,"Â ",(0,R.Y)("i",{className:"fa fa-pencil",style:{color:r?"black":"grey"}})))},Ir=(0,s.t)("My column"),Lr=({columns:e,editedColumn:t,onColumnEdit:n,isControlledComponent:r,children:i,isTemporal:l,...c})=>{const d=(0,a.d4)((e=>e.explore.datasource)),[u,h]=(0,o.useState)(Ir),[p,f]=(0,o.useState)(!1),[g,m]=(0,o.useState)(!0),[v,b]=(0,o.useState)(!1),[y,x]=(0,o.useState)(!1);let w=Ir;t&&(0,Ea.wS)(t)?w=t.verbose_name||t.column_name:t&&(0,fr.q0)(t)&&(w=t.label||Ir),(0,o.useEffect)((()=>{h(w)}),[w,p]);const C=(0,o.useCallback)((e=>{f(e)}),[]),S=(0,o.useCallback)((()=>{f(!1)}),[]),{visible:A,handleTogglePopover:k,handleClosePopover:E}=r?{visible:c.visible,handleTogglePopover:c.togglePopover,handleClosePopover:c.closePopover}:{visible:p,handleTogglePopover:C,handleClosePopover:S},_=(0,o.useCallback)((e=>{m("sqlExpression"!==e)}),[]),Y=(0,o.useMemo)((()=>(0,R.Y)(go.y,null,(0,R.Y)(Dr,{editedColumn:t,columns:e,setDatasetModal:x,onClose:E,onChange:n,hasCustomLabel:v,label:u,setLabel:h,getCurrentTab:_,isTemporal:l}))),[e,t,_,v,E,l,n,u]),T=(0,o.useCallback)((e=>{h(e.target.value),b(!0)}),[h,b]),M=(0,o.useMemo)((()=>(0,R.Y)(Nr,{title:u,onChange:T,isEditDisabled:g,hasCustomLabel:v})),[v,g,T,u]);return(0,R.Y)(o.Fragment,null,y&&(0,R.Y)(me.D,{visible:y,onHide:()=>x(!1),buttonTextOnSave:(0,s.t)("Save"),buttonTextOnOverwrite:(0,s.t)("Overwrite"),modalDescription:(0,s.t)("Save this query as a virtual dataset to continue exploring"),datasource:d}),(0,R.Y)(dt.A,{trigger:"click",content:Y,defaultVisible:A,visible:A,onVisibleChange:k,title:M,destroyTooltipOnHide:!0},i))};var jr=n(23133),$r=n(90422),Pr=n(59638);function Fr({adhocFilter:e,options:t,datasource:n,onFilterEdit:o,onShiftOptions:a,onClickClose:r,partitionColumn:i,index:l}){const{actualTimeRange:c,title:d}=(0,Pr.K)(e);return(0,R.Y)(jr.A,{key:l,adhocFilter:e,options:t,datasource:n,onFilterEdit:o,partitionColumn:i},(0,R.Y)(br,{key:l,index:l,label:null!=c?c:e.getDefaultLabel(),tooltipTitle:null!=d?d:e.getTooltipTitle(),clickClose:r,onShiftOptions:a,type:so.S.FilterOption,withCaret:!0,isExtra:e.isExtra,datasourceWarningMessage:e.datasourceWarning?(0,s.t)("This filter might be incompatible with current dataset"):void 0}))}var Br=n(39942),Hr=n(2511);const{warning:zr}=Je.A,Ur=[so.S.Column,so.S.Metric,so.S.MetricOption,so.S.AdhocMetricOption],Wr=e=>!(e instanceof $r.A)&&(null==e?void 0:e.expressionType);var qr=n(91778),Vr=n(87903);const Gr={},Xr=[so.S.Column,so.S.Metric],Qr=(e,t,n)=>e?(0,he.A)(e).filter((e=>(0,qr.S_)(e)?t.some((t=>t.metric_name===e)):!(0,qr.IN)(e)||n.some((t=>t.column_name===e.column.column_name)))).map((e=>{if(!(e=>e&&!(e instanceof co.A)&&"string"!=typeof e&&e.expressionType)(e))return e;if((0,qr.IN)(e)){const t=n.find((t=>t.column_name===e.column.column_name));if(t)return new co.A({...e,column:t})}return new co.A(e)})):[],Kr=(e,t,n)=>{var o;return null!=(o=null==e?void 0:e.filter((e=>{var o;return Array.isArray(t)?!t.includes(null!=(o=e.metric_name)?o:"")||e.metric_name===n:e})))?o:[]};var Zr=n(3173),Jr=n(42370),ei=n(31940),ti=n(83957),ni=n(94071);const oi={allowNewOptions:!0,controlType:"Select",label:(0,s.t)("D3 format"),description:ni.YH,options:ni.Bb.map((e=>({value:e[0],label:e[1]}))),defaultValue:ni.Bb[0][0],creatable:!0,minWidth:"14em",debounceDelay:500},ai={controlType:"Select",label:(0,s.t)("D3 format"),description:ni.gb,options:ni.lR.map((e=>({value:e[0],label:e[1]}))),defaultValue:ni.lR[0][0],creatable:!0,minWidth:"10em",debounceDelay:500},ri={controlType:"Slider",label:(0,s.t)("Fraction digits"),description:(0,s.t)("Number of decimal digits to round numbers to"),min:0,step:1,max:100,defaultValue:100},ii={controlType:"InputNumber",label:(0,s.t)("Min Width"),description:(0,s.t)("Default minimal column width in pixels, actual width may still be larger than this if other columns don't need much space"),width:120,placeholder:(0,s.t)("auto"),debounceDelay:400,validators:[ti.A]},li={controlType:"RadioButtonControl",label:(0,s.t)("Text align"),description:(0,s.t)("Horizontal alignment"),width:130,debounceDelay:50,defaultValue:"left",options:[["left",(0,R.Y)(H.A.AlignLeftOutlined,{iconSize:"m"})],["center",(0,R.Y)(H.A.AlignCenterOutlined,{iconSize:"m"})],["right",(0,R.Y)(H.A.AlignRightOutlined,{iconSize:"m"})]]},si={controlType:"Checkbox",label:(0,s.t)("Show cell bars"),description:(0,s.t)("Whether to display a bar chart background in table columns"),defaultValue:!0,debounceDelay:200},ci={controlType:"Checkbox",label:(0,s.t)("Align +/-"),description:(0,s.t)("Whether to align positive and negative values in cell bar chart at 0"),defaultValue:!1,debounceDelay:200},di={controlType:"Checkbox",label:(0,s.t)("Color +/-"),description:(0,s.t)("Whether to colorize numeric values by if they are positive or negative"),defaultValue:!1,debounceDelay:200},ui={controlType:"Checkbox",label:(0,s.t)("Truncate Cells"),description:(0,s.t)('Truncate long cells to the "min width" set above'),defaultValue:!1,debounceDelay:400},hi={controlType:"CurrencyControl",label:(0,s.t)("Currency format"),description:(0,s.t)("Customize chart metrics or columns with currency symbols as prefixes or suffixes. Choose a symbol from dropdown or type your own."),debounceDelay:200},pi={d3NumberFormat:oi,d3SmallNumberFormat:{...oi,label:(0,s.t)("Small number format"),description:(0,s.t)("D3 number format for numbers between -1.0 and 1.0, useful when you want to have different significant digits for small and large numbers")},d3TimeFormat:ai,fractionDigits:ri,columnWidth:ii,truncateLongCells:ui,horizontalAlign:li,showCellBars:si,alignPositiveNegative:ci,colorPositiveNegative:di,currencyFormat:hi},fi={[Vr.s.String]:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"left"}}],["truncateLongCells"]],[Vr.s.Numeric]:[{tab:(0,s.t)("Display"),children:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"right"}}],["showCellBars"],["alignPositiveNegative"],["colorPositiveNegative"]]},{tab:(0,s.t)("Number formatting"),children:[["d3NumberFormat"],["d3SmallNumberFormat"],["currencyFormat"]]}],[Vr.s.Temporal]:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"left"}}],["d3TimeFormat"]],[Vr.s.Boolean]:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"left"}}]]};function gi(e){return!(null==e||!e.tab)}var mi=n(87843);const vi={Slider:Jo,InputNumber:mt.YI,Input:mt.pd,Select:rt.l6,Checkbox:St.A,RadioButtonControl:at.A.RadioButtonControl,CurrencyControl:Zr.A};function bi({name:e,label:t,description:n,width:a,validators:r,onChange:i,value:l,defaultValue:s,controlType:c,...d}){const{gridUnit:u}=(0,L.DP)(),[h,p]=(0,o.useState)(!1),[f,g]=(0,o.useState)(void 0===l?s:l),[m,v]=(0,o.useState)(),b=e=>{const t=e&&"object"==typeof e&&"target"in e?"checkbox"===e.target.type||"radio"===e.target.type?e.target.checked:e.target.value:e,n=(null==r?void 0:r.map((e=>!function(e){return null==e||""===e}(t)&&e(t))).filter((e=>!!e)))||[];v(n),g(t),0===n.length&&i&&i(t)},y=vi[c];return(0,R.Y)("div",{css:(0,R.AH)({margin:2*u,width:a,maxWidth:"100%",flex:1},"",""),onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1)},"Checkbox"===c?(0,R.Y)(vi.Checkbox,(0,C.A)({value:f,onChange:b,name:e,label:t,description:n,validationErrors:m},d)):(0,R.Y)(o.Fragment,null,t&&(0,R.Y)(vt.A,{name:e,label:t,description:n,validationErrors:m,hovered:h}),(0,R.Y)(y,(0,C.A)({},d,{value:f,onChange:b}))))}function yi({children:e}){const{gridUnit:t}=(0,L.DP)();return(0,R.Y)("div",{css:(0,R.AH)({display:"flex",flexWrap:"nowrap",marginBottom:t,maxWidth:"100%"},"","")},e)}function xi({onChange:e,value:t,children:n}){const a=(0,L.DP)(),r=(0,o.useMemo)((()=>({0:e,[mi.j]:Y()(e,mi.j)})),[e]),i=o.Children.map(n,(n=>{if("children"in n.props){const a=Array.isArray(n.props.children)?100/n.props.children.length+"%":void 0;return o.cloneElement(n,{children:o.Children.map(n.props.children,(n=>{const{name:i,width:l,debounceDelay:s=mi.j,onChange:c}=n.props;return o.cloneElement(n,{width:l||a,value:null==t?void 0:t[i],debounceDelay:void 0,onChange(n){c&&c(n),s in r||(r[s]=Y()(e,s)),r[s]({...t,[i]:n})}})}))})}return n}));return(0,R.Y)("div",{css:(0,R.AH)({label:{textTransform:"uppercase",color:a.colors.text.label,fontSize:a.typography.sizes.s}},"","")},i)}function wi({column:e,configFormLayout:t,onChange:n}){const o=(e,t)=>(0,R.Y)(yi,{key:t},e.map((e=>{const t="string"==typeof e?e:e.name,n="string"==typeof e?{}:"override"in e?e.override:e.config,o={...t in pi?pi[t]:void 0,...n};return(0,R.Y)(bi,(0,C.A)({key:t,name:t},o))}))),a=t[void 0===e.type?Vr.s.String:e.type];return gi(a[0])?(0,R.Y)(Ze.Ay,{centered:!0},a.map(((t,a)=>gi(t)?(0,R.Y)(Ze.Ay.TabPane,{tab:t.tab,key:a},(0,R.Y)(xi,{onChange:n,value:e.config},t.children.map(((e,t)=>o(e,t))))):null))):(0,R.Y)(xi,{onChange:n,value:e.config},a.map(((e,t)=>o(e,t))))}const Ci=o.memo((function({column:e,onChange:t,configFormLayout:n,width:o,height:a}){const{colors:r,gridUnit:i}=(0,L.DP)(),l=6*i;return(0,R.Y)(kn.A,{title:e.name,content:()=>(0,R.Y)(wi,{column:e,onChange:t,configFormLayout:n}),trigger:"click",placement:"right",overlayInnerStyle:{width:o,height:a},overlayClassName:"column-config-popover"},(0,R.Y)("div",{css:(0,R.AH)({display:"flex",alignItems:"center",cursor:"pointer",padding:`${i}px ${2*i}px`,borderBottom:`1px solid ${r.grayscale.light2}`,position:"relative",paddingRight:l,"&:last-child":{borderBottom:"none"},"&:hover":{background:r.grayscale.light4},"> .fa":{color:r.grayscale.light2},"&:hover > .fa":{color:r.grayscale.light1}},"","")},(0,R.Y)(ei.P,{type:e.type}),e.name,(0,R.Y)("i",{className:"fa fa-caret-right",css:(0,R.AH)({position:"absolute",right:3*i,top:3*i},"","")})))})),Si={AnnotationLayerControl:gt,BoundsControl:Ct,CheckboxControl:St.A,CollectionControl:Cn,ColorPickerControl:Mn,ColorSchemeControl:On.A,ColumnConfigControl:function({queryResponse:e,appliedColumnNames:t=[],value:n,onChange:a,configFormLayout:r=fi,width:i,height:l,...c}){const{colnames:d,coltypes:u}=e||{};let h=[],p=[];if(0===t.length)h=d||[],p=u||[];else{const e=new Set(t);null==d||d.forEach(((t,n)=>{e.has(t)&&(h.push(t),p.push(null==u?void 0:u[n]))}))}const f=(0,L.DP)(),g=(0,o.useMemo)((()=>{var e;const t={};return null==(e=h)||e.forEach(((e,o)=>{var a;t[e]={name:Jr.Uz[e]||e,type:null==(a=p)?void 0:a[o],config:(null==n?void 0:n[e])||{}}})),t}),[n,h,p]),[m,v]=(0,o.useState)(!1),b=e=>g[e]||{};if(!h||0===h.length)return null;const y=h.length>12,x=y&&!m?h.slice(0,10):h;return(0,R.Y)(o.Fragment,null,(0,R.Y)(vt.A,c),(0,R.Y)("div",{css:(0,R.AH)({border:`1px solid ${f.colors.grayscale.light2}`,borderRadius:f.gridUnit},"","")},x.map((e=>(0,R.Y)(Ci,{key:e,column:b(e),onChange:t=>((e,t)=>{if(a){const o=h&&n?Object.fromEntries(Object.entries(n).filter((([e])=>h.includes(e)))):{...n};a({...o,[e]:t})}})(e,t),configFormLayout:r,width:i,height:l}))),y&&(0,R.Y)("div",{role:"button",tabIndex:-1,css:(0,R.AH)({padding:2*f.gridUnit,textAlign:"center",cursor:"pointer",textTransform:"uppercase",fontSize:f.typography.sizes.xs,color:f.colors.text.label,":hover":{backgroundColor:f.colors.grayscale.light4}},"",""),onClick:()=>v(!m)},m?(0,R.Y)(o.Fragment,null,(0,R.Y)("i",{className:"fa fa-angle-up"})," Â  ",(0,s.t)("Show less columns")):(0,R.Y)(o.Fragment,null,(0,R.Y)("i",{className:"fa fa-angle-down"})," Â ",(0,s.t)("Show all columns")))))},CurrencyControl:Zr.A,DatasourceControl:ao,DateFilterControl:ro.Ay,DndColumnSelectControl:or,DndColumnSelect:function(e){const{value:t,options:n,multi:a=!0,onChange:r,canDelete:i=!0,ghostButtonText:l,name:c,label:d,isTemporal:u}=e,[h,p]=(0,o.useState)(!1),f=(0,o.useMemo)((()=>{const e=Object.fromEntries(n.map((e=>[e.column_name,e])));return new Yr(e,a,t)}),[a,n,t]),g=(0,o.useCallback)((e=>{const t=e.value;f.multi||Er()(f.values)?f.add(t.column_name):f.replace(0,t.column_name),r(f.getValues())}),[r,f]),m=(0,o.useCallback)((e=>{const t=e.value.column_name;return t in f.options&&!f.has(t)}),[f]),v=(0,o.useCallback)((e=>{f.del(e),r(f.getValues())}),[r,f]),b=(0,o.useCallback)(((e,t)=>{f.swap(e,t),r(f.getValues())}),[r,f]),y=(0,o.useCallback)((()=>f.values.map(((e,t)=>{const o=(0,fr.q0)(e)&&e.datasourceWarning?(0,s.t)("This column might be incompatible with current dataset"):void 0;return(0,R.Y)(Lr,{key:t,columns:n,onColumnEdit:e=>{(0,Ea.wS)(e)?f.replace(t,e.column_name):f.replace(t,e),r(f.getValues())},editedColumn:e,isTemporal:u},(0,R.Y)(br,{key:t,index:t,clickClose:v,onShiftOptions:b,type:`${so.S.ColumnOption}_${c}_${d}`,canDelete:i,column:e,datasourceWarningMessage:o,withCaret:!0}))}))),[i,u,d,c,r,v,b,f,n]),x=(0,o.useCallback)((e=>{(0,Ea.wS)(e)?f.add(e.column_name):f.add(e),r(f.getValues())}),[r,f]),w=(0,o.useCallback)((e=>{p(e)}),[]),S=(0,o.useCallback)((()=>{w(!1)}),[w]),A=(0,o.useCallback)((()=>{w(!0)}),[w]),k=(0,o.useMemo)((()=>null!=l?l:(0,s.tn)("Drop a column here or click","Drop columns here or click",a?2:1)),[l,a]);return(0,R.Y)("div",null,(0,R.Y)(or,(0,C.A)({onDrop:g,canDrop:m,valuesRenderer:y,accept:so.S.Column,displayGhostButton:a||0===f.values.length,ghostButtonText:k,onClickGhostButton:A},e)),(0,R.Y)(Lr,{columns:n,onColumnEdit:x,isControlledComponent:!0,togglePopover:w,closePopover:S,visible:h,isTemporal:u},(0,R.Y)("div",null)))},DndFilterSelect:e=>{var t;const{datasource:n,onChange:a=(()=>{}),name:r,canDelete:i}=e,l=(0,o.useMemo)((()=>{let e={};if(null!=n&&n.extra)try{e=JSON.parse(n.extra)}catch{}return e}),[null==n?void 0:n.extra]),c=Array.from(null!=(t=e.value)?t:[]),[d,u]=(0,o.useState)(c.map((e=>Wr(e)?new $r.A(e):e))),[h,p]=(0,o.useState)(void 0),[f,g]=(0,o.useState)(!1),[m,v]=(0,o.useState)({}),b=(e,t)=>[...e,...[...(null==t?void 0:t.metrics)||[],null==t?void 0:t.metric].map((e=>e&&("string"==typeof e?{saved_metric_name:e}:new co.A(e))))].filter((e=>e)).reduce(((e,t)=>("saved_metric_name"in t&&t.saved_metric_name?e.push({...t,filterOptionName:t.saved_metric_name}):"column_name"in t&&t.column_name?e.push({...t,filterOptionName:`_col_${t.column_name}`}):t instanceof co.A&&e.push({...t,filterOptionName:`_adhocmetric_${t.label}`}),e)),[]).sort(((e,t)=>{var n,o;return null!=(n=null==(o=e.saved_metric_name||e.column_name||e.label)?void 0:o.localeCompare(t.saved_metric_name||t.column_name||t.label||""))?n:0})),[y,x]=(0,o.useState)(b(e.columns,e.formData)),w=(0,o.useMemo)((()=>new Set(y.map((({column_name:e,filterOptionName:t})=>null!=e?e:t)))),[y]);(0,o.useEffect)((()=>{if(n&&"table"===n.type){var e;const t=null==(e=n.database)?void 0:e.id,{datasource_name:o,schema:a,is_sqllab_view:r}=n;!r&&t&&o&&a&&pe.A.get({endpoint:`/api/v1/database/${t}/table_extra/${o}/${a}/`}).then((({json:e})=>{if(null!=e&&e.partitions){const{partitions:t}=e;null!=t&&t.cols&&1===Object.keys(t.cols).length&&p(t.cols[0])}})).catch((e=>{N.A.error("fetch extra_table_metadata:",e.statusText)}))}}),[n]),(0,o.useEffect)((()=>{x(b(e.columns,e.formData))}),[e.columns,e.formData]),(0,o.useEffect)((()=>{u((e.value||[]).map((e=>Wr(e)?new $r.A(e):e)))}),[e.value]);const S=(0,o.useCallback)((e=>{const t=[...d];t.splice(e,1),u(t),a(t)}),[a,d]),A=(0,o.useCallback)((e=>{const t=null==i?void 0:i(d[e],d);"string"!=typeof t?S(e):zr({title:(0,s.t)("Warning"),content:t})}),[i,S,d]),k=(0,o.useCallback)(((e,t)=>{const n=[...d];[n[t],n[e]]=[n[e],n[t]],u(n)}),[d]),E=(0,o.useCallback)((t=>{var n;return null==(n=e.savedMetrics.find((e=>e.metric_name===t)))?void 0:n.expression}),[e.savedMetrics]),_=(0,o.useCallback)((e=>{if(e instanceof $r.A)return e;const t=e;return t.saved_metric_name?new $r.A({expressionType:Hr.A.Sql,subject:E(t.saved_metric_name),operator:U.nS[U.ux.GreaterThan].operation,operatorId:U.ux.GreaterThan,comparator:0,clause:Hr.v.Having}):t.label?new $r.A({expressionType:Hr.A.Sql,subject:new co.A(e).translateToSql(),operator:U.nS[U.ux.GreaterThan].operation,operatorId:U.ux.GreaterThan,comparator:0,clause:Hr.v.Having}):t.column_name?new $r.A({expressionType:Hr.A.Simple,subject:t.column_name,operator:U.nS[U.ux.Equals].operation,operatorId:U.ux.Equals,comparator:"",clause:Hr.v.Where,isNew:!0}):null}),[n.type,E]),Y=(0,o.useCallback)((e=>{a(d.map((t=>t.filterOptionName===e.filterOptionName?e:t)))}),[a,d]),T=(0,o.useCallback)((e=>{const t=_(e);if(t){const e=[...d,t];u(e),a(e)}}),[_,a,d]),M=(0,o.useCallback)((e=>{g(e)}),[]),O=(0,o.useCallback)((()=>{M(!1)}),[M]),D=(0,o.useCallback)((()=>d.map(((e,t)=>(0,R.Y)(Fr,{index:t,adhocFilter:e,options:y,datasource:n,onFilterEdit:Y,partitionColumn:h,onClickClose:A,onShiftOptions:k})))),[A,Y,k,y,h,n,d]),I=(0,o.useCallback)((()=>{v({}),M(!0)}),[M]),L=(0,Br.IM)(),j=(0,o.useMemo)((()=>{if(null==(t=m)?void 0:t.metric_name)return new $r.A({expressionType:Hr.A.Sql,clause:Hr.v.Having,sqlExpression:null==m?void 0:m.expression});var t;if(m instanceof co.A)return new $r.A({expressionType:Hr.A.Sql,clause:Hr.v.Having,sqlExpression:null==m?void 0:m.translateToSql()});const n={subject:null==m?void 0:m.column_name};return n.subject&&(n.operator=U.nS[U.ux.In].operation,n.operatorId=U.ux.In),(0,Ea.wS)(m)&&(0,Xe.D)(null==m?void 0:m.column_name,e.datasource)&&(n.operator=U.ux.TemporalRange,n.operatorId=U.ux.TemporalRange,n.comparator=L),new $r.A(n)}),[m]),$=(0,o.useCallback)((e=>{if(l.disallow_adhoc_metrics&&(e.type!==so.S.Column||!w.has(e.value.column_name)))return!1;if(e.type===so.S.Column){const t=e.value.column_name;return w.has(t)}return!0}),[w,l]),P=(0,o.useCallback)((e=>{v(e.value),M(!0)}),[r,M]);return(0,R.Y)(o.Fragment,null,(0,R.Y)(or,(0,C.A)({onDrop:P,canDrop:$,valuesRenderer:D,accept:Ur,ghostButtonText:(0,s.t)("Drop columns/metrics here or click"),onClickGhostButton:I},e)),(0,R.Y)(jr.A,{adhocFilter:j,options:y,datasource:n,onFilterEdit:T,partitionColumn:h,isControlledComponent:!0,visible:f,togglePopover:M,closePopover:O,requireSave:!!m}))},DndMetricSelect:e=>{const{onChange:t,multi:n,datasource:a,savedMetrics:r}=e,i=(0,o.useMemo)((()=>{let e={};if(null!=a&&a.extra)try{e=JSON.parse(a.extra)}catch{}return e}),[null==a?void 0:a.extra]),l=(0,o.useMemo)((()=>new Set(r.map((({metric_name:e})=>e)))),[r]),c=(0,o.useCallback)((e=>{if(null===e)return void t(null);const o=(0,he.A)(e).map((e=>e.metric_name?e.metric_name:e)).filter((e=>e));t(n?o:o[0])}),[n,t]),[d,u]=(0,o.useState)(Qr(e.value,e.savedMetrics,e.columns)),[h,p]=(0,o.useState)({}),[f,g]=(0,o.useState)(!1);(0,o.useEffect)((()=>{u(Qr(e.value,e.savedMetrics,e.columns))}),[JSON.stringify(e.value),JSON.stringify(e.savedMetrics),JSON.stringify(e.columns)]);const m=(0,o.useCallback)((e=>!(i.disallow_adhoc_metrics&&(e.type!==so.S.Metric||!l.has(e.value.metric_name)))&&!("metric"===e.type&&d.includes(e.value.metric_name))),[d,i,l]),v=(0,o.useCallback)((t=>{const n=e.multi?[...d,t]:[t];u(n),c(n)}),[c,e.multi,d]),b=(0,o.useCallback)(((e,t)=>{if(t instanceof co.A&&t.equals(e))return;const n=d.map((n=>("metric_name"in t&&n===t.metric_name||void 0!==n.optionName)&&n.optionName===t.optionName?e:n));u(n),c(n)}),[c,d]),y=(0,o.useCallback)((e=>{if(!Array.isArray(d))return;const t=[...d];t.splice(e,1),u(t),c(t)}),[c,d]),x=(0,o.useCallback)(((e,t)=>{const n=[...d];[n[t],n[e]]=[n[e],n[t]],u(n)}),[d]),w=(0,o.useMemo)((()=>Kr(e.savedMetrics,e.value)),[e.savedMetrics,e.value]),S=(0,o.useCallback)((t=>{var n;return Kr(e.savedMetrics,e.value,null==(n=e.value)?void 0:n[t])}),[e.savedMetrics,e.value]),A=(0,o.useCallback)((()=>t(n?d:d[0])),[n,t,d]),k=(0,o.useCallback)(((t,o)=>(0,R.Y)(Ro,{key:o,index:o,option:t,onMetricEdit:b,onRemoveMetric:y,columns:e.columns,savedMetrics:e.savedMetrics,savedMetricsOptions:S(o),datasource:e.datasource,onMoveLabel:x,onDropLabel:A,type:`${so.S.AdhocMetricOption}_${e.name}_${e.label}`,multi:n,datasourceWarningMessage:t instanceof co.A&&t.datasourceWarning?(0,s.t)("This metric might be incompatible with current dataset"):void 0})),[S,A,x,n,b,y,e.columns,e.datasource,e.label,e.name,e.savedMetrics]),E=(0,o.useCallback)((()=>d.map(((e,t)=>k(e,t)))),[d,k]),_=(0,o.useCallback)((e=>{g(e)}),[]),Y=(0,o.useCallback)((()=>{_(!1)}),[_]),T=(0,o.useCallback)((e=>{e.type===so.S.Metric&&v(e.value),e.type===so.S.Column&&(p(e),_(!0))}),[v,_]),M=(0,o.useCallback)((()=>{p({}),_(!0)}),[_]),O=(0,o.useMemo)((()=>{if((null==(e=h)?void 0:e.value)&&(null==e?void 0:e.type)&&h.type===so.S.Column){const e=h.value,t={column:e};return e.type_generic===Vr.s.Numeric?t.aggregate=U.dq.SUM:e.type_generic!==Vr.s.String&&e.type_generic!==Vr.s.Boolean&&e.type_generic!==Vr.s.Temporal||(t.aggregate=U.dq.COUNT_DISTINCT),new co.A(t)}var e;return new co.A({})}),[h]),D=(0,s.tn)("Drop a column/metric here or click","Drop columns/metrics here or click",n?2:1);return(0,R.Y)("div",{className:"metrics-select"},(0,R.Y)(or,(0,C.A)({onDrop:T,canDrop:m,valuesRenderer:E,accept:Xr,ghostButtonText:D,displayGhostButton:n||0===d.length,onClickGhostButton:M},e)),(0,R.Y)(Yo,{adhocMetric:O,onMetricEdit:v,columns:e.columns,savedMetricsOptions:w,savedMetric:Gr,datasource:e.datasource,isControlledComponent:!0,visible:f,togglePopover:_,closePopover:Y,isNew:!0},(0,R.Y)("div",null)))},FixedOrMetricControl:Vo,HiddenControl:function(e){return(0,R.Y)(mt.pd,{type:"hidden",value:e.value})},SelectAsyncControl:Xo,SelectControl:Qo.A,SliderControl:function({default:e,name:t,label:n,description:a,renderTrigger:r,rightNode:i,leftNode:l,validationErrors:s,hovered:c,warning:d,danger:u,onClick:h,tooltipOnClick:p,onChange:f=(()=>{}),...g}){const m={name:t,label:n,description:a,renderTrigger:r,rightNode:i,leftNode:l,validationErrors:s,onClick:h,hovered:c,tooltipOnClick:p,warning:d,danger:u};return(0,R.Y)(o.Fragment,null,(0,R.Y)(vt.A,m),(0,R.Y)(Jo,(0,C.A)({},g,{onChange:f,defaultValue:e})))},SpatialControl:ea.A,TextAreaControl:ta.A,TextControl:io.A,TimeSeriesColumnControl:da,ViewportControl:fa,VizTypeControl:({value:e,onChange:t=xo.fZ,isModalOpenInit:n})=>{const[a,r]=(0,o.useState)(!!n),[i,l]=(0,o.useState)(0),[c,d]=(0,o.useState)(e),u=(0,o.useCallback)((()=>{r(!0)}),[]),h=(0,o.useCallback)((()=>{t(c),r(!1)}),[c,t]),p=(0,o.useCallback)((()=>{r(!1),l((e=>e+1)),d(e)}),[e]);return(0,R.Y)(o.Fragment,null,(0,R.Y)("div",{css:e=>R.AH`
          min-width: ${72*e.gridUnit}px;
          max-width: fit-content;
        `},(0,R.Y)(xa,{onChange:t,currentSelection:e}),e&&(0,R.Y)(Sa,{vizType:e})),(0,R.Y)("div",{css:e=>R.AH`
          display: flex;
          justify-content: flex-end;
          margin-top: ${3*e.gridUnit}px;
          color: ${e.colors.grayscale.base};
          text-decoration: underline;
        `},(0,R.Y)("span",{role:"button",tabIndex:0,onClick:u},(0,s.t)("View all charts"))),(0,R.Y)(Aa,{show:a,onHide:p,title:(0,s.t)("Select a visualization type"),primaryButtonName:(0,s.t)("Select"),disablePrimaryButton:!c,onHandledPrimaryAction:h,maxWidth:`${ma.rE}px`,responsive:!0},(0,R.Y)(ma.Ay,{key:i,selectedViz:c,onChange:d,onDoubleClick:h,denyList:wa})))},MetricsControl:Bo,AdhocFilterControl:ka.A,ConditionalFormattingControl:Xa,XAxisSortControl:function(e){const[t,n]=(0,o.useState)(e.value);return(0,o.useEffect)((()=>{e.shouldReset&&(e.onChange(void 0),n(null))}),[e.shouldReset,e.value]),(0,R.Y)(Qo.A,(0,C.A)({},e,{value:t}))},ContourControl:({onChange:e,...t})=>{const[n,a]=(0,o.useState)(!1),[r,i]=(0,o.useState)(null!=t&&t.value?null==t?void 0:t.value:Sr);(0,o.useEffect)((()=>{const t=r.map(((e,t)=>({...e,zIndex:10*(t+1)})));null==e||e(t)}),[e,r]);const l=e=>{a(e)},c=e=>{const t=[...r];t.splice(e,1),i(t)},d=(e,t)=>{const n=[...r];[n[e],n[t]]=[n[t],n[e]],i(n)},u=(0,s.t)("Click to add a contour");return(0,R.Y)(o.Fragment,null,(0,R.Y)(or,(0,C.A)({onDrop:()=>{},canDrop:()=>!0,valuesRenderer:()=>r.map(((e,t)=>(0,R.Y)(Cr,{key:t,saveContour:e=>((e,t)=>{const n=[...r];n[t]=e,i(n)})(e,t),contour:e,index:t,onClose:c,onShift:d}))),accept:[],ghostButtonText:u,onClickGhostButton:()=>{l(!0)}},t)),(0,R.Y)(hr,{saveContour:e=>{i([...r,e]),l(!1)},isControlled:!0,visible:n,toggleVisibility:a},(0,R.Y)(Ar,null)))},...at.A},Ai=Si,ki=D.A.div`
  padding-bottom: ${({theme:e})=>4*e.gridUnit}px;
`;function Ei(e){const{actions:{setControlValue:t},name:n,type:a,hidden:r,isVisible:i,resetOnHide:l=!0}=e,[s,c]=(0,o.useState)(!1),d=(0,I.Z)(i),u=(0,o.useCallback)(((e,o)=>t(n,e,o)),[n,t]);if((0,o.useEffect)((()=>{!0===d&&!1===i&&void 0!==e.default&&!nt()(e.value,e.default)&&l&&(null==t||t(n,e.default))}),[n,d,i,t,e.value,e.default]),!a||!1===i)return null;const h="string"==typeof a?Ai[a]:a;return h?(0,R.Y)(ki,{className:"Control","data-test":n,style:r?{display:"none"}:void 0,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},(0,R.Y)(ot.A,null,(0,R.Y)(h,(0,C.A)({onChange:u,hovered:s},e)))):(console.warn(`Unknown controlType: ${a}`),null)}const _i=({loading:e,onQuery:t,onStop:n,errorMessage:o,isNewChart:a,canStopQuery:r,chartIsStale:i})=>e?(0,R.Y)(Te.A,{onClick:n,buttonStyle:"warning",disabled:!r},(0,R.Y)("i",{className:"fa fa-stop"})," ",(0,s.t)("Stop")):(0,R.Y)(Te.A,{onClick:t,buttonStyle:i?"primary":"secondary",disabled:!!o,"data-test":"run-query-button"},a?(0,s.t)("Create chart"):(0,s.t)("Update chart"));var Yi=n(86963);const Ti=({shouldStash:e,fieldNames:t,children:n})=>{const r=(0,a.wA)(),i=(0,Yi.A)((e=>r((0,ae.setStashFormData)(e,t))));return(0,o.useEffect)((()=>{i(e)}),[e,i]),(0,R.Y)(o.Fragment,null,n)},{confirm:Mi}=Je.A,Oi=R.AH`
  &.anticon {
    font-size: unset;
    .anticon {
      line-height: unset;
      vertical-align: unset;
    }
  }
`,Di=e=>R.AH`
  display: flex;
  position: sticky;
  bottom: 0;
  flex-direction: column;
  align-items: center;
  padding: ${4*e.gridUnit}px;
  z-index: 999;
  background: linear-gradient(
    ${(0,Qe.rgba)(e.colors.grayscale.light5,0)},
    ${e.colors.grayscale.light5} ${e.opacity.mediumLight}
  );

  & > button {
    min-width: 156px;
  }
`,Ri=D.A.div`
  position: relative;
  height: 100%;
  width: 100%;

  // Resizable add overflow-y: auto as a style to this div
  // To override it, we need to use !important
  overflow: visible !important;
  #controlSections {
    height: 100%;
    overflow: visible;
  }
  .nav-tabs {
    flex: 0 0 1;
  }
  .tab-content {
    overflow: auto;
    flex: 1 1 100%;
  }
  .Select__menu {
    max-width: 100%;
  }
  .type-label {
    margin-right: ${({theme:e})=>3*e.gridUnit}px;
    width: ${({theme:e})=>7*e.gridUnit}px;
    display: inline-block;
    text-align: center;
    font-weight: ${({theme:e})=>e.typography.weights.bold};
  }
`,Ni=(0,D.A)(Ze.Ay)`
  ${({theme:e,fullWidth:t})=>R.AH`
    height: 100%;
    overflow: visible;
    .ant-tabs-nav {
      margin-bottom: 0;
    }
    .ant-tabs-nav-list {
      width: ${t?"100%":"50%"};
    }
    .ant-tabs-tabpane {
      height: 100%;
    }
    .ant-tabs-content-holder {
      padding-top: ${4*e.gridUnit}px;
    }

    .ant-collapse-ghost > .ant-collapse-item {
      &:not(:last-child) {
        border-bottom: 1px solid ${e.colors.grayscale.light3};
      }

      & > .ant-collapse-header {
        font-size: ${e.typography.sizes.s}px;
      }

      & > .ant-collapse-content > .ant-collapse-content-box {
        padding-bottom: 0;
        font-size: ${e.typography.sizes.s}px;
      }
    }
  `}
`,Ii=(e,t)=>e.reduce(((e,n)=>!n.expanded&&n.label||(e=>!!e.label&&Ge.sections.legacyTimeseriesTime.label===e.label)(n)&&!(e=>{var t;return null==e||null==(t=e.columns)?void 0:t.some((e=>e.is_dttm))})(t)?e:[...e,String(n.label)]),[]);function Li(e,t){const n=(0,o.useRef)(e()),a=(0,o.useRef)(t);return a.current!==t&&(n.current=e(),a.current=t),n}const ji=e=>{var t,n;const{colors:r}=(0,L.DP)(),l=(0,o.useContext)(F.bf),c=(0,I.Z)(e.exploreState),u=(0,I.Z)(e.exploreState.datasource),h=(0,I.Z)(e.chart.chartStatus),[p,f]=(0,o.useState)(!1),g=(0,o.useRef)(null),m=(0,a.d4)((e=>e.explore.controlsTransferred)),v=(0,a.d4)((e=>{var t,n;return null==(t=e.common)||null==(n=t.conf)?void 0:n.DEFAULT_TIME_FILTER})),{form_data:b,actions:y}=e,{setControlValue:x}=y,{x_axis:w,adhoc_filters:S}=b,A=(0,I.Z)(w);(0,o.useEffect)((()=>{w&&w!==A&&(0,Xe.D)(w,e.exploreState.datasource)&&(null==S||!S.find((e=>"SIMPLE"===e.expressionType&&e.operator===U.ux.TemporalRange&&e.subject===w)))&&Mi({title:(0,s.t)("The X-axis is not on the filters list"),content:(0,s.t)("The X-axis is not on the filters list which will prevent it from being used in\n            time range filters in dashboards. Would you like to add it to the filters list?"),onOk:()=>{x("adhoc_filters",[...S||[],{clause:Hr.v.Where,subject:w,operator:U.ux.TemporalRange,comparator:v||qe.WC,expressionType:"SIMPLE"}])}})}),[w,S,x,v,A,e.exploreState.datasource]),(0,o.useEffect)((()=>{let t=!1;const n=e=>"object"==typeof e&&(0,i.A)(e)&&"datasourceWarning"in e&&!0===e.datasourceWarning?(t=!0,{...e,datasourceWarning:!1}):e;"success"===e.chart.chartStatus&&"success"!==h&&(null==m||m.forEach((o=>{var a;if(t=!1,!(0,i.A)(e.controls[o]))return;const r=Array.isArray(e.controls[o].value)?null==(a=(0,he.A)(e.controls[o].value))?void 0:a.map(n):n(e.controls[o].value);t&&e.actions.setControlValue(o,r)})))}),[m,h,e.actions,e.chart.chartStatus,e.controls]),(0,o.useEffect)((()=>{var t,n,o;!u||u.type===ue.cT.Query||(null==(t=e.exploreState.datasource)?void 0:t.id)===u.id&&(null==(n=e.exploreState.datasource)?void 0:n.type)===u.type||(f(!0),null==(o=g.current)||o.scrollTo(0,0))}),[null==(t=e.exploreState.datasource)?void 0:t.id,null==(n=e.exploreState.datasource)?void 0:n.type,u]);const{expandedQuerySections:k,expandedCustomizeSections:E,querySections:_,customizeSections:Y}=(0,o.useMemo)((()=>function(e,t,n){const o=[],a=[];return(0,oe.QQ)(e,n).forEach((e=>{"data"===e.tabOverride||e.controlSetRows.some((e=>e.some((e=>e&&"object"==typeof e&&"config"in e&&e.config&&(!e.config.renderTrigger||"data"===e.config.tabOverride)))))?o.push(e):e.controlSetRows.length>0&&a.push(e)})),{expandedQuerySections:Ii(o,t),expandedCustomizeSections:Ii(a,t),querySections:o,customizeSections:a}}(b.viz_type,e.exploreState.datasource,e.datasource_type)),[e.exploreState.datasource,b.viz_type,e.datasource_type]),T=(0,o.useCallback)((()=>{(0,he.A)(e.exploreState.controlsTransferred).forEach((t=>e.actions.setControlValue(t,e.controls[t].default)))}),[e.actions,e.exploreState.controlsTransferred,e.controls]),M=(0,o.useCallback)((()=>{T(),f(!1)}),[T]),O=(0,o.useCallback)((()=>{f(!1)}),[]),D=({name:t,config:n})=>{const{controls:o,chart:a,exploreState:r}=e;return Boolean(null==n.shouldMapStateToProps?void 0:n.shouldMapStateToProps(c||r,r,o[t],a))},N=Li((()=>({})),b.viz_type),j=t=>{const{controls:n}=e,{label:a,description:i,visibility:l}=t,c=String(a),d=!1!==(null==l?void 0:l.call(void 0,e,n)),u=t.controlSetRows.some((e=>e.some((e=>{const t="string"==typeof e?e:e&&"name"in e?e.name:null;return t&&t in n&&n[t].validationErrors&&n[t].validationErrors.length>0}))));u||(N.current[c]=!0);const h=N.current[c]?r.error.base:r.alert.base;return(0,R.Y)(o.Fragment,null,(0,R.Y)(Ti,{key:`sectionId-${c}`,shouldStash:!d,fieldNames:t.controlSetRows.flat().map((e=>e&&"object"==typeof e?"name"in e?e.name:"":String(e||""))).filter(Boolean)}),d&&(0,R.Y)(Ke.A.Panel,{css:e=>R.AH`
              margin-bottom: 0;
              box-shadow: none;

              &:last-child {
                padding-bottom: ${16*e.gridUnit}px;
                border-bottom: 0;
              }

              .panel-body {
                margin-left: ${4*e.gridUnit}px;
                padding-bottom: 0;
              }

              span.label {
                display: inline-block;
              }
              ${!t.label&&"\n            .ant-collapse-header {\n              display: none;\n            }\n          "}
            `,header:(0,R.Y)((()=>(0,R.Y)("span",{"data-test":"collapsible-control-panel-header"},(0,R.Y)("span",{css:e=>R.AH`
            font-size: ${e.typography.sizes.m}px;
            line-height: 1.3;
          `},a)," ",i&&(0,R.Y)(B.m,{id:c,title:i},(0,R.Y)(H.A.InfoCircleOutlined,{css:Oi})),u&&(0,R.Y)(B.m,{id:`${We()("validation-errors")}-tooltip`,title:(0,s.t)("This section contains validation errors")},(0,R.Y)(H.A.InfoCircleOutlined,{css:R.AH`
                ${Oi};
                color: ${h};
              `})))),null),key:c},t.controlSetRows.map(((t,n)=>{const a=t.map((t=>t?o.isValidElement(t)?t:t.name&&t.config&&"datasource"!==t.name?(({name:t,config:n})=>{const{controls:o,chart:a,exploreState:r}=e,{visibility:i}=n,l={...n,...o[t],...D({name:t,config:n})?null==n||null==n.mapStateToProps?void 0:n.mapStateToProps(r,o[t],a):void 0,name:t},{validationErrors:c,label:d,description:u,...h}=l,p=i?i.call(n,e,l):void 0,f="function"==typeof d?d(r,o[t],a):d,g="function"==typeof u?u(r,o[t],a):u;return t.includes("adhoc_filters")&&(h.canDelete=(e,t)=>{var n;const a=e=>e.operator===U.ux.TemporalRange;return!((null==o||null==(n=o.time_range)||!n.value)&&a(e)&&1===t.filter(a).length)||(0,s.t)("You cannot delete the last temporal filter as it's used for time range filters in dashboards.")}),(0,R.Y)(Ti,{shouldStash:!1===p,fieldNames:[t],key:`control-container-${t}`},(0,R.Y)(Ei,(0,C.A)({key:`control-${t}`,name:t,label:f,description:g,validationErrors:c,actions:e.actions,isVisible:p},h)))})(t):null:null)).filter((e=>null!==e));return 0===a.length?null:(0,R.Y)(et,{key:`controlsetrow-${n}`,controls:a})}))))},$=(0,he.A)(e.exploreState.controlsTransferred).length>0,P=(0,o.useCallback)((()=>$?(0,R.Y)(Ne,{title:(0,s.t)("Keep control settings?"),bodyText:(0,s.t)("You've changed datasets. Any controls with data (columns, metrics) that match this new dataset have been retained."),primaryButtonAction:O,secondaryButtonAction:M,primaryButtonText:(0,s.t)("Continue"),secondaryButtonText:(0,s.t)("Clear form"),type:"info"}):(0,R.Y)(Ne,{title:(0,s.t)("No form settings were maintained"),bodyText:(0,s.t)("We were unable to carry over any controls when switching to this new dataset."),primaryButtonAction:O,primaryButtonText:(0,s.t)("Continue"),type:"warning"})),[M,O,$]),z=Li((()=>!1),b.viz_type),W=(0,o.useMemo)((()=>{e.errorMessage||(z.current=!0);const t=z.current?r.error.base:r.alert.base;return(0,R.Y)(o.Fragment,null,(0,R.Y)("span",null,(0,s.t)("Data")),e.errorMessage&&(0,R.Y)("span",{css:e=>R.AH`
              margin-left: ${2*e.gridUnit}px;
            `}," ",(0,R.Y)(B.m,{id:"query-error-tooltip",placement:"right",title:e.errorMessage},(0,R.Y)(H.A.ExclamationCircleOutlined,{css:R.AH`
                  ${Oi};
                  color: ${t};
                `}))))}),[r.error.base,r.alert.base,z,e.errorMessage]);if(!(0,Ve.A)().has(b.viz_type)&&l.loading)return(0,R.Y)(d.A,null);const q=Y.length>0;return(0,R.Y)(Ri,{ref:g},(0,R.Y)(Ni,{id:"controlSections","data-test":"control-tabs",fullWidth:q,allowOverflow:!1},(0,R.Y)(Ze.Ay.TabPane,{key:"query",tab:W},(0,R.Y)(Ke.A,{defaultActiveKey:k,expandIconPosition:"right",ghost:!0},p&&(0,R.Y)(P,null),_.map(j))),q&&(0,R.Y)(Ze.Ay.TabPane,{key:"display",tab:(0,s.t)("Customize")},(0,R.Y)(Ke.A,{defaultActiveKey:E,expandIconPosition:"right",ghost:!0},Y.map(j)))),(0,R.Y)("div",{css:Di},(0,R.Y)(_i,{onQuery:e.onQuery,onStop:e.onStop,errorMessage:e.errorMessage,loading:"loading"===e.chart.chartStatus,isNewChart:!e.chart.queriesResponse,canStopQuery:e.canStopQuery,chartIsStale:e.chartIsStale})))};var $i=n(58561),Pi=n.n($i),Fi=n(78697);const Bi="save_chart_recent_dashboard",Hi=(0,D.A)(Je.A)`
  .ant-modal-body {
    overflow: visible;
  }
  i {
    position: absolute;
    top: -${({theme:e})=>5.25*e.gridUnit}px;
    left: ${({theme:e})=>26.75*e.gridUnit}px;
  }
`;class zi extends o.Component{constructor(e){var t;super(e),this.handleDatasetNameChange=e=>{this.setState({datasetName:e.target.value})},this.handleRedirect=(e,t)=>{const n=new URLSearchParams(e);return n.set("save_action",this.state.action),"overwrite"!==this.state.action&&n.delete("form_data_key"),n.set("slice_id",t.id.toString()),n},this.loadDashboard=async e=>(await pe.A.get({endpoint:`/api/v1/dashboard/${e}`})).json.result,this.loadDashboards=async(e,t,n)=>{const o=Pi().encode({columns:["id","dashboard_title"],filters:[{col:"dashboard_title",opr:"ct",value:e},{col:"owners",opr:"rel_m_m",value:this.props.user.userId}],page:t,page_size:n,order_column:"dashboard_title"}),{json:a}=await pe.A.get({endpoint:`/api/v1/dashboard/?q=${o}`}),{result:r,count:i}=a;return{data:r.map((e=>({value:e.id,label:e.dashboard_title}))),totalCount:i}},this.renderSaveChartModal=()=>{var e;const t=this.info();return(0,R.Y)(vo.lV,{"data-test":"save-modal-body",layout:"vertical"},(0,R.Y)(vo.eI,{"data-test":"radio-group"},(0,R.Y)(Fi.s,{id:"overwrite-radio",disabled:!this.canOverwriteSlice(),checked:"overwrite"===this.state.action,onChange:()=>this.changeAction("overwrite"),"data-test":"save-overwrite-radio"},(0,s.t)("Save (Overwrite)")),(0,R.Y)(Fi.s,{id:"saveas-radio","data-test":"saveas-radio",checked:"saveas"===this.state.action,onChange:()=>this.changeAction("saveas")},(0,s.t)("Save as..."))),(0,R.Y)("hr",null),(0,R.Y)(vo.eI,{label:(0,s.t)("Chart name"),required:!0},(0,R.Y)(mt.pd,{name:"new_slice_name",type:"text",placeholder:"Name",value:this.state.newSliceName,onChange:this.onSliceNameChange,"data-test":"new-chart-name"})),"query"===(null==(e=this.props.datasource)?void 0:e.type)&&(0,R.Y)(vo.eI,{label:(0,s.t)("Dataset Name"),required:!0},(0,R.Y)(lt.W,{tooltip:(0,s.t)("A reusable dataset will be saved with your chart."),placement:"right"}),(0,R.Y)(mt.pd,{name:"dataset_name",type:"text",placeholder:"Dataset Name",value:this.state.datasetName,onChange:this.handleDatasetNameChange,"data-test":"new-dataset-name"})),(0,R.Y)(vo.eI,{label:(0,s.t)("Add to dashboard"),"data-test":"save-chart-modal-select-dashboard-form"},(0,R.Y)(rt.DW,{allowClear:!0,allowNewOptions:!0,ariaLabel:(0,s.t)("Select a dashboard"),options:this.loadDashboards,onChange:this.onDashboardChange,value:this.state.dashboard,placeholder:(0,R.Y)("div",null,(0,R.Y)("b",null,(0,s.t)("Select")),(0,s.t)(" a dashboard OR "),(0,R.Y)("b",null,(0,s.t)("create")),(0,s.t)(" a new one"))})),t&&(0,R.Y)(ge.A,{type:"info",message:t,closable:!1}),this.props.alert&&(0,R.Y)(ge.A,{css:(0,R.AH)({marginTop:t?16:void 0},"",""),type:"warning",message:this.props.alert,closable:!1}))},this.info=()=>{const e=this.isNewDashboard();let t=!1;return!this.props.slice||"overwrite"===this.state.action&&this.canOverwriteSlice()||(t=!0),t&&e?(0,s.t)("A new chart and dashboard will be created."):t?(0,s.t)("A new chart will be created."):e?(0,s.t)("A new dashboard will be created."):null},this.renderFooter=()=>{var e,t;return(0,R.Y)("div",{"data-test":"save-modal-footer"},(0,R.Y)(Te.A,{id:"btn_cancel",buttonSize:"small",onClick:this.onHide},(0,s.t)("Cancel")),(0,R.Y)(Te.A,{id:"btn_modal_save_goto_dash",buttonSize:"small",disabled:!this.state.newSliceName||!this.state.dashboard||(null==(e=this.props.datasource)?void 0:e.type)!==ue.cT.Table&&!this.state.datasetName,onClick:()=>this.saveOrOverwrite(!0)},(0,s.t)("Save & go to dashboard")),(0,R.Y)(Te.A,{id:"btn_modal_save",buttonSize:"small",buttonStyle:"primary",onClick:()=>this.saveOrOverwrite(!1),disabled:this.state.isLoading||!this.state.newSliceName||(null==(t=this.props.datasource)?void 0:t.type)!==ue.cT.Table&&!this.state.datasetName,"data-test":"btn-modal-save"},(0,s.t)("Save")))},this.state={newSliceName:e.sliceName,datasetName:null==(t=e.datasource)?void 0:t.name,action:this.canOverwriteSlice()?"overwrite":"saveas",isLoading:!1,dashboard:void 0},this.onDashboardChange=this.onDashboardChange.bind(this),this.onSliceNameChange=this.onSliceNameChange.bind(this),this.changeAction=this.changeAction.bind(this),this.saveOrOverwrite=this.saveOrOverwrite.bind(this),this.isNewDashboard=this.isNewDashboard.bind(this),this.onHide=this.onHide.bind(this)}isNewDashboard(){const{dashboard:e}=this.state;return"string"==typeof(null==e?void 0:e.value)}canOverwriteSlice(){var e,t,n;return(null==(e=this.props.slice)||null==(t=e.owners)?void 0:t.includes(this.props.user.userId))&&!(null!=(n=this.props.slice)&&n.is_managed_externally)}async componentDidMount(){let{dashboardId:e}=this.props;if(!e){let t=null;try{t=sessionStorage.getItem(Bi)}catch(e){}e=t&&parseInt(t,10)}if(e)try{const t=await this.loadDashboard(e);(0,$n.m9)(t,this.props.user)&&this.setState({dashboard:{label:t.dashboard_title,value:t.id}})}catch(e){this.props.actions.addDangerToast((0,s.t)("An error occurred while loading dashboard information."))}}onSliceNameChange(e){this.setState({newSliceName:e.target.value})}onDashboardChange(e){this.setState({dashboard:e})}changeAction(e){this.setState({action:e})}onHide(){this.props.dispatch((0,re.setSaveChartModalVisibility)(!1))}async saveOrOverwrite(e){this.setState({isLoading:!0});try{var t;if((null==(t=this.props.datasource)?void 0:t.type)===ue.cT.Query){const{schema:e,sql:t,database:n}=this.props.datasource,{templateParams:o}=this.props.datasource;await this.props.actions.saveDataset({schema:e,sql:t,database:n,templateParams:o,datasourceName:this.state.datasetName})}let o=[];this.props.slice&&"overwrite"===this.state.action&&(o=await this.props.actions.getSliceDashboards(this.props.slice));const a=this.props.form_data||{};delete a.url_params;let r,l=null;if(this.state.dashboard){var n;let e=this.state.dashboard.value;this.isNewDashboard()&&(e=(await this.props.actions.createDashboard(this.state.dashboard.label)).id);try{l=await this.loadDashboard(e)}catch(e){return void this.props.actions.saveSliceFailed()}(0,i.A)(l)&&(0,i.A)(null==(n=l)?void 0:n.id)&&(o=o.includes(l.id)?o:[...o,l.id],a.dashboards=o)}this.props.actions.setFormData({...a}),r="overwrite"===this.state.action?await this.props.actions.updateSlice(this.props.slice,this.state.newSliceName,o,l?{title:l.dashboard_title,new:this.isNewDashboard()}:null):await this.props.actions.createSlice(this.state.newSliceName,o,l?{title:l.dashboard_title,new:this.isNewDashboard()}:null);try{l?sessionStorage.setItem(Bi,`${l.id}`):sessionStorage.removeItem(Bi)}catch(e){}if(e&&l)return void this.props.history.push(l.url);const s=this.handleRedirect(window.location.search,r);this.props.history.replace(`/explore/?${s.toString()}`),this.setState({isLoading:!1}),this.onHide()}finally{this.setState({isLoading:!1})}}render(){return(0,R.Y)(Hi,{show:this.props.isVisible,onHide:this.onHide,title:(0,s.t)("Save chart"),footer:this.renderFooter()},this.state.isLoading?(0,R.Y)("div",{css:R.AH`
              display: flex;
              justify-content: center;
            `},(0,R.Y)(d.A,{position:"normal"})):this.renderSaveChartModal())}}const Ui=(0,r.y)((0,a.Ng)((function({explore:e,saveModal:t,user:n}){return{datasource:e.datasource,slice:e.slice,user:n,dashboards:t.dashboards,alert:t.saveModalAlert,isVisible:t.isVisible}}))(zi));var Wi=n(56449),qi=n.n(Wi),Vi=n(53767),Gi=n(5373),Xi=n(51545),Qi=n(84248);const Ki=D.A.div`
  ${({theme:e})=>R.AH`
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    height: ${6*e.gridUnit}px;
    padding: 0 ${e.gridUnit}px;

    // hack to make the drag preview image corners rounded
    transform: translate(0, 0);
    background-color: inherit;
    border-radius: 4px;

    > div {
      min-width: 0;
      margin-right: ${2*e.gridUnit}px;
    }
  `}
`;function Zi(e){const{labelRef:t,showTooltip:n,type:o,value:a}=e,[{isDragging:r},i]=(0,pr.i)({item:{value:e.value,type:e.type},collect:e=>({isDragging:e.isDragging()})}),l={labelRef:t,showTooltip:!r&&n,showType:!0};return(0,R.Y)(Ki,{"data-test":"DatasourcePanelDragOption",ref:i},o===so.S.Column?(0,R.Y)(wo.V,(0,C.A)({column:a},l)):(0,R.Y)(wo.b,(0,C.A)({metric:a},l)),(0,R.Y)(H.A.Drag,null))}const Ji=50,el=50,tl=30,nl=D.A.button`
  background: none;
  border: none;
  text-decoration: underline;
  color: ${({theme:e})=>e.colors.primary.dark1};
`,ol=D.A.div`
  text-align: center;
  padding-top: 2px;
`,al=D.A.div`
  ${({theme:e})=>R.AH`
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: ${e.typography.sizes.s}px;
    background-color: ${e.colors.grayscale.light4};
    margin: ${2*e.gridUnit}px 0;
    border-radius: 4px;
    padding: 0 ${e.gridUnit}px;

    &:first-of-type {
      margin-top: 0;
    }
    &:last-of-type {
      margin-bottom: 0;
    }

    padding: 0;
    cursor: pointer;
    &:hover {
      background-color: ${e.colors.grayscale.light3};
    }

    & > span {
      white-space: nowrap;
    }

    .option-label {
      display: inline;
    }

    .metric-option {
      & > svg {
        min-width: ${4*e.gridUnit}px;
      }
      & > .option-label {
        overflow: hidden;
        text-overflow: ellipsis;
      }
    }
  `}
`,rl=D.A.button`
  display: flex;
  justify-content: space-between;
  align-items: center;
  border: none;
  background: transparent;
  width: 100%;
  padding-inline: 0px;
`,il=D.A.span`
  ${({theme:e})=>`\n    font-size: ${e.typography.sizes.m}px;\n    line-height: 1.3;\n  `}
`,ll=D.A.div`
  ${({theme:e})=>`\n    border: 1px ${e.colors.grayscale.light4} solid;\n    border-radius: ${e.gridUnit}px;\n    font-size: ${e.typography.sizes.s}px;\n    padding: ${e.gridUnit}px;\n    color: ${e.colors.grayscale.light1};\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n  `}
`,sl=({index:e,style:t,data:n})=>{const{metricSlice:o,columnSlice:a,totalMetrics:r,totalColumns:i,width:l,showAllMetrics:c,onShowAllMetricsChange:d,showAllColumns:u,onShowAllColumnsChange:h,collapseMetrics:p,onCollapseMetricsChange:f,collapseColumns:g,onCollapseColumnsChange:m,hiddenMetricCount:v,hiddenColumnCount:b}=n,y=p?[]:o,x=p?1:2,w=p?e>=1:e>y.length+x,C=w?y.length+x+1:0,S=C+1,A=(w?a.length:y.length)+(p?C:S)+1,k=w?g:p,E=w?m:f,_=w?u:c,Y=w?h:d,T=(0,L.DP)(),M=w?b:v;return(0,R.Y)("div",{style:t,css:R.AH`
        padding: 0 ${4*T.gridUnit}px;
      `},e===C&&(0,R.Y)(rl,{onClick:()=>E(!k)},(0,R.Y)(il,null,w?(0,s.t)("Columns"):(0,s.t)("Metrics")),k?(0,R.Y)(H.A.DownOutlined,{iconSize:"s"}):(0,R.Y)(H.A.UpOutlined,{iconSize:"s"})),e===S&&!k&&(0,R.Y)("div",{css:R.AH`
            display: flex;
            gap: ${2*T.gridUnit}px;
            justify-content: space-between;
            align-items: baseline;
          `},(0,R.Y)("div",{className:"field-length",css:R.AH`
              flex-shrink: 0;
            `},w?(0,s.t)("Showing %s of %s",null==a?void 0:a.length,i):(0,s.t)("Showing %s of %s",null==y?void 0:y.length,r)),M>0&&(0,R.Y)(ll,null,(0,s.t)("%s ineligible item(s) are hidden",M))),e>S&&e<A&&(0,R.Y)(al,{key:(w?a[e-S-1].column_name:y[e-S-1].metric_name)+String(l),className:"column"},(0,R.Y)(Zi,{value:w?a[e-S-1]:y[e-S-1],type:w?so.S.Column:so.S.Metric})),e===A&&!k&&(w?i>Ji:r>el)&&(0,R.Y)(ol,null,(0,R.Y)(nl,{onClick:()=>Y(!_)},_?(0,s.t)("Show less..."):(0,s.t)("Show all..."))))},cl=D.A.div`
  ${({theme:e})=>R.AH`
    background-color: ${e.colors.grayscale.light5};
    position: relative;
    height: 100%;
    display: flex;
    flex-direction: column;
    max-height: 100%;
    .ant-collapse {
      height: auto;
    }
    .field-selections {
      padding: 0 0 ${e.gridUnit}px;
      overflow: auto;
      height: 100%;
    }
    .field-length {
      margin-bottom: ${2*e.gridUnit}px;
      font-size: ${e.typography.sizes.s}px;
      color: ${e.colors.grayscale.light1};
    }
    .form-control.input-md {
      width: calc(100% - ${8*e.gridUnit}px);
      height: ${8*e.gridUnit}px;
      margin: ${2*e.gridUnit}px auto;
    }
    .type-label {
      font-size: ${e.typography.sizes.s}px;
      color: ${e.colors.grayscale.base};
    }
    .Control {
      padding-bottom: 0;
    }
  `};
`,dl=D.A.div`
  ${({theme:e})=>R.AH`
    margin: 0 ${2.5*e.gridUnit}px;

    span {
      text-decoration: underline;
    }
  `}
`,ul=2,hl=e=>e.sort(((e,t)=>{var n,o;return(null!=(n=null==t?void 0:t.is_certified)?n:0)-(null!=(o=null==e?void 0:e.is_certified)?o:0)}));function pl({datasource:e,formData:t,controls:{datasource:n},actions:a,width:r}){const[i]=(0,o.useContext)(Ja),{columns:l,metrics:c}=e,d=(0,o.useMemo)((()=>{const e=Object.values(i);return qi()(l)?l.filter((t=>e.some((e=>e({value:t,type:so.S.Column}))))):[]}),[i,l]),u=(0,o.useMemo)((()=>[...d].sort(((e,t)=>null==e||!e.is_dttm||null!=t&&t.is_dttm?null==t||!t.is_dttm||null!=e&&e.is_dttm?0:1:-1))),[d]),h=(0,o.useMemo)((()=>{const e=Object.values(i);return c.filter((t=>e.some((e=>e({value:t,type:so.S.Metric})))))}),[i,c]),f=l.length-d.length,g=c.length-h.length,[m,v]=(0,o.useState)(!1),[b,y]=(0,o.useState)(""),[x,w]=(0,o.useState)(!1),[S,A]=(0,o.useState)(!1),[k,E]=(0,o.useState)(!1),[_,Y]=(0,o.useState)(!1),T=(0,Qi.Q)(b,p.jW),M=(0,o.useMemo)((()=>T?(0,Xi.Ht)(u,T,{keys:[{key:"verbose_name",threshold:Xi.cG.CONTAINS},{key:"column_name",threshold:Xi.cG.CONTAINS},{key:e=>{var t,n;return[null!=(t=null==e?void 0:e.description)?t:"",null!=(n=null==e?void 0:e.expression)?n:""].map((e=>(null==e?void 0:e.replace(/[_\n\s]+/g," "))||""))},threshold:Xi.cG.CONTAINS,maxRanking:Xi.cG.CONTAINS}],keepDiacritics:!0}):null!=u?u:[]),[u,T]),O=(0,o.useMemo)((()=>T?(0,Xi.Ht)(h,T,{keys:[{key:"verbose_name",threshold:Xi.cG.CONTAINS},{key:"metric_name",threshold:Xi.cG.CONTAINS},{key:e=>{var t,n;return[null!=(t=null==e?void 0:e.description)?t:"",null!=(n=null==e?void 0:e.expression)?n:""].map((e=>(null==e?void 0:e.replace(/[_\n\s]+/g," "))||""))},threshold:Xi.cG.CONTAINS,maxRanking:Xi.cG.CONTAINS}],keepDiacritics:!0,baseSort:(e,t)=>{var n,o,a,r,i,l;return Number(null!=(n=null==t||null==(o=t.item)?void 0:o.is_certified)?n:0)-Number(null!=(a=null==e||null==(r=e.item)?void 0:r.is_certified)?a:0)||String(null!=(i=null==e?void 0:e.rankedValue)?i:"").localeCompare(null!=(l=null==t?void 0:t.rankedValue)?l:"")}}):null!=h?h:[]),[h,T]),D=(0,o.useMemo)((()=>x?O:null==O||null==O.slice?void 0:O.slice(0,el)),[O,x]),N=(0,o.useMemo)((()=>hl(S?M:null==M||null==M.slice?void 0:M.slice(0,Ji))),[M,S]),I={query:ue.cT.Query,saved_query:ue.cT.SavedQuery},L=e.type&&I[e.type],j=(0,o.useMemo)((()=>(0,R.Y)(o.Fragment,null,(0,R.Y)(mt.pd,{allowClear:!0,onChange:e=>{y(e.target.value)},value:b,className:"form-control input-md",placeholder:(0,s.t)("Search Metrics & Columns")}),(0,R.Y)("div",{className:"field-selections","data-test":"fieldSelections"},L&&(()=>{try{if("false"===sessionStorage.getItem("showInfobox"))return!1}catch(e){}return!0})()&&(0,R.Y)(dl,null,(0,R.Y)(ge.A,{closable:!0,onClose:()=>{try{sessionStorage.setItem("showInfobox","false")}catch(e){}},type:"info",message:"",description:(0,R.Y)(o.Fragment,null,(0,R.Y)("span",{role:"button",tabIndex:0,onClick:()=>v(!0),className:"add-dataset-alert-description"},(0,s.t)("Create a dataset")),(0,s.t)(" to edit or add columns and metrics."))})),(0,R.Y)(Vi.A,null,(({height:e})=>(0,R.Y)(Gi.Y1,{width:r-ul,height:e,itemSize:tl,itemCount:(k?0:null==D?void 0:D.length)+(_?0:N.length)+2+(k?0:2)+(_?0:2),itemData:{metricSlice:D,columnSlice:N,width:r,totalMetrics:O.length,totalColumns:M.length,showAllMetrics:x,onShowAllMetricsChange:w,showAllColumns:S,onShowAllColumnsChange:A,collapseMetrics:k,onCollapseMetricsChange:E,collapseColumns:_,onCollapseColumnsChange:Y,hiddenMetricCount:g,hiddenColumnCount:f},overscanCount:5},sl)))))),[N,b,M.length,O.length,D,S,x,k,_,L,r]);return(0,R.Y)(cl,null,L&&m&&(0,R.Y)(me.D,{visible:m,onHide:()=>v(!1),buttonTextOnSave:(0,s.t)("Save"),buttonTextOnOverwrite:(0,s.t)("Overwrite"),datasource:(0,ve.l)(e),openWindow:!1,formData:t}),(0,R.Y)(Ei,(0,C.A)({},n,{name:"datasource",actions:a})),null!=e.id&&j)}var fl=n(94963),gl=n(41811),ml=n(58962);const vl=(0,gl.A)(((e,t)=>{const n={};return((null==t?void 0:t.controlPanelSections)||[]).filter(Ea.lW).forEach((e=>{e.controlSetRows.forEach((e=>{e.forEach((e=>{e&&("string"==typeof e?n[e]=ml.ne[e]:e.name&&e.config&&(n[e.name]=e.config))}))}))})),n}));var bl=n(50217);const yl=D.A.span`
  ${({theme:e})=>`\n    font-size: ${e.typography.sizes.s}px;\n    color: ${e.colors.grayscale.dark1};\n    background-color: ${e.colors.alert.base};\n\n    &:hover {\n      background-color: ${e.colors.alert.dark1};\n    }\n  `}
`;function xl(e){return null==e||""===e||Array.isArray(e)&&0===e.length||"object"==typeof e&&0===Object.keys(e).length?null:e}class wl extends o.Component{constructor(e){super(e);const t=this.getDiffs(e),n=(e=>{const t=(0,Ve.A)().get(e);return vl(e,t)})(e.origFormData.viz_type),o=this.getRowsFromDiffs(t,n);this.state={rows:o,hasDiffs:!Er()(t),controlsMap:n}}UNSAFE_componentWillReceiveProps(e){if(nt()(this.props,e))return;const t=this.getDiffs(e);this.setState((e=>({rows:this.getRowsFromDiffs(t,e.controlsMap),hasDiffs:!Er()(t)})))}getRowsFromDiffs(e,t){return Object.entries(e).map((([e,n])=>{var o;return{control:(null==(o=t[e])?void 0:o.label)||e,before:this.formatValue(n.before,e,t),after:this.formatValue(n.after,e,t)}}))}getDiffs(e){const t=(0,ee.kV)(e.origFormData),n=(0,ee.kV)(e.currentFormData),o=Object.keys(n),a={};return o.forEach((e=>{(t[e]||n[e])&&(["filters","having","where"].includes(e)||this.isEqualish(t[e],n[e])||(a[e]={before:t[e],after:n[e]}))})),a}isEqualish(e,t){return nt()(xl(e),xl(t))}formatValue(e,t,n){var o,a,r,i;if(void 0===e)return"N/A";if(null===e)return"null";if("AdhocFilterControl"===(null==(o=n[t])?void 0:o.type)&&Array.isArray(e))return e.length?e.map((e=>{const t=e.comparator&&e.comparator.constructor===Array?`[${e.comparator.join(", ")}]`:e.comparator;return`${e.subject} ${e.operator} ${t}`})).join(", "):"[]";if("BoundsControl"===(null==(a=n[t])?void 0:a.type))return`Min: ${e[0]}, Max: ${e[1]}`;if("CollectionControl"===(null==(r=n[t])?void 0:r.type)&&Array.isArray(e))return e.map((e=>(0,Vn.J)(e))).join(", ");if("MetricsControl"===(null==(i=n[t])?void 0:i.type)&&Array.isArray(e)){const t=e.map((e=>{var t;return null!=(t=null==e?void 0:e.label)?t:e}));return t.length?t.join(", "):"[]"}if("boolean"==typeof e)return e?"true":"false";if(Array.isArray(e)){const t=e.map((e=>{var t;return null!=(t=null==e?void 0:e.label)?t:e}));return t.length?t.join(", "):"[]"}return"string"==typeof e||"number"==typeof e?e:(0,Vn.J)(e)}renderModalBody(){const e=[{accessor:"control",Header:(0,s.t)("Control")},{accessor:"before",Header:(0,s.t)("Before")},{accessor:"after",Header:(0,s.t)("After")}];return(0,R.Y)(bl.A,{columns:e,data:this.state.rows,pageSize:50,className:"table-condensed",columnsForWrapText:["Control","Before","After"]})}renderTriggerNode(){return(0,R.Y)(B.m,{id:"difference-tooltip",title:(0,s.t)("Click to see difference")},(0,R.Y)(yl,{className:"label"},(0,s.t)("Altered")))}render(){return this.state.hasDiffs?(0,R.Y)(Pn.A,{triggerNode:this.renderTriggerNode(),modalTitle:(0,s.t)("Chart changes"),modalBody:this.renderModalBody(),responsive:!0}):null}}const Cl=wl;var Sl,Al,kl=n(36446),El=n(76923),_l=n(13917),Yl=n(72965),Tl=n(73135),Ml=n(72391),Ol=n(75488),Dl=n(50068),Rl=n(93103),Nl=n(37020),Il=n(93491),Ll=n(17466),jl=n(97987);!function(e){e.Dashboards="dashboards",e.Charts="charts"}(Sl||(Sl={})),function(e){e.Text="TEXT",e.PNG="PNG",e.CSV="CSV"}(Al||(Al={}));var $l=n(50500),Pl=n(19968),Fl=n(51647);const Bl=(0,D.A)(Je.A)`
  .ant-modal-body {
    padding: 0;
  }
`,Hl=D.A.div`
  padding: ${({theme:e})=>`${3*e.gridUnit}px ${4*e.gridUnit}px ${2*e.gridUnit}px`};
  label {
    font-size: ${({theme:e})=>e.typography.sizes.s}px;
    color: ${({theme:e})=>e.colors.grayscale.light1};
  }
`,zl=D.A.div`
  border-top: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
  padding: ${({theme:e})=>`${4*e.gridUnit}px ${4*e.gridUnit}px ${6*e.gridUnit}px`};
  .ant-select {
    width: 100%;
  }
  .control-label {
    font-size: ${({theme:e})=>e.typography.sizes.s}px;
    color: ${({theme:e})=>e.colors.grayscale.light1};
  }
`,Ul=D.A.span`
  span {
    margin-right: ${({theme:e})=>2*e.gridUnit}px;
    vertical-align: middle;
  }
  .text {
    vertical-align: middle;
  }
`,Wl=D.A.div`
  margin-bottom: ${({theme:e})=>7*e.gridUnit}px;

  h4 {
    margin-bottom: ${({theme:e})=>3*e.gridUnit}px;
  }
`,ql=(0,D.A)(Fl.l5)`
  margin-bottom: ${({theme:e})=>3*e.gridUnit}px;
  width: ${({theme:e})=>120*e.gridUnit}px;
`,Vl=D.A.p`
  color: ${({theme:e})=>e.colors.error.base};
`,Gl=R.AH`
  margin-bottom: 0;
`,Xl=(0,D.A)(Te.A)`
  width: ${({theme:e})=>40*e.gridUnit}px;
`,Ql=e=>R.AH`
  margin: ${3*e.gridUnit}px 0 ${2*e.gridUnit}px;
`,Kl=D.A.div`
  margin: ${({theme:e})=>8*e.gridUnit}px 0
    ${({theme:e})=>4*e.gridUnit}px;
`,Zl=(0,D.A)(Fi.s)`
  display: block;
  line-height: ${({theme:e})=>8*e.gridUnit}px;
`,Jl=(0,D.A)(Fi.s.Group)`
  margin-left: ${({theme:e})=>.5*e.gridUnit}px;
`,es=["pivot_table_v2","table","paired_ttest"],ts={crontab:"0 12 * * 1"},ns={},os=(0,le.Ay)((function({onHide:e,show:t=!1,dashboardId:n,chart:r,userId:i,userEmail:l,creationMethod:c,dashboardName:d,chartName:u}){var h;const p=null==r||null==(h=r.sliceFormData)?void 0:h.viz_type,g=!!r,m=g&&p&&es.includes(p),v=m?Al.Text:Al.PNG,b=d||u,y=(0,o.useMemo)((()=>({...ts,name:b?(0,s.t)("Weekly Report for %s",b):(0,s.t)("Weekly Report")})),[b]),x=(0,o.useCallback)(((e,t)=>"reset"===t?y:{...e,...t}),[y]),[w,C]=(0,o.useReducer)(x,y),[S,A]=(0,o.useState)(),k=(0,a.wA)(),E=(0,a.d4)((e=>{const t=n?ds.Dashboards:ds.Charts;return(0,$l.oi)(e,t,n||(null==r?void 0:r.id))||ns})),_=E&&Object.keys(E).length;(0,o.useEffect)((()=>{C(_?E:"reset")}),[_,E]);const Y=(0,R.Y)(Ul,null,(0,R.Y)(H.A.Calendar,null),(0,R.Y)("span",{className:"text"},_?(0,s.t)("Edit email report"):(0,s.t)("Schedule a new email report"))),T=(0,R.Y)(o.Fragment,null,(0,R.Y)(Xl,{key:"back",onClick:e},(0,s.t)("Cancel")),(0,R.Y)(Xl,{key:"submit",buttonStyle:"primary",onClick:async()=>{const t={type:"Report",active:!0,force_screenshot:!1,custom_width:w.custom_width,creation_method:c,dashboard:n,chart:null==r?void 0:r.id,owners:[i],recipients:[{recipient_config_json:{target:l},type:"Email"}],name:w.name,description:w.description,crontab:w.crontab,report_format:w.report_format||v,timezone:w.timezone};C({isSubmitting:!0,error:void 0});try{_?await k((0,Il.Zp)(w.id,t)):await k((0,Il.ef)(t)),e()}catch(e){const{error:t}=await(0,f.h4)(e);C({error:t})}C({isSubmitting:!1})},disabled:!w.name,loading:w.isSubmitting},_?(0,s.t)("Save"):(0,s.t)("Add"))),M=(0,R.Y)(o.Fragment,null,(0,R.Y)(Kl,null,(0,R.Y)("h4",null,(0,s.t)("Message content"))),(0,R.Y)("div",{className:"inline-container"},(0,R.Y)(Jl,{onChange:e=>{C({report_format:e.target.value})},value:w.report_format||v},m&&(0,R.Y)(Zl,{value:Al.Text},(0,s.t)("Text embedded in email")),(0,R.Y)(Zl,{value:Al.PNG},(0,s.t)("Image (PNG) embedded in email")),(0,R.Y)(Zl,{value:Al.CSV},(0,s.t)("Formatted CSV attached in email"))))),O=(0,R.Y)(Pl.tu,null,(0,R.Y)("div",{className:"control-label",css:Ql},(0,s.t)("Screenshot width")),(0,R.Y)("div",{className:"input-container"},(0,R.Y)(mt.pd,{type:"number",name:"custom_width",value:(null==w?void 0:w.custom_width)||"",placeholder:(0,s.t)("Input custom width in pixels"),onChange:e=>{C({custom_width:parseInt(e.target.value,10)||null})}})));return(0,R.Y)(Bl,{show:t,onHide:e,title:Y,footer:T,width:"432",centered:!0},(0,R.Y)(Hl,null,(0,R.Y)(jl.A,{id:"name",name:"name",value:w.name||"",placeholder:y.name,required:!0,validationMethods:{onChange:({target:e})=>C({name:e.value})},label:(0,s.t)("Report Name"),"data-test":"report-name-test"}),(0,R.Y)(jl.A,{id:"description",name:"description",value:(null==w?void 0:w.description)||"",validationMethods:{onChange:({target:e})=>{C({description:e.value})}},label:(0,s.t)("Description"),placeholder:(0,s.t)("Include a description that will be sent with your report"),css:Gl,"data-test":"report-description-test"})),(0,R.Y)(zl,null,(0,R.Y)(Wl,null,(0,R.Y)("h4",{css:e=>(e=>R.AH`
  margin: ${3*e.gridUnit}px 0;
`)(e)},(0,s.t)("Schedule")),(0,R.Y)("p",null,(0,s.t)("A screenshot of the dashboard will be sent to your email at"))),(0,R.Y)(ql,{clearButton:!1,value:w.crontab||"0 12 * * 1",setValue:e=>{C({crontab:e})},onError:A}),(0,R.Y)(Vl,null,S),(0,R.Y)("div",{className:"control-label",css:e=>(e=>R.AH`
  margin: ${3*e.gridUnit}px 0 ${2*e.gridUnit}px;
`)(e)},(0,s.t)("Timezone")),(0,R.Y)(Ll.A,{timezone:w.timezone,onTimezoneChange:e=>{C({timezone:e})}}),g&&M,(!g||!m)&&O),w.error&&(0,R.Y)(ge.A,{type:"error",css:e=>(e=>R.AH`
  border: ${e.colors.error.base} 1px solid;
  padding: ${4*e.gridUnit}px;
  margin: ${4*e.gridUnit}px;
  margin-top: 0;
  color: ${e.colors.error.dark2};
  .ant-alert-message {
    font-size: ${e.typography.sizes.m}px;
    font-weight: bold;
  }
  .ant-alert-description {
    font-size: ${e.typography.sizes.m}px;
    line-height: ${4*e.gridUnit}px;
    .ant-alert-icon {
      margin-right: ${2.5*e.gridUnit}px;
      font-size: ${e.typography.sizes.l}px;
      position: relative;
      top: ${e.gridUnit/4}px;
    }
  }
`)(e),message:_?(0,s.t)("Failed to update report"):(0,s.t)("Failed to create report"),description:w.error}))})),as=(0,Ml.a)(),rs=e=>R.AH`
  color: ${e.colors.error.base};
`,is=e=>R.AH`
  & .ant-menu-item {
    padding: 5px 12px;
    margin-top: 0px;
    margin-bottom: 4px;
    :hover {
      color: ${e.colors.grayscale.dark1};
    }
  }
  :hover {
    background-color: ${e.colors.secondary.light5};
  }
`,ls=e=>R.AH`
  &:hover {
    color: ${e.colors.grayscale.dark1};
    background-color: ${e.colors.secondary.light5};
  }
`,ss=D.A.div`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  > *:first-child {
    margin-right: ${({theme:e})=>e.gridUnit}px;
  }
`,cs=as.get("report-modal.dropdown.item.icon");var ds;!function(e){e.Charts="charts",e.Dashboards="dashboards"}(ds||(ds={}));const us={};var hs={name:"1e1ncky",styles:"border:none"},ps={name:"833hqy",styles:"width:200px"};function fs({dashboardId:e,chart:t,useTextMenu:n=!1,setShowReportSubMenu:r,setIsDropdownVisible:i,isDropdownVisible:l,...c}){const d=(0,a.wA)(),u=(0,a.d4)((n=>{const o=e?ds.Dashboards:ds.Charts;return(0,$l.oi)(n,o,e||(null==t?void 0:t.id))||us})),h=(null==u?void 0:u.active)||!1,p=(0,a.d4)((e=>e.user)),f=()=>!!(0,ce.G7)(ce.TO.AlertReports)&&(!(null==p||!p.userId)&&(!!(e||null!=t&&t.id)&&Object.keys(p.roles||[]).map((e=>p.roles[e].filter((e=>"menu_access"===e[0]&&"Manage"===e[1])))).some((e=>e.length>0)))),[g,m]=(0,o.useState)(null),v=(0,L.DP)(),b=(0,I.Z)(e),[y,x]=(0,o.useState)(!1),w=async(e,t)=>{null!=e&&e.id&&d((0,Il.PM)(e,t))},S=f()&&!!(e&&b!==e||null!=t&&t.id);(0,o.useEffect)((()=>{S&&d((0,Il.LQ)({userId:p.userId,filterField:e?"dashboard_id":"chart_id",creationMethod:e?"dashboards":"charts",resourceId:e||(null==t?void 0:t.id)}))}),[]);const A=u&&r&&f();(0,o.useEffect)((()=>{A?r(!0):!u&&r&&r(!1)}),[u]);const k=()=>{i&&(i(!1),x(!0))};return(0,R.Y)(o.Fragment,null,f()&&(0,R.Y)(o.Fragment,null,(0,R.Y)(os,{userId:p.userId,show:y,onHide:()=>x(!1),userEmail:p.email,dashboardId:e,chart:t,creationMethod:e?ds.Dashboards:ds.Charts}),n?Er()(u)?(0,R.Y)(Nn.W,(0,C.A)({selectable:!1},c,{css:is}),(0,R.Y)(Nn.W.Item,{onClick:k},cs?(0,R.Y)(ss,null,(0,R.Y)("div",null,(0,s.t)("Set up an email report")),(0,R.Y)(cs,null)):(0,s.t)("Set up an email report")),(0,R.Y)(Nn.W.Divider,null)):l&&(0,R.Y)(Nn.W,{selectable:!1,css:hs},(0,R.Y)(Nn.W.Item,{css:ls,onClick:()=>w(u,!h)},(0,R.Y)(Rs,null,(0,R.Y)(Dl.Ay,{checked:h,onChange:xo.fZ}),(0,s.t)("Email reports active"))),(0,R.Y)(Nn.W.Item,{css:ls,onClick:k},(0,s.t)("Edit email report")),(0,R.Y)(Nn.W.Item,{css:ls,onClick:()=>{i&&(i(!1),m(u))}},(0,s.t)("Delete email report"))):Er()(u)?(0,R.Y)("span",{role:"button",title:(0,s.t)("Schedule email report"),tabIndex:0,className:"action-button action-schedule-report",onClick:()=>x(!0)},(0,R.Y)(H.A.Calendar,null)):(0,R.Y)(o.Fragment,null,(0,R.Y)(Rl.R2,{overlay:(0,R.Y)(Nn.W,{selectable:!1,css:ps},(0,R.Y)(Nn.W.Item,null,(0,s.t)("Email reports active"),(0,R.Y)(Ol.d,{"data-test":"toggle-active",checked:h,onClick:e=>w(u,e),size:"small",css:(0,R.AH)({marginLeft:2*v.gridUnit},"","")})),(0,R.Y)(Nn.W.Item,{onClick:()=>x(!0)},(0,s.t)("Edit email report")),(0,R.Y)(Nn.W.Item,{onClick:()=>m(u),css:rs},(0,s.t)("Delete email report"))),overlayStyle:{zIndex:99,animationDuration:"0s"},trigger:["click"],getPopupContainer:e=>e.closest(".action-button")},(0,R.Y)("span",{role:"button",className:"action-button action-schedule-report",tabIndex:0},(0,R.Y)(H.A.Calendar,null)))),g&&(0,R.Y)(Nl.A,{description:(0,s.t)("This action will permanently delete %s.",null==g?void 0:g.name),onConfirm:()=>{g&&(async e=>{await d((0,Il.i7)(e)),m(null)})(g)},onHide:()=>m(null),open:!0,title:(0,s.t)("Delete Report?")})))}var gs=n(17432),ms=n(55594),vs=n(39091);const bs=(0,D.A)(vs.i8)`
  && {
    margin: 0 0 ${({theme:e})=>e.gridUnit}px;
  }
`,ys=({formData:e,addDangerToast:t})=>{const[n,a]=(0,o.useState)("400"),[r,i]=(0,o.useState)("600"),[l,c]=(0,o.useState)(""),[d,u]=(0,o.useState)(""),f=(0,o.useCallback)((e=>{const{value:t,name:n}=e.currentTarget;"width"===n&&i(t),"height"===n&&a(t)}),[]),g=(0,o.useCallback)((()=>{c(""),(0,h.Kx)(e).then((e=>{c(e),u("")})).catch((()=>{u((0,s.t)("Error")),t((0,s.t)("Sorry, something went wrong. Try again later."))}))}),[t,e]);(0,o.useEffect)((()=>{g()}),[]);const m=(0,o.useMemo)((()=>{if(!l)return"";const e=`${l}?${p.vX.standalone.name}=1&height=${n}`;return`<iframe\n  width="${r}"\n  height="${n}"\n  seamless\n  frameBorder="0"\n  scrolling="no"\n  src="${e}"\n>\n</iframe>`}),[n,l,r]),v=d||m||(0,s.t)("Generating link, please wait..");return(0,R.Y)("div",{id:"embed-code-popover","data-test":"embed-code-popover"},(0,R.Y)("div",{css:R.AH`
          display: flex;
          flex-direction: column;
        `},(0,R.Y)(ms.A,{shouldShowText:!1,text:m,copyNode:(0,R.Y)(bs,{buttonSize:"xsmall"},(0,R.Y)("i",{className:"fa fa-clipboard"}))}),(0,R.Y)(mt.fs,{"data-test":"embed-code-textarea",name:"embedCode",disabled:!m,value:v,rows:"4",readOnly:!0,css:e=>R.AH`
            resize: vertical;
            padding: ${2*e.gridUnit}px;
            font-size: ${e.typography.sizes.s}px;
            border-radius: 4px;
            background-color: ${e.colors.secondary.light5};
          `})),(0,R.Y)("div",{css:e=>R.AH`
          display: flex;
          margin-top: ${4*e.gridUnit}px;
          & > div {
            margin-right: ${2*e.gridUnit}px;
          }
          & > div:last-of-type {
            margin-right: 0;
            margin-left: ${2*e.gridUnit}px;
          }
        `},(0,R.Y)("div",null,(0,R.Y)("label",{htmlFor:"embed-height"},(0,s.t)("Chart height")),(0,R.Y)(mt.pd,{type:"text",defaultValue:n,name:"height",onChange:f})),(0,R.Y)("div",null,(0,R.Y)("label",{htmlFor:"embed-width"},(0,s.t)("Chart width")),(0,R.Y)(mt.pd,{type:"text",defaultValue:r,name:"width",onChange:f,id:"embed-width"}))))},xs=({chartId:e,dashboards:t=[],...n})=>{const a=(0,L.DP)(),[r,i]=(0,o.useState)(),[l,c]=(0,o.useState)(),d=t.length>10,u=t.filter((e=>!r||e.dashboard_title.toLowerCase().includes(r.toLowerCase()))),h=0===t.length,p=r&&0===u.length,f=e?`?focused_chart=${e}`:"";return(0,R.Y)(o.Fragment,null,d&&(0,R.Y)(mt.pd,{allowClear:!0,placeholder:(0,s.t)("Search"),prefix:(0,R.Y)(H.A.Search,{iconSize:"l"}),css:R.AH`
            width: ${220}px;
            margin: ${2*a.gridUnit}px ${3*a.gridUnit}px;
          `,value:r,onChange:e=>i(e.currentTarget.value)}),(0,R.Y)("div",{css:R.AH`
          max-height: ${300}px;
          overflow: auto;
        `},u.map((e=>(0,R.Y)(Nn.W.Item,(0,C.A)({key:String(e.id),onMouseEnter:()=>c(e.id),onMouseLeave:()=>{l===e.id&&c(null)}},n),(0,R.Y)(Gn.N_,{target:"_blank",rel:"noreferer noopener",to:`/superset/dashboard/${e.id}${f}`},(0,R.Y)("div",{css:R.AH`
                  display: flex;
                  flex-direction: row;
                  align-items: center;
                  max-width: ${220}px;
                `},(0,R.Y)("div",{css:R.AH`
                    white-space: normal;
                  `},e.dashboard_title),(0,R.Y)(H.A.Full,{iconSize:"l",iconColor:a.colors.grayscale.base,css:R.AH`
                    margin-left: ${2*a.gridUnit}px;
                    visibility: ${l===e.id?"visible":"hidden"};
                  `})))))),p&&(0,R.Y)("div",{css:R.AH`
              margin-left: ${3*a.gridUnit}px;
              margin-bottom: ${a.gridUnit}px;
            `},(0,s.t)("No results found")),h&&(0,R.Y)(Nn.W.Item,(0,C.A)({disabled:!0,css:R.AH`
              min-width: ${220}px;
            `},n),(0,s.t)("None"))))},ws="edit_properties",Cs="export_to_csv",Ss="export_to_csv_pivoted",As="export_to_json",ks="export_to_xlsx",Es="download_as_image",_s="copy_permalink",Ys="embed_code",Ts="share_by_email",Ms="view_query",Os="run_in_sql_lab",Ds=["pivot_table_v2"],Rs=D.A.div`
  ${({theme:e})=>R.AH`
    display: flex;
    align-items: center;

    & svg {
      width: ${3*e.gridUnit}px;
      height: ${3*e.gridUnit}px;
    }

    & span[role='checkbox'] {
      display: inline-flex;
      margin-right: ${e.gridUnit}px;
    }
  `}
`,Ns=((0,D.A)(Te.A)`
  ${({theme:e})=>R.AH`
    width: ${8*e.gridUnit}px;
    height: ${8*e.gridUnit}px;
    padding: 0;
    border: 1px solid ${e.colors.primary.dark2};

    &.ant-btn > span.anticon {
      line-height: 0;
      transition: inherit;
    }

    &:hover:not(:focus) > span.anticon {
      color: ${e.colors.primary.light1};
    }
  `}
`,R.AH`
  .ant-dropdown-menu-item > & > .anticon:first-child {
    margin-right: 0;
    vertical-align: 0;
  }
`),Is={actions:M().object.isRequired,canOverwrite:M().bool.isRequired,canDownload:M().bool.isRequired,dashboardId:M().number,isStarred:M().bool.isRequired,slice:M().object,sliceName:M().string,table_name:M().string,formData:M().object,ownState:M().object,timeout:M().number,chart:Z.tb,saveDisabled:M().bool},Ls=e=>R.AH`
  color: ${e.colors.primary.dark2};
  & > span[role='img'] {
    margin-right: 0;
  }
`,js=e=>R.AH`
  display: flex;
  align-items: center;
  margin-left: ${e.gridUnit}px;
  & > span {
    margin-right: ${3*e.gridUnit}px;
  }
`,$s=({dashboardId:e,slice:t,actions:n,formData:i,ownState:l,chart:c,user:d,canOverwrite:u,canDownload:p,isStarred:f,sliceName:g,saveDisabled:m,metadata:v})=>{const b=(0,a.wA)(),{latestQueryFormData:y,sliceFormData:x}=c,[w,S]=(0,o.useState)(!1);(0,o.useEffect)((()=>{e&&(async()=>{const{dashboards:t}=v||{},n=e&&t&&t.find((t=>t.id===e));if(n)try{var o;const e=await pe.A.get({endpoint:`/api/v1/dashboard/${n.id}`}),t=null==e||null==(o=e.json)?void 0:o.result,a=JSON.parse(t.json_metadata),r=a.shared_label_colors||{},i=a.label_colors||{},l={...r,...i},s=fl.getNamespace();Object.keys(l).forEach((e=>{s.setColor(e,l[e],a.color_scheme)}))}catch(e){N.A.info((0,s.t)("Unable to retrieve dashboard colors"))}})()}),[]);const A=(0,o.useCallback)((()=>{b((0,re.setSaveChartModalVisibility)(!0))}),[b]),k=(0,o.useCallback)((e=>{b((0,ae.sliceUpdated)(e))}),[b]),E=(0,r.W6)(),{redirectSQLLab:_}=n,Y=(0,o.useCallback)(((e,t=!1)=>{_(e,!t&&E)}),[_,E]),[T,M,O]=((e,t,n,r,i,l,c,...d)=>{const u=(0,L.DP)(),{addDangerToast:p,addSuccessToast:f}=(0,le.Yf)(),g=(0,a.wA)(),[m,v]=(0,o.useState)(null),[b,y]=(0,o.useState)(!1),x=(0,a.d4)((e=>{var t;return null==(t=e.charts)?void 0:t[(0,ne.kD)(e.explore)]})),{datasource:w}=e,S=(0,o.useCallback)((async()=>{try{const t=(0,s.t)("Superset Chart"),n=await(0,h.Kx)(e),o=encodeURIComponent((0,s.t)("%s%s","Check out this chart: ",n));window.location.href=`mailto:?Subject=${t}%20&Body=${o}`}catch(e){p((0,s.t)("Sorry, something went wrong. Try again later."))}}),[p,e]),A=(0,o.useCallback)((()=>t?(0,ne.RY)({formData:e,ownState:l,resultType:"full",resultFormat:"csv"}):null),[t,e]),k=(0,o.useCallback)((()=>t?(0,ne.RY)({formData:e,resultType:"post_processed",resultFormat:"csv"}):null),[t,e]),E=(0,o.useCallback)((()=>(0,ne.RY)({formData:e,resultType:"results",resultFormat:"json"})),[e]),_=(0,o.useCallback)((()=>(0,ne.RY)({formData:e,resultType:"results",resultFormat:"xlsx"})),[e]),Y=(0,o.useCallback)((async()=>{try{if(!e)throw new Error;await(0,Tl.A)((()=>(0,h.Kx)(e))),f((0,s.t)("Copied to clipboard!"))}catch(e){p((0,s.t)("Sorry, something went wrong. Try again later."))}}),[p,f,e]),T=(0,o.useCallback)((({key:t,domEvent:o})=>{var a;switch(t){case ws:i(),y(!1);break;case Cs:A(),y(!1),g((0,q.logEvent)(V.xb,{chartId:null==n?void 0:n.slice_id,chartName:null==n?void 0:n.slice_name}));break;case Ss:k(),y(!1),g((0,q.logEvent)(V.vp,{chartId:null==n?void 0:n.slice_id,chartName:null==n?void 0:n.slice_name}));break;case As:E(),y(!1),g((0,q.logEvent)(V.v2,{chartId:null==n?void 0:n.slice_id,chartName:null==n?void 0:n.slice_name}));break;case ks:_(),y(!1),g((0,q.logEvent)(V.k8,{chartId:null==n?void 0:n.slice_id,chartName:null==n?void 0:n.slice_name}));break;case Es:(0,Yl.A)(".panel-body .chart-container",null!=(a=null==n?void 0:n.slice_name)?a:(0,s.t)("New chart"),!0)(o),y(!1),g((0,q.logEvent)(V.C7,{chartId:null==n?void 0:n.slice_id,chartName:null==n?void 0:n.slice_name}));break;case _s:Y(),y(!1);break;case Ys:y(!1);break;case Ts:S(),y(!1);break;case Ms:y(!1);break;case Os:r(e,o.metaKey),y(!1)}}),[Y,A,k,E,e,r,i,S,null==n?void 0:n.slice_name]);return[(0,o.useMemo)((()=>(0,R.Y)(Nn.W,(0,C.A)({onClick:T,selectable:!1},d),(0,R.Y)(o.Fragment,null,n&&(0,R.Y)(Nn.W.Item,{key:ws},(0,s.t)("Edit chart properties")),(0,R.Y)(Nn.W.SubMenu,{title:(0,s.t)("On dashboards"),key:"dashboards_added_to"},(0,R.Y)(xs,{chartId:null==n?void 0:n.slice_id,dashboards:c})),(0,R.Y)(Nn.W.Divider,null)),(0,R.Y)(Nn.W.SubMenu,{title:(0,s.t)("Download"),key:"download_submenu"},Ds.includes(e.viz_type)?(0,R.Y)(o.Fragment,null,(0,R.Y)(Nn.W.Item,{key:Cs,icon:(0,R.Y)(H.A.FileOutlined,{css:Ns}),disabled:!t},(0,s.t)("Export to original .CSV")),(0,R.Y)(Nn.W.Item,{key:Ss,icon:(0,R.Y)(H.A.FileOutlined,{css:Ns}),disabled:!t},(0,s.t)("Export to pivoted .CSV"))):(0,R.Y)(Nn.W.Item,{key:Cs,icon:(0,R.Y)(H.A.FileOutlined,{css:Ns}),disabled:!t},(0,s.t)("Export to .CSV")),(0,R.Y)(Nn.W.Item,{key:As,icon:(0,R.Y)(H.A.FileOutlined,{css:Ns})},(0,s.t)("Export to .JSON")),(0,R.Y)(Nn.W.Item,{key:Es,icon:(0,R.Y)(H.A.FileImageOutlined,{css:Ns})},(0,s.t)("Download as image")),(0,R.Y)(Nn.W.Item,{key:ks,icon:(0,R.Y)(H.A.FileOutlined,{css:Ns})},(0,s.t)("Export to Excel"))),(0,R.Y)(Nn.W.SubMenu,{title:(0,s.t)("Share"),key:"share_submenu"},(0,R.Y)(Nn.W.Item,{key:_s},(0,s.t)("Copy permalink to clipboard")),(0,R.Y)(Nn.W.Item,{key:Ts},(0,s.t)("Share chart by email")),(0,ce.G7)(ce.TO.EmbeddableCharts)?(0,R.Y)(Nn.W.Item,{key:Ys},(0,R.Y)(Pn.A,{triggerNode:(0,R.Y)("span",{"data-test":"embed-code-button"},(0,s.t)("Embed code")),modalTitle:(0,s.t)("Embed code"),modalBody:(0,R.Y)(ys,{formData:e,addDangerToast:p}),maxWidth:100*u.gridUnit+"px",destroyOnClose:!0,responsive:!0})):null),(0,R.Y)(Nn.W.Divider,null),m?(0,R.Y)(o.Fragment,null,(0,R.Y)(Nn.W.SubMenu,{title:(0,s.t)("Manage email report")},(0,R.Y)(fs,{chart:x,setShowReportSubMenu:v,showReportSubMenu:m,setIsDropdownVisible:y,isDropdownVisible:b,useTextMenu:!0})),(0,R.Y)(Nn.W.Divider,null)):(0,R.Y)(Nn.W,null,(0,R.Y)(fs,{chart:x,setShowReportSubMenu:v,setIsDropdownVisible:y,isDropdownVisible:b,useTextMenu:!0})),(0,R.Y)(Nn.W.Item,{key:Ms},(0,R.Y)(Pn.A,{triggerNode:(0,R.Y)("span",{"data-test":"view-query-menu-item"},(0,s.t)("View query")),modalTitle:(0,s.t)("View query"),modalBody:(0,R.Y)(gs.A,{latestQueryFormData:e}),draggable:!0,resizable:!0,responsive:!0})),w&&(0,R.Y)(Nn.W.Item,{key:Os},(0,s.t)("Run in SQL Lab")))),[p,t,x,c,T,b,e,m,n,u.gridUnit]),b,y]})(y,p,t,Y,(()=>{S(!0)}),l,null==v?void 0:v.dashboards),D=(0,o.useMemo)((()=>{if(!v)return null;const e=[];return e.push({type:_l.QD.Dashboards,title:v.dashboards.length>0?(0,s.tn)("Added to 1 dashboard","Added to %s dashboards",v.dashboards.length,v.dashboards.length):(0,s.t)("Not added to any dashboard"),description:v.dashboards.length>0?(0,s.t)("You can preview the list of dashboards in the chart settings dropdown."):void 0}),e.push({type:_l.QD.LastModified,value:v.changed_on_humanized,modifiedBy:v.changed_by||(0,s.t)("Not available")}),e.push({type:_l.QD.Owner,createdBy:v.created_by||(0,s.t)("Not available"),owners:v.owners.length>0?v.owners:(0,s.t)("None"),createdOn:v.created_on_humanized}),null!=t&&t.description&&e.push({type:_l.QD.Description,value:null==t?void 0:t.description}),(0,R.Y)(_l.Ay,{items:e,tooltipPlacement:"bottom"})}),[v,null==t?void 0:t.description]),I=null==t?void 0:t.slice_name;return(0,R.Y)(o.Fragment,null,(0,R.Y)(El.U,{editableTitleProps:{title:g,canEdit:!t||u||((null==t?void 0:t.owners)||[]).includes(null==d?void 0:d.userId),onSave:n.updateChartTitle,placeholder:(0,s.t)("Add the name of the chart"),label:(0,s.t)("Chart title")},showTitlePanelItems:!!t,certificatiedBadgeProps:{certifiedBy:null==t?void 0:t.certified_by,details:null==t?void 0:t.certification_details},showFaveStar:!(null==d||!d.userId),faveStarProps:{itemId:null==t?void 0:t.slice_id,fetchFaveStar:n.fetchFaveStar,saveFaveStar:n.saveFaveStar,isStarred:f,showTooltip:!0},titlePanelAdditionalItems:(0,R.Y)("div",{css:js},x?(0,R.Y)(Cl,{className:"altered",origFormData:{...x,chartTitle:I},currentFormData:{...i,chartTitle:g}}):null,D),rightPanelAdditionalItems:(0,R.Y)(B.m,{title:m?(0,s.t)("Add required control values to save chart"):null},(0,R.Y)("div",null,(0,R.Y)(Te.A,{buttonStyle:"secondary",onClick:A,disabled:m,"data-test":"query-save-button",css:Ls},(0,R.Y)(H.A.SaveOutlined,{iconSize:"l"}),(0,s.t)("Save")))),additionalActionsMenu:T,menuDropdownProps:{visible:M,onVisibleChange:O}}),w&&(0,R.Y)(kl.A,{show:w,onHide:()=>{S(!1)},onSave:k,slice:t}))};$s.propTypes=Is;const Ps=$s,Fs={...ze.propTypes,actions:M().object.isRequired,datasource_type:M().string.isRequired,dashboardId:M().number,isDatasourceMetaLoading:M().bool.isRequired,chart:Z.tb.isRequired,slice:M().object,sliceName:M().string,controls:M().object.isRequired,forcedHeight:M().string,form_data:M().object.isRequired,standalone:M().bool.isRequired,force:M().bool,timeout:M().number,impressionId:M().string,vizType:M().string,saveAction:M().string,isSaveModalVisible:M().bool},Bs=D.A.div`
  ${({theme:e})=>R.AH`
    background: ${e.colors.grayscale.light5};
    text-align: left;
    position: relative;
    width: 100%;
    max-height: 100%;
    min-height: 0;
    display: flex;
    flex: 1;
    flex-wrap: nowrap;
    border-top: 1px solid ${e.colors.grayscale.light2};
    .explore-column {
      display: flex;
      flex-direction: column;
      padding: ${2*e.gridUnit}px 0;
      max-height: 100%;
    }
    .data-source-selection {
      background-color: ${e.colors.grayscale.light5};
      padding: ${2*e.gridUnit}px 0;
      border-right: 1px solid ${e.colors.grayscale.light2};
    }
    .main-explore-content {
      flex: 1;
      min-width: ${128*e.gridUnit}px;
      border-left: 1px solid ${e.colors.grayscale.light2};
      padding: 0 ${4*e.gridUnit}px;
      .panel {
        margin-bottom: 0;
      }
    }
    .controls-column {
      align-self: flex-start;
      padding: 0;
    }
    .title-container {
      position: relative;
      display: flex;
      flex-direction: row;
      padding: 0 ${2*e.gridUnit}px 0 ${4*e.gridUnit}px;
      justify-content: space-between;
      .horizontal-text {
        font-size: ${e.typography.sizes.m}px;
      }
    }
    .no-show {
      display: none;
    }
    .vertical-text {
      writing-mode: vertical-rl;
      text-orientation: mixed;
    }
    .sidebar {
      height: 100%;
      background-color: ${e.colors.grayscale.light4};
      padding: ${2*e.gridUnit}px;
      width: ${8*e.gridUnit}px;
    }
    .collapse-icon > svg {
      color: ${e.colors.primary.base};
    }
  `};
`,Hs=Y()((async(e,t,n,o,a,r,i,l)=>{const s={...e},c=e.slice_id,d=new URLSearchParams(window.location.search),u=Object.fromEntries(d);c?u[p.vX.sliceId.name]=c:(u[p.vX.datasourceId.name]=t,u[p.vX.datasourceType.name]=n);const f=(null==s?void 0:s.url_params)||{};Object.entries(f).forEach((([e,t])=>{p.v2.includes(e)||(u[e]=t)}));try{let d,f;if(o?(d=await(0,ee.T3)(t,n,e,c,l),f="replaceState"):(d=(0,h.P3)(p.vX.formDataKey),await(0,ee.cL)(t,n,d,e,c,l),f="pushState"),window.location.pathname.startsWith("/explore")){const e=(0,ne.eX)(a?p.vX.standalone.name:null,{[p.vX.formDataKey.name]:d,...u},r);window.history[f](s,i,e)}}catch(e){N.A.warn("Failed at altering browser history",e)}}),1e3),zs={controls_width:320,datasource_width:300};function Us(e){return(0,z.Gq)(e,zs[e])}function Ws(e,t){const n=Number(Us(e))+t.width;(0,z.SO)(e,n)}function qs(e){const t=(0,F.Q)().dynamicPlugins[e.vizType],n=t&&t.mounting,a=(0,I.Z)(n),r=(0,I.Z)(e.controls),[i,l]=(0,o.useState)(e.controls),[c,d]=(0,o.useState)(!1),[u,h]=(0,o.useState)(Us(z.Hh.DatasourceWidth)),p=(0,ie.w)(),f=(0,L.DP)(),g=(0,o.useCallback)((async({isReplace:t=!1,title:n}={})=>{const o=e.dashboardId?{...e.form_data,dashboardId:e.dashboardId}:e.form_data,{id:a,type:r}=e.datasource;Hs(o,a,r,t,e.standalone,e.force,n,p)}),[e.dashboardId,e.form_data,e.datasource.id,e.datasource.type,e.standalone,e.force,p]),m=(0,o.useCallback)((()=>{const t=window.history.state;t&&Object.keys(t).length&&(e.actions.setExploreControls(t),e.actions.postChartFormData(t,e.force,e.timeout,e.chart.id))}),[e.actions,e.chart.id,e.timeout]),v=(0,o.useCallback)((()=>{e.actions.setForceQuery(!1),e.actions.triggerQuery(!0,e.chart.id),g(),l(e.controls)}),[e.controls,g,e.actions,e.chart.id]),b=(0,o.useCallback)((t=>{if(t.ctrlKey||t.metaKey){const n="Enter"===t.key||13===t.keyCode,o="s"===t.key||83===t.keyCode;n?v():o&&e.slice&&e.actions.saveSlice(e.form_data,{action:"overwrite",slice_id:e.slice.slice_id,slice_name:e.slice.slice_name,add_to_dash:"noSave",goto_dash:!1}).then((({data:e})=>{window.location=e.slice.slice_url}))}}),[v,e.actions,e.form_data,e.slice]);function y(){d(!c)}(0,j.B)((()=>{e.actions.logEvent(V.HK)})),(0,$.h)(p,((e,t)=>{t&&g({isReplace:!0})}));const x=(0,I.Z)(m);(0,o.useEffect)((()=>(x&&window.removeEventListener("popstate",x),window.addEventListener("popstate",m),()=>{window.removeEventListener("popstate",m)})),[m,x]);const w=(0,I.Z)(b);(0,o.useEffect)((()=>(w&&window.removeEventListener("keydown",w),document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)})),[b,w]),(0,o.useEffect)((()=>{a&&!n&&e.actions.dynamicPluginControlsReady()}),[n]),(0,o.useEffect)((()=>{Object.values(e.controls).some((e=>e.validationErrors&&e.validationErrors.length>0))||e.actions.triggerQuery(!0,e.chart.id)}),[]);const S=(0,o.useCallback)((t=>{const n=t?{...e.chart.latestQueryFormData,...(0,oe.LK)(A()(e.controls,t))}:(0,oe.LK)(e.controls);e.actions.updateQueryFormData(n,e.chart.id),e.actions.renderTriggered((new Date).getTime(),e.chart.id),g()}),[g,e.actions,e.chart.id,e.chart.latestQueryFormData,e.controls]);(0,o.useEffect)((()=>{if(r&&e.chart.latestQueryFormData.viz_type===e.controls.viz_type.value){!e.controls.datasource||null!=r.datasource&&e.controls.datasource.value===r.datasource.value||(0,K.VZ)(e.form_data.datasource,!0);const t=Object.keys(e.controls).filter((t=>void 0!==r[t]&&!(0,W.r$)(e.controls[t].value,r[t].value))).filter((t=>e.controls[t].renderTrigger));t.length>0&&S(t)}}),[e.controls,e.ownState]);const k=(0,o.useMemo)((()=>!!i&&Object.keys(e.controls).filter((t=>void 0!==i[t]&&!(0,W.r$)(e.controls[t].value,i[t].value,{ignoreFields:["datasourceWarning"]}))).some((t=>!e.controls[t].renderTrigger&&!e.controls[t].dontRefreshOnChange))),[i,e.controls]);(0,$.h)(e.saveAction,(()=>{["saveas","overwrite"].includes(e.saveAction)&&(v(),g({isReplace:!0}),e.actions.setSaveAction(null))})),(0,o.useEffect)((()=>{void 0!==e.ownState&&(v(),S())}),[e.ownState]),k&&e.actions.logEvent(V.FO);const E=(0,o.useMemo)((()=>{const t=Object.values(e.controls).filter((e=>e.validationErrors&&e.validationErrors.length>0));if(0===t.length)return null;const n=t.map((e=>e.validationErrors)),o=[...new Set(n.flat())].map((e=>[t.filter((t=>{var n;return null==(n=t.validationErrors)?void 0:n.includes(e)})).map((e=>e.label)),e])).map((([e,t])=>(0,R.Y)("div",{key:t},e.length>1?(0,s.t)("Controls labeled "):(0,s.t)("Control labeled "),(0,R.Y)("strong",null,` ${e.join(", ")}`),(0,R.Y)("span",null,": ",t))));let a;return o.length>0&&(a=(0,R.Y)("div",{style:{textAlign:"left"}},o)),a}),[e.controls]);function _(){return(0,R.Y)(ze,(0,C.A)({},e,{errorMessage:E,chartIsStale:k,onQuery:v}))}return e.standalone?_():(0,R.Y)(nr,null,(0,R.Y)(Ps,{actions:e.actions,canOverwrite:e.can_overwrite,canDownload:e.can_download,dashboardId:e.dashboardId,isStarred:e.isStarred,slice:e.slice,sliceName:e.sliceName,table_name:e.table_name,formData:e.form_data,chart:e.chart,ownState:e.ownState,user:e.user,reports:e.reports,saveDisabled:E||"loading"===e.chart.chartStatus,metadata:e.metadata}),(0,R.Y)(Bs,{id:"explore-container"},(0,R.Y)(R.mL,{styles:R.AH`
            .navbar {
              margin-bottom: 0;
            }
            body {
              height: 100vh;
              max-height: 100vh;
              overflow: hidden;
            }
            #app-menu,
            #app {
              flex: 1 1 auto;
            }
            #app {
              flex-basis: 100%;
              overflow: hidden;
              height: 100%;
            }
            #app-menu {
              flex-shrink: 0;
            }
          `}),(0,R.Y)(P.c,{onResizeStop:(e,t,n,o)=>{h(n.getBoundingClientRect().width),Ws(z.Hh.DatasourceWidth,o)},defaultSize:{width:Us(z.Hh.DatasourceWidth),height:"100%"},minWidth:zs[z.Hh.DatasourceWidth],maxWidth:"33%",enable:{right:!0},className:c?"no-show":"explore-column data-source-selection"},(0,R.Y)("div",{className:"title-container"},(0,R.Y)("span",{className:"horizontal-text"},(0,s.t)("Chart Source")),(0,R.Y)("span",{role:"button",tabIndex:0,className:"action-button",onClick:y},(0,R.Y)(H.A.Expand,{className:"collapse-icon",iconColor:f.colors.primary.base,iconSize:"l"}))),(0,R.Y)(pl,{formData:e.form_data,datasource:e.datasource,controls:e.controls,actions:e.actions,width:u,user:e.user})),c?(0,R.Y)("div",{className:"sidebar",onClick:y,"data-test":"open-datasource-tab",role:"button",tabIndex:0},(0,R.Y)("span",{role:"button",tabIndex:0,className:"action-button"},(0,R.Y)(B.m,{title:(0,s.t)("Open Datasource tab")},(0,R.Y)(H.A.Collapse,{className:"collapse-icon",iconColor:f.colors.primary.base,iconSize:"l"})))):null,(0,R.Y)(P.c,{onResizeStop:(e,t,n,o)=>Ws(z.Hh.ControlsWidth,o),defaultSize:{width:Us(z.Hh.ControlsWidth),height:"100%"},minWidth:zs[z.Hh.ControlsWidth],maxWidth:"33%",enable:{right:!0},className:"col-sm-3 explore-column controls-column"},(0,R.Y)(ji,{exploreState:e.exploreState,actions:e.actions,form_data:e.form_data,controls:e.controls,chart:e.chart,datasource_type:e.datasource_type,isDatasourceMetaLoading:e.isDatasourceMetaLoading,onQuery:v,onStop:function(){e.chart&&e.chart.queryController&&e.chart.queryController.abort()},canStopQuery:e.can_add||e.can_overwrite,errorMessage:E,chartIsStale:k})),(0,R.Y)("div",{className:X()("main-explore-content",c?"col-sm-9":"col-sm-7")},_())),e.isSaveModalVisible&&(0,R.Y)(Ui,{addDangerToast:e.addDangerToast,actions:e.actions,form_data:e.form_data,sliceName:e.sliceName,dashboardId:e.dashboardId}))}qs.propTypes=Fs;const Vs=(0,a.Ng)((function(e){var t,n,o,a,r,i,l,s,c;const{explore:d,charts:u,common:h,impressionId:p,dataMask:f,reports:g,user:m,saveModal:v}=e,{controls:b,slice:y,datasource:x,metadata:w,hiddenFormData:C}=d,S=null!=(t=b.query_mode)&&t.value?(e=>Object.keys(null!=e?e:{}).filter((e=>!U.y3.has(e))))(C):Object.keys(null!=C?C:{}),A=E()((0,oe.LK)(b),S),k=null!=(n=null!=(o=A.slice_id)?o:null==y?void 0:y.slice_id)?n:0;A.extra_form_data=(0,J.pY)({...A.extra_form_data},{...null==(a=f[k])?void 0:a.ownState});const _=u[k];let Y=Number(null==(r=d.form_data)?void 0:r.dashboardId);return Number.isNaN(Y)&&(Y=void 0),{isDatasourceMetaLoading:d.isDatasourceMetaLoading,datasource:x,datasource_type:x.type,datasourceId:x.datasource_id,dashboardId:Y,controls:d.controls,can_add:!!d.can_add,can_download:!!d.can_download,can_overwrite:!!d.can_overwrite,column_formats:null!=(i=null==x?void 0:x.column_formats)?i:null,containerId:y?`slice-container-${y.slice_id}`:"slice-container",isStarred:d.isStarred,slice:y,sliceName:null!=(l=null!=(s=d.sliceName)?s:null==y?void 0:y.slice_name)?l:null,triggerRender:d.triggerRender,form_data:A,table_name:x.table_name,vizType:A.viz_type,standalone:!!d.standalone,force:!!d.force,chart:_,timeout:h.conf.SUPERSET_WEBSERVER_TIMEOUT,ownState:null==(c=f[k])?void 0:c.ownState,impressionId:p,user:m,exploreState:d,reports:g,metadata:w,saveAction:d.saveAction,isSaveModalVisible:v.isVisible}}),(function(e){const t={...ae,...te.O0,...re,...Q,...q};return{actions:(0,O.zH)(t,e)}}))((0,le.Ay)(o.memo(qs)));n(75827);(0,s.t)("Chart Options"),(0,s.t)("Use Area Proportions"),(0,s.t)("Check if the Rose Chart should use segment area instead of segment radius for proportioning"),(0,s.t)("Stacked Style"),(0,s.t)("stack"),(0,s.t)("stream"),(0,s.t)("expand"),(0,s.t)("Chart Options"),(0,s.t)("Chart Options"),(0,s.t)("Columns"),(0,s.t)("Columns to display"),ue.cT.Table;const Gs={form_data:{datasource:"0__table",viz_type:"table"},dataset:{id:0,type:ue.cT.Table,columns:[],metrics:[],column_formats:{},currency_formats:{},verbose_map:{},main_dttm_col:"",owners:[],datasource_name:"missing_datasource",name:"missing_datasource",description:null},slice:null};var Xs=n(808),Qs=n(59838);const Ks=e=>e.reduce(((e,t)=>{var n;return n=t,e.some((e=>(0,Xs.wF)(e)&&(0,Xs.wF)(n)&&e.clause===n.clause&&e.sqlExpression===n.sqlExpression||(0,Xs.md)(e)&&(0,Xs.md)(n)&&e.operator===n.operator&&e.subject===n.subject&&(!("comparator"in e)&&!("comparator"in n)||"comparator"in e&&"comparator"in n&&nt()(e.comparator,n.comparator))))||e.push(t),e}),[]),Zs=(e,t)=>{const n=e.extra_form_data||{};return"time_range"in n?t.map((e=>"TEMPORAL_RANGE"===e.operator?{...e,comparator:n.time_range,isExtra:!0}:e)):t},Js=(e,t)=>{const n=((e,t)=>{const n={__time_range:"time_range",__time_col:"granularity_sqla",__time_grain:"time_grain_sqla",__granularity:"granularity"},o={},a={};return(0,he.A)(t.extra_filters).forEach((e=>{if(n[e.col])e.val!==qe.WC&&(a[n[e.col]]=e.val,o[e.col]=e.val);else{const t=(0,Qs.r)({...e,isExtra:!0});a.adhoc_filters=[...(0,he.A)(a.adhoc_filters),t]}})),a.applied_time_extras=o,a})(0,t),o=((e,t)=>{const n={},o=t.extra_form_data||{};Object.entries(qe.DV).forEach((([e,t])=>{const a=o[e];(0,i.A)(a)&&(n[t]=a)})),"time_grain_sqla"in o&&(n.time_grain_sqla=o.time_grain_sqla),"granularity_sqla"in o&&(n.granularity_sqla=o.granularity_sqla);const a=t.extras||{};qe.KE.forEach((e=>{const t=o[e];(0,i.A)(t)&&(a[e]=t)})),Object.keys(a).length&&(n.extras=a),n.adhoc_filters=(0,he.A)(o.adhoc_filters).map((e=>({...e,isExtra:!0})));const r=(0,he.A)(o.filters).map((e=>(0,Qs.r)({...e,isExtra:!0})));return Object.keys(e).forEach((e=>{e.match(/adhoc_filter.*/)&&(n[e]=[...(0,he.A)(n[e]),...r])})),n})(e,t),a=[...Object.keys(e),...Object.keys(n),...Object.keys(o)].filter((e=>e.match(/adhoc_filter.*/))).reduce(((a,r)=>{return{...a,[r]:(i=Zs(t,Ks([...(0,he.A)(e[r]),...(0,he.A)(n[r]),...(0,he.A)(o[r])])),l=0===e.slice_id,i.map((e=>e.isExtra?{...e,isExtra:!l}:e)))};var i,l}),{});return{...e,...t,...n,...o,...a}},ec=async e=>{try{var t;const n=await(0,l.A)({method:"GET",endpoint:"api/v1/explore/"})(e);if((e=>{var t,n,o;return(null==e||null==(t=e.result)?void 0:t.form_data)&&(0,i.A)(null==e||null==(n=e.result)||null==(o=n.dataset)?void 0:o.id)})(n))return n;let o=(0,s.t)("Failed to load chart data");const a=null==n||null==(t=n.result)?void 0:t.message;throw a&&(o=`${o}:\n${a}`),new Error(o)}catch(e){const t=await(0,f.h4)(e);throw new Error(t.message||t.error||(0,s.t)("Failed to load chart data."))}},tc=()=>{const e=(t=(0,h.P3)(p.vX.dashboardPageId))&&(0,z.Gq)(z.Hh.DashboardExploreContext,{})[t]||null;var t;if(e){const t=(0,h.P3)(p.vX.sliceId)||0,{labelColors:n,sharedLabelColors:o,colorScheme:a,chartConfiguration:r,nativeFilters:i,filterBoxFilters:l,dataMask:s,dashboardId:c}=e,d=(0,g.A)({chart:{id:t},filters:(0,m.MB)(t,l),nativeFilters:i,chartConfiguration:r,colorScheme:a,dataMask:s,labelColors:n,sharedLabelColors:o,sliceId:t,allSliceIds:[t],extraControls:{}});return Object.assign(d,{dashboardId:c}),d}return null};function nc(){const[e,t]=(0,o.useState)(!1),n=(0,o.useRef)(!1),i=(0,a.wA)(),l=(0,r.zy)();return(0,o.useEffect)((()=>{const e=x(l),o=(0,h.P3)(p.vX.saveAction),a=tc();n.current&&!o||ec(e).then((({result:e})=>{const t=!n.current&&a?Js(e.form_data,a):e.form_data;i((0,w.B)({...e,form_data:t,saveAction:o}))})).catch((e=>{i((0,w.B)(Gs)),i((0,u.iB)(e.message))})).finally((()=>{t(!0),n.current=!0})),(0,c.Ay)().source=c.EN.Explore}),[i,l]),e?(0,R.Y)(Vs,null):(0,R.Y)(d.A,null)}},30201:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(64467);function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&a.push.apply(a,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach((function(t){(0,o.A)(e,t,n[t])}))}return e}}}]);
//# sourceMappingURL=3d7db151fd8b8f32b9ca.chunk.js.map