"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[8774],{59632:(e,t,a)=>{var n=a(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var r=n(a(64543)),o=0,i={};function l(e){var t=o++,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return i[t]=(0,r.default)((function n(){(a-=1)<=0?(e(),delete i[t]):i[t]=(0,r.default)(n)})),t}l.cancel=function(e){void 0!==e&&(r.default.cancel(i[e]),delete i[e])},l.ids=i},61539:(e,t,a)=>{var n=a(16338),r=a(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=r(a(56690)),l=r(a(89728)),s=r(a(66115)),d=r(a(61655)),c=r(a(26389)),u=n(a(67294)),p=a(75531),m=r(a(59632)),h=a(31929),f=a(47419);function g(e){return!e||null===e.offsetParent||e.hidden}var b=function(e){(0,d.default)(a,e);var t=(0,c.default)(a);function a(){var e;return(0,i.default)(this,a),(e=t.apply(this,arguments)).containerRef=u.createRef(),e.animationStart=!1,e.destroyed=!1,e.onClick=function(t,a){if(!(!t||g(t)||t.className.indexOf("-leave")>=0)){var n=e.props.insertExtraNode;e.extraNode=document.createElement("div");var r=(0,s.default)(e).extraNode,i=e.context.getPrefixCls;r.className="".concat(i(""),"-click-animating-node");var l,d=e.getAttributeName();t.setAttribute(d,"true"),o=o||document.createElement("style"),!a||"#ffffff"===a||"rgb(255, 255, 255)"===a||(l=(a||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/))&&l[1]&&l[2]&&l[3]&&l[1]===l[2]&&l[2]===l[3]||/rgba\((?:\d*, ){3}0\)/.test(a)||"transparent"===a||(e.csp&&e.csp.nonce&&(o.nonce=e.csp.nonce),r.style.borderColor=a,o.innerHTML="\n      [".concat(i(""),"-click-animating-without-extra-node='true']::after, .").concat(i(""),"-click-animating-node {\n        --antd-wave-shadow-color: ").concat(a,";\n      }"),document.body.contains(o)||document.body.appendChild(o)),n&&t.appendChild(r),["transition","animation"].forEach((function(a){t.addEventListener("".concat(a,"start"),e.onTransitionStart),t.addEventListener("".concat(a,"end"),e.onTransitionEnd)}))}},e.onTransitionStart=function(t){if(!e.destroyed){var a=e.containerRef.current;t&&t.target===a&&!e.animationStart&&e.resetEffect(a)}},e.onTransitionEnd=function(t){t&&"fadeEffect"===t.animationName&&e.resetEffect(t.target)},e.bindAnimationEvent=function(t){if(t&&t.getAttribute&&!t.getAttribute("disabled")&&!(t.className.indexOf("disabled")>=0)){var a=function(a){if("INPUT"!==a.target.tagName&&!g(a.target)){e.resetEffect(t);var n=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");e.clickWaveTimeoutId=window.setTimeout((function(){return e.onClick(t,n)}),0),m.default.cancel(e.animationStartId),e.animationStart=!0,e.animationStartId=(0,m.default)((function(){e.animationStart=!1}),10)}};return t.addEventListener("click",a,!0),{cancel:function(){t.removeEventListener("click",a,!0)}}}},e.renderWave=function(t){var a=t.csp,n=e.props.children;if(e.csp=a,!u.isValidElement(n))return n;var r=e.containerRef;return(0,p.supportRef)(n)&&(r=(0,p.composeRef)(n.ref,e.containerRef)),(0,f.cloneElement)(n,{ref:r})},e}return(0,l.default)(a,[{key:"componentDidMount",value:function(){var e=this.containerRef.current;e&&1===e.nodeType&&(this.instance=this.bindAnimationEvent(e))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var e=this.context.getPrefixCls,t=this.props.insertExtraNode;return"".concat(e(""),t?"-click-animating":"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(e){var t=this;if(e&&e!==this.extraNode&&e instanceof Element){var a=this.props.insertExtraNode,n=this.getAttributeName();e.setAttribute(n,"false"),o&&(o.innerHTML=""),a&&this.extraNode&&e.contains(this.extraNode)&&e.removeChild(this.extraNode),["transition","animation"].forEach((function(a){e.removeEventListener("".concat(a,"start"),t.onTransitionStart),e.removeEventListener("".concat(a,"end"),t.onTransitionEnd)}))}}},{key:"render",value:function(){return u.createElement(h.ConfigConsumer,null,this.renderWave)}}]),a}(u.Component);t.default=b,b.contextType=h.ConfigContext},83514:(e,t,a)=>{var n=a(16338),r=a(64836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(a(10434)),i=r(a(38416)),l=n(a(67294)),s=r(a(94184)),d=a(31929);t.default=function(e){var t,a=e.prefixCls,n=e.className,r=e.checked,c=e.onChange,u=e.onClick,p=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["prefixCls","className","checked","onChange","onClick"]),m=(0,l.useContext(d.ConfigContext).getPrefixCls)("tag",a),h=(0,s.default)(m,(t={},(0,i.default)(t,"".concat(m,"-checkable"),!0),(0,i.default)(t,"".concat(m,"-checkable-checked"),r),t),n);return l.createElement("span",(0,o.default)({},p,{className:h,onClick:function(e){c&&c(!r),u&&u(e)}}))}},59361:(e,t,a)=>{var n=a(16338),r=a(64836);t.Z=void 0;var o=r(a(38416)),i=r(a(10434)),l=r(a(27424)),s=n(a(67294)),d=r(a(94184)),c=r(a(18475)),u=r(a(16330)),p=r(a(83514)),m=a(31929),h=a(45471),f=r(a(61539)),g=new RegExp("^(".concat(h.PresetColorTypes.join("|"),")(-inverse)?$")),b=new RegExp("^(".concat(h.PresetStatusColorTypes.join("|"),")$")),v=function(e,t){var a,n=e.prefixCls,r=e.className,p=e.style,h=e.children,v=e.icon,y=e.color,Z=e.onClose,w=e.closeIcon,x=e.closable,S=void 0!==x&&x,_=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a}(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),k=s.useContext(m.ConfigContext),C=k.getPrefixCls,T=k.direction,E=s.useState(!0),N=(0,l.default)(E,2),P=N[0],$=N[1];s.useEffect((function(){"visible"in _&&$(_.visible)}),[_.visible]);var I=function(){return!!y&&(g.test(y)||b.test(y))},O=(0,i.default)({backgroundColor:y&&!I()?y:void 0},p),F=I(),D=C("tag",n),H=(0,d.default)(D,(a={},(0,o.default)(a,"".concat(D,"-").concat(y),F),(0,o.default)(a,"".concat(D,"-has-color"),y&&!F),(0,o.default)(a,"".concat(D,"-hidden"),!P),(0,o.default)(a,"".concat(D,"-rtl"),"rtl"===T),a),r),A=function(e){e.stopPropagation(),Z&&Z(e),e.defaultPrevented||"visible"in _||$(!1)},R="onClick"in _||h&&"a"===h.type,M=(0,c.default)(_,["visible"]),U=v||null,L=U?s.createElement(s.Fragment,null,U,s.createElement("span",null,h)):h,z=s.createElement("span",(0,i.default)({},M,{ref:t,className:H,style:O}),L,S?w?s.createElement("span",{className:"".concat(D,"-close-icon"),onClick:A},w):s.createElement(u.default,{className:"".concat(D,"-close-icon"),onClick:A}):null);return R?s.createElement(f.default,null,z):z},y=s.forwardRef(v);y.displayName="Tag",y.CheckableTag=p.default;var Z=y;t.Z=Z},54070:(e,t,a)=>{a.d(t,{w:()=>l}),a(67294);var n=a(58593),r=a(83379),o=a(61988),i=a(11965);const l=({user:e,date:t})=>{const a=(0,i.tZ)("span",{className:"no-wrap","data-test":"audit-info-date"},t);if(e){const t=(0,r.Z)(e),l=(0,o.t)("Modified by: %s",t);return(0,i.tZ)(n.u,{title:l,placement:"bottom"},a)}return a}},60972:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(67294),r=a(61988),o=a(34858),i=a(29487),l=a(11965);const s=(0,o.z)(),d=s?s.support:"https://superset.apache.org/docs/databases/installing-database-drivers",c=({errorMessage:e,showDbInstallInstructions:t})=>(0,l.tZ)(i.Z,{closable:!1,css:e=>(e=>l.iv`
  border: 1px solid ${e.colors.warning.light1};
  padding: ${4*e.gridUnit}px;
  margin: ${4*e.gridUnit}px 0;
  color: ${e.colors.warning.dark2};

  .ant-alert-message {
    margin: 0;
  }

  .ant-alert-description {
    font-size: ${e.typography.sizes.s+1}px;
    line-height: ${4*e.gridUnit}px;

    .ant-alert-icon {
      margin-right: ${2.5*e.gridUnit}px;
      font-size: ${e.typography.sizes.l+1}px;
      position: relative;
      top: ${e.gridUnit/4}px;
    }
  }
`)(e),type:"error",showIcon:!0,message:e,description:t?(0,l.tZ)(n.Fragment,null,(0,l.tZ)("br",null),(0,r.t)("Database driver for importing maybe not installed. Visit the Superset documentation page for installation instructions: "),(0,l.tZ)("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"additional-fields-alert-description"},(0,r.t)("here")),"."):""})},27989:(e,t,a)=>{a.d(t,{Z:()=>h});var n=a(67294),r=a(42968),o=a(61988),i=a(35932),l=a(74069),s=a(4715),d=a(34858),c=a(60972),u=a(11965);const p=r.Z.div`
  display: block;
  color: ${({theme:e})=>e.colors.grayscale.base};
  font-size: ${({theme:e})=>e.typography.sizes.s}px;
`,m=r.Z.div`
  padding-bottom: ${({theme:e})=>2*e.gridUnit}px;
  padding-top: ${({theme:e})=>2*e.gridUnit}px;

  & > div {
    margin: ${({theme:e})=>e.gridUnit}px 0;
  }

  &.extra-container {
    padding-top: 8px;
  }

  .confirm-overwrite {
    margin-bottom: ${({theme:e})=>2*e.gridUnit}px;
  }

  .input-container {
    display: flex;
    align-items: center;

    label {
      display: flex;
      margin-right: ${({theme:e})=>2*e.gridUnit}px;
    }

    i {
      margin: 0 ${({theme:e})=>e.gridUnit}px;
    }
  }

  input,
  textarea {
    flex: 1 1 auto;
  }

  textarea {
    height: 160px;
    resize: none;
  }

  input::placeholder,
  textarea::placeholder {
    color: ${({theme:e})=>e.colors.grayscale.light1};
  }

  textarea,
  input[type='text'],
  input[type='number'] {
    padding: ${({theme:e})=>1.5*e.gridUnit}px
      ${({theme:e})=>2*e.gridUnit}px;
    border-style: none;
    border: 1px solid ${({theme:e})=>e.colors.grayscale.light2};
    border-radius: ${({theme:e})=>e.gridUnit}px;

    &[name='name'] {
      flex: 0 1 auto;
      width: 40%;
    }

    &[name='sqlalchemy_uri'] {
      margin-right: ${({theme:e})=>3*e.gridUnit}px;
    }
  }
`,h=({resourceName:e,resourceLabel:t,passwordsNeededMessage:a,confirmOverwriteMessage:r,onModelImport:h,show:f,onHide:g,passwordFields:b=[],setPasswordFields:v=(()=>{}),sshTunnelPasswordFields:y=[],setSSHTunnelPasswordFields:Z=(()=>{}),sshTunnelPrivateKeyFields:w=[],setSSHTunnelPrivateKeyFields:x=(()=>{}),sshTunnelPrivateKeyPasswordFields:S=[],setSSHTunnelPrivateKeyPasswordFields:_=(()=>{})})=>{const[k,C]=(0,n.useState)(!0),[T,E]=(0,n.useState)({}),[N,P]=(0,n.useState)(!1),[$,I]=(0,n.useState)(!1),[O,F]=(0,n.useState)([]),[D,H]=(0,n.useState)(!1),[A,R]=(0,n.useState)(),[M,U]=(0,n.useState)({}),[L,z]=(0,n.useState)({}),[j,B]=(0,n.useState)({}),K=()=>{F([]),v([]),E({}),P(!1),I(!1),H(!1),R(""),Z([]),x([]),_([]),U({}),z({}),B({})},{state:{alreadyExists:W,passwordsNeeded:V,sshPasswordNeeded:q,sshPrivateKeyNeeded:Y,sshPrivateKeyPasswordNeeded:J},importResource:G}=(0,d.PW)(e,t,(e=>{R(e)}));(0,n.useEffect)((()=>{v(V),V.length>0&&H(!1)}),[V,v]),(0,n.useEffect)((()=>{P(W.length>0),W.length>0&&H(!1)}),[W,P]),(0,n.useEffect)((()=>{Z(q),q.length>0&&H(!1)}),[q,Z]),(0,n.useEffect)((()=>{x(Y),Y.length>0&&H(!1)}),[Y,x]),(0,n.useEffect)((()=>{_(J),J.length>0&&H(!1)}),[J,_]);return k&&f&&C(!1),(0,u.tZ)(l.default,{name:"model",className:"import-model-modal",disablePrimaryButton:0===O.length||N&&!$||D,onHandledPrimaryAction:()=>{var e;(null==(e=O[0])?void 0:e.originFileObj)instanceof File&&(H(!0),G(O[0].originFileObj,T,M,L,j,$).then((e=>{e&&(K(),h())})))},onHide:()=>{C(!0),g(),K()},primaryButtonName:N?(0,o.t)("Overwrite"):(0,o.t)("Import"),primaryButtonType:N?"danger":"primary",width:"750px",show:f,title:(0,u.tZ)("h4",null,(0,o.t)("Import %s",t))},(0,u.tZ)(m,null,(0,u.tZ)(s.gq,{name:"modelFile",id:"modelFile","data-test":"model-file-input",accept:".yaml,.json,.yml,.zip",fileList:O,onChange:e=>{F([{...e.file,status:"done"}])},onRemove:e=>(F(O.filter((t=>t.uid!==e.uid))),!1),customRequest:()=>{},disabled:D},(0,u.tZ)(i.Z,{loading:D},(0,o.t)("Select file")))),A&&(0,u.tZ)(c.Z,{errorMessage:A,showDbInstallInstructions:b.length>0||y.length>0||w.length>0||S.length>0}),(()=>{if(0===b.length&&0===y.length&&0===w.length&&0===S.length)return null;const e=[...new Set([...b,...y,...w,...S])];return(0,u.tZ)(n.Fragment,null,(0,u.tZ)("h5",null,(0,o.t)("Database passwords")),(0,u.tZ)(p,null,a),e.map((e=>(0,u.tZ)(n.Fragment,null,(null==b?void 0:b.indexOf(e))>=0&&(0,u.tZ)(m,{key:`password-for-${e}`},(0,u.tZ)("div",{className:"control-label"},(0,o.t)("%s PASSWORD",e.slice(10)),(0,u.tZ)("span",{className:"required"},"*")),(0,u.tZ)("input",{name:`password-${e}`,autoComplete:`password-${e}`,type:"password",value:T[e],onChange:t=>E({...T,[e]:t.target.value})})),(null==y?void 0:y.indexOf(e))>=0&&(0,u.tZ)(m,{key:`ssh_tunnel_password-for-${e}`},(0,u.tZ)("div",{className:"control-label"},(0,o.t)("%s SSH TUNNEL PASSWORD",e.slice(10)),(0,u.tZ)("span",{className:"required"},"*")),(0,u.tZ)("input",{name:`ssh_tunnel_password-${e}`,autoComplete:`ssh_tunnel_password-${e}`,type:"password",value:M[e],onChange:t=>U({...M,[e]:t.target.value}),"data-test":"ssh_tunnel_password"})),(null==w?void 0:w.indexOf(e))>=0&&(0,u.tZ)(m,{key:`ssh_tunnel_private_key-for-${e}`},(0,u.tZ)("div",{className:"control-label"},(0,o.t)("%s SSH TUNNEL PRIVATE KEY",e.slice(10)),(0,u.tZ)("span",{className:"required"},"*")),(0,u.tZ)("textarea",{name:`ssh_tunnel_private_key-${e}`,autoComplete:`ssh_tunnel_private_key-${e}`,value:L[e],onChange:t=>z({...L,[e]:t.target.value}),"data-test":"ssh_tunnel_private_key"})),(null==S?void 0:S.indexOf(e))>=0&&(0,u.tZ)(m,{key:`ssh_tunnel_private_key_password-for-${e}`},(0,u.tZ)("div",{className:"control-label"},(0,o.t)("%s SSH TUNNEL PRIVATE KEY PASSWORD",e.slice(10)),(0,u.tZ)("span",{className:"required"},"*")),(0,u.tZ)("input",{name:`ssh_tunnel_private_key_password-${e}`,autoComplete:`ssh_tunnel_private_key_password-${e}`,type:"password",value:j[e],onChange:t=>B({...j,[e]:t.target.value}),"data-test":"ssh_tunnel_private_key_password"}))))))})(),N?(0,u.tZ)(n.Fragment,null,(0,u.tZ)(m,null,(0,u.tZ)("div",{className:"confirm-overwrite"},r),(0,u.tZ)("div",{className:"control-label"},(0,o.t)('Type "%s" to confirm',(0,o.t)("OVERWRITE"))),(0,u.tZ)("input",{"data-test":"overwrite-modal-input",id:"overwrite",type:"text",onChange:e=>{var t,a;const n=null!=(t=null==(a=e.currentTarget)?void 0:a.value)?t:"";I(n.toUpperCase()===(0,o.t)("OVERWRITE"))}}))):null)}},83556:(e,t,a)=>{a.d(t,{P:()=>u});var n=a(67294),r=a(42968),o=a(59361),i=a(58593),l=a(11965);const s=(0,r.Z)(o.Z)`
  ${({theme:e})=>`\n  margin-top: ${e.gridUnit}px;\n  margin-bottom: ${e.gridUnit}px;\n  font-size: ${e.typography.sizes.s}px;\n  `};
`,d=({name:e,id:t,index:a,onDelete:r,editable:o=!1,onClick:d,toolTipTitle:c=e})=>{const u=(0,n.useMemo)((()=>e.length>20),[e])?`${e.slice(0,20)}...`:e;return(0,l.tZ)(n.Fragment,null,o?(0,l.tZ)(i.u,{title:c,key:c},(0,l.tZ)(s,{key:t,closable:o,onClose:()=>a?null==r?void 0:r(a):null,color:"blue"},u)):(0,l.tZ)(i.u,{title:c,key:c},(0,l.tZ)(s,{"data-test":"tag",role:"link",key:t,onClick:d},t?(0,l.tZ)("a",{href:`/superset/all_entities/?id=${t}`,target:"_blank",rel:"noreferrer"},u):u)))},c=r.Z.div`
  max-width: 100%;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
`,u=({tags:e,editable:t=!1,onDelete:a,maxTags:r})=>{const[o,i]=(0,n.useState)(r),s=e=>{null==a||a(e)},u=(0,n.useMemo)((()=>o?e.length>o:null),[e.length,o]),p=(0,n.useMemo)((()=>"number"==typeof o?e.length-o+1:null),[u,e.length,o]);return(0,l.tZ)(c,{className:"tag-list"},u&&"number"==typeof o?(0,l.tZ)(n.Fragment,null,e.slice(0,o-1).map(((e,a)=>(0,l.tZ)(d,{id:e.id,key:e.id,name:e.name,index:a,onDelete:s,editable:t}))),e.length>o?(0,l.tZ)(d,{name:`+${p}...`,onClick:()=>i(void 0),toolTipTitle:e.map((e=>e.name)).join(", ")}):null):(0,l.tZ)(n.Fragment,null,e.map(((e,a)=>(0,l.tZ)(d,{id:e.id,key:e.id,name:e.name,index:a,onDelete:s,editable:t}))),r&&e.length>r?(0,l.tZ)(d,{name:"...",onClick:()=>i(r)}):null))}},18510:(e,t,a)=>{a.r(t),a.d(t,{default:()=>U});var n,r=a(61988),o=a(42968),i=a(31069),l=a(93185),s=a(28216),d=a(67294),c=a(73727),u=a(15926),p=a.n(u),m=a(40768),h=a(34858),f=a(19259),g=a(83556),b=a(32228),v=a(38703),y=a(86074),Z=a(93139),w=a(61337),x=a(14114),S=a(34581),_=a(13322),k=a(17198),C=a(36674),T=a(20818),E=a(58593),N=a(27989),P=a(12),$=a(79789),I=a(60718),O=a(65043);!function(e){e.PUBLISHED="published",e.DRAFT="draft"}(n||(n={}));var F=a(12617),D=a(54070),H=a(11965);const A=(0,r.t)('The passwords for the databases below are needed in order to import them together with the dashboards. Please note that the "Secure Extra" and "Certificate" sections of the database configuration are not present in export files, and should be added manually after the import if they are needed.'),R=(0,r.t)("You are importing one or more dashboards that already exist. Overwriting might cause you to lose some of your work. Are you sure you want to overwrite?"),M=o.Z.div`
  color: ${({theme:e})=>e.colors.grayscale.base};
`,U=(0,x.ZP)((function(e){var t;const{addDangerToast:a,addSuccessToast:o,user:u}=e,{roles:x}=(0,s.v9)((e=>e.user)),U=(0,F.R)("can_read","Tag",x),{state:{loading:L,resourceCount:z,resourceCollection:j,bulkSelectEnabled:B},setResourceCollection:K,hasPerm:W,fetchData:V,toggleBulkSelect:q,refreshData:Y}=(0,h.Yi)("dashboard",(0,r.t)("dashboard"),a),J=(0,d.useMemo)((()=>j.map((e=>e.id))),[j]),[G,Q]=(0,h.NE)("dashboard",J,a),[X,ee]=(0,d.useState)(null),[te,ae]=(0,d.useState)(null),[ne,re]=(0,d.useState)(!1),[oe,ie]=(0,d.useState)([]),[le,se]=(0,d.useState)(!1),[de,ce]=(0,d.useState)([]),[ue,pe]=(0,d.useState)([]),[me,he]=(0,d.useState)([]),fe=(0,w.OH)(null==u||null==(t=u.userId)?void 0:t.toString(),null),ge=W("can_write"),be=W("can_write"),ve=W("can_write"),ye=W("can_export"),Ze=[{id:"changed_on_delta_humanized",desc:!0}];function we(e){ee(e)}function xe(e){return i.Z.get({endpoint:`/api/v1/dashboard/${e.id}`}).then((({json:e={}})=>{K(j.map((t=>{var a;if(t.id===(null==e||null==(a=e.result)?void 0:a.id)){const{changed_by_name:a,changed_by:n,dashboard_title:r="",slug:o="",json_metadata:i="",changed_on_delta_humanized:l,url:s="",certified_by:d="",certification_details:c="",owners:u,tags:p}=e.result;return{...t,changed_by_name:a,changed_by:n,dashboard_title:r,slug:o,json_metadata:i,changed_on_delta_humanized:l,url:s,certified_by:d,certification_details:c,owners:u,tags:p}}return t})))}),(0,m.v$)((e=>a((0,r.t)("An error occurred while fetching dashboards: %s",e)))))}const Se=e=>{const t=e.map((({id:e})=>e));(0,b.Z)("dashboard",t,(()=>{se(!1)})),se(!0)},_e=(0,d.useMemo)((()=>[{Cell:({row:{original:{id:e}}})=>(null==u?void 0:u.userId)&&(0,H.tZ)(C.Z,{itemId:e,saveFaveStar:G,isStarred:Q[e]}),Header:"",id:"id",disableSortBy:!0,size:"xs",hidden:!(null!=u&&u.userId)},{Cell:({row:{original:{url:e,dashboard_title:t,certified_by:a,certification_details:n}}})=>(0,H.tZ)(c.rU,{to:e},a&&(0,H.tZ)(d.Fragment,null,(0,H.tZ)($.Z,{certifiedBy:a,details:n})," "),t),Header:(0,r.t)("Name"),accessor:"dashboard_title"},{Cell:({row:{original:{status:e}}})=>e===n.PUBLISHED?(0,r.t)("Published"):(0,r.t)("Draft"),Header:(0,r.t)("Status"),accessor:"published",size:"xl"},{Cell:({row:{original:{tags:e=[]}}})=>(0,H.tZ)(g.P,{tags:e.filter((e=>"TagTypes.custom"===e.type||1===e.type)),maxTags:3}),Header:(0,r.t)("Tags"),accessor:"tags",disableSortBy:!0,hidden:!(0,l.cr)(l.TT.TaggingSystem)},{Cell:({row:{original:{owners:e=[]}}})=>(0,H.tZ)(S.Z,{users:e}),Header:(0,r.t)("Owners"),accessor:"owners",disableSortBy:!0,size:"xl"},{Cell:({row:{original:{changed_on_delta_humanized:e,changed_by:t}}})=>(0,H.tZ)(D.w,{date:e,user:t}),Header:(0,r.t)("Last modified"),accessor:"changed_on_delta_humanized",size:"xl"},{Cell:({row:{original:e}})=>(0,H.tZ)(M,{className:"actions"},ve&&(0,H.tZ)(f.Z,{title:(0,r.t)("Please confirm"),description:(0,H.tZ)(d.Fragment,null,(0,r.t)("Are you sure you want to delete")," ",(0,H.tZ)("b",null,e.dashboard_title),"?"),onConfirm:()=>(0,m.Iu)(e,Y,o,a)},(e=>(0,H.tZ)(E.u,{id:"delete-action-tooltip",title:(0,r.t)("Delete"),placement:"bottom"},(0,H.tZ)("span",{role:"button",tabIndex:0,className:"action-button",onClick:e},(0,H.tZ)(_.Z.Trash,{"data-test":"dashboard-list-trash-icon"}))))),ye&&(0,H.tZ)(E.u,{id:"export-action-tooltip",title:(0,r.t)("Export"),placement:"bottom"},(0,H.tZ)("span",{role:"button",tabIndex:0,className:"action-button",onClick:()=>Se([e])},(0,H.tZ)(_.Z.Share,null))),be&&(0,H.tZ)(E.u,{id:"edit-action-tooltip",title:(0,r.t)("Edit"),placement:"bottom"},(0,H.tZ)("span",{role:"button",tabIndex:0,className:"action-button",onClick:()=>we(e)},(0,H.tZ)(_.Z.EditAlt,{"data-test":"edit-alt"})))),Header:(0,r.t)("Actions"),id:"actions",hidden:!be&&!ve&&!ye,disableSortBy:!0},{accessor:P.J.ChangedBy,hidden:!0}]),[null==u?void 0:u.userId,be,ve,ye,G,Q,Y,o,a]),ke=(0,d.useMemo)((()=>({Header:(0,r.t)("Favorite"),key:"favorite",id:"id",urlDisplay:"favorite",input:"select",operator:Z.p.DashboardIsFav,unfilteredLabel:(0,r.t)("Any"),selects:[{label:(0,r.t)("Yes"),value:!0},{label:(0,r.t)("No"),value:!1}]})),[]),Ce=(0,d.useMemo)((()=>[{Header:(0,r.t)("Name"),key:"search",id:"dashboard_title",input:"search",operator:Z.p.TitleOrSlug},{Header:(0,r.t)("Status"),key:"published",id:"published",input:"select",operator:Z.p.Equals,unfilteredLabel:(0,r.t)("Any"),selects:[{label:(0,r.t)("Published"),value:!0},{label:(0,r.t)("Draft"),value:!1}]},...(0,l.cr)(l.TT.TaggingSystem)&&U?[{Header:(0,r.t)("Tag"),key:"tags",id:"tags",input:"select",operator:Z.p.DashboardTags,unfilteredLabel:(0,r.t)("All"),fetchSelects:I.m}]:[],{Header:(0,r.t)("Owner"),key:"owner",id:"owners",input:"select",operator:Z.p.RelationManyMany,unfilteredLabel:(0,r.t)("All"),fetchSelects:(0,m.tm)("dashboard","owners",(0,m.v$)((e=>a((0,r.t)("An error occurred while fetching dashboard owner values: %s",e)))),e.user),paginate:!0},...null!=u&&u.userId?[ke]:[],{Header:(0,r.t)("Certified"),key:"certified",id:"id",urlDisplay:"certified",input:"select",operator:Z.p.DashboardIsCertified,unfilteredLabel:(0,r.t)("Any"),selects:[{label:(0,r.t)("Yes"),value:!0},{label:(0,r.t)("No"),value:!1}]},{Header:(0,r.t)("Modified by"),key:"changed_by",id:"changed_by",input:"select",operator:Z.p.RelationOneMany,unfilteredLabel:(0,r.t)("All"),fetchSelects:(0,m.tm)("dashboard","changed_by",(0,m.v$)((e=>(0,r.t)("An error occurred while fetching dataset datasource values: %s",e))),u),paginate:!0}]),[a,ke,e.user]),Te=[{desc:!1,id:"dashboard_title",label:(0,r.t)("Alphabetical"),value:"alphabetical"},{desc:!0,id:"changed_on_delta_humanized",label:(0,r.t)("Recently modified"),value:"recently_modified"},{desc:!1,id:"changed_on_delta_humanized",label:(0,r.t)("Least recently modified"),value:"least_recently_modified"}],Ee=(0,d.useCallback)((e=>(0,H.tZ)(O.Z,{dashboard:e,hasPerm:W,bulkSelectEnabled:B,showThumbnails:fe?fe.thumbnails:(0,l.cr)(l.TT.Thumbnails),userId:null==u?void 0:u.userId,loading:L,openDashboardEditModal:we,saveFavoriteStatus:G,favoriteStatus:Q[e.id],handleBulkDashboardExport:Se,onDelete:e=>ae(e)})),[B,Q,W,L,null==u?void 0:u.userId,G,fe]),Ne=[];return(ve||ye)&&Ne.push({name:(0,r.t)("Bulk select"),buttonStyle:"secondary","data-test":"bulk-select",onClick:q}),ge&&(Ne.push({name:(0,H.tZ)(d.Fragment,null,(0,H.tZ)("i",{className:"fa fa-plus"})," ",(0,r.t)("Dashboard")),buttonStyle:"primary",onClick:()=>{window.location.assign("/dashboard/new")}}),Ne.push({name:(0,H.tZ)(E.u,{id:"import-tooltip",title:(0,r.t)("Import dashboards"),placement:"bottomRight"},(0,H.tZ)(_.Z.Import,{"data-test":"import-button"})),buttonStyle:"link",onClick:()=>{re(!0)}})),(0,H.tZ)(d.Fragment,null,(0,H.tZ)(y.Z,{name:(0,r.t)("Dashboards"),buttons:Ne}),(0,H.tZ)(f.Z,{title:(0,r.t)("Please confirm"),description:(0,r.t)("Are you sure you want to delete the selected dashboards?"),onConfirm:function(e){return i.Z.delete({endpoint:`/api/v1/dashboard/?q=${p().encode(e.map((({id:e})=>e)))}`}).then((({json:e={}})=>{Y(),o(e.message)}),(0,m.v$)((e=>a((0,r.t)("There was an issue deleting the selected dashboards: ",e)))))}},(e=>{const t=[];return ve&&t.push({key:"delete",name:(0,r.t)("Delete"),type:"danger",onSelect:e}),ye&&t.push({key:"export",name:(0,r.t)("Export"),type:"primary",onSelect:Se}),(0,H.tZ)(d.Fragment,null,X&&(0,H.tZ)(T.Z,{dashboardId:X.id,show:!0,onHide:()=>ee(null),onSubmit:xe}),te&&(0,H.tZ)(k.Z,{description:(0,H.tZ)(d.Fragment,null,(0,r.t)("Are you sure you want to delete")," ",(0,H.tZ)("b",null,te.dashboard_title),"?"),onConfirm:()=>{(0,m.Iu)(te,Y,o,a,void 0,null==u?void 0:u.userId),ae(null)},onHide:()=>ae(null),open:!!te,title:(0,r.t)("Please confirm")}),(0,H.tZ)(Z.Z,{bulkActions:t,bulkSelectEnabled:B,cardSortSelectOptions:Te,className:"dashboard-list-view",columns:_e,count:z,data:j,disableBulkSelect:q,fetchData:V,refreshData:Y,filters:Ce,initialSort:Ze,loading:L,pageSize:25,addSuccessToast:o,addDangerToast:a,showThumbnails:fe?fe.thumbnails:(0,l.cr)(l.TT.Thumbnails),renderCard:Ee,defaultViewMode:(0,l.cr)(l.TT.ListviewsDefaultCardView)?"card":"table",enableBulkTag:!0,bulkTagResourceName:"dashboard"}))})),(0,H.tZ)(N.Z,{resourceName:"dashboard",resourceLabel:(0,r.t)("dashboard"),passwordsNeededMessage:A,confirmOverwriteMessage:R,addDangerToast:a,addSuccessToast:o,onModelImport:()=>{re(!1),Y(),o((0,r.t)("Dashboard imported"))},show:ne,onHide:()=>{re(!1)},passwordFields:oe,setPasswordFields:ie,sshTunnelPasswordFields:de,setSSHTunnelPasswordFields:ce,sshTunnelPrivateKeyFields:ue,setSSHTunnelPrivateKeyFields:pe,sshTunnelPrivateKeyPasswordFields:me,setSSHTunnelPrivateKeyPasswordFields:he}),le&&(0,H.tZ)(v.Z,null))}))},83379:(e,t,a)=>{function n(e){return e?`${e.first_name} ${e.last_name}`:""}a.d(t,{Z:()=>n})}}]);
//# sourceMappingURL=272b1e7f2bd77f43758c.chunk.js.map